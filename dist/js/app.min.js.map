{"version":3,"sources":["app.js"],"names":["global","register","name","deps","declare","arguments","length","registerDynamic","apply","this","doRegister","declarative","executingRequire","execute","entry","defined","normalizedDeps","buildGroups","groups","groupIndex","indexOf","call","push","i","l","depName","depEntry","evaluated","depGroupIndex","undefined","splice","TypeError","link","startEntry","curGroupDeclarative","group","j","linkDeclarativeModule","linkDynamicModule","getOrCreateModuleRecord","moduleRecords","dependencies","exports","importers","module","declaration","value","locked","p","importerModule","setters","depExports","depModule","esModule","load","getModule","ensureEvaluated","Error","__useDefault","id","output","__esModule","getOwnPropertyDescriptor","d","Object","defineProperty","hasOwnProperty","moduleName","seen","modules","substr","require","Array","prototype","item","a","e","obj","prop","opt","get","mains","depNames","formatDetect","System","_nodeRequire","resolve","process","set","newModule","dep","_export","firstLoad","self","$__System","__global","readMemberExpression","pParts","split","shift","forEachGlobal","callback","keys","forEach","g","forEachGlobalValue","globalName","ignoredGlobalProps","globalSnapshot","loader","prepareGlobal","exportName","globals","curDefine","define","oldGlobals","globalValue","singleGlobal","multipleExports","getCJSDeps","source","requireIndex","replace","commentRegEx","params","match","fnBracketRegEx","requireAlias","wsRegEx","requireRegEx","requireRegExs","RegExp","cjsRequirePre","cjsRequirePost","lastIndex","exec","names","errback","referer","dynamicRequires","Promise","all","then","factory","pop","exportsIndex","moduleIndex","concat","toString","req","depValues","uri","config","lastModule","anonDefine","isBundle","createDefine","oldModule","oldExports","oldDefine","amd","amdDefine","amdRequire","_removeDefine","mod","CodeMirror","defineMode","parserConfig","readRegexp","stream","next","escaped","inSet","ret","tp","style","cont","type","content","tokenBase","state","ch","tokenize","tokenString","test","eat","eatWhile","tokenComment","skipToEnd","lastType","isOperatorChar","current","tokenQuasi","wordRE","word","known","keywords","propertyIsEnumerable","quote","jsonldMode","peek","isJsonldKeyword","maybeEnd","findFatArrow","fatArrowAt","arrow","string","start","depth","sawSomething","pos","charAt","bracket","brackets","JSLexical","indented","column","align","prev","info","inScope","varname","v","localVars","cx","context","vars","parseJS","cc","marked","lexical","combinator","jsonMode","expression","statement","lex","pass","inList","list","globalVars","pushcontext","defaultVars","popcontext","pushlex","result","indent","outer","poplex","expect","wanted","exp","vardef","block","maybeelse","functiondef","forspec","maybelabel","funarg","className","afterExport","afterImport","expressionInner","expressionNoComma","noComma","body","arrowBodyNoComma","arrowBody","commasep","pattern","maybeop","maybeoperatorNoComma","maybeoperatorComma","atomicTypes","maybeexpressionNoComma","maybeexpression","comprehension","arrayLiteral","contCommasep","objprop","quasi","maybeTarget","me","expr","property","slice","continueQuasi","targetNoComma","target","_","getterSetter","afterprop","what","end","proceed","maybetype","isTS","typedef","maybedefault","maybeAssign","vardefCont","proppattern","_type","forspec1","forspec2","formaybeinof","forspec3","classNameAfter","classBody","classGetterSetter","maybeFrom","importSpec","maybeAs","maybeArrayComprehension","isContinuedStatement","textAfter","indentUnit","statementIndent","jsonld","json","typescript","wordCharacters","kw","A","B","C","operator","atom","jsKeywords","if","while","with","else","do","try","finally","return","break","continue","new","delete","throw","debugger","var","const","let","async","function","catch","for","switch","case","default","in","typeof","instanceof","true","false","null","NaN","Infinity","class","super","await","yield","export","import","extends","tsKeywords","interface","constructor","public","private","protected","static","number","boolean","any","attr","variable","regexp","jsonld-keyword","startState","basecolumn","token","sol","indentation","eatSpace","Pass","firstChar","c","closing","doubleIndentSwitch","electricInput","blockCommentStart","blockCommentEnd","lineComment","fold","closeBrackets","helperType","registerHelper","defineMIME","in_array","arr","trim","s","ltrim","js_beautify","js_source_text","options","beautifier","Beautifier","beautify","create_flags","flags_base","mode","next_indent_level","indentation_level","just_added_newline","line_indent_level","next_flags","parent","last_text","last_word","declaration_statement","declaration_assignment","multiline_frame","if_block","else_block","do_block","do_while","in_case_statement","in_case","case_body","start_line_index","get_line_number","ternary_depth","handle_token","local_token","newlines","keep_whitespace","keep_array_indentation","is_array","flags","print_newline","max_preserve_newlines","preserve_newlines","current_token","handlers","split_newlines","out","idx","substring","allow_wrap_or_preserved_newline","force_linewrap","wanted_newline","wrap_line_length","proposed_line_length","current_line","get_character_count","text","space_before_token","force_newline","preserve_statement_flags","last_type","MODE","Statement","restore_mode","add_new_line","print_token_line_indentation","whitespace_before","set_indent","print_token","printable_token","raw","add_raw_token","comma_first","previous_line","last","add_token","deindent","set_mode","flag_store","previous_flags","ArrayLiteral","is_expression","Expression","ForInitializer","Conditional","remove_redundant_indentation","start_of_object_property","ObjectLiteral","start_of_statement","BlockStatement","last_last_text","all_lines_start_with","lines","line","each_line_matches_indent","len","is_special_word","get_token","offset","index","token_pos","tokens","handle_start_expr","next_mode","Tokenizer","line_starters","space_in_paren","space_after_anon_function","space_before_conditional","handle_end_expr","space_in_empty_paren","handle_start_block","next_token","second_token","empty_braces","comments_before","empty_anonymous_function","brace_style","handle_end_block","handle_word","jslint_happy","just_added_blankline","prefix","handle_semicolon","handle_string","handle_equals","handle_comma","handle_operator","space_before","space_after","handle_block_comment","directives","test_output_raw","acorn","newline","javadoc","starless","lastIndent","lastIndentLength","handle_comment","handle_dot","break_chained_methods","handle_unknown","handle_eof","indent_string","baseIndentString","TK_START_EXPR","TK_END_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_WORD","TK_RESERVED","TK_SEMICOLON","TK_STRING","TK_EQUALS","TK_OPERATOR","TK_COMMA","TK_BLOCK_COMMENT","TK_COMMENT","TK_DOT","TK_UNKNOWN","TK_EOF","braces_on_own_line","indent_size","parseInt","indent_char","eol","unescape_strings","e4x","end_with_newline","indent_with_tabs","preindent_index","Output","sweet_code","tokenizer","get_code","OutputLine","_character_count","_indent_count","_items","_empty","level","baseIndentLength","indent_length","is_empty","input","remove_indent","indent_cache","join","add_outputline","x","add_space_before_token","frame","output_length","eat_newlines","opts","get_directives","directives_block_pattern","directive_pattern","directive_match","tokenize_next","resulting_string","whitespace_on_this_line","n_newlines","whitespace_before_token","parser_pos","input_length","last_token","Token","whitespace","digit","allow_decimal","allow_e","local_digit","digit_hex","isIdentifierStart","charCodeAt","isIdentifierChar","reserved_words","comment","block_comment_pattern","comment_match","directives_end_ignore_pattern","lineBreak","comment_pattern","sep","esc","has_char_escapes","in_char_class","xmlRegExp","xmlStr","rootTag","isEndTag","tagName","isSingletonTag","xmlLength","unescape_string","sharp","template_pattern","template_match","in_html_comment","punct","s_hex","String","fromCharCode","token_values","open","open_stack","comments","nonASCIIidentifierStartChars","nonASCIIidentifierChars","nonASCIIidentifierStart","nonASCIIidentifier","code","window","__require","__exports","__module","_retrieveGlobal","jsonlint","b","trace","yy","symbols_","error","JSONString","STRING","JSONNumber","NUMBER","JSONNullLiteral","NULL","JSONBooleanLiteral","TRUE","FALSE","JSONText","JSONValue","EOF","JSONObject","JSONArray","{","}","JSONMemberList","JSONMember",":",",","[","]","JSONElementList","$accept","$end","terminals_",2,4,6,8,10,11,14,17,18,21,22,23,24,"productions_","performAction","f","h","$","Number","table",3,5,7,9,12,13,15,16,1,19,20,25,"defaultActions","parseError","parse","o","lexer","k","m","setInput","yylloc","n","q","r","t","y","z","w","showPosition","yylineno","loc","expected","yyleng","yytext","_$","first_line","last_line","first_column","last_column","_input","_more","_less","done","matched","conditionStack","unput","more","less","pastInput","upcomingInput","_currentRules","rules","flex","begin","popState","conditions","topState","pushState","INITIAL","inclusive","parser","main","readFileSync","cwd","path","read","charset","argv","args","place","copyObj","defaults","setGuttersForLineNumbers","doc","Doc","lineSeparator","inputStyles","inputStyle","display","Display","wrapper","updateGutters","themeChanged","lineWrapping","autofocus","mobile","focus","initScrollbars","keyMaps","overlays","modeGen","overwrite","delayingBlurEvent","focused","suppressEdits","pasteIncoming","cutIncoming","selectingText","draggingText","highlight","Delayed","keySeq","specialChars","cm","ie","ie_version","setTimeout","reset","registerEventHandlers","ensureGlobalHandlers","startOperation","curOp","forceUpdate","attachDoc","hasFocus","bind","onFocus","onBlur","optionHandlers","Init","maybeUpdateLineNumberWidth","finishInit","initHooks","endOperation","webkit","getComputedStyle","lineDiv","textRendering","scrollbarFiller","elt","setAttribute","gutterFiller","selectionDiv","cursorDiv","measure","lineMeasure","lineSpace","mover","sizer","sizerWidth","heightForcer","scrollerGap","gutters","lineGutter","scroller","zIndex","paddingRight","gecko","draggable","appendChild","viewFrom","viewTo","first","reportedViewFrom","reportedViewTo","view","renderedView","externalMeasured","viewOffset","lastWrapHeight","lastWrapWidth","updateLineNumbers","nativeBarWidth","barHeight","barWidth","scrollbarsClipped","lineNumWidth","lineNumInnerWidth","lineNumChars","alignWidgets","cachedCharWidth","cachedTextHeight","cachedPaddingH","maxLine","maxLineLength","maxLineChanged","wheelDX","wheelDY","wheelStartX","wheelStartY","selForContextMenu","activeTouch","init","loadMode","getMode","modeOption","resetModeState","iter","stateAfter","styles","frontier","startWorker","regChange","wrappingChanged","addClass","minWidth","rmClass","findMaxLine","estimateLineHeights","clearCaches","updateScrollbars","estimateHeight","th","textHeight","wrapping","perLine","Math","max","clientWidth","charWidth","lineIsHidden","widgetsHeight","widgets","height","ceil","est","estHeight","updateLineHeight","theme","guttersChanged","alignHorizontally","specs","removeChildren","gutterClass","gElt","width","updateGutterSpace","offsetWidth","marginLeft","lineLength","merged","cur","collapsedSpanAtStart","found","find","from","to","collapsedSpanAtEnd","getLine","lineNumbers","measureForScrollbars","gutterW","docH","round","paddingVert","clientHeight","viewHeight","scrollWidth","viewWidth","barLeft","fixedGutter","docHeight","scrollHeight","scrollGap","gutterWidth","NativeScrollbars","scroll","vert","horiz","on","scrollTop","scrollLeft","checkedOverlay","minHeight","NullScrollbars","scrollbars","clear","scrollbarModel","scrollbarStyle","node","insertBefore","axis","setScrollLeft","setScrollTop","startWidth","startHeight","updateScrollbarsInner","updateHeightsInViewport","sizes","update","right","paddingBottom","bottom","coverGutterNextToScrollbar","visibleLines","viewport","top","floor","paddingTop","lineAtHeight","ensure","ensureFrom","ensureTo","heightAtLine","min","lastLine","firstChild","comp","compensateForHScroll","left","hidden","gutter","alignable","lineNumberFor","size","innerW","padding","lineNumberFormatter","firstLineNumber","getBoundingClientRect","DisplayUpdate","force","visible","editorIsHidden","wrapperHeight","wrapperWidth","oldDisplayWidth","displayWidth","dims","getDimensions","events","maybeClipScrollbars","marginBottom","borderRightWidth","updateDisplayIfNeeded","resetView","countDirtyView","viewportMargin","sawCollapsedSpans","visualLineNo","visualLineEndNo","different","adjustView","toUpdate","activeElt","patchDisplay","offsetHeight","postUpdateDisplay","displayHeight","barMeasure","updateSelection","setDocumentHeight","signal","updateDisplaySimple","finish","total","prevBottom","offsetTop","bot","box","diff","updateWidgetHeight","rest","gutterLeft","clientLeft","nextSibling","offsetLeft","fixedPos","gutterTotalWidth","updateNumbersFrom","rm","mac","currentWheelTarget","parentNode","removeChild","container","lineN","lineView","updateNumber","lineNumber","changes","updateLineForChanges","document","createTextNode","buildLineElement","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","updateLineBackground","cls","bgClass","background","wrap","getLineContent","ext","built","buildLineContent","pre","textClass","wrapClass","gutterBackground","markers","gutterMarkers","gutterWrap","setUneditable","insertLineWidgets","insertLineWidgetsFor","allowAbove","ws","widget","handleMouseEvents","positionLineWidget","above","signalLater","noHScroll","coverGutter","paddingLeft","position","copyPos","Pos","maxPos","cmp","minPos","ensureFocus","isReadOnly","readOnly","cantEdit","applyTextInput","inserted","deleted","sel","origin","paste","textLines","splitLines","multiPaste","ranges","lastCopied","map","range","empty","lst","updateInput","changeEvent","makeChange","triggerElectric","ensureCursorVisible","typing","handlePaste","pasted","clipboardData","getData","preventDefault","disableInput","runInOp","electricChars","smartIndent","head","getModeAt","indentLine","copyableRanges","lineRange","anchor","getRange","disableBrowserMagic","field","TextareaInput","prevInput","pollingFast","polling","inaccurateSelection","hasSelection","composing","hiddenTextarea","te","div","ios","border","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","gracePeriod","posToDOM","findViewForLine","mapFromLineView","order","getOrder","side","partPos","getBidiPartAt","nodeAndOffsetInLineMap","collapse","badPos","bad","domToPos","lineNode","childNodes","clipPos","locateNodeInLineView","textNode","topNode","maps","curNode","lineNo","contains","nodeType","nodeValue","after","dist","textContent","before","previousSibling","domTextBetween","fromLine","toLine","recognizeMarker","marker","walk","cmText","getAttribute","markerID","findMarks","getBetween","lineSep","nodeName","val","Selection","primIndex","Range","normalizeSelection","prim","sort","inv","simpleSelection","clipLine","clipToLen","linelen","isLine","clipPosArray","array","extendRange","other","extend","posBefore","extendSelection","setSelection","primary","extendSelections","heads","newSel","replaceOneSelection","setSimpleSelection","filterSelectionChange","setSelectionReplaceHistory","history","setSelectionNoUndo","addSelectionToHistory","hasHandler","bias","setSelectionInner","skipAtomicInSelection","equals","selectionChanged","signalCursorActivity","reCheckSelection","sel_dontScroll","mayClear","newAnchor","skipAtomic","newHead","flipped","curPos","dir","search","markedSpans","sp","inclusiveLeft","inclusiveRight","explicitlyCleared","atomic","newPos","showSelection","prepareSelection","curFragment","cursors","createDocumentFragment","selFragment","selection","collapsed","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursorCoords","singleCursorHeightPerLine","cursor","cursorHeight","otherCursor","add","fragment","rightSide","drawForLine","fromArg","toArg","coords","charCoords","lineObj","lineLen","iterateBidiSections","rightPos","leftPos","tmp","leftSide","paddingH","sFrom","sTo","singleVLine","visualLine","leftEnd","rightStart","restartBlink","clearInterval","blinker","visibility","cursorBlinkRate","setInterval","time","highlightWorker","Date","workTime","copyState","getStateBefore","changedLines","oldStyles","tooLong","maxHighlightLength","highlighted","highlightLine","oldCls","styleClasses","newCls","classes","ischange","processLine","workDelay","regLineChange","findStartLine","precise","minindent","minline","lim","innerMode","countColumn","tabSize","save","removeChildrenAndAdd","currentStyle","data","isNaN","ensureLineHeights","rect","curWidth","heights","rects","getClientRects","abs","cache","caches","updateExternalMeasurement","LineView","measureChar","measureCharPrepared","prepareMeasureForLine","findViewIndex","hasHeights","prepared","varHeight","key","measureCharInner","bogus","rtop","rbottom","mStart","mEnd","insertLeft","coverStart","coverEnd","isExtendingChar","nullRect","maybeUpdateRectForZooming","rSpan","rbot","mid","screen","logicalXDPI","deviceXDPI","hasBadZoomedRects","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","pageScrollX","pageXOffset","documentElement","pageScrollY","pageYOffset","intoCoordSystem","widgetHeight","yOff","lOff","xOff","fromCoordSystem","localBox","lineSpaceBox","preparedMeasure","getBidi","part","bidiLeft","bidiRight","bidiOther","estimateCoords","PosWithInfo","outside","xRel","coordsChar","coordsCharInner","mergedPos","getX","wrongLine","innerOff","adjust","bidi","lineLeft","lineRight","fromX","fromOutside","toX","toOutside","moveVisually","xDiff","step","middle","middleX","measureText","viewChanged","changeObjs","cursorActivityHandlers","cursorActivityCalled","updateMaxLine","scrollToPos","nextOpId","operationGroup","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","callbacks","op","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","mustUpdate","updatedDisplay","adjustWidthTo","maxScrollLeft","preparedSelection","forceScroll","scrollPosIntoView","margin","isCursor","maybeScrollWindow","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","operation","methodOp","docMethodOp","visualLineContinued","buildViewArray","nextPos","lendiff","cut","viewCuttingPoint","cutTop","cutBot","oldN","newN","dirty","finishTouch","touchFinished","prevTouch","isMouseLikeTouchEvent","touches","touch","radiusX","radiusY","farAway","dx","dy","onMouseDown","signalDOMEvent","posFromMouse","clickInGutter","eventInWidget","e_preventDefault","findWordAt","captureRightClick","onContextMenu","clearTimeout","now","moved","pageX","pageY","onScrollWheel","dragFunctions","enter","e_stop","over","onDragOver","onDragStart","drop","onDrop","leave","clearDragCursor","inp","getField","onKeyUp","onKeyDown","onKeyPress","dragDropChanged","old","wasOn","funcs","toggle","off","onResize","setSize","e_target","liberal","forRect","space","clientX","clientY","colDiff","supportsTouch","shiftKey","e_button","leftButtonDown","lastMiddleDown","delayBlurEvent","lastDoubleClick","lastClick","contained","modifier","metaKey","ctrlKey","dragDrop","dragAndDrop","leftButtonStartDrag","leftButtonSelect","startTime","dragEnd","e2","addNew","extendTo","lastPos","startCol","posCol","findColumn","startSel","ourIndex","scrollIntoView","oldRange","ourRange","sel_mouse","curCount","counter","editorSize","move","up","lastSelOrigin","altKey","gutterEvent","prevent","signalfn","mX","mY","lineBox","e_defaultPrevented","lastDrop","files","dataTransfer","FileReader","File","loadFile","file","allowDropFileTypes","reader","onload","change","changeEnd","readAsText","selected","listSelections","replaceRange","replaceSelection","setData","getSelection","setDragImage","safari","img","src","presto","_top","frag","dragCursor","isScroller","delta","wheelEventDelta","canScrollX","canScrollY","wheelPixelsPerUnit","pixels","wheelSamples","movedX","movedY","sample","doHandleBinding","bound","dropShift","commands","ensurePolled","prevShift","lookupKeyForEditor","handle","lookupKey","extraKeys","keyMap","dispatchKey","seq","isModifierKey","stopSeq","handleKeyBinding","keyName","motion","handleCharBinding","keyCode","returnValue","handled","lastStoppedKey","hasCopyEvent","showCrossHair","charCode","which","receivedFocus","contextMenuInGutter","adjustForChange","computeSelAfterChange","offsetPos","nw","computeReplacedSel","hint","oldPrev","newPrev","filterChange","canceled","cancel","ignoreReadOnly","sawReadOnlySpans","removeReadOnlyRanges","makeChangeInner","selAfter","addChangeToHistory","makeChangeSingleDoc","stretchSpansOverChange","rebased","linkedDocs","sharedHist","rebaseHist","makeChangeFromHistory","allowSelectionOnly","event","hist","undone","dest","lastOrigin","pushSelectionToHistory","clearRedo","antiChanges","generation","maxGeneration","filter","historyChangeFromChange","mergeOldSpans","shiftDoc","distance","spans","removed","makeChangeSingleDocInEditor","updateDoc","recomputeMaxLength","checkWidthStart","full","isWholeLineUpdate","changesHandler","changeHandler","doScroll","innerHeight","phantom","scrollNode","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","x1","y1","x2","y2","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollPos","resolveScrollToPos","getCursor","cursorScrollMargin","sPos","scrollTo","how","aggressive","curSpace","curSpaceString","indentString","indentWithTabs","spaceStr","changeLine","changeType","no","deleteNearSelection","compute","kill","toKill","replaced","findPosH","unit","visually","findNextLine","possible","moveOnce","boundToLine","moveLogically","origDir","sawType","helper","getHelper","isWordChar","hitSide","findPosV","pageSize","option","deflt","notOnInit","normalizeKeyName","alt","ctrl","cmd","parts","getKeyMap","markText","shared","markTextShared","TextMarker","clearWhenEmpty","replacedWith","widgetNode","conflictingCollapsedRange","addToHistory","curLine","addMarkedSpan","MarkedSpan","clearOnEnter","clearHistory","nextMarkerId","title","startStyle","endStyle","css","cloneNode","linked","isParent","SharedTextMarker","findSharedMarkers","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","getMarkedSpanFor","span","removeMarkedSpan","attachLine","markedSpansBefore","startCh","isInsert","startsBefore","endsAfter","markedSpansAfter","endCh","oldFirst","oldLast","sameLine","clearEmptySpans","newMarkers","gapMarkers","gap","getOldSpans","stretched","oldCur","stretchCur","mark","mk","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","vis","lineIsHiddenInner","adjustScrollWhenAboveVisible","parentStyle","addLineWidget","LineWidget","insertAt","aboveVisible","updateLine","cleanUpLine","extractLineClasses","lineClass","callBlankLine","blankLine","inner","readToken","takeToken","asArray","getObj","copy","StringStream","runMode","lineClasses","forceToEnd","flattenSpans","curStart","curStyle","addModeClass","mName","st","overlay","at","i_end","opaque","getLineStyles","updateFrontier","startAt","interpretTokenStyle","styleToClassCacheWithMode","styleToClassCache","builder","col","splitSpaces","getOption","addToken","buildToken","hasBadBidiRects","buildTokenBadBidi","allowFrontierUpdate","insertLineContent","joinClasses","zeroWidthElement","lastChild","defaultSpecialCharPlaceholder","displayText","special","mustWrap","skipped","txt","tabWidth","specialCharPlaceholder","fullStyle","buildCollapsedSpan","ignoreWidget","needsContentAttribute","createElement","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","foundBookmarks","upto","tokenText","wholeLineUpdateBefore","spansFor","linesFor","Line","firstLine","lastText","lastSpans","nlines","insert","remove","added","LeafChunk","BranchChunk","children","chunkSize","sharedHistOnly","propagate","skip","rel","chunk","child","sz","getLines","lh","bidiOrdering","History","startGen","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","histChange","attachLocalSpans","clearSelectionEvents","lastChangeEvent","opId","historyEventDelay","selectionEventCanBeMerged","somethingSelected","existing","removeClearedSpans","copyHistoryArray","newGroup","instantiateSel","deepCopy","newChanges","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","defaultPrevented","srcElement","button","getHandlers","emitter","_handlers","noHandlers","bnd","orphanDelayedCallbacks","fireOrphanDelayed","delayed","override","codemirrorIgnore","cursorActivity","eventMixin","ctor","spaceStrs","nothing","createObj","base","props","inst","create","isWordCharBasic","isEmpty","extendingChars","tag","cssText","count","activeElement","root","classTest","as","forEachCodeMirror","getElementsByClassName","byClass","globalsRegistered","registerGlobalHandlers","resizeTimer","zwspSupported","badBidiRects","r0","r1","badZoomedRects","normal","fromRange","lineStart","visual","lineEnd","lineStartSmart","firstNonWS","inWS","compareBidiLevel","linedir","moveInLine","byUnit","userAgent","navigator","platform","ie_upto10","ie_11up","documentMode","qtwebkit","chrome","vendor","mac_geMountainLion","windows","presto_version","flipCtrlCmd","needsH","needsV","sWidth","totalHeight","totalWidth","overlayHack","barMouseDown","native","cmpPos","prepareCopyCut","getSelections","selectInput","lineWiseCopyCut","setSelections","textarea","poll","fastPoll","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","minimal","blur","resetPosition","slowPoll","pollInterval","missed","execCommand","same","prepareSelectAllHack","selectionStart","extval","selectionEnd","rehide","oldCSS","selectAll","detectingSelectAll","resetSelectionOnContextMenu","oldScrollY","scrollY","mouseup","readOnlyChanged","onCopyCut","clearData","kludge","hadFocus","startData","ours","applyComposition","forceCompositionEnd","pollContent","showPrimarySelection","showMultipleSelections","curAnchor","anchorNode","anchorOffset","curFocus","focusNode","focusOffset","rangeCount","getRangeAt","rng","removeAllRanges","addRange","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","pollSelection","fromIndex","fromNode","toIndex","toNode","newText","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","contenteditable","here","there","wheelDeltaX","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","setOption","getDoc","addKeyMap","removeKeyMap","addOverlay","spec","modeSpec","removeOverlay","indentSelection","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelpers","helpers","help","_global","pred","getStateAfter","defaultTextHeight","defaultCharWidth","setGutterMarker","gutterID","clearGutter","lineInfo","getViewport","addWidget","vspace","hspace","triggerOnKeyDown","triggerOnKeyPress","triggerOnKeyUp","amount","moveH","extendSelectionsBy","rtlMoveVisually","sel_move","deleteH","goalColumn","moveV","goals","startChar","check","toggleOverwrite","getScrollInfo","interpret","refresh","oldHeight","swapDoc","getInputField","getWrapperElement","getScrollerElement","getGutterElement","setValue","newBreaks","detach","attach","integer","disabled","tabIndex","modes","mimeModes","mime","resolveMode","mfactory","modeObj","modeExtensions","exts","modeProps","extendMode","properties","defineExtension","func","defineDocExtension","defineOption","defineInitHook","registerGlobalHelper","predicate","nstate","a1","a2","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","delWrappedLineRight","undo","redo","undoSelection","redoSelection","goDocStart","goDocEnd","goLineStart","goLineStartSmart","goLineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","goLineDown","goPageUp","goPageDown","goCharLeft","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentMore","indentLess","insertTab","insertSoftTab","spaces","replaceSelections","defaultTab","transposeChars","newlineAndIndent","basic","Left","Right","Up","Down","End","Home","PageUp","PageDown","Delete","Backspace","Shift-Backspace","Tab","Shift-Tab","Enter","Insert","Esc","pcDefault","Ctrl-A","Ctrl-D","Ctrl-Z","Shift-Ctrl-Z","Ctrl-Y","Ctrl-Home","Ctrl-End","Ctrl-Up","Ctrl-Down","Ctrl-Left","Ctrl-Right","Alt-Left","Alt-Right","Ctrl-Backspace","Ctrl-Delete","Ctrl-S","Ctrl-F","Ctrl-G","Shift-Ctrl-G","Shift-Ctrl-F","Shift-Ctrl-R","Ctrl-[","Ctrl-]","Ctrl-U","Shift-Ctrl-U","Alt-U","fallthrough","emacsy","Ctrl-B","Ctrl-P","Ctrl-N","Alt-F","Alt-B","Ctrl-E","Ctrl-V","Shift-Ctrl-V","Ctrl-H","Alt-D","Alt-Backspace","Ctrl-K","Ctrl-T","macDefault","Cmd-A","Cmd-D","Cmd-Z","Shift-Cmd-Z","Cmd-Y","Cmd-Home","Cmd-Up","Cmd-End","Cmd-Down","Cmd-Left","Cmd-Right","Ctrl-Alt-Backspace","Alt-Delete","Cmd-S","Cmd-F","Cmd-G","Shift-Cmd-G","Cmd-Alt-F","Shift-Cmd-Alt-F","Cmd-[","Cmd-]","Cmd-Backspace","Cmd-Delete","Cmd-U","Shift-Cmd-U","normalizeKeyMap","keymap","keyname","keyNames","noShift","altGraphKey","fromTextArea","getValue","tabindex","placeholder","form","leaveSubmitMethodAlone","realSubmit","submit","wrappedSubmit","getTextArea","toTextArea","lastColumnPos","lastColumnValue","skipTo","backUp","consume","caseInsensitive","cased","str","toLowerCase","hideFirstChars","withOp","dHeight","oldH","removeInner","insertInner","iterN","spilled","newleaf","maybeSpill","sibling","myIndex","used","nextDocId","cleanGeneration","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","setCursor","addSelection","dup","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","indexFromPos","copyHistory","linkedDoc","unlinkDoc","splitIds","iterLinkedDocs","getEditor","splitLinesAuto","eachLine","dontDelegate","method","e_stopPropagation","stopPropagation","cancelBubble","addEventListener","attachEvent","removeEventListener","detachEvent","ms","startIndex","startValue","nextTab","goal","select","_e","nonASCIISingleCaseWordChar","toUpperCase","createRange","endNode","setEnd","setStart","createTextRange","moveToElementText","moveEnd","moveStart","host","nl","rt","ownerDocument","parentElement","compareEndPoints","oncopy",27,32,33,34,35,36,37,38,39,40,44,45,46,59,61,91,92,93,106,107,109,110,111,127,173,186,187,188,189,190,191,192,219,220,221,222,63232,63233,63234,63235,63272,63273,63275,63276,63277,63302,"charType","lowTypes","arabicTypes","BidiSpan","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","outerType","types","nstart","unshift","version","App","forms","editor","getElementById","styleActiveLine","matchBrackets","evt","notify","fn","success","classList","innerHTML","app"],"mappings":"AAAA,iBACA,SAAUA,GAoCR,QAASC,GAASC,EAAMC,EAAMC,GAC5B,MAAyB,KAArBC,UAAUC,OACLC,EAAgBC,MAAMC,KAAMJ,eACrCK,GAAWR,GACTS,aAAa,EACbR,KAAMA,EACNC,QAASA,IAIb,QAASG,GAAgBL,EAAMC,EAAMS,EAAkBC,GACrDH,EAAWR,GACTS,aAAa,EACbR,KAAMA,EACNS,iBAAkBA,EAClBC,QAASA,IAIb,QAASH,GAAWR,EAAMY,GACxBA,EAAMZ,KAAOA,EAGPA,IAAQa,KACZA,EAAQb,GAAQY,GAKlBA,EAAME,eAAiBF,EAAMX,KAI/B,QAASc,GAAYH,EAAOI,GAG1B,GAFAA,EAAOJ,EAAMK,YAAcD,EAAOJ,EAAMK,gBAEa,IAAjDC,EAAQC,KAAKH,EAAOJ,EAAMK,YAAaL,GAA3C,CAGAI,EAAOJ,EAAMK,YAAYG,KAAKR,EAE9B,KAAK,GAAIS,GAAI,EAAGC,EAAIV,EAAME,eAAeV,OAAYkB,EAAJD,EAAOA,IAAK,CAC3D,GAAIE,GAAUX,EAAME,eAAeO,GAC/BG,EAAWX,EAAQU,EAGvB,IAAKC,IAAYA,EAASC,UAA1B,CAIA,GAAIC,GAAgBd,EAAMK,YAAcO,EAASf,aAAeG,EAAMH,YAGtE,IAA4BkB,SAAxBH,EAASP,YAA4BO,EAASP,WAAaS,EAAe,CAG5E,GAA4BC,SAAxBH,EAASP,aACXD,EAAOQ,EAASP,YAAYW,OAAOV,EAAQC,KAAKH,EAAOQ,EAASP,YAAaO,GAAW,GAG9C,GAAtCR,EAAOQ,EAASP,YAAYb,QAC9B,KAAM,IAAIyB,WAAU,kCAGxBL,GAASP,WAAaS,EAGxBX,EAAYS,EAAUR,MAI1B,QAASc,GAAK9B,GACZ,GAAI+B,GAAalB,EAAQb,EAEzB+B,GAAWd,WAAa,CAExB,IAAID,KAEJD,GAAYgB,EAAYf,EAGxB,KAAK,GADDgB,KAAwBD,EAAWtB,aAAeO,EAAOZ,OAAS,EAC7DiB,EAAIL,EAAOZ,OAAS,EAAGiB,GAAK,EAAGA,IAAK,CAE3C,IAAK,GADDY,GAAQjB,EAAOK,GACVa,EAAI,EAAGA,EAAID,EAAM7B,OAAQ8B,IAAK,CACrC,GAAItB,GAAQqB,EAAMC,EAGdF,GACFG,EAAsBvB,GAEtBwB,EAAkBxB,GAEtBoB,GAAuBA,GAM3B,QAASK,GAAwBrC,GAC/B,MAAOsC,GAActC,KAAUsC,EAActC,IAC3CA,KAAMA,EACNuC,gBACAC,WACAC,eAIJ,QAASN,GAAsBvB,GAE7B,IAAIA,EAAM8B,OAAV,CAGA,GAAIA,GAAS9B,EAAM8B,OAASL,EAAwBzB,EAAMZ,MACtDwC,EAAU5B,EAAM8B,OAAOF,QAEvBG,EAAc/B,EAAMV,QAAQiB,KAAKrB,EAAQ,SAASE,EAAM4C,GAG1D,GAFAF,EAAOG,QAAS,EAEG,gBAAR7C,GACT,IAAK,GAAI8C,KAAK9C,GACZwC,EAAQM,GAAK9C,EAAK8C,OAGpBN,GAAQxC,GAAQ4C,CAGlB,KAAK,GAAIvB,GAAI,EAAGC,EAAIoB,EAAOD,UAAUrC,OAAYkB,EAAJD,EAAOA,IAAK,CACvD,GAAI0B,GAAiBL,EAAOD,UAAUpB,EACtC,KAAK0B,EAAeF,OAClB,IAAK,GAAIX,GAAI,EAAGA,EAAIa,EAAeR,aAAanC,SAAU8B,EACpDa,EAAeR,aAAaL,KAAOQ,GACrCK,EAAeC,QAAQd,GAAGM,GAOlC,MADAE,GAAOG,QAAS,EACTD,GAGTF,GAAOM,QAAUL,EAAYK,QAC7BN,EAAO/B,QAAUgC,EAAYhC,OAG7B,KAAK,GAAIU,GAAI,EAAGC,EAAIV,EAAME,eAAeV,OAAYkB,EAAJD,EAAOA,IAAK,CAC3D,GAKI4B,GALA1B,EAAUX,EAAME,eAAeO,GAC/BG,EAAWX,EAAQU,GACnB2B,EAAYZ,EAAcf,EAK1B2B,GACFD,EAAaC,EAAUV,QAEhBhB,IAAaA,EAASf,YAC7BwC,EAAazB,EAAS2B,SAGd3B,GAKRW,EAAsBX,GACtB0B,EAAY1B,EAASkB,OACrBO,EAAaC,EAAUV,SANvBS,EAAaG,EAAK7B,GAUhB2B,GAAaA,EAAUT,WACzBS,EAAUT,UAAUrB,KAAKsB,GACzBA,EAAOH,aAAanB,KAAK8B,IAGzBR,EAAOH,aAAanB,KAAK,MAGvBsB,EAAOM,QAAQ3B,IACjBqB,EAAOM,QAAQ3B,GAAG4B,KAKxB,QAASI,GAAUrD,GACjB,GAAIwC,GACA5B,EAAQC,EAAQb,EAEpB,IAAKY,EAOCA,EAAMH,YACR6C,EAAgBtD,MAERY,EAAMa,WACdW,EAAkBxB,GAEpB4B,EAAU5B,EAAM8B,OAAOF,YAXvB,IADAA,EAAUY,EAAKpD,IACVwC,EACH,KAAM,IAAIe,OAAM,6BAA+BvD,EAAO,IAa1D,SAAMY,GAASA,EAAMH,cAAgB+B,GAAWA,EAAQgB,aAC/ChB,EAAQ,WAEVA,EAGT,QAASJ,GAAkBxB,GACzB,IAAIA,EAAM8B,OAAV,CAGA,GAAIF,MAEAE,EAAS9B,EAAM8B,QAAWF,QAASA,EAASiB,GAAI7C,EAAMZ,KAG1D,KAAKY,EAAMF,iBACT,IAAK,GAAIW,GAAI,EAAGC,EAAIV,EAAME,eAAeV,OAAYkB,EAAJD,EAAOA,IAAK,CAC3D,GAAIE,GAAUX,EAAME,eAAeO,GAC/BG,EAAWX,EAAQU,EACnBC,IACFY,EAAkBZ,GAKxBZ,EAAMa,WAAY,CAClB,IAAIiC,GAAS9C,EAAMD,QAAQQ,KAAKrB,EAAQ,SAASE,GAC/C,IAAK,GAAIqB,GAAI,EAAGC,EAAIV,EAAMX,KAAKG,OAAYkB,EAAJD,EAAOA,IAC5C,GAAIT,EAAMX,KAAKoB,IAAMrB,EAErB,MAAOqD,GAAUzC,EAAME,eAAeO,GAExC,MAAM,IAAIQ,WAAU,UAAY7B,EAAO,mCACtCwC,EAASE,EAQZ,IANIgB,IACFhB,EAAOF,QAAUkB,GAGnBlB,EAAUE,EAAOF,QAEbA,GAAWA,EAAQmB,WACrB/C,EAAMuC,SAAWX,MAEd,CAIH,GAHA5B,EAAMuC,aAGiB,gBAAXX,IAAyC,kBAAXA,KAA0BA,IAAY1C,EAC9E,GAAI8D,EAA0B,CAC5B,GAAIC,EACJ,KAAK,GAAIf,KAAKN,IACRqB,EAAIC,OAAOF,yBAAyBpB,EAASM,KAC/CiB,EAAenD,EAAMuC,SAAUL,EAAGe,OAEnC,CACH,GAAIG,GAAiBxB,GAAWA,EAAQwB,cACxC,KAAK,GAAIlB,KAAKN,KACPwB,GAAkBxB,EAAQwB,eAAelB,MAC5ClC,EAAMuC,SAASL,GAAKN,EAAQM,IAIpClC,EAAMuC,SAAS,WAAaX,EAC5BuB,EAAenD,EAAMuC,SAAU,gBAC7BP,OAAO,MAcb,QAASU,GAAgBW,EAAYC,GACnC,GAAItD,GAAQC,EAAQoD,EAGpB,IAAKrD,IAASA,EAAMa,WAAcb,EAAMH,YAAxC,CAKAyD,EAAK9C,KAAK6C,EAEV,KAAK,GAAI5C,GAAI,EAAGC,EAAIV,EAAME,eAAeV,OAAYkB,EAAJD,EAAOA,IAAK,CAC3D,GAAIE,GAAUX,EAAME,eAAeO,EACA,KAA/BH,EAAQC,KAAK+C,EAAM3C,KAChBV,EAAQU,GAGX+B,EAAgB/B,EAAS2C,GAFzBd,EAAK7B,IAMPX,EAAMa,YAGVb,EAAMa,WAAY,EAClBb,EAAM8B,OAAO/B,QAAQQ,KAAKrB,KAK5B,QAASsD,GAAKpD,GACZ,GAAImE,EAAQnE,GACV,MAAOmE,GAAQnE,EAGjB,IAAyB,UAArBA,EAAKoE,OAAO,EAAG,GACjB,MAAOC,SAAQrE,EAAKoE,OAAO,GAE7B,IAAIxD,GAAQC,EAAQb,EAGpB,KAAKY,EACH,KAAM,UAAYZ,EAAO,eAiB3B,OAbA8B,GAAK9B,GAGLsD,EAAgBtD,MAGhBa,EAAQb,GAAQ2B,OAGZf,EAAMH,aACRsD,EAAenD,EAAM8B,OAAOF,QAAS,cAAgBI,OAAO,IAGvDuB,EAAQnE,GAAQY,EAAMH,YAAcG,EAAM8B,OAAOF,QAAU5B,EAAMuC,SAzX1E,GAAItC,MAGAK,EAAUoD,MAAMC,UAAUrD,SAAW,SAASsD,GAChD,IAAK,GAAInD,GAAI,EAAGC,EAAIf,KAAKH,OAAYkB,EAAJD,EAAOA,IACtC,GAAId,KAAKc,KAAOmD,EACd,MAAOnD,EACX,OAAO,IAGLuC,GAA2B,CAC/B,KACEE,OAAOF,0BAA2Ba,EAAG,GAAK,KAE5C,MAAMC,GACJd,GAA2B,EAG7B,GAAIG,IACJ,WACE,IACQD,OAAOC,kBAAmB,UAC9BA,EAAiBD,OAAOC,gBAE5B,MAAOW,GACLX,EAAiB,SAASY,EAAKC,EAAMC,GACnC,IACEF,EAAIC,GAAQC,EAAIjC,OAASiC,EAAIC,IAAI3D,KAAKwD,GAExC,MAAMD,SAsGZ,IAAIpC,MAwNA6B,IAiCJ,OAAO,UAASY,EAAOC,EAAU9E,GAC/B,MAAO,UAAS+E,GACdA,EAAa,SAAShF,GACpB,GAAIiF,IACFC,aAAgC,mBAAXd,UAA0BA,QAAQe,SAA6B,mBAAXC,UAA0BhB,QACnGtE,SAAUA,EACVM,gBAAiBA,EACjByE,IAAK1B,EACLkC,IAAK,SAAStF,EAAM0C,GAClByB,EAAQnE,GAAQ0C,GAElB6C,UAAW,SAAS7C,GAClB,MAAOA,IAGXwC,GAAOI,IAAI,YAGX,KAAK,GAAIjE,GAAI,EAAGA,EAAI2D,EAAS5E,OAAQiB,KAAK,SAAUE,EAASiE,GACvDA,GAAOA,EAAI7B,WACbuB,EAAOnF,SAASwB,KAAa,SAASkE,GACpC,OACEzC,WACArC,QAAS,WACP,IAAK,GAAImC,KAAK0C,GACH,cAAL1C,GAAmC,gBAALA,IAAiBA,EAAI,IAAM,UAC3D2C,EAAQ3C,EAAG0C,EAAI1C,QAKzBoC,EAAO7E,gBAAgBkB,MAAa,EAAO,WACzC,MAAOiE,OAEVR,EAAS3D,GAAIlB,UAAUkB,GAG1BnB,GAAQgF,EAGR,IAAIQ,GAAYtC,EAAK2B,EAAM,GAC3B,IAAIA,EAAM3E,OAAS,EACjB,IAAK,GAAIiB,GAAI,EAAGA,EAAI0D,EAAM3E,OAAQiB,IAChC+B,EAAK2B,EAAM1D,GAEf,OAAIqE,GAAUlC,aACLkC,EAAU,WAEVA,OAKC,mBAARC,MAAsBA,KAAO7F,SAUrC,QAAU,SAAS8F,IAErB,SAAUC,GAUR,QAASC,GAAqBhD,EAAGF,GAE/B,IADA,GAAImD,GAASjD,EAAEkD,MAAM,KACdD,EAAO3F,QACZwC,EAAQA,EAAMmD,EAAOE,QACvB,OAAOrD,GAQT,QAASsD,GAAcC,GACrB,GAAIrC,OAAOsC,KACTtC,OAAOsC,KAAKP,GAAUQ,QAAQF,OAE9B,KAAK,GAAIG,KAAKT,GACP7B,EAAe7C,KAAK0E,EAAUS,IAEnCH,EAASG,GAIf,QAASC,GAAmBJ,GAC1BD,EAAc,SAASM,GACrB,GAAoD,IAAhDtF,EAAQC,KAAKsF,EAAoBD,GAArC,CAEA,IACE,GAAI5D,GAAQiD,EAASW,GAEvB,MAAO9B,GACL+B,EAAmBrF,KAAKoF,GAE1BL,EAASK,EAAY5D,MA1CzB,GAmBI8D,GAnBAC,EAASf,EACT5B,EAAiBF,OAAOS,UAAUP,eAClC9C,EAAUoD,MAAMC,UAAUrD,SAAW,SAASsD,GAChD,IAAK,GAAInD,GAAI,EAAGC,EAAIf,KAAKH,OAAYkB,EAAJD,EAAOA,IACtC,GAAId,KAAKc,KAAOmD,EACd,MAAOnD,EACX,OAAO,IAWLoF,GAAsB,KAAM,iBAAkB,eAAgB,gBAAiB,SAAU,WAAY,wBAAyB,oBAAqB,kBA6BvJE,GAAOrB,IAAI,mBAAoBqB,EAAOpB,WACpCqB,cAAe,SAAS3C,EAAY4C,EAAYC,GAE9C,GAAIC,GAAYlB,EAASmB,MAEzBnB,GAASmB,OAASrF,OAClBkE,EAASrD,QAAUb,OACfkE,EAASnD,QAAUmD,EAASnD,OAAOF,UACrCqD,EAASnD,OAASf,OAGpB,IAAIsF,EACJ,IAAIH,EAAS,CACXG,IACA,KAAK,GAAIX,KAAKQ,GACZG,EAAWX,GAAKQ,EAAQR,GACxBT,EAASS,GAAKQ,EAAQR,GAc1B,MATKO,KACHH,KAEAH,EAAmB,SAASvG,EAAM4C,GAChC8D,EAAe1G,GAAQ4C,KAKpB,WACL,GAAIsE,EAEJ,IAAIL,EACFK,EAAcpB,EAAqBe,EAAYhB,OAE5C,CACH,GAAIsB,GACAC,EACA5E,IAEJ+D,GAAmB,SAASvG,EAAM4C,GAC5B8D,EAAe1G,KAAU4C,GAET,mBAATA,KAEXJ,EAAQxC,GAAQ4C,EAEW,mBAAhBuE,GACJC,GAAmBD,IAAiBvE,IACvCwE,GAAkB,GAGpBD,EAAevE,KAGnBsE,EAAcE,EAAkB5E,EAAU2E,EAI5C,GAAIF,EACF,IAAK,GAAIX,KAAKW,GACZpB,EAASS,GAAKW,EAAWX,EAI7B,OAFAT,GAASmB,OAASD,EAEXG,QAKG,mBAARvB,MAAsBA,KAAO7F,QAEvC,SAAU+F,GAiBR,QAASwB,GAAWC,EAAQC,GAG1BD,EAASA,EAAOE,QAAQC,EAAc,GAGtC,IAAIC,GAASJ,EAAOK,MAAMC,GACtBC,GAAgBH,EAAO,GAAG1B,MAAM,KAAKuB,IAAiB,WAAWC,QAAQM,EAAS,IAGlFC,EAAeC,EAAcH,KAAkBG,EAAcH,GAAgB,GAAII,QAAOC,EAAgBL,EAAeM,EAAgB,KAE3IJ,GAAaK,UAAY,CAKzB,KAHA,GAEIT,GAFA1H,KAGG0H,EAAQI,EAAaM,KAAKf,IAC/BrH,EAAKmB,KAAKuG,EAAM,IAAMA,EAAM,GAE9B,OAAO1H,GAOT,QAASoE,GAAQiE,EAAOnC,EAAUoC,EAASC,GAEzC,GAAoB,gBAATF,MAAuBA,YAAiBhE,QACjD,MAAOD,GAAQ/D,MAAM,KAAMgE,MAAMC,UAAU3C,OAAOT,KAAKhB,UAAW,EAAGA,UAAUC,OAAS,GAK1F,IAFoB,gBAATkI,IAAwC,kBAAZnC,KACrCmC,GAASA,MACPA,YAAiBhE,QAWhB,CAAA,GAAoB,gBAATgE,GAAmB,CACjC,GAAI5F,GAASiE,EAAO7B,IAAIwD,EACxB,OAAO5F,GAAOc,aAAed,EAAO,WAAaA,EAIjD,KAAM,IAAIb,WAAU,mBAfpB,IAAK,GADD4G,MACKpH,EAAI,EAAGA,EAAIiH,EAAMlI,OAAQiB,IAChCoH,EAAgBrH,KAAKuF,EAAO,UAAU2B,EAAMjH,GAAImH,GAClDE,SAAQC,IAAIF,GAAiBG,KAAK,SAASzE,GACrCgC,GACFA,EAAS7F,MAAM,KAAM6D,IACtBoE,GAaP,QAASvB,GAAOhH,EAAMC,EAAM4I,GACP,gBAAR7I,KACT6I,EAAU5I,EACVA,EAAOD,EACPA,EAAO,MAEHC,YAAgBqE,SACpBuE,EAAU5I,EACVA,GAAQ,UAAW,UAAW,UAAU2B,OAAO,EAAGiH,EAAQzI,SAGtC,kBAAXyI,KACTA,EAAU,SAAUA,GAClB,MAAO,YAAa,MAAOA,KAC1BA,IAGyBlH,SAA1B1B,EAAKA,EAAKG,OAAS,IACrBH,EAAK6I,KAGP,IAAIvB,GAAcwB,EAAcC,CAEsB,MAAjDzB,EAAerG,EAAQC,KAAKlB,EAAM,cAErCA,EAAK2B,OAAO2F,EAAc,GAIrBvH,IACHC,EAAOA,EAAKgJ,OAAO5B,EAAWwB,EAAQK,WAAY3B,MAGA,KAAjDwB,EAAe7H,EAAQC,KAAKlB,EAAM,aACrCA,EAAK2B,OAAOmH,EAAc,GAEwB,KAA/CC,EAAc9H,EAAQC,KAAKlB,EAAM,YACpCA,EAAK2B,OAAOoH,EAAa,EAE3B,IAAIhC,IACFhH,KAAMA,EACNC,KAAMA,EACNU,QAAS,SAASwI,EAAK3G,EAASE,GAG9B,IAAK,GADD0G,MACK/H,EAAI,EAAGA,EAAIpB,EAAKG,OAAQiB,IAC/B+H,EAAUhI,KAAK+H,EAAIlJ,EAAKoB,IAE1BqB,GAAO2G,IAAM3G,EAAOe,GAEpBf,EAAO4G,OAAS,aAGG,IAAfN,GACFI,EAAUxH,OAAOoH,EAAa,EAAGtG,GAEf,IAAhBqG,GACFK,EAAUxH,OAAOmH,EAAc,EAAGvG,GAEhB,IAAhB+E,GACF6B,EAAUxH,OAAO2F,EAAc,EAAG,SAASe,EAAOnC,EAAUoC,GAC1D,MAAoB,gBAATD,IAAwC,kBAAZnC,GAC9BgD,EAAIb,GACNjE,EAAQlD,KAAKwF,EAAQ2B,EAAOnC,EAAUoC,EAAS7F,EAAOe,KAGjE,IAAIC,GAASmF,EAAQvI,MAAsB,IAAhByI,EAAqBlD,EAAWrD,EAAS4G,EAKpE,OAHqB,mBAAV1F,IAAyBhB,IAClCgB,EAAShB,EAAOF,SAEG,mBAAVkB,GACFA,EADT,QAMJ,IAAK1D,EAcEuJ,EAAWC,YAAeD,EAAWE,UAQpCF,EAAWC,YAAcD,EAAWC,WAAWxJ,MACjD2G,EAAOtG,gBAAgBkJ,EAAWC,WAAWxJ,KAAMuJ,EAAWC,WAAWvJ,MAAM,EAAOsJ,EAAWC,WAAW7I,SAE9G4I,EAAWC,WAAa,MAVxBD,EAAWC,WAAaxC,EAc1BuC,EAAWE,UAAW,EAGtB9C,EAAOtG,gBAAgBL,EAAMgH,EAAO/G,MAAM,EAAO+G,EAAOrG,aAhC/C,CAET,GAAI4I,EAAWC,WACb,KAAM,IAAI3H,WAAU,wCACtB0H,GAAWC,WAAaxC,GAkC5B,QAAS0C,GAAa/C,GACpB4C,EAAWC,WAAa,KACxBD,EAAWE,UAAW,CAGtB,IAAIE,GAAY9D,EAASnD,OACrBkH,EAAa/D,EAASrD,QACtBqH,EAAYhE,EAASmB,MAMzB,OAJAnB,GAASnD,OAASf,OAClBkE,EAASrD,QAAUb,OACnBkE,EAASmB,OAASA,EAEX,WACLnB,EAASmB,OAAS6C,EAClBhE,EAASnD,OAASiH,EAClB9D,EAASrD,QAAUoH,GA1MvB,GAAIjD,GAASf,EACT1E,EAAUoD,MAAMC,UAAUrD,SAAW,SAASsD,GAChD,IAAK,GAAInD,GAAI,EAAGC,EAAIf,KAAKH,OAAYkB,EAAJD,EAAOA,IACtC,GAAId,KAAKc,KAAOmD,EACd,MAAOnD,EACX,OAAO,IAGLoG,EAAe,2CACfS,EAAgB,kCAChBC,EAAiB,6CACjBP,EAAiB,eACjBE,EAAU,aAEVE,IAyKJhB,GAAO8C,MAuBP,IAAIP,IACFE,UAAU,EACVD,WAAY,KAGd7C,GAAOrB,IAAI,gBAAiBqB,EAAOpB,WACjCmE,aAAcA,EACdrF,QAASA,EACT2C,OAAQA,EACRuC,WAAYA,KAEd5C,EAAOoD,UAAY/C,EACnBL,EAAOqD,WAAa3F,GACJ,mBAARsB,MAAsBA,KAAO7F,QAGvC,WACA,GAAImK,GAAgBrE,EAAUd,IAAI,iBAAiB4E,gBACnD,SAAUQ,GACc,gBAAX1H,UAAwC,gBAAVE,QACvCwH,EAAI7F,QAAQ,yBACY,kBAAV2C,SAAwBA,OAAO8C,IAC7C9C,OAAO,KAAM,KAAMkD,GAEnBA,EAAIC,aACL,SAASA,GACV,YACAA,GAAWC,WAAW,aAAc,SAASd,EAAQe,GA2FnD,QAASC,GAAWC,GAIlB,IAHA,GACIC,GADAC,GAAU,EAEVC,GAAQ,EACqB,OAAzBF,EAAOD,EAAOC,SAAiB,CACrC,IAAKC,EAAS,CACZ,GAAY,KAARD,IAAgBE,EAClB,MACU,MAARF,EACFE,GAAQ,EACDA,GAAiB,KAARF,IAChBE,GAAQ,GAEZD,GAAWA,GAAmB,MAARD,GAK1B,QAASG,GAAIC,EAAIC,EAAOC,GAGtB,MAFAC,IAAOH,EACPI,GAAUF,EACHD,EAET,QAASI,GAAUV,EAAQW,GACzB,GAAIC,GAAKZ,EAAOC,MAChB,IAAU,KAANW,GAAmB,KAANA,EAEf,MADAD,GAAME,SAAWC,EAAYF,GACtBD,EAAME,SAASb,EAAQW,EACzB,IAAU,KAANC,GAAaZ,EAAO5C,MAAM,0BACnC,MAAOgD,GAAI,SAAU,SAChB,IAAU,KAANQ,GAAaZ,EAAO5C,MAAM,MACnC,MAAOgD,GAAI,SAAU,OAChB,IAAI,qBAAqBW,KAAKH,GACnC,MAAOR,GAAIQ,EACN,IAAU,KAANA,GAAaZ,EAAOgB,IAAI,KACjC,MAAOZ,GAAI,KAAM,WACZ,IAAU,KAANQ,GAAaZ,EAAOgB,IAAI,MAEjC,MADAhB,GAAOiB,SAAS,YACTb,EAAI,SAAU,SAChB,IAAU,KAANQ,GAAaZ,EAAOgB,IAAI,MAEjC,MADAhB,GAAOiB,SAAS,UACTb,EAAI,SAAU,SAChB,IAAU,KAANQ,GAAaZ,EAAOgB,IAAI,MAEjC,MADAhB,GAAOiB,SAAS,SACTb,EAAI,SAAU,SAChB,IAAI,KAAKW,KAAKH,GAEnB,MADAZ,GAAO5C,MAAM,oCACNgD,EAAI,SAAU,SAChB,IAAU,KAANQ,EACT,MAAIZ,GAAOgB,IAAI,MACbL,EAAME,SAAWK,EACVA,EAAalB,EAAQW,IACnBX,EAAOgB,IAAI,MACpBhB,EAAOmB,YACAf,EAAI,UAAW,YACK,YAAlBO,EAAMS,UAA4C,aAAlBT,EAAMS,UAA6C,OAAlBT,EAAMS,UAAqB,gBAAgBL,KAAKJ,EAAMS,WAChIrB,EAAWC,GACXA,EAAO5C,MAAM,mCACNgD,EAAI,SAAU,cAErBJ,EAAOiB,SAASI,IACTjB,EAAI,WAAY,WAAYJ,EAAOsB,WAEvC,IAAU,KAANV,EAET,MADAD,GAAME,SAAWU,EACVA,EAAWvB,EAAQW,EACrB,IAAU,KAANC,EAET,MADAZ,GAAOmB,YACAf,EAAI,QAAS,QACf,IAAIiB,GAAeN,KAAKH,GAE7B,MADAZ,GAAOiB,SAASI,IACTjB,EAAI,WAAY,WAAYJ,EAAOsB,UACrC,IAAIE,GAAOT,KAAKH,GAAK,CAC1BZ,EAAOiB,SAASO,GAChB,IAAIC,GAAOzB,EAAOsB,UACdI,EAAQC,GAASC,qBAAqBH,IAASE,GAASF,EAC5D,OAAQC,IAA2B,KAAlBf,EAAMS,SAAmBhB,EAAIsB,EAAMlB,KAAMkB,EAAMpB,MAAOmB,GAAQrB,EAAI,WAAY,WAAYqB,IAG/G,QAASX,GAAYe,GACnB,MAAO,UAAS7B,EAAQW,GACtB,GACIV,GADAC,GAAU,CAEd,IAAI4B,IAA+B,KAAjB9B,EAAO+B,QAAiB/B,EAAO5C,MAAM4E,IAErD,MADArB,GAAME,SAAWH,EACVN,EAAI,iBAAkB,OAE/B,MAAiC,OAAzBH,EAAOD,EAAOC,UAChBA,GAAQ4B,GAAU3B,IAEtBA,GAAWA,GAAmB,MAARD,CAIxB,OAFKC,KACHS,EAAME,SAAWH,GACZN,EAAI,SAAU,WAGzB,QAASc,GAAalB,EAAQW,GAG5B,IAFA,GACIC,GADAqB,GAAW,EAERrB,EAAKZ,EAAOC,QAAQ,CACzB,GAAU,KAANW,GAAaqB,EAAU,CACzBtB,EAAME,SAAWH,CACjB,OAEFuB,EAAkB,KAANrB,EAEd,MAAOR,GAAI,UAAW,WAExB,QAASmB,GAAWvB,EAAQW,GAG1B,IAFA,GACIV,GADAC,GAAU,EAEmB,OAAzBD,EAAOD,EAAOC,SAAiB,CACrC,IAAKC,IAAoB,KAARD,GAAuB,KAARA,GAAeD,EAAOgB,IAAI,MAAO,CAC/DL,EAAME,SAAWH,CACjB,OAEFR,GAAWA,GAAmB,MAARD,EAExB,MAAOG,GAAI,QAAS,WAAYJ,EAAOsB,WAGzC,QAASY,GAAalC,EAAQW,GACxBA,EAAMwB,aACRxB,EAAMwB,WAAa,KACrB,IAAIC,GAAQpC,EAAOqC,OAAO1L,QAAQ,KAAMqJ,EAAOsC,MAC/C,MAAY,EAARF,GAAJ,CAIA,IAAK,GAFDG,GAAQ,EACRC,GAAe,EACVC,EAAML,EAAQ,EAAGK,GAAO,IAAKA,EAAK,CACzC,GAAI7B,GAAKZ,EAAOqC,OAAOK,OAAOD,GAC1BE,EAAUC,GAASjM,QAAQiK,EAC/B,IAAI+B,GAAW,GAAe,EAAVA,EAAa,CAC/B,IAAKJ,EAAO,GACRE,CACF,OAEF,GAAe,KAATF,EACJ,UACG,IAAII,GAAW,GAAe,EAAVA,IACvBJ,MACG,IAAIf,GAAOT,KAAKH,GACrB4B,GAAe,MACV,CAAA,GAAI,SAASzB,KAAKH,GACvB,MACK,IAAI4B,IAAiBD,EAAO,GAC/BE,CACF,SAGAD,IAAiBD,IACnB5B,EAAMwB,WAAaM,IAWvB,QAASI,GAAUC,EAAUC,EAAQvC,EAAMwC,EAAOC,EAAMC,GACtDlN,KAAK8M,SAAWA,EAChB9M,KAAK+M,OAASA,EACd/M,KAAKwK,KAAOA,EACZxK,KAAKiN,KAAOA,EACZjN,KAAKkN,KAAOA,EACC,MAATF,IACFhN,KAAKgN,MAAQA,GAEjB,QAASG,GAAQxC,EAAOyC,GACtB,IAAK,GAAIC,GAAI1C,EAAM2C,UAAWD,EAAGA,EAAIA,EAAEpD,KACrC,GAAIoD,EAAE5N,MAAQ2N,EACZ,OAAO,CACX,KAAK,GAAIG,GAAK5C,EAAM6C,QAASD,EAAIA,EAAKA,EAAGN,KACvC,IAAK,GAAII,GAAIE,EAAGE,KAAMJ,EAAGA,EAAIA,EAAEpD,KAC7B,GAAIoD,EAAE5N,MAAQ2N,EACZ,OAAO,EAGf,QAASM,GAAQ/C,EAAOL,EAAOE,EAAMC,EAAST,GAC5C,GAAI2D,GAAKhD,EAAMgD,EAOf,KANAJ,GAAG5C,MAAQA,EACX4C,GAAGvD,OAASA,EACZuD,GAAGK,OAAS,KAAML,GAAGI,GAAKA,EAC1BJ,GAAGjD,MAAQA,EACNK,EAAMkD,QAAQpK,eAAe,WAChCkH,EAAMkD,QAAQb,OAAQ,KACX,CACX,GAAIc,GAAaH,EAAG9N,OAAS8N,EAAGpF,MAAQwF,GAAWC,EAAaC,CAChE,IAAIH,EAAWtD,EAAMC,GAAU,CAC7B,KAAOkD,EAAG9N,QAAU8N,EAAGA,EAAG9N,OAAS,GAAGqO,KACpCP,EAAGpF,OACL,OAAIgF,IAAGK,OACEL,GAAGK,OACA,YAARpD,GAAsB2C,EAAQxC,EAAOF,GAChC,aACFH,IAUb,QAAS6D,KACP,IAAK,GAAIrN,GAAIlB,UAAUC,OAAS,EAAGiB,GAAK,EAAGA,IACzCyM,GAAGI,GAAG9M,KAAKjB,UAAUkB,IAEzB,QAASyJ,KAEP,MADA4D,GAAKpO,MAAM,KAAMH,YACV,EAET,QAASJ,GAAS4N,GAChB,QAASgB,GAAOC,GACd,IAAK,GAAIhB,GAAIgB,EAAMhB,EAAGA,EAAIA,EAAEpD,KAC1B,GAAIoD,EAAE5N,MAAQ2N,EACZ,OAAO,CACX,QAAO,EAET,GAAIzC,GAAQ4C,GAAG5C,KAEf,IADA4C,GAAGK,OAAS,MACRjD,EAAM6C,QAAS,CACjB,GAAIY,EAAOzD,EAAM2C,WACf,MACF3C,GAAM2C,WACJ7N,KAAM2N,EACNnD,KAAMU,EAAM2C,eAET,CACL,GAAIc,EAAOzD,EAAM2D,YACf,MACExE,GAAawE,aACf3D,EAAM2D,YACJ7O,KAAM2N,EACNnD,KAAMU,EAAM2D,cAQpB,QAASC,KACPhB,GAAG5C,MAAM6C,SACPP,KAAMM,GAAG5C,MAAM6C,QACfC,KAAMF,GAAG5C,MAAM2C,WAEjBC,GAAG5C,MAAM2C,UAAYkB,GAEvB,QAASC,KACPlB,GAAG5C,MAAM2C,UAAYC,GAAG5C,MAAM6C,QAAQC,KACtCF,GAAG5C,MAAM6C,QAAUD,GAAG5C,MAAM6C,QAAQP,KAEtC,QAASyB,GAAQlE,EAAM0C,GACrB,GAAIyB,GAAS,WACX,GAAIhE,GAAQ4C,GAAG5C,MACXiE,EAASjE,EAAMmC,QACnB,IAA0B,QAAtBnC,EAAMkD,QAAQrD,KAChBoE,EAASjE,EAAMkD,QAAQf,aAEvB,KAAK,GAAI+B,GAAQlE,EAAMkD,QAASgB,GAAuB,KAAdA,EAAMrE,MAAeqE,EAAM7B,MAAO6B,EAAQA,EAAM5B,KACvF2B,EAASC,EAAM/B,QACnBnC,GAAMkD,QAAU,GAAIhB,GAAU+B,EAAQrB,GAAGvD,OAAO+C,SAAUvC,EAAM,KAAMG,EAAMkD,QAASX,GAGvF,OADAyB,GAAOT,KAAM,EACNS,EAET,QAASG,KACP,GAAInE,GAAQ4C,GAAG5C,KACXA,GAAMkD,QAAQZ,OACU,KAAtBtC,EAAMkD,QAAQrD,OAChBG,EAAMmC,SAAWnC,EAAMkD,QAAQf,UACjCnC,EAAMkD,QAAUlD,EAAMkD,QAAQZ,MAIlC,QAAS8B,GAAOC,GACd,QAASC,GAAIzE,GACX,MAAIA,IAAQwE,EACHzE,IACU,KAAVyE,EACAb,IAEA5D,EAAK0E,GAGhB,MAAOA,GAET,QAAShB,GAAUzD,EAAMnI,GACvB,MAAY,OAARmI,EACKD,EAAKmE,EAAQ,SAAUrM,EAAMxC,QAASqP,EAAQH,EAAO,KAAMD,GACxD,aAARtE,EACKD,EAAKmE,EAAQ,QAASV,EAAYC,EAAWa,GAC1C,aAARtE,EACKD,EAAKmE,EAAQ,QAAST,EAAWa,GAC9B,KAARtE,EACKD,EAAKmE,EAAQ,KAAMS,EAAOL,GACvB,KAARtE,EACKD,IACG,MAARC,GAC2B,QAAzB+C,GAAG5C,MAAMkD,QAAQX,MAAkBK,GAAG5C,MAAMgD,GAAGJ,GAAG5C,MAAMgD,GAAG9N,OAAS,IAAMiP,GAC5EvB,GAAG5C,MAAMgD,GAAGpF,QACPgC,EAAKmE,EAAQ,QAASV,EAAYC,EAAWa,EAAQM,IAElD,YAAR5E,EACKD,EAAK8E,IACF,OAAR7E,EACKD,EAAKmE,EAAQ,QAASY,EAASrB,EAAWa,GACvC,YAARtE,EACKD,EAAKmE,EAAQ,QAASa,GACnB,UAAR/E,EACKD,EAAKmE,EAAQ,QAASV,EAAYU,EAAQ,IAAK,UAAWK,EAAO,KAAMI,EAAOL,EAAQA,GACnF,QAARtE,EACKD,EAAKyD,EAAYe,EAAO,MACrB,WAARvE,EACKD,EAAKwE,EAAO,MACT,SAARvE,EACKD,EAAKmE,EAAQ,QAASH,EAAaQ,EAAO,KAAMS,GAAQT,EAAO,KAAMd,EAAWa,EAAQL,GACrF,SAARjE,EACKD,EAAKmE,EAAQ,QAASe,GAAWX,GAC9B,UAARtE,EACKD,EAAKmE,EAAQ,QAASgB,GAAaZ,GAChC,UAARtE,EACKD,EAAKmE,EAAQ,QAASiB,GAAab,GACrCX,EAAKO,EAAQ,QAASV,EAAYe,EAAO,KAAMD,GAExD,QAASd,GAAWxD,GAClB,MAAOoF,GAAgBpF,GAAM,GAE/B,QAASqF,GAAkBrF,GACzB,MAAOoF,GAAgBpF,GAAM,GAE/B,QAASoF,GAAgBpF,EAAMsF,GAC7B,GAAIvC,GAAG5C,MAAMwB,YAAcoB,GAAGvD,OAAOsC,MAAO,CAC1C,GAAIyD,GAAOD,EAAUE,EAAmBC,CACxC,IAAY,KAARzF,EACF,MAAOD,GAAKgE,EAAaG,EAAQ,KAAMwB,EAASC,EAAS,KAAMrB,EAAQC,EAAO,MAAOgB,EAAMtB,EACxF,IAAY,YAARjE,EACP,MAAO2D,GAAKI,EAAa4B,EAASpB,EAAO,MAAOgB,EAAMtB,GAE1D,GAAI2B,GAAUN,EAAUO,EAAuBC,CAC/C,OAAIC,IAAY9M,eAAe+G,GACtBD,EAAK6F,GACF,SAAR5F,EACKD,EAAKyD,GACF,YAARxD,EACKD,EAAK8E,GAAae,GACf,aAAR5F,EACKD,EAAKuF,EAAUU,EAAyBC,GACrC,KAARjG,EACKD,EAAKmE,EAAQ,KAAM+B,EAAiBC,GAAe3B,EAAO,KAAMD,EAAQsB,GACrE,YAAR5F,GAA8B,UAARA,EACjBD,EAAKuF,EAAUD,EAAoB7B,GAChC,KAARxD,EACKD,EAAKmE,EAAQ,KAAMiC,GAAc7B,EAAQsB,GACtC,KAAR5F,EACKoG,EAAaC,EAAS,IAAK,KAAMT,GAC9B,SAAR5F,EACK2D,EAAK2C,EAAOV,GACT,OAAR5F,EACKD,EAAKwG,EAAYjB,IACnBvF,IAET,QAASkG,GAAgBjG,GACvB,MAAIA,GAAKpD,MAAM,cACN+G,IACFA,EAAKH,GAEd,QAASwC,GAAuBhG,GAC9B,MAAIA,GAAKpD,MAAM,cACN+G,IACFA,EAAK0B,GAEd,QAASS,GAAmB9F,EAAMnI,GAChC,MAAY,KAARmI,EACKD,EAAKyD,GACPqC,EAAqB7F,EAAMnI,GAAO,GAE3C,QAASgO,GAAqB7F,EAAMnI,EAAOyN,GACzC,GAAIkB,GAAgB,GAAXlB,EAAmBQ,EAAqBD,EAC7CY,EAAkB,GAAXnB,EAAmB9B,EAAa6B,CAC3C,OAAY,MAARrF,EACKD,EAAKgE,EAAauB,EAAUE,EAAmBC,EAAWxB,GACvD,YAARjE,EACE,UAAUO,KAAK1I,GACVkI,EAAKyG,GACD,KAAT3O,EACKkI,EAAKyD,EAAYe,EAAO,KAAMkC,GAChC1G,EAAK0G,GAEF,SAARzG,EACK2D,EAAK2C,EAAOE,GAET,KAARxG,EAEQ,KAARA,EACKoG,EAAaf,EAAmB,IAAK,OAAQmB,GAC1C,KAARxG,EACKD,EAAK2G,EAAUF,GACZ,KAARxG,EACKD,EAAKmE,EAAQ,KAAM+B,EAAiB1B,EAAO,KAAMD,EAAQkC,GADlE,OANA,OASF,QAASF,GAAMtG,EAAMnI,GACnB,MAAY,SAARmI,EACK2D,IAC4B,MAAjC9L,EAAM8O,MAAM9O,EAAMxC,OAAS,GACtB0K,EAAKuG,GACPvG,EAAKyD,EAAYoD,GAE1B,QAASA,GAAc5G,GACrB,MAAY,KAARA,GACF+C,GAAGK,OAAS,WACZL,GAAG5C,MAAME,SAAWU,EACbhB,EAAKuG,IAHd,OAMF,QAASb,GAAUzF,GAEjB,MADA0B,GAAaqB,GAAGvD,OAAQuD,GAAG5C,OACpBwD,EAAa,KAAR3D,EAAcyD,EAAYD,GAExC,QAASgC,GAAiBxF,GAExB,MADA0B,GAAaqB,GAAGvD,OAAQuD,GAAG5C,OACpBwD,EAAa,KAAR3D,EAAcyD,EAAY4B,GAExC,QAASkB,GAAYjB,GACnB,MAAO,UAAStF,GACd,MAAY,KAARA,EACKD,EAAKuF,EAAUuB,EAAgBC,GAE/BnD,EAAK2B,EAAUD,EAAoB7B,IAGhD,QAASsD,GAAOC,EAAGlP,GACjB,MAAa,UAATA,GACFkL,GAAGK,OAAS,UACLrD,EAAK+F,IAFd,OAKF,QAASe,GAAcE,EAAGlP,GACxB,MAAa,UAATA,GACFkL,GAAGK,OAAS,UACLrD,EAAK8F,IAFd,OAKF,QAASd,GAAW/E,GAClB,MAAY,KAARA,EACKD,EAAKuE,EAAQb,GACfE,EAAKmC,EAAoBvB,EAAO,KAAMD,GAE/C,QAASoC,GAAS1G,GAChB,MAAY,YAARA,GACF+C,GAAGK,OAAS,WACLrD,KAFT,OAKF,QAASsG,GAAQrG,EAAMnI,GACrB,MAAY,SAARmI,EACKD,EAAKsG,GACK,YAARrG,GAAkC,WAAZ+C,GAAGjD,OAClCiD,GAAGK,OAAS,WAEHrD,EADI,OAATlI,GAA2B,OAATA,EACRmP,EACFC,IACK,UAARjH,GAA4B,UAARA,GAC7B+C,GAAGK,OAAS9B,GAAa,WAAcyB,GAAGjD,MAAQ,YAC3CC,EAAKkH,IACK,kBAARjH,EACFD,EAAKkH,GACK,KAARjH,EACFD,EAAKyD,EAAYe,EAAO,KAAM0C,GADhC,OAIT,QAASD,GAAahH,GACpB,MAAY,YAARA,EACK2D,EAAKsD,IACdlE,GAAGK,OAAS,WACLrD,EAAK8E,KAEd,QAASoC,GAAUjH,GACjB,MAAY,KAARA,EACKD,EAAKsF,GACF,KAARrF,EACK2D,EAAKkB,IADd,OAGF,QAASa,GAASwB,EAAMC,GACtB,QAASC,GAAQpH,GACf,GAAY,KAARA,EAAa,CACf,GAAI0D,GAAMX,GAAG5C,MAAMkD,OAGnB,OAFgB,QAAZK,EAAIhB,OACNgB,EAAIzB,KAAOyB,EAAIzB,KAAO,GAAK,GACtBlC,EAAKmH,EAAME,GAEpB,MAAIpH,IAAQmH,EACHpH,IACFA,EAAKwE,EAAO4C,IAErB,MAAO,UAASnH,GACd,MAAIA,IAAQmH,EACHpH,IACF4D,EAAKuD,EAAME,IAGtB,QAAShB,GAAac,EAAMC,EAAKzE,GAC/B,IAAK,GAAIpM,GAAI,EAAGA,EAAIlB,UAAUC,OAAQiB,IACpCyM,GAAGI,GAAG9M,KAAKjB,UAAUkB,GACvB,OAAOyJ,GAAKmE,EAAQiD,EAAKzE,GAAOgD,EAASwB,EAAMC,GAAM7C,GAEvD,QAASK,GAAM3E,GACb,MAAY,KAARA,EACKD,IACF4D,EAAKF,EAAWkB,GAEzB,QAAS0C,GAAUrH,GACjB,MAAIsH,KAAgB,KAARtH,EACHD,EAAKwH,GADd,OAGF,QAASC,GAAaT,EAAGlP,GACvB,MAAa,KAATA,EACKkI,EAAKsF,GADd,OAGF,QAASkC,GAAQvH,GACf,MAAY,YAARA,GACF+C,GAAGK,OAAS,aACLrD,KAFT,OAKF,QAAS2E,KACP,MAAOf,GAAKgC,EAAS0B,EAAWI,EAAaC,GAE/C,QAAS/B,GAAQ3F,EAAMnI,GACrB,MAAY,YAARmI,GACFhL,EAAS6C,GACFkI,KAEG,UAARC,EACKD,EAAK4F,GACF,KAAR3F,EACKoG,EAAaT,EAAS,KACnB,KAAR3F,EACKoG,EAAauB,EAAa,KADnC,OAGF,QAASA,GAAY3H,EAAMnI,GACzB,MAAY,YAARmI,GAAuB+C,GAAGvD,OAAO5C,MAAM,SAAS,IAIxC,YAARoD,IACF+C,GAAGK,OAAS,YACF,UAARpD,EACKD,EAAK4F,GACP5F,EAAKwE,EAAO,KAAMoB,EAAS8B,KAPhCzS,EAAS6C,GACFkI,EAAK0H,IAQhB,QAASA,GAAYG,EAAO/P,GAC1B,MAAa,KAATA,EACKkI,EAAKsF,GADd,OAGF,QAASqC,GAAW1H,GAClB,MAAY,KAARA,EACKD,EAAK2E,GADd,OAGF,QAASE,GAAU5E,EAAMnI,GACvB,MAAY,aAARmI,GAAgC,QAATnI,EAClBkI,EAAKmE,EAAQ,OAAQ,QAAST,EAAWa,GADlD,OAGF,QAASQ,GAAQ9E,GACf,MAAY,KAARA,EACKD,EAAKmE,EAAQ,KAAM2D,GAAUtD,EAAO,KAAMD,GADnD,OAGF,QAASuD,IAAS7H,GAChB,MAAY,OAARA,EACKD,EAAK2E,EAAQH,EAAO,KAAMuD,IACvB,KAAR9H,EACKD,EAAK+H,IACF,YAAR9H,EACKD,EAAKgI,IACPpE,EAAKH,EAAYe,EAAO,KAAMuD,IAEvC,QAASC,IAAaH,EAAO/P,GAC3B,MAAa,MAATA,GAA0B,MAATA,GACnBkL,GAAGK,OAAS,UACLrD,EAAKyD,IAEPzD,EAAK+F,EAAoBgC,IAElC,QAASA,IAAS9H,EAAMnI,GACtB,MAAY,KAARmI,EACKD,EAAKiI,IACD,MAATnQ,GAA0B,MAATA,GACnBkL,GAAGK,OAAS,UACLrD,EAAKyD,IAEPG,EAAKH,EAAYe,EAAO,KAAMyD,IAEvC,QAASA,IAAShI,GACJ,KAARA,GACFD,EAAKyD,GAET,QAASqB,IAAY7E,EAAMnI,GACzB,MAAa,KAATA,GACFkL,GAAGK,OAAS,UACLrD,EAAK8E,KAEF,YAAR7E,GACFhL,EAAS6C,GACFkI,EAAK8E,KAEF,KAAR7E,EACKD,EAAKgE,EAAaG,EAAQ,KAAMwB,EAASV,GAAQ,KAAMV,EAAQb,EAAWQ,GADnF,OAGF,QAASe,IAAOhF,GACd,MAAY,UAARA,EACKD,EAAKiF,IACPrB,EAAKgC,EAAS0B,EAAWG,GAElC,QAASvC,IAAUjF,EAAMnI,GACvB,MAAY,YAARmI,GACFhL,EAAS6C,GACFkI,EAAKkI,KAFd,OAKF,QAASA,IAAejI,EAAMnI,GAC5B,MAAa,WAATA,EACKkI,EAAKyD,EAAYyE,IACd,KAARjI,EACKD,EAAKmE,EAAQ,KAAMgE,GAAW5D,GADvC,OAGF,QAAS4D,IAAUlI,EAAMnI,GACvB,MAAY,YAARmI,GAAkC,WAAZ+C,GAAGjD,MACd,UAATjI,GACFkL,GAAGK,OAAS,UACLrD,EAAKmI,MAEdnF,GAAGK,OAAS,WACC,OAATvL,GAA2B,OAATA,EACbkI,EAAKoI,GAAmBtD,GAAaqD,IACvCnI,EAAK8E,GAAaqD,KAEd,KAATrQ,GACFkL,GAAGK,OAAS,UACLrD,EAAKmI,KAEF,KAARlI,EACKD,EAAKmI,IACF,KAARlI,EACKD,IADT,OAGF,QAASoI,IAAkBnI,GACzB,MAAY,YAARA,EACK2D,KACTZ,GAAGK,OAAS,WACLrD,KAET,QAASmF,IAAY0C,EAAO/P,GAC1B,MAAa,KAATA,GACFkL,GAAGK,OAAS,UACLrD,EAAKqI,GAAW7D,EAAO,OAEnB,WAAT1M,GACFkL,GAAGK,OAAS,UACLrD,EAAKyD,EAAYe,EAAO,OAE1BZ,EAAKF,GAEd,QAAS0B,IAAYnF,GACnB,MAAY,UAARA,EACKD,IACF4D,EAAK0E,GAAYD,IAE1B,QAASC,IAAWrI,EAAMnI,GACxB,MAAY,KAARmI,EACKoG,EAAaiC,GAAY,MACtB,YAARrI,GACFhL,EAAS6C,GACE,KAATA,IACFkL,GAAGK,OAAS,WACPrD,EAAKuI,KAEd,QAASA,IAAQV,EAAO/P,GACtB,MAAa,MAATA,GACFkL,GAAGK,OAAS,UACLrD,EAAKsI,KAFd,OAKF,QAASD,IAAUR,EAAO/P,GACxB,MAAa,QAATA,GACFkL,GAAGK,OAAS,UACLrD,EAAKyD,IAFd,OAKF,QAAS2C,IAAanG,GACpB,MAAY,KAARA,EACKD,IACF4D,EAAK0B,EAAmBkD,IAEjC,QAASA,IAAwBvI,GAC/B,MAAY,OAARA,EACK2D,EAAKuC,GAAe3B,EAAO,MACxB,KAARvE,EACKD,EAAK2F,EAASM,EAAwB,MACxCrC,EAAK+B,EAASL,EAAmB,MAE1C,QAASa,IAAclG,GACrB,MAAY,OAARA,EACKD,EAAK+E,EAASoB,IACX,MAARlG,EACKD,EAAKyD,EAAY0C,IAD1B,OAGF,QAASsC,IAAqBrI,EAAOsI,GACnC,MAAyB,YAAlBtI,EAAMS,UAA4C,KAAlBT,EAAMS,UAAmBC,GAAeN,KAAKkI,EAAUvG,OAAO,KAAO,OAAO3B,KAAKkI,EAAUvG,OAAO,IAnyB3I,GA0GIlC,IACAC,GA3GAyI,GAAanK,EAAOmK,WACpBC,GAAkBrJ,EAAaqJ,gBAC/BrH,GAAahC,EAAasJ,OAC1BrF,GAAWjE,EAAauJ,MAAQvH,GAChCgG,GAAOhI,EAAawJ,WACpB9H,GAAS1B,EAAayJ,gBAAkB,mBACxC5H,GAAW,WACb,QAAS6H,GAAGhJ,GACV,OACEA,KAAMA,EACNF,MAAO,WAGX,GAAImJ,GAAID,EAAG,aACPE,EAAIF,EAAG,aACPG,EAAIH,EAAG,aACPI,EAAWJ,EAAG,YACdK,GACErJ,KAAM,OACNF,MAAO,QAETwJ,GACFC,KAAMP,EAAG,MACTQ,QAASP,EACTQ,OAAQR,EACRS,OAAQR,EACRS,KAAMT,EACNU,MAAOV,EACPW,UAAWX,EACXY,SAAUX,EACVY,QAASZ,EACTa,WAAYb,EACZc,MAAOjB,EAAG,OACVkB,SAAUf,EACVgB,QAAShB,EACTiB,WAAYjB,EACZkB,MAAOrB,EAAG,OACVsB,QAAStB,EAAG,OACZuB,IAAOvB,EAAG,OACVwB,MAASxB,EAAG,SACZyB,WAAYzB,EAAG,YACf0B,QAAS1B,EAAG,SACZ2B,MAAO3B,EAAG,OACV4B,SAAU5B,EAAG,UACb6B,OAAQ7B,EAAG,QACX8B,UAAW9B,EAAG,WACd+B,KAAM3B,EACN4B,SAAU5B,EACV6B,aAAc7B,EACd8B,OAAQ7B,EACR8B,QAAS9B,EACT+B,OAAQ/B,EACRzS,UAAayS,EACbgC,IAAOhC,EACPiC,SAAYjC,EACZ7T,OAAQwT,EAAG,QACXuC,QAASvC,EAAG,SACZwC,QAASxC,EAAG,QACZyC,MAAStC,EACTuC,QAASvC,EACTwC,SAAU3C,EAAG,UACb4C,SAAU5C,EAAG,UACb6C,UAAW1C,EAEb,IAAI7B,GAAM,CACR,GAAItH,IACFA,KAAM,WACNF,MAAO,cAELgM,GACFC,YAAa/C,EAAG,aAChB6C,UAAW7C,EAAG,WACdgD,YAAehD,EAAG,eAClBiD,SAAUjD,EAAG,UACbkD,UAAWlD,EAAG,WACdmD,YAAanD,EAAG,aAChBoD,SAAUpD,EAAG,UACbnH,OAAU7B,EACVqM,OAAUrM,EACVsM,UAAWtM,EACXuM,IAAOvM,EAET,KAAK,GAAIwM,KAAQV,GACfxC,EAAWkD,GAAQV,EAAWU,GAGlC,MAAOlD,MAELzI,GAAiB,mBACjBW,GAAkB,wFA0HlBY,GAAW,SAiCX2D,IACFsD,MAAQ,EACRgD,QAAU,EACVI,UAAY,EACZ5K,QAAU,EACV6K,QAAU,EACVlX,QAAQ,EACRmX,kBAAkB,GA0ChB5J,IACF5C,MAAO,KACPoC,OAAQ,KACRa,OAAQ,KACRD,GAAI,MAoCFa,IACF/O,KAAM,OACNwK,MAAOxK,KAAM,aAsdf,OAnbAqP,GAAOZ,KAAM,GAobXkJ,WAAY,SAASC,GACnB,GAAI1M,IACFE,SAAUH,EACVU,SAAU,MACVuC,MACAE,QAAS,GAAIhB,IAAWwK,GAAc,GAAKnE,GAAY,EAAG,SAAS,GACnE5F,UAAWxD,EAAawD,UACxBE,QAAS1D,EAAawD,YAAcG,KAAM3D,EAAawD,WACvDR,SAAU,EAIZ,OAFIhD,GAAawE,YAAgD,gBAA3BxE,GAAawE,aACjD3D,EAAM2D,WAAaxE,EAAawE,YAC3B3D,GAET2M,MAAO,SAAStN,EAAQW,GAOtB,GANIX,EAAOuN,QACJ5M,EAAMkD,QAAQpK,eAAe,WAChCkH,EAAMkD,QAAQb,OAAQ,GACxBrC,EAAMmC,SAAW9C,EAAOwN,cACxBtL,EAAalC,EAAQW,IAEnBA,EAAME,UAAYK,GAAgBlB,EAAOyN,WAC3C,MAAO,KACT,IAAInN,GAAQK,EAAME,SAASb,EAAQW,EACnC,OAAY,WAARH,GACKF,GACTK,EAAMS,SAAmB,YAARZ,IAAkC,MAAXC,IAA8B,MAAXA,GAA8BD,GAAX,SACvEkD,EAAQ/C,EAAOL,EAAOE,GAAMC,GAAST,KAE9C4E,OAAQ,SAASjE,EAAOsI,GACtB,GAAItI,EAAME,UAAYK,EACpB,MAAOtB,GAAW8N,IACpB,IAAI/M,EAAME,UAAYH,EACpB,MAAO,EACT,IAAIiN,GAAY1E,GAAaA,EAAUvG,OAAO,GAC1CmB,EAAUlD,EAAMkD,OACpB,KAAK,aAAa9C,KAAKkI,GACrB,IAAK,GAAInS,GAAI6J,EAAMgD,GAAG9N,OAAS,EAAGiB,GAAK,IAAKA,EAAG,CAC7C,GAAI8W,GAAIjN,EAAMgD,GAAG7M,EACjB,IAAI8W,GAAK9I,EACPjB,EAAUA,EAAQZ,SACf,IAAI2K,GAAKxI,EACZ,MAEc,QAAhBvB,EAAQrD,MAA+B,KAAbmN,IAC5B9J,EAAUA,EAAQZ,MAChBkG,IAAmC,KAAhBtF,EAAQrD,MAAoC,QAArBqD,EAAQZ,KAAKzC,OACzDqD,EAAUA,EAAQZ,KACpB,IAAIzC,GAAOqD,EAAQrD,KACfqN,EAAUF,GAAanN,CAC3B,OAAY,UAARA,EACKqD,EAAQf,UAA8B,YAAlBnC,EAAMS,UAA4C,KAAlBT,EAAMS,SAAkByC,EAAQX,KAAO,EAAI,GACvF,QAAR1C,GAA+B,KAAbmN,EAClB9J,EAAQf,SACA,QAARtC,EACAqD,EAAQf,SAAWoG,GACX,QAAR1I,EACAqD,EAAQf,UAAYkG,GAAqBrI,EAAOsI,GAAaE,IAAmBD,GAAa,GAC7E,UAAhBrF,EAAQX,MAAqB2K,GAA8C,GAAnC/N,EAAagO,mBAErDjK,EAAQb,MACRa,EAAQd,QAAU8K,EAAU,EAAI,GAEhChK,EAAQf,UAAY+K,EAAU,EAAI3E,IAJlCrF,EAAQf,UAAY,sBAAsB/B,KAAKkI,GAAaC,GAAa,EAAIA,KAMxF6E,cAAe,oCACfC,kBAAmBjK,GAAW,KAAO,KACrCkK,gBAAiBlK,GAAW,KAAO,KACnCmK,YAAanK,GAAW,KAAO,KAC/BoK,KAAM,QACNC,cAAe,iBACfC,WAAYtK,GAAW,OAAS,aAChCjC,WAAYA,GACZiC,SAAUA,MAGdnE,EAAW0O,eAAe,YAAa,aAAc,SACrD1O,EAAW2O,WAAW,kBAAmB,cACzC3O,EAAW2O,WAAW,kBAAmB,cACzC3O,EAAW2O,WAAW,yBAA0B,cAChD3O,EAAW2O,WAAW,2BAA4B,cAClD3O,EAAW2O,WAAW,yBAA0B,cAChD3O,EAAW2O,WAAW,oBACpB9Y,KAAM,aACN4T,MAAM,IAERzJ,EAAW2O,WAAW,sBACpB9Y,KAAM,aACN4T,MAAM,IAERzJ,EAAW2O,WAAW,uBACpB9Y,KAAM,aACN2T,QAAQ,IAEVxJ,EAAW2O,WAAW,mBACpB9Y,KAAM,aACN6T,YAAY,IAEd1J,EAAW2O,WAAW,0BACpB9Y,KAAM,aACN6T,YAAY,MAIhB5J,OAEA,WACA,GAAIA,GAAgBrE,EAAUd,IAAI,iBAAiB4E,gBAClD,WAqCC,QAASqP,GAAS9G,EAAM+G,GACtB,IAAK,GAAI3X,GAAI,EAAGA,EAAI2X,EAAI5Y,OAAQiB,GAAK,EACnC,GAAI2X,EAAI3X,KAAO4Q,EACb,OAAO,CAGX,QAAO,EAET,QAASgH,GAAKC,GACZ,MAAOA,GAAE1R,QAAQ,aAAc,IAEjC,QAAS2R,GAAMD,GACb,MAAOA,GAAE1R,QAAQ,QAAS,IAK5B,QAAS4R,GAAYC,EAAgBC,GACnC,YACA,IAAIC,GAAa,GAAIC,GAAWH,EAAgBC,EAChD,OAAOC,GAAWE,WAWpB,QAASD,GAAWH,EAAgBC,GAClC,YAkCA,SAASI,GAAaC,EAAYC,GAChC,GAAIC,GAAoB,CACpBF,KACFE,EAAoBF,EAAWG,mBAC1BpW,EAAOqW,sBAAwBJ,EAAWK,kBAAoBH,IACjEA,EAAoBF,EAAWK,mBAGnC,IAAIC,IACFL,KAAMA,EACNM,OAAQP,EACRQ,UAAWR,EAAaA,EAAWQ,UAAY,GAC/CC,UAAWT,EAAaA,EAAWS,UAAY,GAC/CC,uBAAuB,EACvBC,wBAAwB,EACxBC,iBAAiB,EACjBC,UAAU,EACVC,YAAY,EACZC,UAAU,EACVC,UAAU,EACVC,mBAAmB,EACnBC,SAAS,EACTC,WAAW,EACXhB,kBAAmBD,EACnBG,kBAAmBL,EAAaA,EAAWK,kBAAoBH,EAC/DkB,iBAAkBrX,EAAOsX,kBACzBC,cAAe,EAEjB,OAAOhB,GAiFT,QAASiB,GAAaC,GACpB,GAAIC,GAAWD,EAAYC,SACvBC,EAAkBxW,GAAIyW,wBAA0BC,EAASC,EAAM5B,KACnE,IAAIyB,EACF,IAAKha,EAAI,EAAO+Z,EAAJ/Z,EAAcA,GAAK,EAC7Boa,EAAcpa,EAAI,OAMpB,IAHIwD,GAAI6W,uBAAyBN,EAAWvW,GAAI6W,wBAC9CN,EAAWvW,GAAI6W,uBAEb7W,GAAI8W,mBACFR,EAAYC,SAAW,EAAG,CAC5BK,GACA,KAAK,GAAIpa,GAAI,EAAO+Z,EAAJ/Z,EAAcA,GAAK,EACjCoa,GAAc,GAKtBG,EAAgBT,EAChBU,GAASD,EAAc7Q,QAEzB,QAAS+Q,GAAe5C,GACtBA,EAAIA,EAAE1R,QAAQ,QAAS,GAGvB,KAFA,GAAIuU,MACAC,EAAM9C,EAAEhY,QAAQ,MACL,KAAR8a,GACLD,EAAI3a,KAAK8X,EAAE+C,UAAU,EAAGD,IACxB9C,EAAIA,EAAE+C,UAAUD,EAAM,GACtBA,EAAM9C,EAAEhY,QAAQ,KAKlB,OAHIgY,GAAE9Y,QACJ2b,EAAI3a,KAAK8X,GAEJ6C,EAET,QAASG,GAAgCC,GAEvC,GADAA,EAAqCxa,SAAnBwa,GAAgC,EAAQA,GACtDzY,EAAOqW,qBAGX,GAAKlV,GAAI8W,mBAAqBC,EAAcQ,gBAAmBD,EAC7DV,GAAc,GAAO,OAChB,IAAI5W,GAAIwX,iBAAkB,CAC/B,GAAIC,GAAuB5Y,EAAO6Y,aAAaC,sBAAwBZ,EAAca,KAAKrc,QAAUsD,EAAOgZ,mBAAqB,EAAI,EAChIJ,IAAwBzX,GAAIwX,kBAC9BZ,GAAc,GAAO,IAI3B,QAASA,GAAckB,EAAeC,GACpC,IAAKA,GACqB,MAApBpB,EAAMrB,WAAyC,MAApBqB,EAAMrB,WAAyC,MAApBqB,EAAMrB,WAAmC,gBAAd0C,EACnF,KAAOrB,EAAM5B,OAASkD,EAAKC,YAAcvB,EAAMhB,WAAagB,EAAMd,UAChEsC,GAIFtZ,GAAOuZ,aAAaN,KACtBnB,EAAMjB,iBAAkB,GAG5B,QAAS2C,KACHxZ,EAAOqW,uBACLlV,GAAIyW,wBAA0BC,EAASC,EAAM5B,OAASgC,EAAcQ,gBACtE1Y,EAAO6Y,aAAanb,KAAKwa,EAAcuB,mBACvCzZ,EAAOgZ,oBAAqB,GACnBhZ,EAAO0Z,WAAW5B,EAAM1B,qBACjC0B,EAAMxB,kBAAoBwB,EAAM1B,oBAItC,QAASuD,GAAYC,GACnB,MAAI5Z,GAAO6Z,QACT7Z,GAAO8Z,cAAc5B,IAGnB/W,GAAI4Y,aAA6B,aAAdZ,GAA4BnZ,EAAOqW,sBACpB,MAAhCrW,EAAOga,cAAcC,SACvBja,EAAOga,cAAc5U,MACrBoU,IACAxZ,EAAOka,UAAU,KACjBla,EAAOgZ,oBAAqB,GAGhCY,EAAkBA,GAAmB1B,EAAca,KACnDS,QACAxZ,GAAOka,UAAUN,IAEnB,QAASnO,KACPqM,EAAM1B,mBAAqB,EAE7B,QAAS+D,KACHrC,EAAM1B,kBAAoB,KAAQ0B,EAAMtB,QAAWsB,EAAM1B,kBAAoB0B,EAAMtB,OAAOJ,qBAC5F0B,EAAM1B,mBAAqB,GAE/B,QAASgE,GAASlE,GACZ4B,GACFuC,EAAW3c,KAAKoa,GAChBwC,EAAiBxC,GAEjBwC,EAAiBtE,EAAa,KAAME,GAEtC4B,EAAQ9B,EAAasE,EAAgBpE,GAEvC,QAAS2B,GAAS3B,GAChB,MAAOA,KAASkD,EAAKmB,aAEvB,QAASC,GAActE,GACrB,MAAOb,GAASa,GAAOkD,EAAKqB,WAAYrB,EAAKsB,eAAgBtB,EAAKuB,cAEpE,QAASrB,KACHe,EAAW3d,OAAS,IACtB4d,EAAiBxC,EACjBA,EAAQuC,EAAWjV,MACfkV,EAAepE,OAASkD,EAAKC,WAC/BrZ,EAAO4a,6BAA6BN,IAI1C,QAASO,KACP,MAAO/C,GAAMtB,OAAON,OAASkD,EAAK0B,eAAiBhD,EAAM5B,OAASkD,EAAKC,YAAmC,MAApBvB,EAAMrB,WAA6C,IAAxBqB,EAAMP,eAAuC,gBAAd4B,GAA+B9D,EAASyC,EAAMrB,WAAY,MAAO,SAEnN,QAASsE,KACP,MAAmB,gBAAd5B,GAA+B9D,EAASyC,EAAMrB,WAAY,MAAO,MAAO,WAAoC,YAAvByB,EAAc7Q,MAAsC,gBAAd8R,GAAmD,OAApBrB,EAAMrB,WAAsC,gBAAd0C,GAAmD,WAApBrB,EAAMrB,YAA2ByB,EAAcQ,gBAAkC,gBAAdS,GAAmD,SAApBrB,EAAMrB,YAAiD,gBAAvByB,EAAc7Q,MAAiD,OAAvB6Q,EAAca,OAAkC,gBAAdI,IAAgCmB,EAAepE,OAASkD,EAAKsB,gBAAkBJ,EAAepE,OAASkD,EAAKuB,cAAgC,YAAdxB,GAA2BrB,EAAM5B,OAASkD,EAAK4B,iBAAmBlD,EAAMX,SAAoC,OAAvBe,EAAca,MAAwC,OAAvBb,EAAca,MAAqC,aAAnBkC,GAAwD,YAAvB/C,EAAc7Q,MAA6C,gBAAvB6Q,EAAc7Q,MAA4ByQ,EAAM5B,OAASkD,EAAK0B,gBAAuC,MAApBhD,EAAMrB,WAA6C,IAAxBqB,EAAMP,eAAuC,gBAAd4B,GAA+B9D,EAASyC,EAAMrB,WAAY,MAAO,UACz8B2D,EAAShB,EAAKC,WACd5N,IACkB,gBAAd0N,GAA+B9D,EAASyC,EAAMrB,WAAY,MAAO,MAAO,WAAoC,YAAvByB,EAAc7Q,OACrGyQ,EAAMnB,uBAAwB,GAE3BkE,KACHrC,EAAuD,gBAAvBN,EAAc7Q,MAA0BgO,EAAS6C,EAAca,MAAO,KAAM,MAAO,KAAM,YAEpH,IAEF,EAET,QAASmC,GAAqBC,EAAO1G,GACnC,IAAK,GAAI9W,GAAI,EAAGA,EAAIwd,EAAMze,OAAQiB,IAAK,CACrC,GAAIyd,GAAO7F,EAAK4F,EAAMxd,GACtB,IAAIyd,EAAK7R,OAAO,KAAOkL,EACrB,OAAO,EAGX,OAAO,EAET,QAAS4G,GAAyBF,EAAO1P,GAIvC,IAHA,GAEI2P,GAFAzd,EAAI,EACJ2d,EAAMH,EAAMze,OAEL4e,EAAJ3d,EAASA,IAEd,GADAyd,EAAOD,EAAMxd,GACTyd,GAAiC,IAAzBA,EAAK5d,QAAQiO,GACvB,OAAO,CAGX,QAAO,EAET,QAAS8P,GAAgBjT,GACvB,MAAO+M,GAAS/M,GAAO,OAAQ,SAAU,KAAM,KAAM,QAAS,SAEhE,QAASkT,GAAUC,GACjB,GAAIC,GAAQC,GAAaF,GAAU,EACnC,OAAgB,GAARC,GAAaA,GAASE,GAAOlf,OAAU,KAAOkf,GAAOF,GAE/D,QAASG,KACHd,GACJ,IAAIe,GAAY1C,EAAKqB,UACrB,IAA2B,MAAvBvC,EAAca,KAAc,CAC9B,GAAkB,YAAdI,GAA+C,MAApBrB,EAAMrB,UAUnC,MATkB,gBAAd0C,GAA+B9D,EAASyC,EAAMrB,UAAWsF,EAAUC,iBACrEhc,EAAOgZ,oBAAqB,GAE9BoB,EAAS0B,GACTnC,IACAlO,SACItK,GAAI8a,iBACNjc,EAAOgZ,oBAAqB,GAIhC8C,GAAY1C,EAAKmB,aACb1C,EAASC,EAAM5B,QACO,MAApB4B,EAAMrB,WAA0C,MAApBqB,EAAMrB,YAAyC,MAAnBwE,GAA6C,MAAnBA,MAC/E9Z,GAAIyW,wBACPG,SAKY,gBAAdoB,GAAmD,QAApBrB,EAAMrB,UACvCqF,EAAY1C,EAAKsB,eACM,gBAAdvB,GAA+B9D,EAASyC,EAAMrB,WAAY,KAAM,YACzEqF,EAAY1C,EAAKuB,YAGG,OAApB7C,EAAMrB,WAAmC,mBAAd0C,EAC7BpB,IACuB,gBAAdoB,GAA6C,kBAAdA,GAA+C,iBAAdA,GAAoD,MAApBrB,EAAMrB,UAC/G+B,EAAgCN,EAAcQ,gBACrB,gBAAdS,GAAsD,MAAvBjB,EAAca,MAA+B,YAAdI,GAAyC,gBAAdA,EAE5E,gBAAdA,IAAoD,aAApBrB,EAAMpB,WAAgD,WAApBoB,EAAMpB,YAAiD,MAApBoB,EAAMrB,WAAwC,aAAnBwE,EACtI9Z,GAAI+a,4BACNlc,EAAOgZ,oBAAqB,GAEP,gBAAdG,IAAgC9D,EAASyC,EAAMrB,UAAWsF,EAAUC,gBAAsC,UAApBlE,EAAMrB,WACjGtV,GAAIgb,2BACNnc,EAAOgZ,oBAAqB,GAP9BhZ,EAAOgZ,oBAAqB,EAUH,MAAvBd,EAAca,MAA8B,gBAAdI,GAAmD,UAApBrB,EAAMpB,YACrE1W,EAAOgZ,oBAAqB,GAEH,MAAvBd,EAAca,OACE,cAAdI,GAA2C,gBAAdA,KAC1B0B,KACHrC,KAIN4B,EAAS0B,GACTnC,IACIxY,GAAI8a,iBACNjc,EAAOgZ,oBAAqB,GAE9BvN,IAEF,QAAS2Q,KACP,KAAOtE,EAAM5B,OAASkD,EAAKC,WACzBC,GAEExB,GAAMjB,iBACR2B,EAAuD,MAAvBN,EAAca,MAAgBlB,EAASC,EAAM5B,QAAU/U,GAAIyW,wBAEzFzW,GAAI8a,iBACY,kBAAd9C,GAAkChY,GAAIkb,qBAIxCrc,EAAOgZ,oBAAqB,GAH5BhZ,EAAOuV,OACPvV,EAAOgZ,oBAAqB,IAKL,MAAvBd,EAAca,MAAgB5X,GAAIyW,wBACpC+B,IACAL,MAEAA,IACAK,KAEF3Z,EAAO4a,6BAA6BN,GAChCxC,EAAMb,UAAYqD,EAAepE,OAASkD,EAAKuB,cACjDL,EAAepE,KAAOkD,EAAKqB,WAC3B3C,EAAMd,UAAW,EACjBc,EAAMb,UAAW,GAGrB,QAASqF,KACP,GAAIC,GAAaf,EAAU,GACvBgB,EAAehB,EAAU,EAKzBpB,GAJAoC,IAAwC,MAAtBA,EAAazD,MAAgB1D,EAASkH,EAAWlV,MAAO,YAAa,UAAW,iBAAqBgO,EAASkH,EAAWxD,MAAO,MAAO,SAAW1D,EAASmH,EAAanV,MAAO,UAAW,iBACzMgO,EAAS4F,GAAiB,QAAS,cAG7B7B,EAAK4B,eAFL5B,EAAK0B,cAKP1B,EAAK4B,eAEhB,IAAIyB,IAAgBF,EAAWG,gBAAgBhgB,QAA8B,MAApB6f,EAAWxD,KAChE4D,EAA2BF,GAAoC,aAApB3E,EAAMpB,WAA0C,gBAAdyC,CACzD,YAApBhY,GAAIyb,aAAiD,SAApBzb,GAAIyb,aAA0B1E,EAAcQ,eAC7D,gBAAdS,IAAgCwD,GAA0C,cAAdxD,GAA4C,gBAAdA,GAA+BoC,EAAgBzD,EAAMrB,YAAkC,SAApBqB,EAAMrB,WACrKzW,EAAOgZ,oBAAqB,EAE5BjB,GAAc,GAAO,GAGL,gBAAdoB,GAA6C,kBAAdA,EACf,mBAAdA,EACFpB,IAEA/X,EAAOgZ,oBAAqB,EAG1BnB,EAASyC,EAAepE,OAA6B,MAApB4B,EAAMrB,YAClB,MAAnBwE,EACFjb,EAAOgZ,oBAAqB,EAE5BjB,KAKR4B,IACAlO,IAEF,QAASoR,KACP,KAAO/E,EAAM5B,OAASkD,EAAKC,WACzBC,GAEF,IAAImD,GAA6B,mBAAdtD,CACK,YAApBhY,GAAIyb,YACDH,GACH1E,IAGG0E,IACC5E,EAASC,EAAM5B,OAAS/U,GAAIyW,wBAC9BzW,GAAIyW,wBAAyB,EAC7BG,IACA5W,GAAIyW,wBAAyB,GAE7BG,KAINuB,IACAK,IAEF,QAASmD,KAIP,GAH2B,gBAAvB5E,EAAc7Q,MAA0ByQ,EAAM5B,OAASkD,EAAK0B,eAAiBzF,EAAS6C,EAAca,MAAO,MAAO,UACpHb,EAAc7Q,KAAO,WAEI,gBAAvB6Q,EAAc7Q,MAA0ByQ,EAAM5B,OAASkD,EAAK0B,cAAe,CAC7E,GAAIyB,GAAaf,EAAU,EACJ,MAAnBe,EAAWxD,OACbb,EAAc7Q,KAAO,WAMzB,GAHI0T,MAAkC7C,EAAcQ,gBAAmB8B,EAAc1C,EAAM5B,OAAwB,gBAAdiD,GAAoD,OAApBrB,EAAMrB,WAA0C,OAApBqB,EAAMrB,WAAsC,cAAd0C,IAA8BhY,GAAI8W,mBAAqC,gBAAdkB,GAA+B9D,EAASyC,EAAMrB,WAAY,MAAO,MAAO,QAAS,MAAO,SAC9UsB,IAEED,EAAMd,WAAac,EAAMb,SAAU,CACrC,GAA2B,gBAAvBiB,EAAc7Q,MAAiD,UAAvB6Q,EAAca,KAKxD,MAJA/Y,GAAOgZ,oBAAqB,EAC5BW,IACA3Z,EAAOgZ,oBAAqB,OAC5BlB,EAAMb,UAAW,EAGjBc,KACAD,EAAMd,UAAW,EAGrB,GAAIc,EAAMhB,SACR,GAAKgB,EAAMf,YAAsC,gBAAvBmB,EAAc7Q,MAAiD,SAAvB6Q,EAAca,KAEzE,CACL,KAAOjB,EAAM5B,OAASkD,EAAKC,WACzBC,GAEFxB,GAAMhB,UAAW,EACjBgB,EAAMf,YAAa,MANnBe,GAAMf,YAAa,CASvB,IAA2B,gBAAvBmB,EAAc7Q,OAAkD,SAAvB6Q,EAAca,MAA2C,YAAvBb,EAAca,MAAsBjB,EAAMZ,mBASvH,MARAa,MACID,EAAMV,WAAajW,GAAI4b,gBACzB5C,IACArC,EAAMV,WAAY,GAEpBuC,IACA7B,EAAMX,SAAU,OAChBW,EAAMZ,mBAAoB,EA6B5B,IA1B2B,gBAAvBgB,EAAc7Q,MAAiD,aAAvB6Q,EAAca,QACpD1D,EAASyC,EAAMrB,WAAY,IAAK,OAAUzW,EAAOqW,uBAAyBhB,EAASyC,EAAMrB,WAAY,IAAK,IAAK,IAAK,IAAK,SACtHzW,EAAOgd,wBAA2B9E,EAAcwE,gBAAgBhgB,SACnEqb,IACAA,GAAc,KAGA,gBAAdoB,GAA6C,YAAdA,EACf,gBAAdA,GAA+B9D,EAASyC,EAAMrB,WAAY,MAAO,MAAO,MAAO,SAAU,SAAU,UACrGzW,EAAOgZ,oBAAqB,EACL,gBAAdG,GAAmD,YAApBrB,EAAMrB,WAA8C,WAAnBwE,EACzEjb,EAAOgZ,oBAAqB,EAE5BjB,IAEqB,gBAAdoB,GAAmD,MAApBrB,EAAMrB,UAC9CzW,EAAOgZ,oBAAqB,GAClBlB,EAAMjB,kBAAoB2D,EAAc1C,EAAM5B,QAAS2B,EAASC,EAAM5B,QAChF6B,MAGc,aAAdoB,GAA0C,kBAAdA,GAA+C,cAAdA,GAA2C,gBAAdA,KACvF0B,KACHrC,KAGuB,gBAAvBN,EAAc7Q,MAA0BgO,EAAS6C,EAAca,MAAO,WAAY,MAAO,QAG3F,MAFAY,UACA7B,EAAMpB,UAAYwB,EAAca,KAoClC,IAjCAkE,EAAS,OACS,iBAAd9D,EAC2B,gBAAvBjB,EAAc7Q,MAA0BgO,EAAS6C,EAAca,MAAO,OAAQ,QAAS,YAGnE,WAApB5X,GAAIyb,aAAgD,eAApBzb,GAAIyb,aAAqD,SAApBzb,GAAIyb,aAA0B1E,EAAcQ,eACnHuE,EAAS,WAETA,EAAS,QACTjd,EAAOgZ,oBAAqB,GAN9BiE,EAAS,UASY,iBAAd9D,GAAgCrB,EAAM5B,OAASkD,EAAK4B,eAC7DiC,EAAS,UACc,iBAAd9D,GAAgCqB,EAAc1C,EAAM5B,MAC7D+G,EAAS,QACc,cAAd9D,EACT8D,EAAS,UACc,gBAAd9D,GAA6C,YAAdA,GAAgD,MAApBrB,EAAMrB,WAAwC,aAAnBwE,EAC/FgC,EAAS,QACc,mBAAd9D,EACT8D,EAAS,UACc,gBAAd9D,IACTnZ,EAAOgZ,oBAAqB,EAC5BiE,EAAS,WAEgB,gBAAvB/E,EAAc7Q,MAA0BgO,EAAS6C,EAAca,KAAMgD,EAAUC,gBAAsC,MAApBlE,EAAMrB,YAEvGwG,EADsB,SAApBnF,EAAMrB,WAA4C,WAApBqB,EAAMrB,UAC7B,QAEA,WAGc,gBAAvByB,EAAc7Q,MAA0BgO,EAAS6C,EAAca,MAAO,OAAQ,QAAS,YACzF,GAAkB,iBAAdI,GAAoD,WAApBhY,GAAIyb,aAAgD,eAApBzb,GAAIyb,aAAqD,SAApBzb,GAAIyb,aAA0B1E,EAAcQ,eACnJX,QACK,CACL/X,EAAOuV,MAAK,EACZ,IAAI6F,GAAOpb,EAAO6Y,YACE,OAAhBuC,EAAKnB,QACPlC,IAEF/X,EAAOgZ,oBAAqB,MAEV,YAAXiE,EACS,gBAAd9D,GAA+BoC,EAAgBzD,EAAMrB,WACvDzW,EAAOgZ,oBAAqB,EACL,gBAAdG,EACU,kBAAdA,GAA0D,gBAAvBjB,EAAc7Q,MAA0BgO,EAAS6C,EAAca,MAAO,MAAO,MAAO,WAAmC,MAApBjB,EAAMrB,YACpH,gBAAvByB,EAAc7Q,MAAiD,OAAvB6Q,EAAca,MAAqC,SAApBjB,EAAMrB,UAC/EzW,EAAOgZ,oBAAqB,EAE5BjB,KAG4B,gBAAvBG,EAAc7Q,MAA0BgO,EAAS6C,EAAca,KAAMgD,EAAUC,gBAAsC,MAApBlE,EAAMrB,WAChHsB,IAEOD,EAAMjB,iBAAmBgB,EAASC,EAAM5B,OAA6B,MAApB4B,EAAMrB,WAAwC,MAAnBwE,EACrFlD,IACoB,UAAXkF,IACTjd,EAAOgZ,oBAAqB,EAE9BW,KACA7B,EAAMpB,UAAYwB,EAAca,KACL,gBAAvBb,EAAc7Q,MAAiD,OAAvB6Q,EAAca,OACxDjB,EAAMd,UAAW,GAEQ,gBAAvBkB,EAAc7Q,MAAiD,OAAvB6Q,EAAca,OACxDjB,EAAMhB,UAAW,GAGrB,QAASoG,KAIP,IAHInC,MACF/a,EAAOgZ,oBAAqB,GAEvBlB,EAAM5B,OAASkD,EAAKC,YAAcvB,EAAMhB,WAAagB,EAAMd,UAChEsC,GAEFK,KAEF,QAASwD,KACHpC,IACF/a,EAAOgZ,oBAAqB,EACL,gBAAdG,GAA6C,YAAdA,EACxCnZ,EAAOgZ,oBAAqB,EACL,aAAdG,GAA0C,kBAAdA,GAA+C,cAAdA,GAA2C,gBAAdA,EAC9F0B,KACHrC,IAGFT,IAEF4B,IAEF,QAASyD,KACHrC,IACAjD,EAAMnB,wBACRmB,EAAMlB,wBAAyB,GAEjC5W,EAAOgZ,oBAAqB,EAC5BW,IACA3Z,EAAOgZ,oBAAqB,EAE9B,QAASqE,KACP,MAAIvF,GAAMnB,uBACJ6D,EAAc1C,EAAMtB,OAAON,QAC7B4B,EAAMlB,wBAAyB,GAEjC+C,SACI7B,EAAMlB,wBACRkB,EAAMlB,wBAAyB,EAC/BmB,GAAc,GAAO,KAErB/X,EAAOgZ,oBAAqB,EACxB7X,GAAI4Y,aACNvB,QAKNmB,SACI7B,EAAM5B,OAASkD,EAAK0B,eAAkBhD,EAAM5B,OAASkD,EAAKC,WAAavB,EAAMtB,OAAON,OAASkD,EAAK0B,eAChGhD,EAAM5B,OAASkD,EAAKC,WACtBC,IAEFvB,MAEA/X,EAAOgZ,oBAAqB,EACxB7X,GAAI4Y,aACNvB,OAIN,QAAS8E,KAEP,GADIvC,IACc,gBAAd5B,GAA+BoC,EAAgBzD,EAAMrB,WAGvD,MAFAzW,GAAOgZ,oBAAqB,MAC5BW,IAGF,IAA2B,MAAvBzB,EAAca,MAA8B,WAAdI,EAEhC,WADAQ,IAGF,IAA2B,MAAvBzB,EAAca,MAAgBjB,EAAMX,QAMtC,MALAW,GAAMV,WAAY,EAClB3L,IACAkO,IACA5B,SACAD,EAAMX,SAAU,EAGlB,IAA2B,OAAvBe,EAAca,KAEhB,WADAY,IAGgB,iBAAdR,GACFX,GAEF,IAAI+E,IAAe,EACfC,GAAc,CACdnI,GAAS6C,EAAca,MAAO,KAAM,KAAM,IAAK,OAAU1D,EAAS6C,EAAca,MAAO,IAAK,QAAU1D,EAAS8D,GAAY,iBAAkB,gBAAiB,YAAa,iBAAmB9D,EAASyC,EAAMrB,UAAWsF,EAAUC,gBAAsC,MAApBlE,EAAMrB,YAC5P8G,GAAe,EACfC,GAAc,GACVtF,EAAcQ,gBAA0C,OAAvBR,EAAca,MAAwC,OAAvBb,EAAca,MAChFhB,GAAc,GAAO,GAEC,MAApBD,EAAMrB,WAAqB+D,EAAc1C,EAAM5B,QACjDqH,GAAe,GAEC,gBAAdpE,EACFoE,GAAe,EACQ,gBAAdpE,EACToE,IAAqC,MAApBzF,EAAMrB,YAA6C,OAAvByB,EAAca,MAAwC,OAAvBb,EAAca,OACnE,gBAAdI,IACToE,EAAelI,EAAS6C,EAAca,MAAO,KAAM,IAAK,KAAM,OAAS1D,EAASyC,EAAMrB,WAAY,KAAM,IAAK,KAAM,MAC/GpB,EAAS6C,EAAca,MAAO,IAAK,OAAS1D,EAASyC,EAAMrB,WAAY,KAAM,SAC/E+G,GAAc,IAGb1F,EAAM5B,OAASkD,EAAK4B,gBAAkBlD,EAAM5B,OAASkD,EAAKC,WAAmC,MAApBvB,EAAMrB,WAAyC,MAApBqB,EAAMrB,WAC7GsB,KAE8B,MAAvBG,EAAca,KACK,IAAxBjB,EAAMP,cACRgG,GAAe,EAEfzF,EAAMP,eAAiB,EAEO,MAAvBW,EAAca,KACvBjB,EAAMP,eAAiB,EACS,MAAvBW,EAAca,MAA8B,gBAAdI,GAAmD,aAApBrB,EAAMrB,YAC5E8G,GAAe;AACfC,GAAc,GAEhBxd,EAAOgZ,mBAAqBhZ,EAAOgZ,oBAAsBuE,EACzD5D,IACA3Z,EAAOgZ,mBAAqBwE,EAE9B,QAASC,KACP,GAAIzd,EAAO6Z,IAOT,MANA7Z,GAAO8Z,cAAc5B,QACjBA,EAAcwF,YAAuD,QAAzCxF,EAAcwF,WAAqB,WAC5Dvc,GAAIwc,kBACP3d,EAAO6Z,KAAM,IAKnB,IAAI3B,EAAcwF,WAOhB,MANA3F,IAAc,GAAO,GACrB4B,IAC6C,UAAzCzB,EAAcwF,WAAqB,WACrC1d,EAAO6Z,KAAM,OAEf9B,IAAc,GAAO,EAGvB,KAAK6F,EAAMC,QAAQjW,KAAKsQ,EAAca,QAAUb,EAAcQ,eAI5D,MAHA1Y,GAAOgZ,oBAAqB,EAC5BW,SACA3Z,EAAOgZ,oBAAqB,EAG9B,IACIxa,GADA2c,EAAQ/C,EAAeF,EAAca,MAErC+E,GAAU,EACVC,GAAW,EACXC,EAAa9F,EAAcuB,kBAC3BwE,EAAmBD,EAAWthB,MAUlC,KATAqb,GAAc,GAAO,GACjBoD,EAAMze,OAAS,IACbwe,EAAqBC,EAAMnN,MAAM,GAAI,KACvC8P,GAAU,EACDzC,EAAyBF,EAAMnN,MAAM,GAAIgQ,KAClDD,GAAW,IAGfpE,EAAYwB,EAAM,IACb3c,EAAI,EAAGA,EAAI2c,EAAMze,OAAQ8B,IAC5BuZ,GAAc,GAAO,GACjB+F,EACFnE,EAAY,IAAMlE,EAAM0F,EAAM3c,KACrBuf,GAAY5C,EAAM3c,GAAG9B,OAASuhB,EACvCtE,EAAYwB,EAAM3c,GAAG+Z,UAAU0F,IAE/Bje,EAAOka,UAAUiB,EAAM3c,GAG3BuZ,IAAc,GAAO,GAEvB,QAASmG,KACHhG,EAAcQ,eAChBX,GAAc,GAAO,GAErB/X,EAAOuV,MAAK,GAEdvV,EAAOgZ,oBAAqB,EAC5BW,IACA5B,GAAc,GAAO,GAEvB,QAASoG,KACHpD,IACc,gBAAd5B,GAA+BoC,EAAgBzD,EAAMrB,WACvDzW,EAAOgZ,oBAAqB,EAE5BR,EAAoD,MAApBV,EAAMrB,WAAqBtV,GAAIid,uBAEjEzE,IAEF,QAAS0E,KACP1E,IAC0D,OAAtDzB,EAAca,KAAKb,EAAca,KAAKrc,OAAS,IACjDqb,IAGJ,QAASuG,KACP,KAAOxG,EAAM5B,OAASkD,EAAKC,WACzBC,IApzBJ,GAAItZ,GAEA2b,EACAI,EACA7D,EACAiB,EACA8B,EACAsD,EACAzG,EACAwC,EACAD,EACA4C,EACA9E,GACAhX,GAZAya,MAaA4C,GAAmB,EAqFvB,KApFArG,IACEsG,cAAiB5C,EACjB6C,YAAetC,EACfuC,eAAkBrC,EAClBsC,aAAgB/B,EAChBgC,QAAW/B,EACXgC,YAAehC,EACfiC,aAAgB7B,EAChB8B,UAAa7B,EACb8B,UAAa7B,EACb8B,YAAe5B,EACf6B,SAAY9B,EACZ+B,iBAAoB3B,EACpB4B,WAAcnB,EACdoB,OAAUnB,EACVoB,WAAclB,EACdmB,OAAUlB,GAgCZ1I,EAAUA,EAAUA,KACpBzU,MACmClD,SAA/B2X,EAAQ6J,qBACVte,GAAIyb,YAAchH,EAAQ6J,mBAAqB,SAAW,YAE5Dte,GAAIyb,YAAchH,EAAQgH,YAAchH,EAAQgH,YAAezb,GAAIyb,YAAczb,GAAIyb,YAAc,WAC3E,kBAApBzb,GAAIyb,cACNzb,GAAIyb,YAAc,UAEpBzb,GAAIue,YAAc9J,EAAQ8J,YAAcC,SAAS/J,EAAQ8J,YAAa,IAAM,EAC5Eve,GAAIye,YAAchK,EAAQgK,YAAchK,EAAQgK,YAAc,IAC9Dze,GAAI0e,IAAMjK,EAAQiK,IAAMjK,EAAQiK,IAAM,KACtC1e,GAAI8W,kBAAmDha,SAA9B2X,EAAQqC,mBAAmC,EAAOrC,EAAQqC,kBACnF9W,GAAIid,sBAA2DngB,SAAlC2X,EAAQwI,uBAAuC,EAAQxI,EAAQwI,sBAC5Fjd,GAAI6W,sBAA2D/Z,SAAlC2X,EAAQoC,sBAAuC,EAAI2H,SAAS/J,EAAQoC,sBAAuB,IACxH7W,GAAI8a,eAA6Che,SAA3B2X,EAAQqG,gBAAgC,EAAQrG,EAAQqG,eAC9E9a,GAAIkb,qBAAyDpe,SAAjC2X,EAAQyG,sBAAsC,EAAQzG,EAAQyG,qBAC1Flb,GAAI4b,aAAyC9e,SAAzB2X,EAAQmH,cAA8B,EAAQnH,EAAQmH,aAC1E5b,GAAI+a,0BAAmEje,SAAtC2X,EAAQsG,2BAA2C,EAAQtG,EAAQsG,0BACpG/a,GAAIyW,uBAA6D3Z,SAAnC2X,EAAQgC,wBAAwC,EAAQhC,EAAQgC,uBAC9FzW,GAAIgb,yBAAiEle,SAArC2X,EAAQuG,0BAA0C,EAAOvG,EAAQuG,yBACjGhb,GAAI2e,iBAAiD7hB,SAA7B2X,EAAQkK,kBAAkC,EAAQlK,EAAQkK,iBAClF3e,GAAIwX,iBAAiD1a,SAA7B2X,EAAQ+C,iBAAkC,EAAIgH,SAAS/J,EAAQ+C,iBAAkB,IACzGxX,GAAI4e,IAAuB9hB,SAAhB2X,EAAQmK,KAAqB,EAAQnK,EAAQmK,IACxD5e,GAAI6e,iBAAiD/hB,SAA7B2X,EAAQoK,kBAAkC,EAAQpK,EAAQoK,iBAClF7e,GAAI4Y,YAAuC9b,SAAxB2X,EAAQmE,aAA6B,EAAQnE,EAAQmE,YACxE5Y,GAAIwc,gBAA+C1f,SAA5B2X,EAAQ+H,iBAAiC,EAAQ/H,EAAQ+H,gBAC5Exc,GAAI4b,eACN5b,GAAI+a,2BAA4B,GAE9BtG,EAAQqK,mBACV9e,GAAIye,YAAc,IAClBze,GAAIue,YAAc,GAEpBve,GAAI0e,IAAM1e,GAAI0e,IAAI/b,QAAQ,MAAO,MAAMA,QAAQ,MAAO,MACtDya,EAAgB,GACTpd,GAAIue,YAAc,GACvBnB,GAAiBpd,GAAIye,YACrBze,GAAIue,aAAe,CAErB,IAAIQ,IAAkB,CACtB,IAAIvK,GAAkBA,EAAejZ,OAAQ,CAC3C,KAAmD,MAA3CiZ,EAAepM,OAAO2W,KAAuE,MAA3CvK,EAAepM,OAAO2W,KAC9E1B,IAAoB7I,EAAepM,OAAO2W,IAC1CA,IAAmB,CAErBvK,GAAiBA,EAAe4C,UAAU2H,IAE5C/G,EAAY,iBACZ8B,EAAiB,GACjBjb,EAAS,GAAImgB,GAAO5B,EAAeC,IACnCxe,EAAO6Z,IAAM1Y,GAAIwc,gBACjBtD,KACAD,EAAShB,EAAK4B,gBACdne,KAAKkZ,SAAW,WACd,GAAI0B,GACA2I,CAIJ,KAHArE,EAAY,GAAIsE,GAAU1K,EAAgBxU,GAAKod,GAC/C3C,GAASG,EAAUrU,WACnBiU,EAAY,EACLlE,EAAc+D,KAAa,CAChC,IAAK,GAAI7d,GAAI,EAAGA,EAAI8Z,EAAYiF,gBAAgBhgB,OAAQiB,IACtD6Z,EAAaC,EAAYiF,gBAAgB/e,GAE3C6Z,GAAaC,GACbwD,EAAiBnD,EAAMrB,UACvB0C,EAAY1B,EAAYpQ,KACxByQ,EAAMrB,UAAYgB,EAAYsB,KAC9B4C,GAAa,EASf,MAPAyE,GAAapgB,EAAOsgB,WAChBnf,GAAI6e,mBACNI,GAAc,MAED,MAAXjf,GAAI0e,MACNO,EAAaA,EAAWtc,QAAQ,QAAS3C,GAAI0e,MAExCO,GA4qBX,QAASG,GAAW/J,GAClB,GAAIgK,GAAmB,EACnBC,EAAgB,GAChBC,KACAC,GAAS,CACb9jB,MAAK6c,WAAa,SAASkH,GACzBJ,EAAmBhK,EAAOqK,iBAAmBD,EAAQpK,EAAOsK,cAC5DL,EAAgBG,GAElB/jB,KAAKic,oBAAsB,WACzB,MAAO0H,IAET3jB,KAAKkkB,SAAW,WACd,MAAOJ,IAET9jB,KAAKod,KAAO,WACV,MAAKpd,MAAK8jB,OAGD,KAFAD,EAAOA,EAAOhkB,OAAS,IAKlCG,KAAKa,KAAO,SAASsjB,GACnBN,EAAOhjB,KAAKsjB,GACZR,GAAoBQ,EAAMtkB,OAC1BikB,GAAS,GAEX9jB,KAAKuI,IAAM,WACT,GAAItE,GAAO,IAMX,OALK6f,KACH7f,EAAO4f,EAAOtb,MACdob,GAAoB1f,EAAKpE,OACzBikB,EAA2B,IAAlBD,EAAOhkB,QAEXoE,GAETjE,KAAKokB,cAAgB,WACfR,EAAgB,IAClBA,GAAiB,EACjBD,GAAoBhK,EAAOsK,gBAG/BjkB,KAAK0Y,KAAO,WACV,KAAuB,MAAhB1Y,KAAKod,QAAgB,CACfyG,EAAOtb,KAClBob,IAAoB,EAEtBG,EAA2B,IAAlBD,EAAOhkB,QAElBG,KAAK2I,SAAW,WACd,GAAIgG,GAAS,EAOb,OANK3O,MAAK8jB,SACJF,GAAiB,IACnBjV,EAASgL,EAAO0K,aAAaT,IAE/BjV,GAAUkV,EAAOS,KAAK,KAEjB3V,GAGX,QAAS2U,GAAO5B,EAAeC,GAC7BA,EAAmBA,GAAoB,GACvC3hB,KAAKqkB,cAAgB1C,GACrB3hB,KAAKgkB,iBAAmBrC,EAAiB9hB,OACzCG,KAAKikB,cAAgBvC,EAAc7hB,OACnCG,KAAKgd,KAAM,CACX,IAAIsB,KACJte,MAAK2hB,iBAAmBA,EACxB3hB,KAAK0hB,cAAgBA,EACrB1hB,KAAKmd,cAAgB,KACrBnd,KAAKgc,aAAe,KACpBhc,KAAKmc,oBAAqB,EAC1Bnc,KAAKukB,eAAiB,WACpBvkB,KAAKmd,cAAgBnd,KAAKgc,aAC1Bhc,KAAKgc,aAAe,GAAI0H,GAAW1jB,MACnCse,EAAMzd,KAAKb,KAAKgc,eAElBhc,KAAKukB,iBACLvkB,KAAKya,gBAAkB,WACrB,MAAO6D,GAAMze,QAEfG,KAAK0c,aAAe,SAASN,GAC3B,MAA+B,KAA3Bpc,KAAKya,mBAA2Bza,KAAKwZ,sBAChC,EAEL4C,IAAkBpc,KAAKwZ,sBACpBxZ,KAAKgd,KACRhd,KAAKukB,kBAEA,IAEF,GAETvkB,KAAKyjB,SAAW,WACd,GAAIF,GAAajF,EAAMgG,KAAK,MAAMrd,QAAQ,cAAe,GACzD,OAAOsc,IAETvjB,KAAK6c,WAAa,SAASkH,GACzB,GAAIzF,EAAMze,OAAS,EAAG,CACpB,KAAOkkB,GAAS/jB,KAAKqkB,aAAaxkB,QAChCG,KAAKqkB,aAAaxjB,KAAKb,KAAKqkB,aAAarkB,KAAKqkB,aAAaxkB,OAAS,GAAKG,KAAK0hB,cAGhF,OADA1hB,MAAKgc,aAAaa,WAAWkH,IACtB,EAGT,MADA/jB,MAAKgc,aAAaa,WAAW,IACtB,GAET7c,KAAKid,cAAgB,SAAS3F,GAC5B,IAAK,GAAIkN,GAAI,EAAGA,EAAIlN,EAAMuD,SAAU2J,IAClCxkB,KAAKukB,gBAEPvkB,MAAKgc,aAAanb,KAAKyW,EAAMsF,mBAC7B5c,KAAKgc,aAAanb,KAAKyW,EAAM4E,MAC7Blc,KAAKmc,oBAAqB,GAE5Bnc,KAAKqd,UAAY,SAASN,GACxB/c,KAAKykB,yBACLzkB,KAAKgc,aAAanb,KAAKkc,IAEzB/c,KAAKykB,uBAAyB,WACxBzkB,KAAKmc,qBAAuBnc,KAAKwZ,sBACnCxZ,KAAKgc,aAAanb,KAAK,KAEzBb,KAAKmc,oBAAqB,GAE5Bnc,KAAK+d,6BAA+B,SAAS2G,GAC3C,IAAIA,EAAM1K,iBAAmB0K,EAAMrL,OAASkD,EAAKsB,gBAAkB6G,EAAMrL,OAASkD,EAAKuB,YAMvF,IAHA,GAAIe,GAAQ6F,EAAMlK,iBAEdmK,EAAgBrG,EAAMze,OACX8kB,EAAR9F,GACLP,EAAMO,GAAOuF,gBACbvF,KAGJ7e,KAAK0Y,KAAO,SAASkM,GAGnB,IAFAA,EAAiCxjB,SAAjBwjB,GAA8B,EAAQA,EACtD5kB,KAAKgc,aAAatD,KAAKgJ,EAAeC,GAC/BiD,GAAgBtG,EAAMze,OAAS,GAAKG,KAAKgc,aAAakI,YAC3D5F,EAAM/V,MACNvI,KAAKgc,aAAesC,EAAMA,EAAMze,OAAS,GACzCG,KAAKgc,aAAatD,MAEpB1Y,MAAKmd,cAAgBmB,EAAMze,OAAS,EAAIye,EAAMA,EAAMze,OAAS,GAAK,MAEpEG,KAAKwZ,mBAAqB,WACxB,MAAOxZ,MAAKgc,aAAakI,YAE3BlkB,KAAKmgB,qBAAuB,WAC1B,GAAIngB,KAAKwZ,qBAAsB,CAC7B,GAAqB,IAAjB8E,EAAMze,OACR,OAAO,CAET,IAAI0e,GAAOD,EAAMA,EAAMze,OAAS,EAChC,OAAO0e,GAAK2F,WAEd,OAAO,GAaX,QAASV,GAAUW,EAAOU,EAAMnD,GA0D9B,QAASoD,GAAe5I,GACtB,IAAKA,EAAK9U,MAAM2d,GACd,MAAO,KAET,IAAIlE,KACJmE,GAAkBnd,UAAY,CAE9B,KADA,GAAIod,GAAkBD,EAAkBld,KAAKoU,GACtC+I,GACLpE,EAAWoE,EAAgB,IAAMA,EAAgB,GACjDA,EAAkBD,EAAkBld,KAAKoU,EAE3C,OAAO2E,GAET,QAASqE,KACP,GACIC,GACAC,IAGJ,IAFAC,EAAa,EACbC,EAA0B,GACtBC,GAAcC,EAChB,OAAQ,GAAI,SAEd,IAAIC,EAEFA,GADE1G,EAAOlf,OACIkf,EAAOA,EAAOlf,OAAS,GAEvB,GAAI6lB,GAAM,iBAAkB,IAE3C,IAAI9N,GAAIuM,EAAMzX,OAAO6Y,EAErB,KADAA,GAAc,EACP/M,EAASZ,EAAG+N,IAAa,CAS9B,GARI5E,EAAMC,QAAQjW,KAAK6M,IACT,OAANA,GAA+C,OAAjCuM,EAAMzX,OAAO6Y,EAAa,MAC5CF,GAAc,EACdD,MAGFA,EAAwBvkB,KAAK+W,GAE3B2N,GAAcC,EAChB,OAAQ,GAAI,SAEd5N,GAAIuM,EAAMzX,OAAO6Y,GACjBA,GAAc,EAKhB,GAHIH,EAAwBvlB,SAC1BylB,EAA0BF,EAAwBd,KAAK,KAErDsB,EAAM7a,KAAK6M,GAAI,CACjB,GAAIiO,IAAgB,EAChBC,GAAU,EACVC,EAAcH,CAWlB,KAVU,MAANhO,GAA0B4N,EAAbD,GAA6B,OAAOxa,KAAKoZ,EAAMzX,OAAO6Y,KACrEM,GAAgB,EAChBC,GAAU,EACVlO,GAAKuM,EAAMzX,OAAO6Y,GAClBA,GAAc,EACdQ,EAAcC,IAEdpO,EAAI,GACJ2N,GAAc,GAEIC,EAAbD,GAA6BQ,EAAYhb,KAAKoZ,EAAMzX,OAAO6Y,KAChE3N,GAAKuM,EAAMzX,OAAO6Y,GAClBA,GAAc,EACVM,GAA8BL,EAAbD,GAA0D,MAA7BpB,EAAMzX,OAAO6Y,KAC7D3N,GAAKuM,EAAMzX,OAAO6Y,GAClBA,GAAc,EACdM,GAAgB,GAEdC,GAAwBN,EAAbD,GAA6B,OAAOxa,KAAKoZ,EAAMzX,OAAO6Y,MACnE3N,GAAKuM,EAAMzX,OAAO6Y,GAClBA,GAAc,EACGC,EAAbD,GAA6B,OAAOxa,KAAKoZ,EAAMzX,OAAO6Y,MACxD3N,GAAKuM,EAAMzX,OAAO6Y,GAClBA,GAAc,GAEhBO,GAAU,EACVD,GAAgB,EAGpB,QAAQjO,EAAG,WAEb,GAAImJ,EAAMkF,kBAAkB9B,EAAM+B,WAAWX,EAAa,IAAK,CAC7D,GAAiBC,EAAbD,EACF,KAAOxE,EAAMoF,iBAAiBhC,EAAM+B,WAAWX,MAC7C3N,GAAKuM,EAAMzX,OAAO6Y,GAClBA,GAAc,EACVA,IAAeC,KAKvB,MAA0B,WAApBC,EAAWjb,MAA0C,gBAApBib,EAAWjb,MAA0BgO,EAASiN,EAAWvJ,MAAO,MAAO,UAAa1D,EAASZ,EAAGwO,IAM/HxO,EAAG,WALC,OAANA,GACMA,EAAG,gBAELA,EAAG,eAIf,GAAU,MAANA,GAAmB,MAANA,EACf,OAAQA,EAAG,gBAEb,IAAU,MAANA,GAAmB,MAANA,EACf,OAAQA,EAAG,cAEb,IAAU,MAANA,EACF,OAAQA,EAAG,iBAEb,IAAU,MAANA,EACF,OAAQA,EAAG,eAEb,IAAU,MAANA,EACF,OAAQA,EAAG,eAEb,IAAU,MAANA,EAAW,CACb,GAAIyO,GAAU,EACd,IAAiC,MAA7BlC,EAAMzX,OAAO6Y,GAAqB,CACpCA,GAAc,EACde,EAAsBze,UAAY0d,CAClC,IAAIgB,GAAgBD,EAAsBxe,KAAKqc,EAC/CkC,GAAU,KAAOE,EAAc,GAC/BhB,GAAcgB,EAAc,GAAG1mB,MAC/B,IAAIghB,GAAaiE,EAAeuB,EAQhC,OAPIxF,IAAuC,UAAzBA,EAAmB,SACnC2F,EAA8B3e,UAAY0d,EAC1CgB,EAAgBC,EAA8B1e,KAAKqc,GACnDkC,GAAWE,EAAc,GACzBhB,GAAcgB,EAAc,GAAG1mB,QAEjCwmB,EAAUA,EAAQpf,QAAQ8Z,EAAM0F,UAAW,OACnCJ,EAAS,mBAAoBxF,GAEvC,GAAiC,MAA7BsD,EAAMzX,OAAO6Y,GAAqB,CACpCA,GAAc,EACdmB,EAAgB7e,UAAY0d,CAC5B,IAAIgB,GAAgBG,EAAgB5e,KAAKqc,EAGzC,OAFAkC,GAAU,KAAOE,EAAc,GAC/BhB,GAAcgB,EAAc,GAAG1mB,QACvBwmB,EAAS,eAGrB,GAAU,MAANzO,GAAmB,MAANA,GAAmB,MAANA,IAAqB,MAANA,GAAeiN,EAAK3B,KAAa,MAANtL,GAAauM,EAAMhT,MAAMoU,EAAa,GAAGne,MAAM,2HAAmJ,gBAApBqe,EAAWjb,MAA0BgO,EAASiN,EAAWvJ,MAAO,SAAU,OAAQ,QAAS,OAAQ,KAAM,SAAU,WAAmC,gBAApBuJ,EAAWjb,MAA8C,MAApBib,EAAWvJ,MAAgBuJ,EAAW9L,QAAqC,gBAA3B8L,EAAW9L,OAAOnP,MAA0BgO,EAASiN,EAAW9L,OAAOuC,MAAO,KAAM,QAAS,SAAa1D,EAASiN,EAAWjb,MAAO,aAAc,gBAAiB,iBAAkB,eAAgB,cAAe,YAAa,SAAU,eAAgB,cAAgB,CACvtB,GAAImc,GAAM/O,EACNgP,GAAM,EACNC,GAAmB,CAEvB,IADA1B,EAAmBvN,EACP,MAAR+O,EAEF,IADA,GAAIG,IAAgB,EACAtB,EAAbD,IAA+BqB,GAAOE,GAAiB3C,EAAMzX,OAAO6Y,KAAgBoB,KAAS5F,EAAMC,QAAQjW,KAAKoZ,EAAMzX,OAAO6Y,KAClIJ,GAAoBhB,EAAMzX,OAAO6Y,GAC5BqB,EAQHA,GAAM,GAPNA,EAAmC,OAA7BzC,EAAMzX,OAAO6Y,GACc,MAA7BpB,EAAMzX,OAAO6Y,GACfuB,GAAgB,EACsB,MAA7B3C,EAAMzX,OAAO6Y,KACtBuB,GAAgB,IAKpBvB,GAAc,MAEX,IAAIV,EAAK3B,KAAe,MAARyD,EAAa,CAClC,GAAII,GAAY,4HACZC,EAAS7C,EAAMhT,MAAMoU,EAAa,GAClCne,EAAQ2f,EAAUjf,KAAKkf,EAC3B,IAAI5f,GAAyB,IAAhBA,EAAMyX,MAAa,CAG9B,IAFA,GAAIoI,GAAU7f,EAAM,GAChBmF,EAAQ,EACLnF,GAAO,CACZ,GAAI8f,KAAa9f,EAAM,GACnB+f,EAAU/f,EAAM,GAChBggB,IAAoBhgB,EAAMA,EAAMvH,OAAS,IAAgC,aAAxBsnB,EAAQhW,MAAM,EAAG,EAQtE,IAPIgW,IAAYF,GAAYG,IACtBF,IACA3a,IAEAA,GAGO,GAATA,EACF,KAEFnF,GAAQ2f,EAAUjf,KAAKkf,GAEzB,GAAIK,GAAYjgB,EAAQA,EAAMyX,MAAQzX,EAAM,GAAGvH,OAASmnB,EAAOnnB,MAI/D,OAHAmnB,GAASA,EAAO7V,MAAM,EAAGkW,GACzB9B,GAAc8B,EAAY,EAC1BL,EAASA,EAAO/f,QAAQ8Z,EAAM0F,UAAW,OACjCO,EAAQ,kBAGlB,MAAoBxB,EAAbD,IAA8BqB,GAAQzC,EAAMzX,OAAO6Y,KAAgBoB,IAAgB,MAARA,IAAgB5F,EAAMC,QAAQjW,KAAKoZ,EAAMzX,OAAO6Y,QAC3HqB,GAAe,MAARD,IAAgB5F,EAAMC,QAAQjW,KAAKoZ,EAAMzX,OAAO6Y,KACzB,OAA7BpB,EAAMzX,OAAO6Y,IAAyD,OAAjCpB,EAAMzX,OAAO6Y,EAAa,KACjEA,GAAc,GAEhBJ,GAAoB,MAEpBA,GAAoBhB,EAAMzX,OAAO6Y,GAE/BqB,IAC+B,MAA7BzC,EAAMzX,OAAO6Y,IAAoD,MAA7BpB,EAAMzX,OAAO6Y,MACnDsB,GAAmB,GAErBD,GAAM,GAENA,EAAmC,OAA7BzC,EAAMzX,OAAO6Y,GAErBA,GAAc,CAMlB,IAHIsB,GAAoBhC,EAAK5B,mBAC3BkC,EAAmBmC,EAAgBnC,IAEpBK,EAAbD,GAA6BpB,EAAMzX,OAAO6Y,KAAgBoB,IAC5DxB,GAAoBwB,EACpBpB,GAAc,EACF,MAARoB,GACF,KAAoBnB,EAAbD,GAA6BxE,EAAMkF,kBAAkB9B,EAAM+B,WAAWX,KAC3EJ,GAAoBhB,EAAMzX,OAAO6Y,GACjCA,GAAc,CAIpB,QAAQJ,EAAkB,aAE5B,GAAU,MAANvN,EAAW,CACb,GAAsB,IAAlBmH,EAAOlf,QAA6C,MAA7BskB,EAAMzX,OAAO6Y,GAAqB,CAE3D,IADAJ,EAAmBvN,EACC4N,EAAbD,GAAmC,OAAN3N,GAClCA,EAAIuM,EAAMzX,OAAO6Y,GACjBJ,GAAoBvN,EACpB2N,GAAc,CAEhB,QAAQ7M,EAAKyM,GAAoB,KAAM,cAEzC,GAAIoC,GAAQ,GACZ,IAAiB/B,EAAbD,GAA6BK,EAAM7a,KAAKoZ,EAAMzX,OAAO6Y,IAAc,CACrE,EACE3N,GAAIuM,EAAMzX,OAAO6Y,GACjBgC,GAAS3P,EACT2N,GAAc,QACMC,EAAbD,GAAmC,MAAN3N,GAAmB,MAANA,EAQnD,OAPU,MAANA,IAAoD,MAA7BuM,EAAMzX,OAAO6Y,IAAwD,MAAjCpB,EAAMzX,OAAO6Y,EAAa,IACvFgC,GAAS,KACThC,GAAc,GACwB,MAA7BpB,EAAMzX,OAAO6Y,IAAwD,MAAjCpB,EAAMzX,OAAO6Y,EAAa,KACvEgC,GAAS,KACThC,GAAc,KAERgC,EAAO,YAGnB,GAAU,MAAN3P,IAA2C,MAA7BuM,EAAMzX,OAAO6Y,IAAoD,MAA7BpB,EAAMzX,OAAO6Y,IAAsB,CACvFiC,EAAiB3f,UAAY0d,EAAa,CAC1C,IAAIkC,GAAiBD,EAAiB1f,KAAKqc,EAC3C,IAAIsD,EAIF,MAHA7P,GAAI6P,EAAe,GACnBlC,GAAc3N,EAAE/X,OAAS,EACzB+X,EAAIA,EAAE3Q,QAAQ8Z,EAAM0F,UAAW,OACvB7O,EAAG,aAGf,GAAU,MAANA,GAAiE,SAApDuM,EAAMzI,UAAU6J,EAAa,EAAGA,EAAa,GAAe,CAG3E,IAFAA,GAAc,EACd3N,EAAI,QACImJ,EAAMC,QAAQjW,KAAKoZ,EAAMzX,OAAO6Y,KAA6BC,EAAbD,GACtD3N,GAAKuM,EAAMzX,OAAO6Y,GAClBA,GAGF,OADAmC,IAAkB,GACV9P,EAAG,cAEb,GAAU,MAANA,GAAa8P,GAAuE,QAApDvD,EAAMzI,UAAU6J,EAAa,EAAGA,EAAa,GAG/E,MAFAmC,IAAkB,EAClBnC,GAAc,GACN,MAAO,aAEjB,IAAU,MAAN3N,EACF,OAAQA,EAAG,SAEb,IAAIY,EAASZ,EAAG+P,GAAQ,CACtB,KAAoBnC,EAAbD,GAA6B/M,EAASZ,EAAIuM,EAAMzX,OAAO6Y,GAAaoC,KACzE/P,GAAKuM,EAAMzX,OAAO6Y,GAClBA,GAAc,IACVA,GAAcC,MAIpB,MAAU,MAAN5N,GACMA,EAAG,YACI,MAANA,GACDA,EAAG,cAEHA,EAAG,eAGf,OAAQA,EAAG,cAEb,QAAS0P,GAAgB3O,GAOvB,IANA,GAKIf,GALAgP,GAAM,EACNpL,EAAM,GACN/O,EAAM,EACNmb,EAAQ,GACR1d,EAAU,EAEP0c,GAAOna,EAAMkM,EAAE9Y,QAGpB,GAFA+X,EAAIe,EAAEjM,OAAOD,GACbA,IACIma,EAAK,CAEP,GADAA,GAAM,EACI,MAANhP,EACFgQ,EAAQjP,EAAE9U,OAAO4I,EAAK,GACtBA,GAAO,MACF,CAAA,GAAU,MAANmL,EAGJ,CACL4D,GAAO,KAAO5D,CACd,UAJAgQ,EAAQjP,EAAE9U,OAAO4I,EAAK,GACtBA,GAAO,EAKT,IAAKmb,EAAMxgB,MAAM,+BACf,MAAOuR,EAGT,IADAzO,EAAU4Y,SAAS8E,EAAO,IACtB1d,GAAW,GAAkB,GAAVA,EAAgB,CAEnCsR,GADQ,MAAN5D,EACK,MAAQgQ,EAER,MAAQA,CAEjB,UACK,GAAgB,KAAZ1d,GAAgC,KAAZA,GAAgC,KAAZA,EACjDsR,GAAO,KAAOqM,OAAOC,aAAa5d,OAC7B,CAAA,GAAU,MAAN0N,GAAa1N,EAAU,KAAmB,KAAXA,EACxC,MAAOyO,EAEP6C,IAAOqM,OAAOC,aAAa5d,QAEd,OAAN0N,EACTgP,GAAM,EAENpL,GAAO5D,CAGX,OAAO4D,GArZT,GAAImK,GAAa,SAAUlgB,MAAM,IAC7BmgB,EAAQ,QACRI,EAAY,2BACZ2B,EAAQ,2IAAkJliB,MAAM,IACpKzF,MAAKmf,cAAgB,wGAAwG1Z,MAAM,IACnI,IAOI4f,GACAC,EACAoC,EACA3I,EACAwG,EACAC,EAZAY,EAAiBpmB,KAAKmf,cAAczW,QAAQ,KAAM,KAAM,OAAQ,MAAO,MAAO,MAAO,QAAS,UAAW,SAAU,QAAS,QAAS,UACrI4d,EAAwB,0BACxBI,EAAkB,0BAClB3B,EAA2B,mCAC3BC,EAAoB,kBACpBwB,EAAgC,sDAChCgB,EAAmB,4CAOvBxnB,MAAK6K,SAAW,WACd2a,EAAerB,EAAMtkB,OACrB0lB,EAAa,EACbmC,GAAkB,EAClB3I,IAOA,KANA,GAAI9U,GACAmT,EACA2K,EACAC,EAAO,KACPC,KACAC,MACK9K,GAAsB,WAAdA,EAAK5S,MAAoB,CAGxC,IAFAud,EAAe7C,IACfjb,EAAO,GAAIyb,GAAMqC,EAAa,GAAIA,EAAa,GAAI1C,EAAYC,GAC1C,eAAdrb,EAAKO,MAAuC,qBAAdP,EAAKO,MAA6C,eAAdP,EAAKO,MAC1D,qBAAdP,EAAKO,OACPP,EAAK4W,WAAakH,EAAa,IAEjCG,EAASrnB,KAAKoJ,GACd8d,EAAe7C,IACfjb,EAAO,GAAIyb,GAAMqC,EAAa,GAAIA,EAAa,GAAI1C,EAAYC,EAE7D4C,GAASroB,SACXoK,EAAK4V,gBAAkBqI,EACvBA,MAEgB,mBAAdje,EAAKO,MAA2C,kBAAdP,EAAKO,MACzCP,EAAK0P,OAASyD,EACd6K,EAAWpnB,KAAKmnB,GAChBA,EAAO/d,IACiB,iBAAdA,EAAKO,MAAyC,gBAAdP,EAAKO,OAA4Bwd,IAAwB,MAAd/d,EAAKiS,MAA8B,MAAd8L,EAAK9L,MAAgC,MAAdjS,EAAKiS,MAA8B,MAAd8L,EAAK9L,MAAgC,MAAdjS,EAAKiS,MAA8B,MAAd8L,EAAK9L,QACvMjS,EAAK0P,OAASqO,EAAKrO,OACnBqO,EAAOC,EAAW1f,OAEpBwW,EAAOle,KAAKoJ,GACZmT,EAAOnT,EAET,MAAO8U,IAjmCX,GAAIgC,OACJ,SAAU9e,GACR,GACIkmB,GAA+B,m5BAC/BC,EAA0B,keAC1BC,EAA0B,GAAI3gB,QAAO,IAAMygB,EAA+B,KAC1EG,EAAqB,GAAI5gB,QAAO,IAAMygB,EAA+BC,EAA0B,IACrFnmB,GAAQ+e,QAAU,qBAChB/e,EAAQwkB,UAAY,2BACZxkB,EAAQgkB,kBAAoB,SAASsC,GAC3D,MAAW,IAAPA,EACc,KAATA,EACE,GAAPA,GACK,EACE,GAAPA,EACc,KAATA,EACE,IAAPA,GACK,EACFA,GAAQ,KAAQF,EAAwBtd,KAAK8c,OAAOC,aAAaS,KAEnDtmB,EAAQkkB,iBAAmB,SAASoC,GACzD,MAAW,IAAPA,EACc,KAATA,EACE,GAAPA,GACK,EACE,GAAPA,GACK,EACE,GAAPA,GACK,EACE,GAAPA,EACc,KAATA,EACE,IAAPA,GACK,EACFA,GAAQ,KAAQD,EAAmBvd,KAAK8c,OAAOC,aAAaS,MAEpExH,EAuBH,IAAIxE,IACF4B,eAAgB,iBAChB3B,UAAW,YACXyB,cAAe,gBACfP,aAAc,eACdG,eAAgB,iBAChBC,YAAa,cACbF,WAAY,cA89BV8H,EAAQ,SAASlb,EAAM0R,EAAMrB,EAAU+B,EAAmBvD,EAAMM,GAClE3Z,KAAKwK,KAAOA,EACZxK,KAAKkc,KAAOA,EACZlc,KAAK6f,mBACL7f,KAAK6a,SAAWA,GAAY,EAC5B7a,KAAK6b,eAAiBhB,EAAW,EACjC7a,KAAK4c,kBAAoBA,GAAqB,GAC9C5c,KAAK2Z,OAAS,KACd3Z,KAAK6gB,WAAa,KA2ZE,mBAAXpa,SAAyBA,OAAO8C,IACzC9C,OAAO,OAAS,WACd,OAAQoS,YAAaA,KAEK,mBAAZ5W,SAChBA,QAAQ4W,YAAcA,EACK,mBAAX2P,QAChBA,OAAO3P,YAAcA,EACM,mBAAXtZ,UAChBA,OAAOsZ,YAAcA,MAIzBnP,OAEArE,EAAUvF,gBAAgB,QAAS,EAAO,SAAS2oB,EAAWC,EAAWC,GACvE,GAAIC,GAAkBvjB,EAAUd,IAAI,oBAAoB8B,cAAcsiB,EAASzlB,GAAI,KAAM,KA0gBzF,OAzgBA,YACE,GAAI2lB,GAAW7oB,KAAe,SAC1B6oB,EAAW,WACb,GAAI3kB,IAAI,EACJ4kB,GAAI,EACJlR,KACAtU,EAAI,WACF,GAAIY,IACF6kB,MAAO,aACPC,MACAC,UACEC,MAAO,EACPC,WAAY,EACZC,OAAQ,EACRC,WAAY,EACZC,OAAQ,EACRC,gBAAiB,EACjBC,KAAM,EACNC,mBAAoB,EACpBC,KAAM,GACNC,MAAO,GACPC,SAAU,GACVC,UAAW,GACXC,IAAK,GACLC,WAAY,GACZC,UAAW,GACXC,IAAK,GACLC,IAAK,GACLC,eAAgB,GAChBC,WAAY,GACZC,IAAK,GACLC,IAAK,GACLC,IAAK,GACLC,IAAK,GACLC,gBAAiB,GACjBC,QAAS,EACTC,KAAM,GAERC,YACEC,EAAG,QACHC,EAAG,SACHC,EAAG,SACHC,EAAG,OACHC,GAAI,OACJC,GAAI,QACJC,GAAI,MACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,KAENC,cAAe,GAAI,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IACtMC,cAAe,SAAS7C,EAAGlR,EAAGtU,EAAGa,EAAGynB,EAAG7lB,EAAG8lB,GACxC,GAAI/qB,GAAIiF,EAAElG,OAAS,CACnB,QAAQ+rB,GACN,IAAK,GACH5rB,KAAK8rB,EAAIhD,EAAE7hB,QAAQ,YAAa,MAAMA,QAAQ,OAAQ,MAAMA,QAAQ,OAAQ,MAAMA,QAAQ,OAAQ,KAAKA,QAAQ,OAAQ,KAAKA,QAAQ,OAAQ,MAAMA,QAAQ,OAAQ,KAClK,MACF,KAAK,GACHjH,KAAK8rB,EAAIC,OAAOjD,EAChB,MACF,KAAK,GACH9oB,KAAK8rB,EAAI,IACT,MACF,KAAK,GACH9rB,KAAK8rB,GAAI,CACT,MACF,KAAK,GACH9rB,KAAK8rB,GAAI,CACT,MACF,KAAK,GACH,MAAO9rB,MAAK8rB,EAAI/lB,EAAEjF,EAAI,EACxB,KAAK,IACHd,KAAK8rB,IACL,MACF,KAAK,IACH9rB,KAAK8rB,EAAI/lB,EAAEjF,EAAI,EACf,MACF,KAAK,IACHd,KAAK8rB,GAAK/lB,EAAEjF,EAAI,GAAIiF,EAAEjF,GACtB,MACF,KAAK,IACHd,KAAK8rB,KAAQ9rB,KAAK8rB,EAAE/lB,EAAEjF,GAAG,IAAMiF,EAAEjF,GAAG,EACpC,MACF,KAAK,IACHd,KAAK8rB,EAAI/lB,EAAEjF,EAAI,GAAIiF,EAAEjF,EAAI,GAAGiF,EAAEjF,GAAG,IAAMiF,EAAEjF,GAAG,EAC5C,MACF,KAAK,IACHd,KAAK8rB,IACL,MACF,KAAK,IACH9rB,KAAK8rB,EAAI/lB,EAAEjF,EAAI,EACf,MACF,KAAK,IACHd,KAAK8rB,GAAK/lB,EAAEjF,GACZ,MACF,KAAK,IACHd,KAAK8rB,EAAI/lB,EAAEjF,EAAI,GAAIiF,EAAEjF,EAAI,GAAGD,KAAKkF,EAAEjF,MAGzCkrB,QACEC,EAAG,EACHnB,GAAI,EAAG,IACPoB,EAAG,EACHnB,GAAI,EAAG,IACPoB,EAAG,EACHnB,GAAI,EAAG,GACPoB,EAAG,EACHnB,IAAK,EAAG,IACRC,IAAK,EAAG,IACRmB,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJpB,IAAK,EAAG,IACRI,IAAK,EAAG,MACNiB,GAAI,KAAMtB,IAAK,EAAG,MACpBA,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,KAERN,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,KAERN,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,KAERN,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,MAERN,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,MAERN,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,MAERN,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,KAERN,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,KAERN,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,KAERN,IAAK,EAAG,GACRE,IAAK,EAAG,GACRC,IAAK,EAAG,GACRC,IAAK,EAAG,GACRE,IAAK,EAAG,KAERN,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,GACRE,IAAK,EAAG,KAERQ,EAAG,GACHnB,GAAI,EAAG,IACPO,IAAK,EAAG,IACRqB,GAAI,GACJC,GAAI,KAEJV,EAAG,EACHnB,GAAI,EAAG,IACPoB,EAAG,EACHnB,GAAI,EAAG,IACPoB,EAAG,EACHnB,GAAI,EAAG,GACPoB,EAAG,EACHnB,IAAK,EAAG,IACRC,IAAK,EAAG,IACRoB,GAAI,GACJC,GAAI,EACJC,GAAI,EACJpB,IAAK,EAAG,IACRI,IAAK,EAAG,IACRC,IAAK,EAAG,IACRmB,GAAI,KACFH,GAAI,EAAG,KACTtB,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,MAERJ,IAAK,EAAG,IACRE,IAAK,EAAG,MAERF,IAAK,EAAG,IACRE,IAAK,EAAG,MACND,IAAK,EAAG,MACVH,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,MAERF,IAAK,EAAG,IACRE,IAAK,EAAG,MAERF,IAAK,EAAG,IACRE,IAAK,EAAG,MAERN,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,MAERQ,EAAG,GACHnB,GAAI,EAAG,IACP6B,GAAI,KAEJV,EAAG,EACHnB,GAAI,EAAG,IACPoB,EAAG,EACHnB,GAAI,EAAG,IACPoB,EAAG,EACHnB,GAAI,EAAG,GACPoB,EAAG,EACHnB,IAAK,EAAG,IACRC,IAAK,EAAG,IACRoB,GAAI,GACJC,GAAI,EACJC,GAAI,EACJpB,IAAK,EAAG,IACRI,IAAK,EAAG,MAERL,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,IACRE,IAAK,EAAG,MAERQ,EAAG,EACHnB,GAAI,EAAG,IACPoB,EAAG,EACHnB,GAAI,EAAG,IACPoB,EAAG,EACHnB,GAAI,EAAG,GACPoB,EAAG,EACHnB,IAAK,EAAG,IACRC,IAAK,EAAG,IACRoB,GAAI,GACJC,GAAI,EACJC,GAAI,EACJpB,IAAK,EAAG,IACRI,IAAK,EAAG,MAERH,IAAK,EAAG,IACRE,IAAK,EAAG,MAERF,IAAK,EAAG,IACRE,IAAK,EAAG,MAERA,IAAK,EAAG,IACRE,IAAK,EAAG,MAEVoB,gBAAiBL,IAAK,EAAG,IACzBM,WAAY,SAAShE,EAAGlR,GACtB,KAAM,IAAI5U,OAAM8lB,IAElBiE,MAAO,SAASjE,GACd,QAASkE,GAAE9oB,GACTZ,EAAEzD,OAASyD,EAAEzD,OAAS,EAAIqE,EAAGC,EAAEtE,OAASsE,EAAEtE,OAASqE,EAAG0nB,EAAE/rB,OAAS+rB,EAAE/rB,OAASqE,EAE9E,QAAS3B,KACP,GAAI2B,EACJ,OAAOA,GAAI0T,EAAEqV,MAAM/e,OAAS,EAAe,gBAALhK,KAAkBA,EAAI0T,EAAEqR,SAAS/kB,IAAMA,GAAIA,EAEnF,GAAI0T,GAAI5X,KACJsD,GAAK,GACLa,GAAK,MACLynB,KACA7lB,EAAI/F,KAAKgsB,MACTH,EAAI,GACJ/qB,EAAI,EACJa,EAAI,EACJurB,EAAI,EACJnsB,EAAI,EACJosB,EAAI,CACRntB,MAAKitB,MAAMG,SAAStE,GAAI9oB,KAAKitB,MAAMjE,GAAKhpB,KAAKgpB,GAAIhpB,KAAKgpB,GAAGiE,MAAQjtB,KAAKitB,MAAmC,mBAArBjtB,MAAKitB,MAAMI,SAA0BrtB,KAAKitB,MAAMI,UACpI,IAAIC,GAAIttB,KAAKitB,MAAMI,MACnBzB,GAAE/qB,KAAKysB,GAAiC,kBAAtBttB,MAAKgpB,GAAG8D,aAA6B9sB,KAAK8sB,WAAa9sB,KAAKgpB,GAAG8D,WAYjF,KAXA,GAAIS,GACAC,EACA7U,EACA8U,EAEApgB,EAEAmX,EACAkJ,EACAC,EACAla,EAJAma,OAKO,CAET,GADAjV,EAAIrV,EAAEA,EAAEzD,OAAS,GAAIG,KAAK6sB,eAAelU,GAAK8U,EAAIztB,KAAK6sB,eAAelU,IAAW,MAAL4U,IAAcA,EAAIhrB,KAAMkrB,EAAI1nB,EAAE4S,IAAM5S,EAAE4S,GAAG4U,IACrG,mBAALE,KAAqBA,EAAE5tB,SAAW4tB,EAAE,GAAI,CACjD,IAAKP,EAAG,CACNzZ,IACA,KAAK+Q,IAAKze,GAAE4S,GACV3Y,KAAK4qB,WAAWpG,IAAMA,EAAI,GAAK/Q,EAAE5S,KAAK,IAAMb,KAAK4qB,WAAWpG,GAAK,IACnE,IAAI9Q,GAAI,EACkBA,GAA1B1T,KAAKitB,MAAMY,aAAmB,wBAA0B/sB,EAAI,GAAK,MAAQd,KAAKitB,MAAMY,eAAiB,eAAiBpa,EAAE6Q,KAAK,MAAQ,UAAYtkB,KAAK4qB,WAAW2C,GAAK,IAAU,wBAA0BzsB,EAAI,GAAK,iBAAwB,GAALysB,EAAS,eAAiB,KAAOvtB,KAAK4qB,WAAW2C,IAAMA,GAAK,KAAMvtB,KAAK8sB,WAAWpZ,GACtTwI,KAAMlc,KAAKitB,MAAM7lB,MACjBkQ,MAAOtX,KAAK4qB,WAAW2C,IAAMA,EAC7BhP,KAAMve,KAAKitB,MAAMa,SACjBC,IAAKT,EACLU,SAAUva,IAGd,GAAS,GAALyZ,EAAQ,CACV,GAAIK,GAAKJ,EACP,KAAM,IAAInqB,OAAM0Q,GAAK,kBACvB/R,GAAI3B,KAAKitB,MAAMgB,OAAQpC,EAAI7rB,KAAKitB,MAAMiB,OAAQptB,EAAId,KAAKitB,MAAMa,SAAUR,EAAIttB,KAAKitB,MAAMI,OAAQE,EAAIhrB,IAEpG,OACMxB,EAAE4H,YAAc5C,GAAE4S,KADb,CAGT,GAAS,GAALA,EACF,KAAM,IAAI3V,OAAM0Q,GAAK,kBACvBsZ,GAAE,GAAIrU,EAAIrV,EAAEA,EAAEzD,OAAS,GAEzB2tB,EAAID,EAAGA,EAAIxsB,EAAG4X,EAAIrV,EAAEA,EAAEzD,OAAS,GAAI4tB,EAAI1nB,EAAE4S,IAAM5S,EAAE4S,GAAG5X,GAAImsB,EAAI,EAE9D,GAAIO,EAAE,YAAc1pB,QAAS0pB,EAAE5tB,OAAS,EACtC,KAAM,IAAImD,OAAM,oDAAsD2V,EAAI,YAAc4U,EAC1F,QAAQE,EAAE,IACR,IAAK,GACHnqB,EAAEzC,KAAK0sB,GAAIppB,EAAEtD,KAAKb,KAAKitB,MAAMiB,QAAStC,EAAE/qB,KAAKb,KAAKitB,MAAMI,QAAS/pB,EAAEzC,KAAK4sB,EAAE,IAAKF,EAAI,KAAMC,GAAKD,EAAIC,EAAGA,EAAI,OAAS7rB,EAAI3B,KAAKitB,MAAMgB,OAAQpC,EAAI7rB,KAAKitB,MAAMiB,OAAQptB,EAAId,KAAKitB,MAAMa,SAAUR,EAAIttB,KAAKitB,MAAMI,OAAQH,EAAI,GAAKA,IACzN,MACF,KAAK,GAOH,GANAQ,EAAI1tB,KAAK0rB,aAAa+B,EAAE,IAAI,GAAIG,EAAE9B,EAAI3nB,EAAEA,EAAEtE,OAAS6tB,GAAIE,EAAEO,IACvDC,WAAYxC,EAAEA,EAAE/rB,QAAU6tB,GAAK,IAAIU,WACnCC,UAAWzC,EAAEA,EAAE/rB,OAAS,GAAGwuB,UAC3BC,aAAc1C,EAAEA,EAAE/rB,QAAU6tB,GAAK,IAAIY,aACrCC,YAAa3C,EAAEA,EAAE/rB,OAAS,GAAG0uB,aAC5BlhB,EAAIrN,KAAK2rB,cAAc/qB,KAAKgtB,EAAG/B,EAAGlqB,EAAGb,EAAGd,KAAKgpB,GAAIyE,EAAE,GAAItpB,EAAGynB,GAC7C,mBAALve,GACT,MAAOA,EACTqgB,KAAMpqB,EAAIA,EAAE6N,MAAM,EAAG,GAAKuc,EAAI,GAAIvpB,EAAIA,EAAEgN,MAAM,EAAG,GAAKuc,GAAI9B,EAAIA,EAAEza,MAAM,EAAG,GAAKuc,IAAKpqB,EAAEzC,KAAKb,KAAK0rB,aAAa+B,EAAE,IAAI,IAAKtpB,EAAEtD,KAAK+sB,EAAE9B,GAAIF,EAAE/qB,KAAK+sB,EAAEO,IAAKR,EAAI5nB,EAAEzC,EAAEA,EAAEzD,OAAS,IAAIyD,EAAEA,EAAEzD,OAAS,IAAKyD,EAAEzC,KAAK8sB,EAClM,MACF,KAAK,GACH,OAAO,GAGb,OAAO,IAGP7E,EAAI,WACF,GAAI5kB,IACF4lB,IAAK,EACLgD,WAAY,SAAShE,EAAGlR,GACtB,IAAK5X,KAAKgpB,GAAG8D,WACX,KAAM,IAAI9pB,OAAM8lB,EAClB9oB,MAAKgpB,GAAG8D,WAAWhE,EAAGlR,IAExBwV,SAAU,SAASlpB,GACjB,MAAOlE,MAAKwuB,OAAStqB,EAAGlE,KAAKyuB,MAAQzuB,KAAK0uB,MAAQ1uB,KAAK2uB,MAAO,EAAI3uB,KAAK8tB,SAAW9tB,KAAKiuB,OAAS,EAAGjuB,KAAKkuB,OAASluB,KAAK4uB,QAAU5uB,KAAKoH,MAAQ,GAAIpH,KAAK6uB,gBAAkB,WAAY7uB,KAAKqtB,QACvLe,WAAY,EACZE,aAAc,EACdD,UAAW,EACXE,YAAa,GACZvuB,MAELmkB,MAAO,WACL,GAAIjgB,GAAIlE,KAAKwuB,OAAO,EACpBxuB,MAAKkuB,QAAUhqB,EAAGlE,KAAKiuB,SAAUjuB,KAAKoH,OAASlD,EAAGlE,KAAK4uB,SAAW1qB,CAClE,IAAI4kB,GAAI5kB,EAAEkD,MAAM,KAChB,OAAO0hB,IAAK9oB,KAAK8tB,WAAY9tB,KAAKwuB,OAASxuB,KAAKwuB,OAAOrd,MAAM,GAAIjN,GAEnE4qB,MAAO,SAAS5qB,GACd,MAAOlE,MAAKwuB,OAAStqB,EAAIlE,KAAKwuB,OAAQxuB,MAExC+uB,KAAM,WACJ,MAAO/uB,MAAKyuB,OAAQ,EAAIzuB,MAE1BgvB,KAAM,SAAS9qB,GACblE,KAAKwuB,OAASxuB,KAAKoH,MAAM+J,MAAMjN,GAAKlE,KAAKwuB,QAE3CS,UAAW,WACT,GAAI/qB,GAAIlE,KAAK4uB,QAAQ/qB,OAAO,EAAG7D,KAAK4uB,QAAQ/uB,OAASG,KAAKoH,MAAMvH,OAChE,QAAQqE,EAAErE,OAAS,GAAK,MAAQ,IAAMqE,EAAEL,OAAO,KAAKoD,QAAQ,MAAO,KAErEioB,cAAe,WACb,GAAIhrB,GAAIlE,KAAKoH,KACb,OAAOlD,GAAErE,OAAS,KAAOqE,GAAKlE,KAAKwuB,OAAO3qB,OAAO,EAAG,GAAKK,EAAErE,UAAWqE,EAAEL,OAAO,EAAG,KAAOK,EAAErE,OAAS,GAAK,MAAQ,KAAKoH,QAAQ,MAAO,KAEvI4mB,aAAc,WACZ,GAAI3pB,GAAIlE,KAAKivB,YACTnG,EAAI,GAAK/kB,OAAMG,EAAErE,OAAS,GAAIykB,KAAK,IACvC,OAAOpgB,GAAIlE,KAAKkvB,gBAAkB,KAAOpG,EAAI,KAE/C7e,KAAM,WACJ,GAAIjK,KAAK2uB,KACP,MAAO3uB,MAAK8pB,GACd9pB,MAAKwuB,SAAWxuB,KAAK2uB,MAAO,EAC5B,IAAIzqB,GACA4kB,EACAlR,EACAtU,EAEAsoB,CACJ5rB,MAAKyuB,QAAUzuB,KAAKkuB,OAAS,GAAIluB,KAAKoH,MAAQ,GAE9C,KAAK,GADDrB,GAAI/F,KAAKmvB,gBACJtD,EAAI,EAAGA,EAAI9lB,EAAElG,SACpB+X,EAAI5X,KAAKwuB,OAAOpnB,MAAMpH,KAAKovB,MAAMrpB,EAAE8lB,MAC/BjU,GAAOkR,KAAKlR,EAAE,GAAG/X,OAASipB,EAAE,GAAGjpB,UACjCipB,EAAIlR,EAAGtU,EAAIuoB,EACN7rB,KAAK+Y,QAAQsW,OAJQxD,KAQ9B,MAAI/C,IACF8C,EAAI9C,EAAE,GAAG1hB,MAAM,SAAUwkB,IAAM5rB,KAAK8tB,UAAYlC,EAAE/rB,QAASG,KAAKqtB,QAC9De,WAAYpuB,KAAKqtB,OAAOgB,UACxBA,UAAWruB,KAAK8tB,SAAW,EAC3BQ,aAActuB,KAAKqtB,OAAOkB,YAC1BA,YAAa3C,EAAIA,EAAEA,EAAE/rB,OAAS,GAAGA,OAAS,EAAIG,KAAKqtB,OAAOkB,YAAczF,EAAE,GAAGjpB,QAC5EG,KAAKkuB,QAAUpF,EAAE,GAAI9oB,KAAKoH,OAAS0hB,EAAE,GAAI9oB,KAAKiuB,OAASjuB,KAAKkuB,OAAOruB,OAAQG,KAAKyuB,OAAQ,EAAIzuB,KAAKwuB,OAASxuB,KAAKwuB,OAAOrd,MAAM2X,EAAE,GAAGjpB,QAASG,KAAK4uB,SAAW9F,EAAE,GAAI5kB,EAAIlE,KAAK2rB,cAAc/qB,KAAKZ,KAAMA,KAAKgpB,GAAIhpB,KAAM+F,EAAEzC,GAAItD,KAAK6uB,eAAe7uB,KAAK6uB,eAAehvB,OAAS,IAAKG,KAAK2uB,MAAQ3uB,KAAKwuB,SAAWxuB,KAAK2uB,MAAO,GACrTzqB,EACKA,EADT,QAIkB,KAAhBlE,KAAKwuB,OACAxuB,KAAK8pB,QACd9pB,MAAK8sB,WAAW,0BAA4B9sB,KAAK8tB,SAAW,GAAK,yBAA2B9tB,KAAK6tB,gBAC/F3R,KAAM,GACN5E,MAAO,KACPiH,KAAMve,KAAK8tB,YAGf5f,IAAK,WACH,GAAI4a,GAAI9oB,KAAKiK,MACb,OAAmB,mBAAL6e,GAAmBA,EAAI9oB,KAAKkO,OAE5CohB,MAAO,SAASxG,GACd9oB,KAAK6uB,eAAehuB,KAAKioB,IAE3ByG,SAAU,WACR,MAAOvvB,MAAK6uB,eAAetmB,OAE7B4mB,cAAe,WACb,MAAOnvB,MAAKwvB,WAAWxvB,KAAK6uB,eAAe7uB,KAAK6uB,eAAehvB,OAAS,IAAIuvB,OAE9EK,SAAU,WACR,MAAOzvB,MAAK6uB,eAAe7uB,KAAK6uB,eAAehvB,OAAS,IAE1D6vB,UAAW,SAAS5G,GAClB9oB,KAAKsvB,MAAMxG,IAGf,OAAO5kB,GAAE6U,WAAc7U,EAAEynB,cAAgB,SAAS7C,EAAGlR,EAAGtU,EAAGa,GAEzD,OAAQb,GACN,IAAK,GACH,KACF,KAAK,GACH,MAAO,EACT,KAAK,GACH,MAAOsU,GAAEsW,OAAStW,EAAEsW,OAAOrqB,OAAO,EAAG+T,EAAEqW,OAAS,GAAI,CACtD,KAAK,GACH,MAAO,GACT,KAAK,GACH,MAAO,GACT,KAAK,GACH,MAAO,GACT,KAAK,GACH,MAAO,GACT,KAAK,GACH,MAAO,GACT,KAAK,GACH,MAAO,GACT,KAAK,GACH,MAAO,GACT,KAAK,IACH,MAAO,GACT,KAAK,IACH,MAAO,EACT,KAAK,IACH,MAAO,GACT,KAAK,IACH,MAAO,YAEV/pB,EAAEkrB,OAAS,WAAY,8DAA+D,sEAAsE,UAAW,UAAW,UAAW,UAAW,SAAU,SAAU,cAAe,eAAgB,cAAe,SAAU,UAAWlrB,EAAEsrB,YAAcG,SAC9SP,OAAQ,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,IAClDQ,WAAW,IACT1rB,IAEZ,OAAOA,GAAE+oB,MAAQnE,EAAG5kB,IAE1B,OAAmB,mBAALA,IAAgC,mBAAL0T,KAAqBA,EAAEiY,OAASvsB,EAAGsU,EAAEmV,MAAQ,WACpF,MAAOzpB,GAAEypB,MAAMhtB,MAAMuD,EAAG1D,YACvBgY,EAAEkY,KAAO,SAASxsB,GACnB,IAAKA,EAAE,GACL,KAAM,IAAIN,OAAM,UAAYM,EAAE,GAAK,QACrC,IAAsB,mBAAXwB,SACT,GAAIX,GAAID,EAAE,MAAM6rB,aAAa7rB,EAAE,QAAQogB,KAAKxf,QAAQkrB,MAAO1sB,EAAE,IAAK,YAElE,IAAIsoB,GAAI1nB,EAAE,QAAQ+rB,KAAK/rB,EAAE,QAAQ8rB,OAC7B7rB,EAAIynB,EAAEtH,KAAKhhB,EAAE,IAAI4sB,MAAMC,QAAS,SACtC,OAAOvY,GAAEiY,OAAO9C,MAAM5oB,IACT,mBAAL2kB,IAAoB5kB,EAAE4rB,OAAShH,GAAKlR,EAAEkY,KAAuB,mBAAXhrB,SAAyBA,QAAQsrB,KAAKjf,MAAM,GAAKjN,EAAE,UAAUmsB,OAAQzY,IAEnI5X,MAAe,SAAI6oB,KAEdD,MAGT,WACA,GAAIlf,GAAgBrE,EAAUd,IAAI,iBAAiB4E,gBACnD,SAAUQ,GACR,GAAsB,gBAAX1H,UAAwC,gBAAVE,QACvCA,OAAOF,QAAU0H,QACd,CAAA,GAAqB,kBAAVlD,SAAwBA,OAAO8C,IAC7C,MAAO9C,QAAO,OAASkD,EAEvB3J,MAAK4J,WAAaD,MACnB,WACD,YA8BA,SAASC,GAAW0mB,EAAOvX,GACzB,KAAM/Y,eAAgB4J,IACpB,MAAO,IAAIA,GAAW0mB,EAAOvX,EAC/B/Y,MAAK+Y,QAAUA,EAAUA,EAAUwX,GAAQxX,MAC3CwX,GAAQC,GAAUzX,GAAS,GAC3B0X,EAAyB1X,EACzB,IAAI2X,GAAM3X,EAAQ1W,KACA,iBAAPquB,KACTA,EAAM,GAAIC,IAAID,EAAK3X,EAAQM,KAAM,KAAMN,EAAQ6X,gBACjD5wB,KAAK0wB,IAAMA,CACX,IAAIvM,GAAQ,GAAIva,GAAWinB,YAAY9X,EAAQ+X,YAAY9wB,MACvD+wB,EAAU/wB,KAAK+wB,QAAU,GAAIC,GAAQV,EAAOI,EAAKvM,EACrD4M,GAAQE,QAAQrnB,WAAa5J,KAC7BkxB,EAAclxB,MACdmxB,EAAanxB,MACT+Y,EAAQqY,eACVpxB,KAAK+wB,QAAQE,QAAQxhB,WAAa,oBAChCsJ,EAAQsY,YAAcC,IACxBP,EAAQ5M,MAAMoN,QAChBC,EAAexxB,MACfA,KAAK2K,OACH8mB,WACAC,YACAC,QAAS,EACTC,WAAW,EACXC,mBAAmB,EACnBC,SAAS,EACTC,eAAe,EACfC,eAAe,EACfC,aAAa,EACbC,eAAe,EACfC,cAAc,EACdC,UAAW,GAAIC,IACfC,OAAQ,KACRC,aAAc,KAEhB,IAAIC,GAAKxyB,IACLyyB,KAAmB,GAAbC,IACRC,WAAW,WACTH,EAAGzB,QAAQ5M,MAAMyO,OAAM,IACtB,IACLC,GAAsB7yB,MACtB8yB,KACAC,GAAe/yB,MACfA,KAAKgzB,MAAMC,aAAc,EACzBC,GAAUlzB,KAAM0wB,GACX3X,EAAQsY,YAAcC,IAAWkB,EAAGW,WACvCR,WAAWS,GAAKC,GAASrzB,MAAO,IAEhCszB,GAAOtzB,KACT,KAAK,GAAIsE,KAAOivB,IACVA,GAAe9vB,eAAea,IAChCivB,GAAejvB,GAAKtE,KAAM+Y,EAAQzU,GAAMkvB,GAC5CC,GAA2BzzB,MACvB+Y,EAAQ2a,YACV3a,EAAQ2a,WAAW1zB,KACrB,KAAK,GAAIc,GAAI,EAAGA,EAAI6yB,GAAU9zB,SAAUiB,EACtC6yB,GAAU7yB,GAAGd,KACf4zB,IAAa5zB,MACT6zB,IAAU9a,EAAQqY,cAAmE,sBAAnD0C,iBAAiB/C,EAAQgD,SAASC,gBACtEjD,EAAQgD,QAAQzpB,MAAM0pB,cAAgB,QAE1C,QAAShD,GAAQV,EAAOI,EAAKvM,GAC3B,GAAI7gB,GAAItD,IACRA,MAAKmkB,MAAQA,EACb7gB,EAAE2wB,gBAAkBC,GAAI,MAAO,KAAM,+BACrC5wB,EAAE2wB,gBAAgBE,aAAa,iBAAkB,QACjD7wB,EAAE8wB,aAAeF,GAAI,MAAO,KAAM,4BAClC5wB,EAAE8wB,aAAaD,aAAa,iBAAkB,QAC9C7wB,EAAEywB,QAAUG,GAAI,MAAO,KAAM,mBAC7B5wB,EAAE+wB,aAAeH,GAAI,MAAO,KAAM,KAAM,kCACxC5wB,EAAEgxB,UAAYJ,GAAI,MAAO,KAAM,sBAC/B5wB,EAAEixB,QAAUL,GAAI,MAAO,KAAM,sBAC7B5wB,EAAEkxB,YAAcN,GAAI,MAAO,KAAM,sBACjC5wB,EAAEmxB,UAAYP,GAAI,OAAQ5wB,EAAEixB,QAASjxB,EAAEkxB,YAAalxB,EAAE+wB,aAAc/wB,EAAEgxB,UAAWhxB,EAAEywB,SAAU,KAAM,qCACnGzwB,EAAEoxB,MAAQR,GAAI,OAAQA,GAAI,OAAQ5wB,EAAEmxB,WAAY,qBAAsB,KAAM,sBAC5EnxB,EAAEqxB,MAAQT,GAAI,OAAQ5wB,EAAEoxB,OAAQ,oBAChCpxB,EAAEsxB,WAAa,KACftxB,EAAEuxB,aAAeX,GAAI,MAAO,KAAM,KAAM,+BAAiCY,GAAc,mBACvFxxB,EAAEyxB,QAAUb,GAAI,MAAO,KAAM,sBAC7B5wB,EAAE0xB,WAAa,KACf1xB,EAAE2xB,SAAWf,GAAI,OAAQ5wB,EAAEqxB,MAAOrxB,EAAEuxB,aAAcvxB,EAAEyxB,SAAU,qBAC9DzxB,EAAE2xB,SAASd,aAAa,WAAY,MACpC7wB,EAAE2tB,QAAUiD,GAAI,OAAQ5wB,EAAE2wB,gBAAiB3wB,EAAE8wB,aAAc9wB,EAAE2xB,UAAW,cACpExC,IAAmB,EAAbC,KACRpvB,EAAEyxB,QAAQzqB,MAAM4qB,OAAS,GACzB5xB,EAAE2xB,SAAS3qB,MAAM6qB,aAAe,GAE7BtB,IAAYuB,IAAS9D,KACxBhuB,EAAE2xB,SAASI,WAAY,GACrB/E,IACEA,EAAMgF,YACRhF,EAAMgF,YAAYhyB,EAAE2tB,SAEpBX,EAAMhtB,EAAE2tB,UAEZ3tB,EAAEiyB,SAAWjyB,EAAEkyB,OAAS9E,EAAI+E,MAC5BnyB,EAAEoyB,iBAAmBpyB,EAAEqyB,eAAiBjF,EAAI+E,MAC5CnyB,EAAEsyB,QACFtyB,EAAEuyB,aAAe,KACjBvyB,EAAEwyB,iBAAmB,KACrBxyB,EAAEyyB,WAAa,EACfzyB,EAAE0yB,eAAiB1yB,EAAE2yB,cAAgB,EACrC3yB,EAAE4yB,kBAAoB,KACtB5yB,EAAE6yB,eAAiB7yB,EAAE8yB,UAAY9yB,EAAE+yB,SAAW,EAC9C/yB,EAAEgzB,mBAAoB,EACtBhzB,EAAEizB,aAAejzB,EAAEkzB,kBAAoBlzB,EAAEmzB,aAAe,KACxDnzB,EAAEozB,cAAe,EACjBpzB,EAAEqzB,gBAAkBrzB,EAAEszB,iBAAmBtzB,EAAEuzB,eAAiB,KAC5DvzB,EAAEwzB,QAAU,KACZxzB,EAAEyzB,cAAgB,EAClBzzB,EAAE0zB,gBAAiB,EACnB1zB,EAAE2zB,QAAU3zB,EAAE4zB,QAAU5zB,EAAE6zB,YAAc7zB,EAAE8zB,YAAc,KACxD9zB,EAAEoC,OAAQ,EACVpC,EAAE+zB,kBAAoB,KACtB/zB,EAAEg0B,YAAc,KAChBnT,EAAMoT,KAAKj0B,GAEb,QAASk0B,GAAShF,GAChBA,EAAG9B,IAAIrX,KAAOzP,EAAW6tB,QAAQjF,EAAGzZ,QAASyZ,EAAG9B,IAAIgH,YACpDC,EAAenF,GAEjB,QAASmF,GAAenF,GACtBA,EAAG9B,IAAIkH,KAAK,SAASrZ,GACfA,EAAKsZ,aACPtZ,EAAKsZ,WAAa,MAChBtZ,EAAKuZ,SACPvZ,EAAKuZ,OAAS,QAElBtF,EAAG9B,IAAIqH,SAAWvF,EAAG9B,IAAI+E,MACzBuC,GAAYxF,EAAI,KAChBA,EAAG7nB,MAAMgnB,UACLa,EAAGQ,OACLiF,GAAUzF,GAEd,QAAS0F,GAAgB1F,GACnBA,EAAGzZ,QAAQqY,cACb+G,GAAS3F,EAAGzB,QAAQE,QAAS,mBAC7BuB,EAAGzB,QAAQ4D,MAAMrqB,MAAM8tB,SAAW,GAClC5F,EAAGzB,QAAQ6D,WAAa,OAExByD,GAAQ7F,EAAGzB,QAAQE,QAAS,mBAC5BqH,EAAY9F,IAEd+F,EAAoB/F,GACpByF,GAAUzF,GACVgG,GAAYhG,GACZG,WAAW,WACT8F,EAAiBjG,IAChB,KAEL,QAASkG,GAAelG,GACtB,GAAImG,GAAKC,GAAWpG,EAAGzB,SACnB8H,EAAWrG,EAAGzZ,QAAQqY,aACtB0H,EAAUD,GAAYE,KAAKC,IAAI,EAAGxG,EAAGzB,QAAQkE,SAASgE,YAAcC,GAAU1G,EAAGzB,SAAW,EAChG,OAAO,UAASxS,GACd,GAAI4a,GAAa3G,EAAG9B,IAAKnS,GACvB,MAAO,EACT,IAAI6a,GAAgB,CACpB,IAAI7a,EAAK8a,QACP,IAAK,GAAIv4B,GAAI,EAAGA,EAAIyd,EAAK8a,QAAQx5B,OAAQiB,IACnCyd,EAAK8a,QAAQv4B,GAAGw4B,SAClBF,GAAiB7a,EAAK8a,QAAQv4B,GAAGw4B,OAEvC,OAAIT,GACKO,GAAiBL,KAAKQ,KAAKhb,EAAKrC,KAAKrc,OAASi5B,IAAY,GAAKH,EAE/DS,EAAgBT,GAG7B,QAASJ,GAAoB/F,GAC3B,GAAI9B,GAAM8B,EAAG9B,IACT8I,EAAMd,EAAelG,EACzB9B,GAAIkH,KAAK,SAASrZ,GAChB,GAAIkb,GAAYD,EAAIjb,EAChBkb,IAAalb,EAAK+a,QACpBI,GAAiBnb,EAAMkb,KAG7B,QAAStI,GAAaqB,GACpBA,EAAGzB,QAAQE,QAAQxhB,UAAY+iB,EAAGzB,QAAQE,QAAQxhB,UAAUxI,QAAQ,eAAgB,IAAMurB,EAAGzZ,QAAQ4gB,MAAM1yB,QAAQ,aAAc,UACjIuxB,GAAYhG,GAEd,QAASoH,GAAepH,GACtBtB,EAAcsB,GACdyF,GAAUzF,GACVG,WAAW,WACTkH,EAAkBrH,IACjB,IAEL,QAAStB,GAAcsB,GACrB,GAAIuC,GAAUvC,EAAGzB,QAAQgE,QACrB+E,EAAQtH,EAAGzZ,QAAQgc,OACvBgF,IAAehF,EACf,KAAK,GAAIj0B,GAAI,EAAGA,EAAIg5B,EAAMj6B,SAAUiB,EAAG,CACrC,GAAIk5B,GAAcF,EAAMh5B,GACpBm5B,EAAOlF,EAAQO,YAAYpB,GAAI,MAAO,KAAM,qBAAuB8F,GACpD,2BAAfA,IACFxH,EAAGzB,QAAQiE,WAAaiF,EACxBA,EAAK3vB,MAAM4vB,OAAS1H,EAAGzB,QAAQwF,cAAgB,GAAK,MAGxDxB,EAAQzqB,MAAMymB,QAAUjwB,EAAI,GAAK,OACjCq5B,EAAkB3H,GAEpB,QAAS2H,GAAkB3H,GACzB,GAAI0H,GAAQ1H,EAAGzB,QAAQgE,QAAQqF,WAC/B5H,GAAGzB,QAAQ4D,MAAMrqB,MAAM+vB,WAAaH,EAAQ,KAE9C,QAASI,GAAW/b,GAClB,GAAmB,GAAfA,EAAK+a,OACP,MAAO,EAIT,KAHA,GACIiB,GADA9b,EAAMF,EAAKrC,KAAKrc,OAEhB26B,EAAMjc,EACHgc,EAASE,GAAqBD,IAAM,CACzC,GAAIE,GAAQH,EAAOI,KAAK,GAAG,EAC3BH,GAAME,EAAME,KAAKrc,KACjBE,GAAOic,EAAME,KAAKhwB,GAAK8vB,EAAMG,GAAGjwB,GAGlC,IADA4vB,EAAMjc,EACCgc,EAASO,GAAmBN,IAAM,CACvC,GAAIE,GAAQH,EAAOI,KAAK,GAAG,EAC3Blc,IAAO+b,EAAIte,KAAKrc,OAAS66B,EAAME,KAAKhwB,GACpC4vB,EAAME,EAAMG,GAAGtc,KACfE,GAAO+b,EAAIte,KAAKrc,OAAS66B,EAAMG,GAAGjwB,GAEpC,MAAO6T,GAET,QAAS6Z,GAAY9F,GACnB,GAAIlvB,GAAIkvB,EAAGzB,QACPL,EAAM8B,EAAG9B,GACbptB,GAAEwzB,QAAUiE,GAAQrK,EAAKA,EAAI+E,OAC7BnyB,EAAEyzB,cAAgBuD,EAAWh3B,EAAEwzB,SAC/BxzB,EAAE0zB,gBAAiB,EACnBtG,EAAIkH,KAAK,SAASrZ,GAChB,GAAIE,GAAM6b,EAAW/b,EACjBE,GAAMnb,EAAEyzB,gBACVzzB,EAAEyzB,cAAgBtY,EAClBnb,EAAEwzB,QAAUvY,KAIlB,QAASkS,GAAyB1X,GAChC,GAAI2hB,GAAQ/5B,GAAQoY,EAAQgc,QAAS,yBACxB,KAAT2F,GAAe3hB,EAAQiiB,YACzBjiB,EAAQgc,QAAUhc,EAAQgc,QAAQrsB,QAAQ,2BACjCgyB,EAAQ,KAAO3hB,EAAQiiB,cAChCjiB,EAAQgc,QAAUhc,EAAQgc,QAAQ5jB,MAAM,GACxC4H,EAAQgc,QAAQ1zB,OAAOq5B,EAAO,IAGlC,QAASO,GAAqBzI,GAC5B,GAAIlvB,GAAIkvB,EAAGzB,QACPmK,EAAU53B,EAAEyxB,QAAQqF,YACpBe,EAAOpC,KAAKqC,MAAM5I,EAAG9B,IAAI4I,OAAS+B,GAAY7I,EAAGzB,SACrD,QACEuK,aAAch4B,EAAE2xB,SAASqG,aACzBC,WAAYj4B,EAAE2tB,QAAQqK,aACtBE,YAAal4B,EAAE2xB,SAASuG,YACxBvC,YAAa31B,EAAE2xB,SAASgE,YACxBwC,UAAWn4B,EAAE2tB,QAAQgI,YACrByC,QAASlJ,EAAGzZ,QAAQ4iB,YAAcT,EAAU,EAC5CU,UAAWT,EACXU,aAAcV,EAAOW,GAAUtJ,GAAMlvB,EAAE8yB,UACvCD,eAAgB7yB,EAAE6yB,eAClB4F,YAAab,GAGjB,QAASc,GAAiB1L,EAAO2L,EAAQzJ,GACvCxyB,KAAKwyB,GAAKA,CACV,IAAI0J,GAAOl8B,KAAKk8B,KAAOhI,GAAI,OAAQA,GAAI,MAAO,KAAM,KAAM,mBAAoB,yBAC1EiI,EAAQn8B,KAAKm8B,MAAQjI,GAAI,OAAQA,GAAI,MAAO,KAAM,KAAM,kCAAmC,wBAC/F5D,GAAM4L,GACN5L,EAAM6L,GACNC,GAAGF,EAAM,SAAU,WACbA,EAAKZ,cACPW,EAAOC,EAAKG,UAAW,cAE3BD,GAAGD,EAAO,SAAU,WACdA,EAAMlD,aACRgD,EAAOE,EAAMG,WAAY,gBAE7Bt8B,KAAKu8B,gBAAiB,EAClB9J,IAAmB,EAAbC,KACR1yB,KAAKm8B,MAAM7xB,MAAMkyB,UAAYx8B,KAAKk8B,KAAK5xB,MAAM8tB,SAAW,QA6D5D,QAASqE,MAgBT,QAASjL,GAAegB,GAClBA,EAAGzB,QAAQ2L,aACblK,EAAGzB,QAAQ2L,WAAWC,QAClBnK,EAAGzB,QAAQ2L,WAAWvE,UACxBE,GAAQ7F,EAAGzB,QAAQE,QAASuB,EAAGzB,QAAQ2L,WAAWvE,WAEtD3F,EAAGzB,QAAQ2L,WAAa,GAAI9yB,GAAWgzB,eAAepK,EAAGzZ,QAAQ8jB,gBAAgB,SAASC,GACxFtK,EAAGzB,QAAQE,QAAQ8L,aAAaD,EAAMtK,EAAGzB,QAAQkD,iBACjDmI,GAAGU,EAAM,YAAa,WAChBtK,EAAG7nB,MAAMmnB,SACXa,WAAW,WACTH,EAAGzB,QAAQ5M,MAAMoN,SAChB,KAEPuL,EAAK3I,aAAa,iBAAkB,SACnC,SAAS1nB,EAAKuwB,GACH,cAARA,EACFC,GAAczK,EAAI/lB,GAElBywB,GAAa1K,EAAI/lB,IAClB+lB,GACCA,EAAGzB,QAAQ2L,WAAWvE,UACxBA,GAAS3F,EAAGzB,QAAQE,QAASuB,EAAGzB,QAAQ2L,WAAWvE,UAEvD,QAASM,GAAiBjG,EAAI+B,GACvBA,IACHA,EAAU0G,EAAqBzI,GACjC,IAAI2K,GAAa3K,EAAGzB,QAAQsF,SACxB+G,EAAc5K,EAAGzB,QAAQqF,SAC7BiH,GAAsB7K,EAAI+B,EAC1B,KAAK,GAAIzzB,GAAI,EAAO,EAAJA,GAASq8B,GAAc3K,EAAGzB,QAAQsF,UAAY+G,GAAe5K,EAAGzB,QAAQqF,UAAWt1B,IAC7Fq8B,GAAc3K,EAAGzB,QAAQsF,UAAY7D,EAAGzZ,QAAQqY,cAClDkM,EAAwB9K,GAC1B6K,EAAsB7K,EAAIyI,EAAqBzI,IAC/C2K,EAAa3K,EAAGzB,QAAQsF,SACxB+G,EAAc5K,EAAGzB,QAAQqF,UAG7B,QAASiH,GAAsB7K,EAAI+B,GACjC,GAAIjxB,GAAIkvB,EAAGzB,QACPwM,EAAQj6B,EAAEo5B,WAAWc,OAAOjJ,EAChCjxB,GAAEqxB,MAAMrqB,MAAM6qB,cAAgB7xB,EAAE+yB,SAAWkH,EAAME,OAAS,KAC1Dn6B,EAAEqxB,MAAMrqB,MAAMozB,eAAiBp6B,EAAE8yB,UAAYmH,EAAMI,QAAU,KACzDJ,EAAME,OAASF,EAAMI,QACvBr6B,EAAE2wB,gBAAgB3pB,MAAMymB,QAAU,QAClCztB,EAAE2wB,gBAAgB3pB,MAAMgvB,OAASiE,EAAMI,OAAS,KAChDr6B,EAAE2wB,gBAAgB3pB,MAAM4vB,MAAQqD,EAAME,MAAQ,MAE9Cn6B,EAAE2wB,gBAAgB3pB,MAAMymB,QAAU,GAChCwM,EAAMI,QAAUnL,EAAGzZ,QAAQ6kB,4BAA8BpL,EAAGzZ,QAAQ4iB,aACtEr4B,EAAE8wB,aAAa9pB,MAAMymB,QAAU,QAC/BztB,EAAE8wB,aAAa9pB,MAAMgvB,OAASiE,EAAMI,OAAS,KAC7Cr6B,EAAE8wB,aAAa9pB,MAAM4vB,MAAQ3F,EAAQwH,YAAc,MAEnDz4B,EAAE8wB,aAAa9pB,MAAMymB,QAAU,GAEnC,QAAS8M,GAAa9M,EAASL,EAAKoN,GAClC,GAAIC,GAAMD,GAA4B,MAAhBA,EAASC,IAAchF,KAAKC,IAAI,EAAG8E,EAASC,KAAOhN,EAAQkE,SAASoH,SAC1F0B,GAAMhF,KAAKiF,MAAMD,EAAME,GAAWlN,GAClC,IAAI4M,GAASG,GAA+B,MAAnBA,EAASH,OAAiBG,EAASH,OAASI,EAAMhN,EAAQE,QAAQqK,aACvFV,EAAOsD,GAAaxN,EAAKqN,GACzBlD,EAAKqD,GAAaxN,EAAKiN,EAC3B,IAAIG,GAAYA,EAASK,OAAQ,CAC/B,GAAIC,GAAaN,EAASK,OAAOvD,KAAKrc,KAClC8f,EAAWP,EAASK,OAAOtD,GAAGtc,IACjBqc,GAAbwD,GACFxD,EAAOwD,EACPvD,EAAKqD,GAAaxN,EAAK4N,GAAavD,GAAQrK,EAAK0N,IAAerN,EAAQE,QAAQqK,eACvEvC,KAAKwF,IAAIF,EAAU3N,EAAI8N,aAAe3D,IAC/CD,EAAOsD,GAAaxN,EAAK4N,GAAavD,GAAQrK,EAAK2N,IAAatN,EAAQE,QAAQqK,cAChFT,EAAKwD,GAGT,OACEzD,KAAMA,EACNC,GAAI9B,KAAKC,IAAI6B,EAAID,EAAO,IAG5B,QAASf,GAAkBrH,GACzB,GAAIzB,GAAUyB,EAAGzB,QACb6E,EAAO7E,EAAQ6E,IACnB,IAAK7E,EAAQ2F,cAAkB3F,EAAQgE,QAAQ0J,YAAejM,EAAGzZ,QAAQ4iB,YAAzE,CAKA,IAAK,GAHD+C,GAAOC,EAAqB5N,GAAWA,EAAQkE,SAASqH,WAAa9J,EAAG9B,IAAI4L,WAC5EpB,EAAUnK,EAAQgE,QAAQqF,YAC1BwE,EAAOF,EAAO,KACT59B,EAAI,EAAGA,EAAI80B,EAAK/1B,OAAQiB,IAC/B,IAAK80B,EAAK90B,GAAG+9B,OAAQ,CACfrM,EAAGzZ,QAAQ4iB,aAAe/F,EAAK90B,GAAGg+B,SACpClJ,EAAK90B,GAAGg+B,OAAOx0B,MAAMs0B,KAAOA,EAC9B,IAAI5xB,GAAQ4oB,EAAK90B,GAAGi+B,SACpB,IAAI/xB,EACF,IAAK,GAAIrL,GAAI,EAAGA,EAAIqL,EAAMnN,OAAQ8B,IAChCqL,EAAMrL,GAAG2I,MAAMs0B,KAAOA,EAE1BpM,EAAGzZ,QAAQ4iB,cACb5K,EAAQgE,QAAQzqB,MAAMs0B,KAAQF,EAAOxD,EAAW,OAEpD,QAASzH,GAA2BjB,GAClC,IAAKA,EAAGzZ,QAAQiiB,YACd,OAAO,CACT,IAAItK,GAAM8B,EAAG9B,IACTtT,EAAO4hB,EAAcxM,EAAGzZ,QAAS2X,EAAI+E,MAAQ/E,EAAIuO,KAAO,GACxDlO,EAAUyB,EAAGzB,OACjB,IAAI3T,EAAKvd,QAAUkxB,EAAQ0F,aAAc,CACvC,GAAI1rB,GAAOgmB,EAAQwD,QAAQe,YAAYpB,GAAI,OAAQA,GAAI,MAAO9W,IAAQ,gDAClE8hB,EAASn0B,EAAK0zB,WAAWrE,YACzB+E,EAAUp0B,EAAKqvB,YAAc8E;AAOjC,MANAnO,GAAQiE,WAAW1qB,MAAM4vB,MAAQ,GACjCnJ,EAAQyF,kBAAoBuC,KAAKC,IAAIkG,EAAQnO,EAAQiE,WAAWoF,YAAc+E,GAAW,EACzFpO,EAAQwF,aAAexF,EAAQyF,kBAAoB2I,EACnDpO,EAAQ0F,aAAe1F,EAAQyF,kBAAoBpZ,EAAKvd,OAAS,GACjEkxB,EAAQiE,WAAW1qB,MAAM4vB,MAAQnJ,EAAQwF,aAAe,KACxD4D,EAAkB3H,IACX,EAET,OAAO,EAET,QAASwM,GAAcjmB,EAASjY,GAC9B,MAAO+mB,QAAO9O,EAAQqmB,oBAAoBt+B,EAAIiY,EAAQsmB,kBAExD,QAASV,GAAqB5N,GAC5B,MAAOA,GAAQkE,SAASqK,wBAAwBV,KAAO7N,EAAQ4D,MAAM2K,wBAAwBV,KAE/F,QAASW,GAAc/M,EAAIsL,EAAU0B,GACnC,GAAIzO,GAAUyB,EAAGzB,OACjB/wB,MAAK89B,SAAWA,EAChB99B,KAAKy/B,QAAU5B,EAAa9M,EAASyB,EAAG9B,IAAKoN,GAC7C99B,KAAK0/B,gBAAkB3O,EAAQE,QAAQmJ,YACvCp6B,KAAK2/B,cAAgB5O,EAAQE,QAAQqK,aACrCt7B,KAAK4/B,aAAe7O,EAAQE,QAAQgI,YACpCj5B,KAAK6/B,gBAAkBC,GAAatN,GACpCxyB,KAAKw/B,MAAQA,EACbx/B,KAAK+/B,KAAOC,EAAcxN,GAC1BxyB,KAAKigC,UAUP,QAASC,GAAoB1N,GAC3B,GAAIzB,GAAUyB,EAAGzB,SACZA,EAAQuF,mBAAqBvF,EAAQkE,SAASmF,cACjDrJ,EAAQoF,eAAiBpF,EAAQkE,SAASmF,YAAcrJ,EAAQkE,SAASgE,YACzElI,EAAQ8D,aAAavqB,MAAMgvB,OAASwC,GAAUtJ,GAAM,KACpDzB,EAAQ4D,MAAMrqB,MAAM61B,cAAgBpP,EAAQoF,eAAiB,KAC7DpF,EAAQ4D,MAAMrqB,MAAM81B,iBAAmBtE,GAAUtJ,GAAM,KACvDzB,EAAQuF,mBAAoB,GAGhC,QAAS+J,GAAsB7N,EAAIgL,GACjC,GAAIzM,GAAUyB,EAAGzB,QACbL,EAAM8B,EAAG9B,GACb,IAAI8M,EAAOkC,eAET,MADAY,IAAU9N,IACH,CAET,KAAKgL,EAAOgC,OAAShC,EAAOiC,QAAQ7E,MAAQ7J,EAAQwE,UAAYiI,EAAOiC,QAAQ5E,IAAM9J,EAAQyE,SAAwC,MAA7BzE,EAAQmF,mBAA6BnF,EAAQmF,mBAAqBnF,EAAQyE,SAAWzE,EAAQ8E,cAAgB9E,EAAQ6E,MAA8B,GAAtB2K,GAAe/N,GAClP,OAAO,CACLiB,GAA2BjB,KAC7B8N,GAAU9N,GACVgL,EAAOuC,KAAOC,EAAcxN,GAE9B,IAAI7gB,GAAM+e,EAAI+E,MAAQ/E,EAAIuO,KACtBrE,EAAO7B,KAAKC,IAAIwE,EAAOiC,QAAQ7E,KAAOpI,EAAGzZ,QAAQynB,eAAgB9P,EAAI+E,OACrEoF,EAAK9B,KAAKwF,IAAI5sB,EAAK6rB,EAAOiC,QAAQ5E,GAAKrI,EAAGzZ,QAAQynB,eAClDzP,GAAQwE,SAAWqF,GAAQA,EAAO7J,EAAQwE,SAAW,KACvDqF,EAAO7B,KAAKC,IAAItI,EAAI+E,MAAO1E,EAAQwE,WACjCxE,EAAQyE,OAASqF,GAAM9J,EAAQyE,OAASqF,EAAK,KAC/CA,EAAK9B,KAAKwF,IAAI5sB,EAAKof,EAAQyE,SACzBiL,KACF7F,EAAO8F,GAAalO,EAAG9B,IAAKkK,GAC5BC,EAAK8F,GAAgBnO,EAAG9B,IAAKmK,GAE/B,IAAI+F,GAAYhG,GAAQ7J,EAAQwE,UAAYsF,GAAM9J,EAAQyE,QAAUzE,EAAQiF,gBAAkBwH,EAAOmC,eAAiB5O,EAAQkF,eAAiBuH,EAAOoC,YACtJiB,IAAWrO,EAAIoI,EAAMC,GACrB9J,EAAQgF,WAAauI,GAAavD,GAAQvI,EAAG9B,IAAKK,EAAQwE,WAC1D/C,EAAGzB,QAAQ2D,MAAMpqB,MAAMyzB,IAAMhN,EAAQgF,WAAa,IAClD,IAAI+K,GAAWP,GAAe/N,EAC9B,KAAKoO,GAAyB,GAAZE,IAAkBtD,EAAOgC,OAASzO,EAAQ8E,cAAgB9E,EAAQ6E,OAAsC,MAA7B7E,EAAQmF,mBAA6BnF,EAAQmF,mBAAqBnF,EAAQyE,QACrK,OAAO,CACT,IAAI1D,GAAUiP,IAkBd,OAjBID,GAAW,IACb/P,EAAQgD,QAAQzpB,MAAMymB,QAAU,QAClCiQ,EAAaxO,EAAIzB,EAAQmF,kBAAmBsH,EAAOuC,MAC/Ce,EAAW,IACb/P,EAAQgD,QAAQzpB,MAAMymB,QAAU,IAClCA,EAAQ8E,aAAe9E,EAAQ6E,KAC3B9D,GAAWiP,MAAejP,GAAWA,EAAQmP,cAC/CnP,EAAQP,QACVwI,GAAehJ,EAAQuD,WACvByF,GAAehJ,EAAQsD,cACvBtD,EAAQgE,QAAQzqB,MAAMgvB,OAASvI,EAAQ4D,MAAMrqB,MAAMkyB,UAAY,EAC3DoE,IACF7P,EAAQiF,eAAiBwH,EAAOmC,cAChC5O,EAAQkF,cAAgBuH,EAAOoC,aAC/B5H,GAAYxF,EAAI,MAElBzB,EAAQmF,kBAAoB,MACrB,EAET,QAASgL,GAAkB1O,EAAIgL,GAE7B,IAAK,GADDM,GAAWN,EAAOM,SACbrI,GAAQ,GACVA,GAAUjD,EAAGzZ,QAAQqY,cAAgBoM,EAAOqC,iBAAmBC,GAAatN,KAC3EsL,GAA4B,MAAhBA,EAASC,MACvBD,GAAYC,IAAKhF,KAAKwF,IAAI/L,EAAG9B,IAAI4I,OAAS+B,GAAY7I,EAAGzB,SAAWoQ,GAAc3O,GAAKsL,EAASC,OAClGP,EAAOiC,QAAU5B,EAAarL,EAAGzB,QAASyB,EAAG9B,IAAKoN,KAC9CN,EAAOiC,QAAQ7E,MAAQpI,EAAGzB,QAAQwE,UAAYiI,EAAOiC,QAAQ5E,IAAMrI,EAAGzB,QAAQyE,WAG/E6K,EAAsB7N,EAAIgL,GARR/H,GAAQ,EAAO,CAUtC6H,EAAwB9K,EACxB,IAAI4O,GAAanG,EAAqBzI,EACtC6O,IAAgB7O,GAChB8O,EAAkB9O,EAAI4O,GACtB3I,EAAiBjG,EAAI4O,GAEvB5D,EAAO+D,OAAO/O,EAAI,SAAUA,IACxBA,EAAGzB,QAAQwE,UAAY/C,EAAGzB,QAAQ2E,kBAAoBlD,EAAGzB,QAAQyE,QAAUhD,EAAGzB,QAAQ4E,kBACxF6H,EAAO+D,OAAO/O,EAAI,iBAAkBA,EAAIA,EAAGzB,QAAQwE,SAAU/C,EAAGzB,QAAQyE,QACxEhD,EAAGzB,QAAQ2E,iBAAmBlD,EAAGzB,QAAQwE,SACzC/C,EAAGzB,QAAQ4E,eAAiBnD,EAAGzB,QAAQyE,QAG3C,QAASgM,GAAoBhP,EAAIsL,GAC/B,GAAIN,GAAS,GAAI+B,GAAc/M,EAAIsL,EACnC,IAAIuC,EAAsB7N,EAAIgL,GAAS,CACrCF,EAAwB9K,GACxB0O,EAAkB1O,EAAIgL,EACtB,IAAI4D,GAAanG,EAAqBzI,EACtC6O,IAAgB7O,GAChB8O,EAAkB9O,EAAI4O,GACtB3I,EAAiBjG,EAAI4O,GACrB5D,EAAOiE,UAGX,QAASH,GAAkB9O,EAAI+B,GAC7B/B,EAAGzB,QAAQ4D,MAAMrqB,MAAMkyB,UAAYjI,EAAQqH,UAAY,IACvD,IAAI8F,GAAQnN,EAAQqH,UAAYpJ,EAAGzB,QAAQqF,SAC3C5D,GAAGzB,QAAQ8D,aAAavqB,MAAMyzB,IAAM2D,EAAQ,KAC5ClP,EAAGzB,QAAQgE,QAAQzqB,MAAMgvB,OAASP,KAAKC,IAAI0I,EAAQ5F,GAAUtJ,GAAK+B,EAAQ+G,cAAgB,KAE5F,QAASgC,GAAwB9K,GAG/B,IAAK,GAFDzB,GAAUyB,EAAGzB,QACb4Q,EAAa5Q,EAAQgD,QAAQ6N,UACxB9gC,EAAI,EAAGA,EAAIiwB,EAAQ6E,KAAK/1B,OAAQiB,IAAK,CAC5C,GACIw4B,GADAkB,EAAMzJ,EAAQ6E,KAAK90B,EAEvB,KAAI05B,EAAIqE,OAAR,CAEA,GAAIpM,IAAmB,EAAbC,GAAgB,CACxB,GAAImP,GAAMrH,EAAIsC,KAAK8E,UAAYpH,EAAIsC,KAAKmE,YACxC3H,GAASuI,EAAMF,EACfA,EAAaE,MACR,CACL,GAAIC,GAAMtH,EAAIsC,KAAKwC,uBACnBhG,GAASwI,EAAInE,OAASmE,EAAI/D,IAE5B,GAAIgE,GAAOvH,EAAIjc,KAAK+a,OAASA,CAG7B,IAFa,EAATA,IACFA,EAASV,GAAW7H,KAClBgR,EAAO,OAAgB,KAARA,KACjBrI,GAAiBc,EAAIjc,KAAM+a,GAC3B0I,EAAmBxH,EAAIjc,MACnBic,EAAIyH,MACN,IAAK,GAAItgC,GAAI,EAAGA,EAAI64B,EAAIyH,KAAKpiC,OAAQ8B,IACnCqgC,EAAmBxH,EAAIyH,KAAKtgC,MAItC,QAASqgC,GAAmBzjB,GAC1B,GAAIA,EAAK8a,QACP,IAAK,GAAIv4B,GAAI,EAAGA,EAAIyd,EAAK8a,QAAQx5B,SAAUiB,EACzCyd,EAAK8a,QAAQv4B,GAAGw4B,OAAS/a,EAAK8a,QAAQv4B,GAAGg8B,KAAKmE,aAEpD,QAASjB,GAAcxN,GAKrB,IAAK,GAJDlvB,GAAIkvB,EAAGzB,QACP6N,KACA1E,KACAgI,EAAa5+B,EAAEyxB,QAAQoN,WAClB7U,EAAIhqB,EAAEyxB,QAAQ0J,WACnB39B,EAAI,EAAGwsB,EAAGA,EAAIA,EAAE8U,cAAethC,EACjC89B,EAAKpM,EAAGzZ,QAAQgc,QAAQj0B,IAAMwsB,EAAE+U,WAAa/U,EAAE6U,WAAaD,EAC5DhI,EAAM1H,EAAGzZ,QAAQgc,QAAQj0B,IAAMwsB,EAAE2L,WAEnC,QACEqJ,SAAU3D,EAAqBr7B,GAC/Bi/B,iBAAkBj/B,EAAEyxB,QAAQqF,YAC5B8H,WAAYtD,EACZ7C,YAAa7B,EACb0F,aAAct8B,EAAE2tB,QAAQgI,aAG5B,QAAS+H,GAAaxO,EAAIgQ,EAAmBzC,GAK3C,QAAS0C,GAAG3F,GACV,GAAI7yB,GAAO6yB,EAAKsF,WAKhB,OAJIvO,KAAU6O,IAAOlQ,EAAGzB,QAAQ4R,oBAAsB7F,EACpDA,EAAKxyB,MAAMymB,QAAU,OAErB+L,EAAK8F,WAAWC,YAAY/F,GACvB7yB,EAIT,IAAK,GAdD8mB,GAAUyB,EAAGzB,QACbiK,EAAcxI,EAAGzZ,QAAQiiB,YACzB8H,EAAY/R,EAAQgD,QACpByG,EAAMsI,EAAUrE,WAShB7I,EAAO7E,EAAQ6E,KACfmN,EAAQhS,EAAQwE,SACXz0B,EAAI,EAAGA,EAAI80B,EAAK/1B,OAAQiB,IAAK,CACpC,GAAIkiC,GAAWpN,EAAK90B,EACpB,IAAIkiC,EAASnE,YAAgB,IAAKmE,EAASlG,MAAQkG,EAASlG,KAAK8F,YAAcE,EAGxE,CACL,KAAOtI,GAAOwI,EAASlG,MACrBtC,EAAMiI,EAAGjI,EACX,IAAIyI,GAAejI,GAAoC,MAArBwH,GAAkDO,GAArBP,GAA8BQ,EAASE,UAClGF,GAASG,UACPxiC,GAAQqiC,EAASG,QAAS,UAAY,KACxCF,GAAe,GACjBG,EAAqB5Q,EAAIwQ,EAAUD,EAAOhD,IAExCkD,IACFlJ,GAAeiJ,EAASE,YACxBF,EAASE,WAAW5N,YAAY+N,SAASC,eAAetE,EAAcxM,EAAGzZ,QAASgqB,MAEpFvI,EAAMwI,EAASlG,KAAKsF,gBAhBoE,CACxF,GAAItF,GAAOyG,EAAiB/Q,EAAIwQ,EAAUD,EAAOhD,EACjD+C,GAAU/F,aAAaD,EAAMtC,GAgB/BuI,GAASC,EAAS/D,KAEpB,KAAOzE,GACLA,EAAMiI,EAAGjI,GAEb,QAAS4I,GAAqB5Q,EAAIwQ,EAAUD,EAAOhD,GACjD,IAAK,GAAIp+B,GAAI,EAAGA,EAAIqhC,EAASG,QAAQtjC,OAAQ8B,IAAK,CAChD,GAAI6I,GAAOw4B,EAASG,QAAQxhC,EAChB,SAAR6I,EACFg5B,EAAehR,EAAIwQ,GACJ,UAARx4B,EACPi5B,EAAiBjR,EAAIwQ,EAAUD,EAAOhD,GACvB,SAARv1B,EACPk5B,EAAkBV,GACH,UAARx4B,GACPm5B,EAAkBnR,EAAIwQ,EAAUjD,GAEpCiD,EAASG,QAAU,KAErB,QAASS,GAAkBZ,GASzB,MARIA,GAASlG,MAAQkG,EAAS9mB,OAC5B8mB,EAASlG,KAAO5I,GAAI,MAAO,KAAM,KAAM,sBACnC8O,EAAS9mB,KAAK0mB,YAChBI,EAAS9mB,KAAK0mB,WAAWiB,aAAab,EAASlG,KAAMkG,EAAS9mB,MAChE8mB,EAASlG,KAAKxH,YAAY0N,EAAS9mB,MAC/BuW,IAAmB,EAAbC,KACRsQ,EAASlG,KAAKxyB,MAAM4qB,OAAS,IAE1B8N,EAASlG,KAElB,QAASgH,GAAqBd,GAC5B,GAAIe,GAAMf,EAASgB,QAAUhB,EAASgB,QAAU,KAAOhB,EAASzkB,KAAKylB,SAAW,IAAMhB,EAASzkB,KAAKylB,OAGpG,IAFID,IACFA,GAAO,8BACLf,EAASiB,WACPF,EACFf,EAASiB,WAAWx0B,UAAYs0B,GAEhCf,EAASiB,WAAWrB,WAAWC,YAAYG,EAASiB,YACpDjB,EAASiB,WAAa,UAEnB,IAAIF,EAAK,CACd,GAAIG,GAAON,EAAkBZ,EAC7BA,GAASiB,WAAaC,EAAKnH,aAAa7I,GAAI,MAAO,KAAM6P,GAAMG,EAAKzF,aAGxE,QAAS0F,GAAe3R,EAAIwQ,GAC1B,GAAIoB,GAAM5R,EAAGzB,QAAQ+E,gBACrB,OAAIsO,IAAOA,EAAI7lB,MAAQykB,EAASzkB,MAC9BiU,EAAGzB,QAAQ+E,iBAAmB,KAC9BkN,EAASzO,QAAU6P,EAAI7P,QAChB6P,EAAIC,OAENC,GAAiB9R,EAAIwQ,GAE9B,QAASQ,GAAehR,EAAIwQ,GAC1B,GAAIe,GAAMf,EAAS9mB,KAAKzM,UACpB40B,EAAQF,EAAe3R,EAAIwQ,EAC3BA,GAAS9mB,MAAQ8mB,EAASlG,OAC5BkG,EAASlG,KAAOuH,EAAME,KACxBvB,EAAS9mB,KAAK0mB,WAAWiB,aAAaQ,EAAME,IAAKvB,EAAS9mB,MAC1D8mB,EAAS9mB,KAAOmoB,EAAME,IAClBF,EAAML,SAAWhB,EAASgB,SAAWK,EAAMG,WAAaxB,EAASwB,WACnExB,EAASgB,QAAUK,EAAML,QACzBhB,EAASwB,UAAYH,EAAMG,UAC3Bd,EAAkBV,IACTe,IACTf,EAAS9mB,KAAKzM,UAAYs0B,GAG9B,QAASL,GAAkBV,GACzBc,EAAqBd,GACjBA,EAASzkB,KAAKkmB,UAChBb,EAAkBZ,GAAUvzB,UAAYuzB,EAASzkB,KAAKkmB,UAC/CzB,EAASlG,MAAQkG,EAAS9mB,OACjC8mB,EAASlG,KAAKrtB,UAAY,GAC5B,IAAI+0B,GAAYxB,EAASwB,UAAYxB,EAASwB,UAAY,KAAOxB,EAASzkB,KAAKimB,WAAa,IAAMxB,EAASzkB,KAAKimB,SAChHxB,GAAS9mB,KAAKzM,UAAY+0B,GAAa,GAEzC,QAASf,GAAiBjR,EAAIwQ,EAAUD,EAAOhD,GAS7C,GARIiD,EAASlE,SACXkE,EAASlG,KAAK+F,YAAYG,EAASlE,QACnCkE,EAASlE,OAAS,MAEhBkE,EAAS0B,mBACX1B,EAASlG,KAAK+F,YAAYG,EAAS0B,kBACnC1B,EAAS0B,iBAAmB,MAE1B1B,EAASzkB,KAAKyb,YAAa,CAC7B,GAAIkK,GAAON,EAAkBZ,EAC7BA,GAAS0B,iBAAmBxQ,GAAI,MAAO,KAAM,gCAAkC8O,EAASzkB,KAAKyb,YAAa,UAAYxH,EAAGzZ,QAAQ4iB,YAAcoE,EAAKuC,UAAYvC,EAAKwC,kBAAoB,cAAgBxC,EAAKwC,iBAAmB,MACjO2B,EAAKnH,aAAaiG,EAAS0B,iBAAkB1B,EAAS9mB,MAExD,GAAIyoB,GAAU3B,EAASzkB,KAAKqmB,aAC5B,IAAIpS,EAAGzZ,QAAQiiB,aAAe2J,EAAS,CACrC,GAAIT,GAAON,EAAkBZ,GACzB6B,EAAa7B,EAASlE,OAAS5K,GAAI,MAAO,KAAM,4BAA6B,UAAY1B,EAAGzZ,QAAQ4iB,YAAcoE,EAAKuC,UAAYvC,EAAKwC,kBAAoB,KAOhK,IANA/P,EAAGzB,QAAQ5M,MAAM2gB,cAAcD,GAC/BX,EAAKnH,aAAa8H,EAAY7B,EAAS9mB,MACnC8mB,EAASzkB,KAAKyb,cAChB6K,EAAWp1B,WAAa,IAAMuzB,EAASzkB,KAAKyb,cAC1CxH,EAAGzZ,QAAQiiB,aAAiB2J,GAAYA,EAAQ,4BAClD3B,EAASE,WAAa2B,EAAWvP,YAAYpB,GAAI,MAAO8K,EAAcxM,EAAGzZ,QAASgqB,GAAQ,8CAA+C,SAAWhD,EAAKmC,WAAW,0BAA4B,cAAgB1P,EAAGzB,QAAQyF,kBAAoB,QAC7OmO,EACF,IAAK,GAAIzX,GAAI,EAAGA,EAAIsF,EAAGzZ,QAAQgc,QAAQl1B,SAAUqtB,EAAG,CAClD,GAAIhqB,GAAKsvB,EAAGzZ,QAAQgc,QAAQ7H,GACxBwN,EAAQiK,EAAQlhC,eAAeP,IAAOyhC,EAAQzhC,EAC9Cw3B,IACFmK,EAAWvP,YAAYpB,GAAI,OAAQwG,GAAQ,wBAAyB,SAAWqF,EAAKmC,WAAWh/B,GAAM,cAAgB68B,EAAKhE,YAAY74B,GAAM,SAItJ,QAASygC,GAAkBnR,EAAIwQ,EAAUjD,GACnCiD,EAASjE,YACXiE,EAASjE,UAAY,KACvB,KAAK,GACD90B,GADK6yB,EAAOkG,EAASlG,KAAK2B,WACpB3B,EAAMA,EAAO7yB,EAAM,CAC3B,GAAIA,GAAO6yB,EAAKsF,WACM,0BAAlBtF,EAAKrtB,WACPuzB,EAASlG,KAAK+F,YAAY/F,GAE9BiI,EAAkBvS,EAAIwQ,EAAUjD,GAElC,QAASwD,GAAiB/Q,EAAIwQ,EAAUD,EAAOhD,GAC7C,GAAIsE,GAAQF,EAAe3R,EAAIwQ,EAS/B,OARAA,GAAS9mB,KAAO8mB,EAASlG,KAAOuH,EAAME,IAClCF,EAAML,UACRhB,EAASgB,QAAUK,EAAML,SACvBK,EAAMG,YACRxB,EAASwB,UAAYH,EAAMG,WAC7Bd,EAAkBV,GAClBS,EAAiBjR,EAAIwQ,EAAUD,EAAOhD,GACtCgF,EAAkBvS,EAAIwQ,EAAUjD,GACzBiD,EAASlG,KAElB,QAASiI,GAAkBvS,EAAIwQ,EAAUjD,GAEvC,GADAiF,EAAqBxS,EAAIwQ,EAASzkB,KAAMykB,EAAUjD,GAAM,GACpDiD,EAASf,KACX,IAAK,GAAInhC,GAAI,EAAGA,EAAIkiC,EAASf,KAAKpiC,OAAQiB,IACxCkkC,EAAqBxS,EAAIwQ,EAASf,KAAKnhC,GAAIkiC,EAAUjD,GAAM,GAEjE,QAASiF,GAAqBxS,EAAIjU,EAAMykB,EAAUjD,EAAMkF,GACtD,GAAK1mB,EAAK8a,QAGV,IAAK,GADD6K,GAAON,EAAkBZ,GACpBliC,EAAI,EACTokC,EAAK3mB,EAAK8a,QAASv4B,EAAIokC,EAAGrlC,SAAUiB,EAAG,CACzC,GAAIqkC,GAASD,EAAGpkC,GACZg8B,EAAO5I,GAAI,OAAQiR,EAAOrI,MAAO,wBAChCqI,GAAOC,mBACVtI,EAAK3I,aAAa,mBAAoB,QACxCkR,EAAmBF,EAAQrI,EAAMkG,EAAUjD,GAC3CvN,EAAGzB,QAAQ5M,MAAM2gB,cAAchI,GAC3BmI,GAAcE,EAAOG,MACvBpB,EAAKnH,aAAaD,EAAMkG,EAASlE,QAAUkE,EAAS9mB,MAEpDgoB,EAAK5O,YAAYwH,GACnByI,GAAYJ,EAAQ,WAGxB,QAASE,GAAmBF,EAAQrI,EAAMkG,EAAUjD,GAClD,GAAIoF,EAAOK,UAAW,EACnBxC,EAASjE,YAAciE,EAASjE,eAAiBl+B,KAAKi8B,EACvD,IAAI5C,GAAQ6F,EAAKH,YACjB9C,GAAKxyB,MAAMs0B,KAAOmB,EAAKuC,SAAW,KAC7B6C,EAAOM,cACVvL,GAAS6F,EAAKwC,iBACdzF,EAAKxyB,MAAMo7B,YAAc3F,EAAKwC,iBAAmB,MAEnDzF,EAAKxyB,MAAM4vB,MAAQA,EAAQ,KAEzBiL,EAAOM,cACT3I,EAAKxyB,MAAM4qB,OAAS,EACpB4H,EAAKxyB,MAAMq7B,SAAW,WACjBR,EAAOK,YACV1I,EAAKxyB,MAAM+vB,YAAc0F,EAAKwC,iBAAmB,OAYvD,QAASqD,GAAQphB,GACf,MAAOqhB,IAAIrhB,EAAEjG,KAAMiG,EAAE5Z,IAEvB,QAASk7B,GAAO5hC,EAAG4kB,GACjB,MAAOid,IAAI7hC,EAAG4kB,GAAK,EAAIA,EAAI5kB,EAE7B,QAAS8hC,GAAO9hC,EAAG4kB,GACjB,MAAOid,IAAI7hC,EAAG4kB,GAAK,EAAI5kB,EAAI4kB,EAE7B,QAASmd,GAAYzT,GACdA,EAAG7nB,MAAMmnB,UACZU,EAAGzB,QAAQ5M,MAAMoN,QACjB8B,GAAQb,IAGZ,QAAS0T,GAAW1T,GAClB,MAAOA,GAAGzZ,QAAQotB,UAAY3T,EAAG9B,IAAI0V,SAGvC,QAASC,GAAe7T,EAAI8T,EAAUC,EAASC,EAAKC,GAClD,GAAI/V,GAAM8B,EAAG9B,GACb8B,GAAGzB,QAAQrrB,OAAQ,EACd8gC,IACHA,EAAM9V,EAAI8V,IACZ,IAAIE,GAAQlU,EAAG7nB,MAAMqnB,eAA2B,SAAVyU,EAClCE,EAAYjW,EAAIkW,WAAWN,GAC3BO,EAAa,IACjB,IAAIH,GAASF,EAAIM,OAAOjnC,OAAS,EAC/B,GAAIknC,IAAcA,GAAWziB,KAAK,OAASgiB,GACzC,GAAIE,EAAIM,OAAOjnC,OAASknC,GAAWlnC,QAAU,EAAG,CAC9CgnC,IACA,KAAK,GAAI/lC,GAAI,EAAGA,EAAIimC,GAAWlnC,OAAQiB,IACrC+lC,EAAWhmC,KAAK6vB,EAAIkW,WAAWG,GAAWjmC,UAErC6lC,GAAU9mC,QAAU2mC,EAAIM,OAAOjnC,SACxCgnC,EAAaG,GAAIL,EAAW,SAAS5lC,GACnC,OAAQA,KAId,KAAK,GAAID,GAAI0lC,EAAIM,OAAOjnC,OAAS,EAAGiB,GAAK,EAAGA,IAAK,CAC/C,GAAImmC,GAAQT,EAAIM,OAAOhmC,GACnB85B,EAAOqM,EAAMrM,OACbC,EAAKoM,EAAMpM,IACXoM,GAAMC,UACJX,GAAWA,EAAU,EACvB3L,EAAOiL,GAAIjL,EAAKrc,KAAMqc,EAAKhwB,GAAK27B,GACzB/T,EAAG7nB,MAAMinB,YAAc8U,IAC9B7L,EAAKgL,GAAIhL,EAAGtc,KAAMwa,KAAKwF,IAAIxD,GAAQrK,EAAKmK,EAAGtc,MAAMrC,KAAKrc,OAAQg7B,EAAGjwB,GAAKu8B,GAAIR,GAAW9mC,UAEzF,IAAIunC,GAAc5U,EAAGQ,MAAMoU,YACvBC,GACFzM,KAAMA,EACNC,GAAIA,EACJ3e,KAAM2qB,EAAaA,EAAW/lC,EAAI+lC,EAAWhnC,QAAU8mC,EACvDF,OAAQA,IAAWC,EAAQ,QAAUlU,EAAG7nB,MAAMsnB,YAAc,MAAQ,UAEtEqV,IAAW9U,EAAG9B,IAAK2W,GACnB9B,GAAY/S,EAAI,YAAaA,EAAI6U,GAE/Bf,IAAaI,GACfa,GAAgB/U,EAAI8T,GACtBkB,GAAoBhV,GACpBA,EAAGQ,MAAMoU,YAAcA,EACvB5U,EAAGQ,MAAMyU,QAAS,EAClBjV,EAAG7nB,MAAMqnB,cAAgBQ,EAAG7nB,MAAMsnB,aAAc,EAElD,QAASyV,GAAYvjC,EAAGquB,GACtB,GAAImV,GAASxjC,EAAEyjC,eAAiBzjC,EAAEyjC,cAAcC,QAAQ,aACxD,OAAIF,IACFxjC,EAAE2jC,iBACG5B,EAAW1T,IAAQA,EAAGzZ,QAAQgvB,cACjCC,GAAQxV,EAAI,WACV6T,EAAe7T,EAAImV,EAAQ,EAAG,KAAM,YAEjC,GANT,OASF,QAASJ,IAAgB/U,EAAI8T,GAC3B,GAAK9T,EAAGzZ,QAAQkvB,eAAkBzV,EAAGzZ,QAAQmvB,YAG7C,IAAK,GADD1B,GAAMhU,EAAG9B,IAAI8V,IACR1lC,EAAI0lC,EAAIM,OAAOjnC,OAAS,EAAGiB,GAAK,EAAGA,IAAK,CAC/C,GAAImmC,GAAQT,EAAIM,OAAOhmC,EACvB,MAAImmC,EAAMkB,KAAKv9B,GAAK,KAAQ9J,GAAK0lC,EAAIM,OAAOhmC,EAAI,GAAGqnC,KAAK5pB,MAAQ0oB,EAAMkB,KAAK5pB,MAA3E,CAEA,GAAIlF,GAAOmZ,EAAG4V,UAAUnB,EAAMkB,MAC1Br7B,GAAW,CACf,IAAIuM,EAAK4uB,eACP,IAAK,GAAItmC,GAAI,EAAGA,EAAI0X,EAAK4uB,cAAcpoC,OAAQ8B,IAC7C,GAAI2kC,EAAS3lC,QAAQ0Y,EAAK4uB,cAAcv7B,OAAO/K,IAAM,GAAI,CACvDmL,EAAWu7B,GAAW7V,EAAIyU,EAAMkB,KAAK5pB,KAAM,QAC3C,YAEKlF,GAAKtB,eACVsB,EAAKtB,cAAchN,KAAKgwB,GAAQvI,EAAG9B,IAAKuW,EAAMkB,KAAK5pB,MAAMrC,KAAK/K,MAAM,EAAG81B,EAAMkB,KAAKv9B,OACpFkC,EAAWu7B,GAAW7V,EAAIyU,EAAMkB,KAAK5pB,KAAM,SAE3CzR,IACFy4B,GAAY/S,EAAI,gBAAiBA,EAAIyU,EAAMkB,KAAK5pB,QAGtD,QAAS+pB,IAAe9V,GAGtB,IAAK,GAFDtW,MACA4qB,KACKhmC,EAAI,EAAGA,EAAI0xB,EAAG9B,IAAI8V,IAAIM,OAAOjnC,OAAQiB,IAAK,CACjD,GAAIyd,GAAOiU,EAAG9B,IAAI8V,IAAIM,OAAOhmC,GAAGqnC,KAAK5pB,KACjCgqB,GACFC,OAAQ3C,GAAItnB,EAAM,GAClB4pB,KAAMtC,GAAItnB,EAAO,EAAG,GAEtBuoB,GAAOjmC,KAAK0nC,GACZrsB,EAAKrb,KAAK2xB,EAAGiW,SAASF,EAAUC,OAAQD,EAAUJ,OAEpD,OACEjsB,KAAMA,EACN4qB,OAAQA,GAGZ,QAAS4B,IAAoBC,GAC3BA,EAAMxU,aAAa,cAAe,OAClCwU,EAAMxU,aAAa,iBAAkB,OACrCwU,EAAMxU,aAAa,aAAc,SAEnC,QAASyU,IAAcpW,GACrBxyB,KAAKwyB,GAAKA,EACVxyB,KAAK6oC,UAAY,GACjB7oC,KAAK8oC,aAAc,EACnB9oC,KAAK+oC,QAAU,GAAI1W,IACnBryB,KAAKgpC,qBAAsB,EAC3BhpC,KAAKipC,cAAe,EACpBjpC,KAAKkpC,UAAY,KAGnB,QAASC,MACP,GAAIC,GAAKlV,GAAI,WAAY,KAAM,KAAM,0EACjCmV,EAAMnV,GAAI,OAAQkV,GAAK,KAAM,iEAQjC,OAPIvV,IACFuV,EAAG9+B,MAAM4vB,MAAQ,SAEjBkP,EAAGjV,aAAa,OAAQ,OACtBmV,KACFF,EAAG9+B,MAAMi/B,OAAS,mBACpBb,GAAoBU,GACbC,EA4ST,QAASG,IAAqBhX,GAC5BxyB,KAAKwyB,GAAKA,EACVxyB,KAAKypC,eAAiBzpC,KAAK0pC,iBAAmB1pC,KAAK2pC,cAAgB3pC,KAAK4pC,gBAAkB,KAC1F5pC,KAAK+oC,QAAU,GAAI1W,IACnBryB,KAAK6pC,aAAc,EAwTrB,QAASC,IAAStX,EAAI/lB,GACpB,GAAImpB,GAAOmU,GAAgBvX,EAAI/lB,EAAI8R,KACnC,KAAKqX,GAAQA,EAAKiJ,OAChB,MAAO,KACT,IAAItgB,GAAOwc,GAAQvI,EAAG9B,IAAKjkB,EAAI8R,MAC3BrR,EAAO88B,GAAgBpU,EAAMrX,EAAM9R,EAAI8R,MACvC0rB,EAAQC,GAAS3rB,GACjB4rB,EAAO,MACX,IAAIF,EAAO,CACT,GAAIG,GAAUC,GAAcJ,EAAOx9B,EAAI7B,GACvCu/B,GAAOC,EAAU,EAAI,QAAU,OAEjC,GAAIz7B,GAAS27B,GAAuBp9B,EAAK85B,IAAKv6B,EAAI7B,GAAIu/B,EAEtD,OADAx7B,GAAOiQ,OAA4B,SAAnBjQ,EAAO47B,SAAsB57B,EAAOgD,IAAMhD,EAAOrC,MAC1DqC,EAET,QAAS67B,IAAO/9B,EAAKg+B,GAGnB,MAFIA,KACFh+B,EAAIg+B,KAAM,GACLh+B,EAET,QAASi+B,IAASlY,EAAIsK,EAAMle,GAC1B,GAAI+rB,EACJ,IAAI7N,GAAQtK,EAAGzB,QAAQgD,QAAS,CAE9B,GADA4W,EAAWnY,EAAGzB,QAAQgD,QAAQ6W,WAAWhsB,IACpC+rB,EACH,MAAOH,IAAOhY,EAAGqY,QAAQhF,GAAIrT,EAAGzB,QAAQyE,OAAS,KAAK,EACxDsH,GAAO,KACPle,EAAS,MAET,KAAK+rB,EAAW7N,GAAQ6N,EAAWA,EAAS/H,WAAY,CACtD,IAAK+H,GAAYA,GAAYnY,EAAGzB,QAAQgD,QACtC,MAAO,KACT,IAAI4W,EAAS/H,YAAc+H,EAAS/H,YAAcpQ,EAAGzB,QAAQgD,QAC3D,MAGN,IAAK,GAAIjzB,GAAI,EAAGA,EAAI0xB,EAAGzB,QAAQ6E,KAAK/1B,OAAQiB,IAAK,CAC/C,GAAIkiC,GAAWxQ,EAAGzB,QAAQ6E,KAAK90B,EAC/B,IAAIkiC,EAASlG,MAAQ6N,EACnB,MAAOG,IAAqB9H,EAAUlG,EAAMle,IAGlD,QAASksB,IAAqB9H,EAAUlG,EAAMle,GAyB5C,QAAS+b,GAAKoQ,EAAUC,EAASpsB,GAC/B,IAAK,GAAI9d,GAAI,GAAIA,GAAKmqC,EAAOA,EAAKprC,OAAS,GAAIiB,IAE7C,IAAK,GADDkmC,GAAU,EAAJlmC,EAAQyzB,EAAQyS,IAAMiE,EAAKnqC,GAC5Ba,EAAI,EAAGA,EAAIqlC,EAAInnC,OAAQ8B,GAAK,EAAG,CACtC,GAAIupC,GAAUlE,EAAIrlC,EAAI,EACtB,IAAIupC,GAAWH,GAAYG,GAAWF,EAAS,CAC7C,GAAIzsB,GAAO4sB,GAAW,EAAJrqC,EAAQkiC,EAASzkB,KAAOykB,EAASf,KAAKnhC,IACpD8J,EAAKo8B,EAAIrlC,GAAKid,CAGlB,QAFa,EAATA,GAAcssB,GAAWH,KAC3BngC,EAAKo8B,EAAIrlC,GAAKid,EAAS,EAAI,KACtBinB,GAAItnB,EAAM3T,KAlCzB,GAAIqmB,GAAU+R,EAAS9mB,KAAKuiB,WACxBgM,GAAM,CACV,KAAK3N,IAASsO,GAASna,EAAS6L,GAC9B,MAAO0N,IAAO3E,GAAIsF,GAAOnI,EAASzkB,MAAO,IAAI,EAC/C,IAAIue,GAAQ7L,IACVwZ,GAAM,EACN3N,EAAO7L,EAAQ2Z,WAAWhsB,GAC1BA,EAAS,GACJke,GAAM,CACT,GAAIve,GAAOykB,EAASf,KAAOkF,GAAInE,EAASf,MAAQe,EAASzkB,IACzD,OAAOisB,IAAO3E,GAAIsF,GAAO5sB,GAAOA,EAAKrC,KAAKrc,QAAS4qC,GAGvD,GAAIM,GAA4B,GAAjBjO,EAAKuO,SAAgBvO,EAAO,KACvCkO,EAAUlO,CAMd,KALKiO,GAAsC,GAA1BjO,EAAK8N,WAAW/qC,QAA2C,GAA5Bi9B,EAAK2B,WAAW4M,WAC9DN,EAAWjO,EAAK2B,WACZ7f,IACFA,EAASmsB,EAASO,UAAUzrC,SAEzBmrC,EAAQpI,YAAc3R,GAC3B+Z,EAAUA,EAAQpI,UACpB,IAAIrO,GAAUyO,EAASzO,QACnB0W,EAAO1W,EAAQ0W,KAgBfvQ,EAAQC,EAAKoQ,EAAUC,EAASpsB,EACpC,IAAI8b,EACF,MAAO8P,IAAO9P,EAAO+P,EACvB,KAAK,GAAIc,GAAQP,EAAQ5I,YACrBoJ,EAAOT,EAAWA,EAASO,UAAUzrC,OAAS+e,EAAS,EAAG2sB,EAAOA,EAAQA,EAAMnJ,YAAa,CAE9F,GADA1H,EAAQC,EAAK4Q,EAAOA,EAAM9M,WAAY,GAEpC,MAAO+L,IAAO3E,GAAInL,EAAMnc,KAAMmc,EAAM9vB,GAAK4gC,GAAOf,EAEhDe,IAAQD,EAAME,YAAY5rC,OAE9B,IAAK,GAAI6rC,GAASV,EAAQW,gBACtBH,EAAO5sB,EAAQ8sB,EAAQA,EAASA,EAAOC,gBAAiB,CAE1D,GADAjR,EAAQC,EAAK+Q,EAAQA,EAAOjN,WAAY,IAEtC,MAAO+L,IAAO3E,GAAInL,EAAMnc,KAAMmc,EAAM9vB,GAAK4gC,GAAOf,EAEhDe,IAAQD,EAAME,YAAY5rC,QAGhC,QAAS+rC,IAAepZ,EAAIoI,EAAMC,EAAIgR,EAAUC,GAI9C,QAASC,GAAgB7oC,GACvB,MAAO,UAAS8oC,GACd,MAAOA,GAAO9oC,IAAMA,GAGxB,QAAS+oC,GAAKnP,GACZ,GAAqB,GAAjBA,EAAKuO,SAAe,CACtB,GAAIa,GAASpP,EAAKqP,aAAa,UAC/B,IAAc,MAAVD,EAIF,MAHc,IAAVA,IACFA,EAASpP,EAAK2O,YAAYxkC,QAAQ,UAAW,UAC/CiV,GAAQgwB,EAGV,IACIjF,GADAmF,EAAWtP,EAAKqP,aAAa,YAEjC,IAAIC,EAAU,CACZ,GAAI1R,GAAQlI,EAAG6Z,UAAUxG,GAAIgG,EAAU,GAAIhG,GAAIiG,EAAS,EAAG,GAAIC,GAAiBK,GAGhF,aAFI1R,EAAM76B,SAAWonC,EAAQvM,EAAM,GAAGC,UACpCze,GAAQowB,GAAW9Z,EAAG9B,IAAKuW,EAAMrM,KAAMqM,EAAMpM,IAAIvW,KAAKioB,KAG1D,GAA4C,SAAxCzP,EAAKqP,aAAa,mBACpB,MACF,KAAK,GAAIrrC,GAAI,EAAGA,EAAIg8B,EAAK8N,WAAW/qC,OAAQiB,IAC1CmrC,EAAKnP,EAAK8N,WAAW9pC,GACnB,kBAAiBiK,KAAK+xB,EAAK0P,YAC7B30B,GAAU,OACP,IAAqB,GAAjBilB,EAAKuO,SAAe,CAC7B,GAAIoB,GAAM3P,EAAKwO,SACf,KAAKmB,EACH,MACE50B,KACFqE,GAAQqwB,EACR10B,GAAU,GAEZqE,GAAQuwB,GAGZ,IA1CA,GAAIvwB,GAAO,GACPrE,GAAU,EACV00B,EAAU/Z,EAAG9B,IAAIE,gBAyCnBqb,EAAKrR,GACDA,GAAQC,GAEZD,EAAOA,EAAKwH,WAEd,OAAOlmB,GAMT,QAASwwB,IAAU5F,EAAQ6F,GACzB3sC,KAAK8mC,OAASA,EACd9mC,KAAK2sC,UAAYA,EA0CnB,QAASC,IAAMpE,EAAQL,GACrBnoC,KAAKwoC,OAASA,EACdxoC,KAAKmoC,KAAOA,EAad,QAAS0E,IAAmB/F,EAAQ6F,GAClC,GAAIG,GAAOhG,EAAO6F,EAClB7F,GAAOiG,KAAK,SAAS7oC,EAAG4kB,GACtB,MAAOid,IAAI7hC,EAAE02B,OAAQ9R,EAAE8R,UAEzB+R,EAAYhsC,GAAQmmC,EAAQgG,EAC5B,KAAK,GAAIhsC,GAAI,EAAGA,EAAIgmC,EAAOjnC,OAAQiB,IAAK,CACtC,GAAI05B,GAAMsM,EAAOhmC,GACbmM,EAAO65B,EAAOhmC,EAAI,EACtB,IAAIilC,GAAI94B,EAAK4tB,KAAML,EAAII,SAAW,EAAG,CACnC,GAAIA,GAAOoL,EAAO/4B,EAAK2tB,OAAQJ,EAAII,QAC/BC,EAAKiL,EAAO74B,EAAK4tB,KAAML,EAAIK,MAC3BmS,EAAM//B,EAAKi6B,QAAU1M,EAAII,QAAUJ,EAAI2N,KAAOl7B,EAAK2tB,QAAU3tB,EAAKk7B,IAC7DwE,IAAL7rC,KACA6rC,EACJ7F,EAAOzlC,SAASP,EAAG,EAAG,GAAI8rC,IAAMI,EAAMnS,EAAKD,EAAMoS,EAAMpS,EAAOC,KAGlE,MAAO,IAAI6R,IAAU5F,EAAQ6F,GAE/B,QAASM,IAAgBzE,EAAQL,GAC/B,MAAO,IAAIuE,KAAW,GAAIE,IAAMpE,EAAQL,GAAQK,IAAU,GAE5D,QAAS0E,IAASxc,EAAKpD,GACrB,MAAOyL,MAAKC,IAAItI,EAAI+E,MAAOsD,KAAKwF,IAAIjR,EAAGoD,EAAI+E,MAAQ/E,EAAIuO,KAAO,IAEhE,QAAS4L,IAAQna,EAAKjkB,GACpB,GAAIA,EAAI8R,KAAOmS,EAAI+E,MACjB,MAAOoQ,IAAInV,EAAI+E,MAAO,EACxB,IAAIrY,GAAOsT,EAAI+E,MAAQ/E,EAAIuO,KAAO,CAClC,OAAIxyB,GAAI8R,KAAOnB,EACNyoB,GAAIzoB,EAAM2d,GAAQrK,EAAKtT,GAAMlB,KAAKrc,QACpCstC,GAAU1gC,EAAKsuB,GAAQrK,EAAKjkB,EAAI8R,MAAMrC,KAAKrc,QAEpD,QAASstC,IAAU1gC,EAAK2gC,GACtB,GAAIxiC,GAAK6B,EAAI7B,EACb,OAAU,OAANA,GAAcA,EAAKwiC,EACdvH,GAAIp5B,EAAI8R,KAAM6uB,GACT,EAALxiC,EACAi7B,GAAIp5B,EAAI8R,KAAM,GAEd9R,EAEX,QAAS4gC,IAAO3c,EAAK3vB,GACnB,MAAOA,IAAK2vB,EAAI+E,OAAS10B,EAAI2vB,EAAI+E,MAAQ/E,EAAIuO,KAE/C,QAASqO,IAAa5c,EAAK6c,GACzB,IAAK,GAAI/xB,MACL1a,EAAI,EAAGA,EAAIysC,EAAM1tC,OAAQiB,IAC3B0a,EAAI1a,GAAK+pC,GAAQna,EAAK6c,EAAMzsC,GAC9B,OAAO0a,GAET,QAASgyB,IAAY9c,EAAKuW,EAAOkB,EAAMsF,GACrC,GAAI/c,EAAI8B,IAAM9B,EAAI8B,GAAGzB,QAAQrrB,OAASgrB,EAAIgd,OAAQ,CAChD,GAAIlF,GAASvB,EAAMuB,MACnB,IAAIiF,EAAO,CACT,GAAIE,GAAY5H,GAAIoC,EAAMK,GAAU,CAChCmF,IAAc5H,GAAI0H,EAAOjF,GAAU,GACrCA,EAASL,EACTA,EAAOsF,GACEE,GAAc5H,GAAIoC,EAAMsF,GAAS,IAC1CtF,EAAOsF,GAGX,MAAO,IAAIb,IAAMpE,EAAQL,GAEzB,MAAO,IAAIyE,IAAMa,GAAStF,EAAMA,GAGpC,QAASyF,IAAgBld,EAAKyX,EAAMsF,EAAO10B,GACzC80B,GAAand,EAAK,GAAIgc,KAAWc,GAAY9c,EAAKA,EAAI8V,IAAIsH,UAAW3F,EAAMsF,IAAS,GAAI10B,GAE1F,QAASg1B,IAAiBrd,EAAKsd,EAAOj1B,GACpC,IAAK,GAAIyC,MACL1a,EAAI,EAAGA,EAAI4vB,EAAI8V,IAAIM,OAAOjnC,OAAQiB,IACpC0a,EAAI1a,GAAK0sC,GAAY9c,EAAKA,EAAI8V,IAAIM,OAAOhmC,GAAIktC,EAAMltC,GAAI,KACzD,IAAImtC,GAASpB,GAAmBrxB,EAAKkV,EAAI8V,IAAImG,UAC7CkB,IAAand,EAAKud,EAAQl1B,GAE5B,QAASm1B,IAAoBxd,EAAK5vB,EAAGmmC,EAAOluB,GAC1C,GAAI+tB,GAASpW,EAAI8V,IAAIM,OAAO31B,MAAM,EAClC21B,GAAOhmC,GAAKmmC,EACZ4G,GAAand,EAAKmc,GAAmB/F,EAAQpW,EAAI8V,IAAImG,WAAY5zB,GAEnE,QAASo1B,IAAmBzd,EAAK8X,EAAQL,EAAMpvB,GAC7C80B,GAAand,EAAKuc,GAAgBzE,EAAQL,GAAOpvB,GAEnD,QAASq1B,IAAsB1d,EAAK8V,GAClC,GAAIpiC,IACF0iC,OAAQN,EAAIM,OACZtJ,OAAQ,SAASsJ,GACf9mC,KAAK8mC,SACL,KAAK,GAAIhmC,GAAI,EAAGA,EAAIgmC,EAAOjnC,OAAQiB,IACjCd,KAAK8mC,OAAOhmC,GAAK,GAAI8rC,IAAM/B,GAAQna,EAAKoW,EAAOhmC,GAAG0nC,QAASqC,GAAQna,EAAKoW,EAAOhmC,GAAGqnC,QAMxF,OAHA5G,IAAO7Q,EAAK,wBAAyBA,EAAKtsB,GACtCssB,EAAI8B,IACN+O,GAAO7Q,EAAI8B,GAAI,wBAAyB9B,EAAI8B,GAAIpuB,GAC9CA,EAAI0iC,QAAUN,EAAIM,OACb+F,GAAmBzoC,EAAI0iC,OAAQ1iC,EAAI0iC,OAAOjnC,OAAS,GAEnD2mC,EAEX,QAAS6H,IAA2B3d,EAAK8V,EAAKztB,GAC5C,GAAI4V,GAAO+B,EAAI4d,QAAQ3f,KACnBvR,EAAO+pB,GAAIxY,EACXvR,IAAQA,EAAK0pB,QACfnY,EAAKA,EAAK9uB,OAAS,GAAK2mC,EACxB+H,GAAmB7d,EAAK8V,EAAKztB,IAE7B80B,GAAand,EAAK8V,EAAKztB,GAG3B,QAAS80B,IAAand,EAAK8V,EAAKztB,GAC9Bw1B,GAAmB7d,EAAK8V,EAAKztB,GAC7By1B,GAAsB9d,EAAKA,EAAI8V,IAAK9V,EAAI8B,GAAK9B,EAAI8B,GAAGQ,MAAM9vB,GAAK2S,IAAKkD,GAEtE,QAASw1B,IAAmB7d,EAAK8V,EAAKztB,IAChC01B,GAAW/d,EAAK,0BAA4BA,EAAI8B,IAAMic,GAAW/d,EAAI8B,GAAI,4BAC3EgU,EAAM4H,GAAsB1d,EAAK8V,GACnC,IAAIkI,GAAO31B,GAAWA,EAAQ21B,OAAS3I,GAAIS,EAAIsH,UAAU3F,KAAMzX,EAAI8V,IAAIsH,UAAU3F,MAAQ,EAAI,GAAK,EAClGwG,IAAkBje,EAAKke,GAAsBle,EAAK8V,EAAKkI,GAAM,IACvD31B,GAAWA,EAAQkjB,UAAW,IAAUvL,EAAI8B,IAChDgV,GAAoB9W,EAAI8B,IAE5B,QAASmc,IAAkBje,EAAK8V,GAC1BA,EAAIqI,OAAOne,EAAI8V,OAEnB9V,EAAI8V,IAAMA,EACN9V,EAAI8B,KACN9B,EAAI8B,GAAGQ,MAAMoU,YAAc1W,EAAI8B,GAAGQ,MAAM8b,kBAAmB,EAC3DC,GAAqBre,EAAI8B,KAE3B+S,GAAY7U,EAAK,iBAAkBA,IAErC,QAASse,IAAiBte,GACxBie,GAAkBje,EAAKke,GAAsBle,EAAKA,EAAI8V,IAAK,MAAM,GAAQyI,IAE3E,QAASL,IAAsBle,EAAK8V,EAAKkI,EAAMQ,GAE7C,IAAK,GADD1zB,GACK1a,EAAI,EAAGA,EAAI0lC,EAAIM,OAAOjnC,OAAQiB,IAAK,CAC1C,GAAImmC,GAAQT,EAAIM,OAAOhmC,GACnBquC,EAAYC,GAAW1e,EAAKuW,EAAMuB,OAAQkG,EAAMQ,GAChDG,EAAUD,GAAW1e,EAAKuW,EAAMkB,KAAMuG,EAAMQ,IAC5C1zB,GAAO2zB,GAAalI,EAAMuB,QAAU6G,GAAWpI,EAAMkB,QAClD3sB,IACHA,EAAMgrB,EAAIM,OAAO31B,MAAM,EAAGrQ,IAC5B0a,EAAI1a,GAAK,GAAI8rC,IAAMuC,EAAWE,IAGlC,MAAO7zB,GAAMqxB,GAAmBrxB,EAAKgrB,EAAImG,WAAanG,EAExD,QAAS4I,IAAW1e,EAAKjkB,EAAKiiC,EAAMQ,GAClC,GAAII,IAAU,EACVC,EAAS9iC,EACT+iC,EAAMd,GAAQ,CAClBhe,GAAI0V,UAAW,CACfqJ,GAAQ,OAAW,CACjB,GAAIlxB,GAAOwc,GAAQrK,EAAK6e,EAAOhxB,KAC/B,IAAIA,EAAKmxB,YACP,IAAK,GAAI5uC,GAAI,EAAGA,EAAIyd,EAAKmxB,YAAY7vC,SAAUiB,EAAG,CAChD,GAAI6uC,GAAKpxB,EAAKmxB,YAAY5uC,GACtBqsB,EAAIwiB,EAAG3D,MACX,KAAgB,MAAX2D,EAAG/U,OAAiBzN,EAAEyiB,cAAgBD,EAAG/U,MAAQ2U,EAAO3kC,GAAK+kC,EAAG/U,KAAO2U,EAAO3kC,OAAkB,MAAT+kC,EAAG9U,KAAe1N,EAAE0iB,eAAiBF,EAAG9U,IAAM0U,EAAO3kC,GAAK+kC,EAAG9U,GAAK0U,EAAO3kC,KAAM,CACzK,GAAIskC,IACF3N,GAAOpU,EAAG,qBACNA,EAAE2iB,mBAAmB,CACvB,GAAKvxB,EAAKmxB,YAEL,GACD5uC,CACF,UAHA,MAON,IAAKqsB,EAAE4iB,OACL,QACF,IAAIC,GAAS7iB,EAAEwN,KAAW,EAAN6U,EAAU,GAAK,EACnC,IAA2B,GAAvBzJ,GAAIiK,EAAQT,KACdS,EAAOplC,IAAM4kC,EACTQ,EAAOplC,GAAK,EAEZolC,EADEA,EAAOzxB,KAAOmS,EAAI+E,MACXoV,GAAQna,EAAKmV,GAAImK,EAAOzxB,KAAO,IAE/B,KACFyxB,EAAOplC,GAAK2T,EAAKrC,KAAKrc,SAE7BmwC,EADEA,EAAOzxB,KAAOmS,EAAI+E,MAAQ/E,EAAIuO,KAAO,EAC9B4G,GAAImK,EAAOzxB,KAAO,EAAG,GAErB,OAERyxB,GAAQ,CACX,GAAIV,EACF,MAAKJ,IAELxe,EAAI0V,UAAW,EACRP,GAAInV,EAAI+E,MAAO,IAFb2Z,GAAW1e,EAAKjkB,EAAKiiC,GAAM,EAItCY,IAAU,EACVU,EAASvjC,EACT+iC,GAAOA,EAGXD,EAASS,CACT,SAASP,IAIf,MAAOF,IAGX,QAASlO,IAAgB7O,GACvBA,EAAGzB,QAAQ5M,MAAM8rB,cAAczd,EAAGzB,QAAQ5M,MAAM+rB,oBAElD,QAASA,IAAiB1d,EAAIsb,GAK5B,IAAK,GAJDpd,GAAM8B,EAAG9B,IACT/hB,KACAwhC,EAAcxhC,EAAOyhC,QAAU/M,SAASgN,yBACxCC,EAAc3hC,EAAO4hC,UAAYlN,SAASgN,yBACrCvvC,EAAI,EAAGA,EAAI4vB,EAAI8V,IAAIM,OAAOjnC,OAAQiB,IACzC,GAAIgtC,KAAY,GAAShtC,GAAK4vB,EAAI8V,IAAImG,UAAtC,CAEA,GAAI1F,GAAQvW,EAAI8V,IAAIM,OAAOhmC,GACvB0vC,EAAYvJ,EAAMC,SAClBsJ,GAAahe,EAAGzZ,QAAQ03B,0BAC1BC,GAAoBle,EAAIyU,EAAMkB,KAAMgI,GACjCK,GACHG,GAAmBne,EAAIyU,EAAOqJ,GAElC,MAAO3hC,GAET,QAAS+hC,IAAoBle,EAAI2V,EAAMhlC,GACrC,GAAIsJ,GAAMmkC,GAAape,EAAI2V,EAAM,MAAO,KAAM,MAAO3V,EAAGzZ,QAAQ83B,2BAC5DC,EAAS3tC,EAAOmyB,YAAYpB,GAAI,MAAO,IAAU,qBAIrD,IAHA4c,EAAOxmC,MAAMs0B,KAAOnyB,EAAImyB,KAAO,KAC/BkS,EAAOxmC,MAAMyzB,IAAMtxB,EAAIsxB,IAAM,KAC7B+S,EAAOxmC,MAAMgvB,OAASP,KAAKC,IAAI,EAAGvsB,EAAIkxB,OAASlxB,EAAIsxB,KAAOvL,EAAGzZ,QAAQg4B,aAAe,KAChFtkC,EAAIghC,MAAO,CACb,GAAIuD,GAAc7tC,EAAOmyB,YAAYpB,GAAI,MAAO,IAAU,gDAC1D8c,GAAY1mC,MAAMymB,QAAU,GAC5BigB,EAAY1mC,MAAMs0B,KAAOnyB,EAAIghC,MAAM7O,KAAO,KAC1CoS,EAAY1mC,MAAMyzB,IAAMtxB,EAAIghC,MAAM1P,IAAM,KACxCiT,EAAY1mC,MAAMgvB,OAA8C,KAApC7sB,EAAIghC,MAAM9P,OAASlxB,EAAIghC,MAAM1P,KAAa,MAG1E,QAAS4S,IAAmBne,EAAIyU,EAAO9jC,GAOrC,QAAS8tC,GAAIrS,EAAMb,EAAK7D,EAAOyD,GACnB,EAANI,IACFA,EAAM,GACRA,EAAMhF,KAAKqC,MAAM2C,GACjBJ,EAAS5E,KAAKqC,MAAMuC,GACpBuT,EAAS5b,YAAYpB,GAAI,MAAO,KAAM,sBAAuB,6BAA+B0K,EAAO,YAAcb,EAAM,eAA0B,MAAT7D,EAAgBiX,EAAYvS,EAAO1E,GAAS,gBAAkByD,EAASI,GAAO,OAExN,QAASqT,GAAY7yB,EAAM8yB,EAASC,GAKlC,QAASC,GAAO3mC,EAAI8jC,GAClB,MAAO8C,IAAWhf,EAAIqT,GAAItnB,EAAM3T,GAAK,MAAO6mC,EAAS/C,GALvD,GAEIpiC,GACAqF,EAHA8/B,EAAU1W,GAAQrK,EAAKnS,GACvBmzB,EAAUD,EAAQv1B,KAAKrc,MA0C3B,OApCA8xC,IAAoBzH,GAASuH,GAAUJ,GAAW,EAAY,MAATC,EAAgBI,EAAUJ,EAAO,SAAS1W,EAAMC,EAAI2U,GACvG,GACIoC,GACAhT,EACAnB,EAHAoU,EAAUN,EAAO3W,EAAM,OAI3B,IAAIA,GAAQC,EACV+W,EAAWC,EACXjT,EAAOnB,EAAQoU,EAAQjT,SAClB,CAEL,GADAgT,EAAWL,EAAO1W,EAAK,EAAG,SACf,OAAP2U,EAAc,CAChB,GAAIsC,GAAMD,CACVA,GAAUD,EACVA,EAAWE,EAEblT,EAAOiT,EAAQjT,KACfnB,EAAQmU,EAASnU,MAEJ,MAAX4T,GAA2B,GAARzW,IACrBgE,EAAOmT,GACLH,EAAS7T,IAAM8T,EAAQ9T,IAAM,IAC/BkT,EAAIrS,EAAMiT,EAAQ9T,IAAK,KAAM8T,EAAQlU,QACrCiB,EAAOmT,EACHF,EAAQlU,OAASiU,EAAS7T,KAC5BkT,EAAIrS,EAAMiT,EAAQlU,OAAQ,KAAMiU,EAAS7T,MAEhC,MAATuT,GAAiBzW,GAAM6W,IACzBjU,EAAQ0T,KACL7kC,GAASulC,EAAQ9T,IAAMzxB,EAAMyxB,KAAO8T,EAAQ9T,KAAOzxB,EAAMyxB,KAAO8T,EAAQjT,KAAOtyB,EAAMsyB,QACxFtyB,EAAQulC,KACLlgC,GAAOigC,EAASjU,OAAShsB,EAAIgsB,QAAUiU,EAASjU,QAAUhsB,EAAIgsB,QAAUiU,EAASnU,MAAQ9rB,EAAI8rB,SAChG9rB,EAAMigC,GACGG,EAAW,EAAlBnT,IACFA,EAAOmT,GACTd,EAAIrS,EAAMgT,EAAS7T,IAAKN,EAAQmB,EAAMgT,EAASjU,WAG/CrxB,MAAOA,EACPqF,IAAKA,GA3DT,GAAIof,GAAUyB,EAAGzB,QACbL,EAAM8B,EAAG9B,IACTwgB,EAAW7N,SAASgN,yBACpBlR,EAAU6S,GAASxf,EAAGzB,SACtBghB,EAAW5S,EAAQP,KACnBuS,EAAYpY,KAAKC,IAAIjI,EAAQ6D,WAAYkL,GAAatN,GAAMzB,EAAQ4D,MAAM0N,YAAclD,EAAQ1B,MAyDhGwU,EAAQhL,EAAMrM,OACdsX,EAAMjL,EAAMpM,IAChB,IAAIoX,EAAM1zB,MAAQ2zB,EAAI3zB,KACpB6yB,EAAYa,EAAM1zB,KAAM0zB,EAAMrnC,GAAIsnC,EAAItnC,QACjC,CACL,GAAIihC,GAAW9Q,GAAQrK,EAAKuhB,EAAM1zB,MAC9ButB,EAAS/Q,GAAQrK,EAAKwhB,EAAI3zB,MAC1B4zB,EAAcC,GAAWvG,IAAauG,GAAWtG,GACjDuG,EAAUjB,EAAYa,EAAM1zB,KAAM0zB,EAAMrnC,GAAIunC,EAActG,EAAS3vB,KAAKrc,OAAS,EAAI,MAAM8R,IAC3F2gC,EAAalB,EAAYc,EAAI3zB,KAAM4zB,EAAc,EAAI,KAAMD,EAAItnC,IAAI0B,KACnE6lC,KACEE,EAAQtU,IAAMuU,EAAWvU,IAAM,GACjCkT,EAAIoB,EAAQ5U,MAAO4U,EAAQtU,IAAK,KAAMsU,EAAQ1U,QAC9CsT,EAAIc,EAAUO,EAAWvU,IAAKuU,EAAW1T,KAAM0T,EAAW3U,SAE1DsT,EAAIoB,EAAQ5U,MAAO4U,EAAQtU,IAAKuU,EAAW1T,KAAOyT,EAAQ5U,MAAO4U,EAAQ1U,SAGzE0U,EAAQ1U,OAAS2U,EAAWvU,KAC9BkT,EAAIc,EAAUM,EAAQ1U,OAAQ,KAAM2U,EAAWvU,KAEnD56B,EAAOmyB,YAAY4b,GAErB,QAASqB,IAAa/f,GACpB,GAAKA,EAAG7nB,MAAMmnB,QAAd,CAEA,GAAIf,GAAUyB,EAAGzB,OACjByhB,eAAczhB,EAAQ0hB,QACtB,IAAIrW,IAAK,CACTrL,GAAQuD,UAAUhqB,MAAMooC,WAAa,GACjClgB,EAAGzZ,QAAQ45B,gBAAkB,EAC/B5hB,EAAQ0hB,QAAUG,YAAY,WAC5B7hB,EAAQuD,UAAUhqB,MAAMooC,YAActW,GAAMA,GAAM,GAAK,UACtD5J,EAAGzZ,QAAQ45B,iBACPngB,EAAGzZ,QAAQ45B,gBAAkB,IACpC5hB,EAAQuD,UAAUhqB,MAAMooC,WAAa,WAEzC,QAAS1a,IAAYxF,EAAIqgB,GACnBrgB,EAAG9B,IAAIrX,KAAKjC,YAAcob,EAAG9B,IAAIqH,SAAWvF,EAAGzB,QAAQyE,QACzDhD,EAAG7nB,MAAMynB,UAAUrtB,IAAI8tC,EAAMzf,GAAK0f,GAAiBtgB,IAEvD,QAASsgB,IAAgBtgB,GACvB,GAAI9B,GAAM8B,EAAG9B,GAGb,IAFIA,EAAIqH,SAAWrH,EAAI+E,QACrB/E,EAAIqH,SAAWrH,EAAI+E,SACjB/E,EAAIqH,UAAYvF,EAAGzB,QAAQyE,QAA/B,CAEA,GAAI7jB,IAAO,GAAIohC,MAAOvgB,EAAGzZ,QAAQi6B,SAC7BroC,EAAQsoC,GAAUviB,EAAIrX,KAAM65B,GAAe1gB,EAAI9B,EAAIqH,WACnDob,IACJziB,GAAIkH,KAAKlH,EAAIqH,SAAUgB,KAAKwF,IAAI7N,EAAI+E,MAAQ/E,EAAIuO,KAAMzM,EAAGzB,QAAQyE,OAAS,KAAM,SAASjX,GACvF,GAAImS,EAAIqH,UAAYvF,EAAGzB,QAAQwE,SAAU,CACvC,GAAI6d,GAAY70B,EAAKuZ,OACjBub,EAAU90B,EAAKrC,KAAKrc,OAAS2yB,EAAGzZ,QAAQu6B,mBACxCC,EAAcC,GAAchhB,EAAIjU,EAAM80B,EAAUJ,GAAUviB,EAAIrX,KAAM1O,GAASA,GAAO,EACxF4T,GAAKuZ,OAASyb,EAAYzb,MAC1B,IAAI2b,GAASl1B,EAAKm1B,aACdC,EAASJ,EAAYK,OACrBD,GACFp1B,EAAKm1B,aAAeC,EACbF,IACPl1B,EAAKm1B,aAAe,KAEtB,KAAK,GADDG,IAAYT,GAAaA,EAAUvzC,QAAU0e,EAAKuZ,OAAOj4B,QAAU4zC,GAAUE,KAAYF,IAAWE,GAAUF,EAAOzP,SAAW2P,EAAO3P,SAAWyP,EAAOjP,WAAamP,EAAOnP,WACxK1jC,EAAI,GAAI+yC,GAAY/yC,EAAIsyC,EAAUvzC,SAAUiB,EACnD+yC,EAAWT,EAAUtyC,IAAMyd,EAAKuZ,OAAOh3B,EACrC+yC,IACFV,EAAatyC,KAAK6vB,EAAIqH,UACxBxZ,EAAKsZ,WAAawb,EAAU1oC,EAAQsoC,GAAUviB,EAAIrX,KAAM1O,OAEpD4T,GAAKrC,KAAKrc,QAAU2yB,EAAGzZ,QAAQu6B,oBACjCQ,GAAYthB,EAAIjU,EAAKrC,KAAMvR,GAC7B4T,EAAKsZ,WAAanH,EAAIqH,SAAW,GAAK,EAAIkb,GAAUviB,EAAIrX,KAAM1O,GAAS,IAGzE,SADE+lB,EAAIqH,UACD,GAAIgb,MAAOphC,GACdqmB,GAAYxF,EAAIA,EAAGzZ,QAAQg7B,YACpB,GAFT,SAKEZ,EAAatzC,QACfmoC,GAAQxV,EAAI,WACV,IAAK,GAAI1xB,GAAI,EAAGA,EAAIqyC,EAAatzC,OAAQiB,IACvCkzC,GAAcxhB,EAAI2gB,EAAaryC,GAAI,WAG3C,QAASmzC,IAAczhB,EAAIlF,EAAG4mB,GAK5B,IAAK,GAJDC,GACAC,EACA1jB,EAAM8B,EAAG9B,IACT2jB,EAAMH,EAAU,GAAK5mB,GAAKkF,EAAG9B,IAAIrX,KAAKi7B,UAAY,IAAO,KACpD7E,EAASniB,EAAGmiB,EAAS4E,IAAO5E,EAAQ,CAC3C,GAAIA,GAAU/e,EAAI+E,MAChB,MAAO/E,GAAI+E,KACb,IAAIlX,GAAOwc,GAAQrK,EAAK+e,EAAS,EACjC,IAAIlxB,EAAKsZ,cAAgBqc,GAAWzE,GAAU/e,EAAIqH,UAChD,MAAO0X,EACT,IAAI3iC,GAAWynC,GAAYh2B,EAAKrC,KAAM,KAAMsW,EAAGzZ,QAAQy7B,UACxC,MAAXJ,GAAmBD,EAAYrnC,KACjCsnC,EAAU3E,EAAS,EACnB0E,EAAYrnC,GAGhB,MAAOsnC,GAET,QAASlB,IAAe1gB,EAAIlF,EAAG4mB,GAC7B,GAAIxjB,GAAM8B,EAAG9B,IACTK,EAAUyB,EAAGzB,OACjB,KAAKL,EAAIrX,KAAKjC,WACZ,OAAO,CACT,IAAI3K,GAAMwnC,GAAczhB,EAAIlF,EAAG4mB,GAC3BvpC,EAAQ8B,EAAMikB,EAAI+E,OAASsF,GAAQrK,EAAKjkB,EAAM,GAAGorB,UAarD,OATEltB,GAHGA,EAGKsoC,GAAUviB,EAAIrX,KAAM1O,GAFpByM,GAAWsZ,EAAIrX,MAGzBqX,EAAIkH,KAAKnrB,EAAK6gB,EAAG,SAAS/O,GACxBu1B,GAAYthB,EAAIjU,EAAKrC,KAAMvR,EAC3B,IAAI8pC,GAAOhoC,GAAO6gB,EAAI,GAAK7gB,EAAM,GAAK,GAAKA,GAAOskB,EAAQwE,UAAY9oB,EAAMskB,EAAQyE,MACpFjX,GAAKsZ,WAAa4c,EAAOxB,GAAUviB,EAAIrX,KAAM1O,GAAS,OACpD8B,IAEAynC,IACFxjB,EAAIqH,SAAWtrB,GACV9B,EAET,QAASszB,IAAWlN,GAClB,MAAOA,GAAQ0D,UAAUmN,UAE3B,QAASvG,IAAYtK,GACnB,MAAOA,GAAQ2D,MAAMuM,aAAelQ,EAAQ0D,UAAUwM,aAExD,QAAS+Q,IAASjhB,GAChB,GAAIA,EAAQ8F,eACV,MAAO9F,GAAQ8F,cACjB,IAAI1yB,GAAIuwC,GAAqB3jB,EAAQwD,QAASL,GAAI,MAAO,MACrD5pB,EAAQke,OAAOsL,iBAAmBtL,OAAOsL,iBAAiB3vB,GAAKA,EAAEwwC,aACjEC,GACFhW,KAAM9b,SAASxY,EAAMo7B,aACrBjI,MAAO3a,SAASxY,EAAM6qB,cAIxB,OAFK0f,OAAMD,EAAKhW,OAAUiW,MAAMD,EAAKnX,SACnC1M,EAAQ8F,eAAiB+d,GACpBA,EAET,QAAS9Y,IAAUtJ,GACjB,MAAOsC,IAActC,EAAGzB,QAAQoF,eAElC,QAAS2J,IAAatN,GACpB,MAAOA,GAAGzB,QAAQkE,SAASgE,YAAc6C,GAAUtJ,GAAMA,EAAGzB,QAAQsF,SAEtE,QAAS8K,IAAc3O,GACrB,MAAOA,GAAGzB,QAAQkE,SAASqG,aAAeQ,GAAUtJ,GAAMA,EAAGzB,QAAQqF,UAEvE,QAAS0e,IAAkBtiB,EAAIwQ,EAAU+R,GACvC,GAAIlc,GAAWrG,EAAGzZ,QAAQqY,aACtB4jB,EAAWnc,GAAYiH,GAAatN,EACxC,KAAKwQ,EAASzO,QAAQ0gB,SAAWpc,GAAYmK,EAASzO,QAAQ2F,OAAS8a,EAAU,CAC/E,GAAIC,GAAUjS,EAASzO,QAAQ0gB,UAC/B,IAAIpc,EAAU,CACZmK,EAASzO,QAAQ2F,MAAQ8a,CAEzB,KAAK,GADDE,GAAQlS,EAAS9mB,KAAKuiB,WAAW0W,iBAC5Br0C,EAAI,EAAGA,EAAIo0C,EAAMr1C,OAAS,EAAGiB,IAAK,CACzC,GAAI05B,GAAM0a,EAAMp0C,GACZmJ,EAAOirC,EAAMp0C,EAAI,EACjBi4B,MAAKqc,IAAI5a,EAAImD,OAAS1zB,EAAK0zB,QAAU,GACvCsX,EAAQp0C,MAAM25B,EAAImD,OAAS1zB,EAAK8zB,KAAO,EAAIgX,EAAKhX,MAGtDkX,EAAQp0C,KAAKk0C,EAAKpX,OAASoX,EAAKhX,MAGpC,QAASiM,IAAgBhH,EAAUzkB,EAAMwkB,GACvC,GAAIC,EAASzkB,MAAQA,EACnB,OACEyoB,IAAKhE,EAASzO,QAAQyS,IACtBqO,MAAOrS,EAASzO,QAAQ8gB,MAE5B,KAAK,GAAIv0C,GAAI,EAAGA,EAAIkiC,EAASf,KAAKpiC,OAAQiB,IACxC,GAAIkiC,EAASf,KAAKnhC,IAAMyd,EACtB,OACEyoB,IAAKhE,EAASzO,QAAQ0W,KAAKnqC,GAC3Bu0C,MAAOrS,EAASzO,QAAQ+gB,OAAOx0C,GAErC,KAAK,GAAIA,GAAI,EAAGA,EAAIkiC,EAASf,KAAKpiC,OAAQiB,IACxC,GAAIqqC,GAAOnI,EAASf,KAAKnhC,IAAMiiC,EAC7B,OACEiE,IAAKhE,EAASzO,QAAQ0W,KAAKnqC,GAC3Bu0C,MAAOrS,EAASzO,QAAQ+gB,OAAOx0C,GAC/B4qC,QAAQ,GAGhB,QAAS6J,IAA0B/iB,EAAIjU,GACrCA,EAAO6zB,GAAW7zB,EAClB,IAAIwkB,GAAQoI,GAAO5sB,GACfqX,EAAOpD,EAAGzB,QAAQ+E,iBAAmB,GAAI0f,IAAShjB,EAAG9B,IAAKnS,EAAMwkB,EACpEnN,GAAKmN,MAAQA,CACb,IAAIsB,GAAQzO,EAAKyO,MAAQC,GAAiB9R,EAAIoD,EAG9C,OAFAA,GAAK1Z,KAAOmoB,EAAME,IAClBmQ,GAAqBliB,EAAGzB,QAAQyD,YAAa6P,EAAME,KAC5C3O,EAET,QAAS6f,IAAYjjB,EAAIjU,EAAM3T,EAAI8jC,GACjC,MAAOgH,IAAoBljB,EAAImjB,GAAsBnjB,EAAIjU,GAAO3T,EAAI8jC,GAEtE,QAAS3E,IAAgBvX,EAAIuQ,GAC3B,GAAIA,GAASvQ,EAAGzB,QAAQwE,UAAYwN,EAAQvQ,EAAGzB,QAAQyE,OACrD,MAAOhD,GAAGzB,QAAQ6E,KAAKggB,GAAcpjB,EAAIuQ,GAC3C,IAAIqB,GAAM5R,EAAGzB,QAAQ+E,gBACrB,OAAIsO,IAAOrB,GAASqB,EAAIrB,OAASA,EAAQqB,EAAIrB,MAAQqB,EAAInF,KAChDmF,EADT,OAGF,QAASuR,IAAsBnjB,EAAIjU,GACjC,GAAIwkB,GAAQoI,GAAO5sB,GACfqX,EAAOmU,GAAgBvX,EAAIuQ,EAC3BnN,KAASA,EAAK1Z,KAChB0Z,EAAO,KACEA,GAAQA,EAAKuN,UACtBC,EAAqB5Q,EAAIoD,EAAMmN,EAAO/C,EAAcxN,IACpDA,EAAGQ,MAAMC,aAAc,GAEpB2C,IACHA,EAAO2f,GAA0B/iB,EAAIjU,GACvC,IAAIrR,GAAO88B,GAAgBpU,EAAMrX,EAAMwkB,EACvC,QACExkB,KAAMA,EACNqX,KAAMA,EACNmf,KAAM,KACN/N,IAAK95B,EAAK85B,IACVqO,MAAOnoC,EAAKmoC,MACZ3J,OAAQx+B,EAAKw+B,OACbmK,YAAY,GAGhB,QAASH,IAAoBljB,EAAIsjB,EAAUlrC,EAAI8jC,EAAMqH,GAC/CD,EAASpK,SACX9gC,EAAK,GACP,IACI8vB,GADAsb,EAAMprC,GAAM8jC,GAAQ,GAexB,OAbIoH,GAAST,MAAM5xC,eAAeuyC,GAChCtb,EAAQob,EAAST,MAAMW,IAElBF,EAASf,OACZe,EAASf,KAAOe,EAASlgB,KAAK1Z,KAAKojB,yBAChCwW,EAASD,aACZf,GAAkBtiB,EAAIsjB,EAASlgB,KAAMkgB,EAASf,MAC9Ce,EAASD,YAAa,GAExBnb,EAAQub,GAAiBzjB,EAAIsjB,EAAUlrC,EAAI8jC,GACtChU,EAAMwb,QACTJ,EAAST,MAAMW,GAAOtb,KAGxBkE,KAAMlE,EAAMkE,KACZnB,MAAO/C,EAAM+C,MACbM,IAAKgY,EAAYrb,EAAMyb,KAAOzb,EAAMqD,IACpCJ,OAAQoY,EAAYrb,EAAM0b,QAAU1b,EAAMiD,QAS9C,QAAS2M,IAAuBtD,EAAKp8B,EAAI8jC,GAKvC,IAAK,GAJD5R,GACAxwB,EACAqF,EACA44B,EACKzpC,EAAI,EAAGA,EAAIkmC,EAAInnC,OAAQiB,GAAK,EAAG,CACtC,GAAIu1C,GAASrP,EAAIlmC,GACbw1C,EAAOtP,EAAIlmC,EAAI,EAcnB,IAbSu1C,EAALzrC,GACF0B,EAAQ,EACRqF,EAAM,EACN44B,EAAW,QACG+L,EAAL1rC,GACT0B,EAAQ1B,EAAKyrC,EACb1kC,EAAMrF,EAAQ,IACLxL,GAAKkmC,EAAInnC,OAAS,GAAK+K,GAAM0rC,GAAQtP,EAAIlmC,EAAI,GAAK8J,KAC3D+G,EAAM2kC,EAAOD,EACb/pC,EAAQqF,EAAM,EACV/G,GAAM0rC,IACR/L,EAAW,UAEF,MAATj+B,EAAe,CAIjB,GAHAwwB,EAAOkK,EAAIlmC,EAAI,GACXu1C,GAAUC,GAAQ5H,IAAS5R,EAAKyZ,WAAa,OAAS,WACxDhM,EAAWmE,GACD,QAARA,GAA2B,GAATpiC,EACpB,KAAOxL,GAAKkmC,EAAIlmC,EAAI,IAAMkmC,EAAIlmC,EAAI,IAAMkmC,EAAIlmC,EAAI,GAAGy1C,YACjDzZ,EAAOkK,GAAKlmC,GAAK,GAAK,GACtBypC,EAAW,MAEf,IAAY,SAARmE,GAAmBpiC,GAASgqC,EAAOD,EACrC,KAAOv1C,EAAIkmC,EAAInnC,OAAS,GAAKmnC,EAAIlmC,EAAI,IAAMkmC,EAAIlmC,EAAI,KAAOkmC,EAAIlmC,EAAI,GAAGy1C,YACnEzZ,EAAOkK,GAAKlmC,GAAK,GAAK,GACtBypC,EAAW,OAEf,QAGJ,OACEzN,KAAMA,EACNxwB,MAAOA,EACPqF,IAAKA,EACL44B,SAAUA,EACViM,WAAYH,EACZI,SAAUH,GAGd,QAASL,IAAiBzjB,EAAIsjB,EAAUlrC,EAAI8jC,GAC1C,GAKIqG,GALAzkB,EAAQga,GAAuBwL,EAAS9O,IAAKp8B,EAAI8jC,GACjD5R,EAAOxM,EAAMwM,KACbxwB,EAAQgkB,EAAMhkB,MACdqF,EAAM2e,EAAM3e,IACZ44B,EAAWja,EAAMia,QAErB,IAAqB,GAAjBzN,EAAKuO,SAAe,CACtB,IAAK,GAAIvqC,GAAI,EAAO,EAAJA,EAAOA,IAAK,CAC1B,KAAOwL,GAASoqC,GAAgBZ,EAASv3B,KAAKrC,KAAKxP,OAAO4jB,EAAMkmB,WAAalqC,OACzEA,CACJ,MAAOgkB,EAAMkmB,WAAa7kC,EAAM2e,EAAMmmB,UAAYC,GAAgBZ,EAASv3B,KAAKrC,KAAKxP,OAAO4jB,EAAMkmB,WAAa7kC,OAC3GA,CACJ,IAAI8gB,IAAmB,EAAbC,IAA2B,GAATpmB,GAAcqF,GAAO2e,EAAMmmB,SAAWnmB,EAAMkmB,WACtEzB,EAAOjY,EAAK8F,WAAWtD,4BAClB,IAAI7M,IAAMD,EAAGzZ,QAAQqY,aAAc,CACxC,GAAI8jB,GAAQjO,GAAMnK,EAAMxwB,EAAOqF,GAAKwjC,gBAElCJ,GADEG,EAAMr1C,OACDq1C,EAAc,SAARxG,EAAkBwG,EAAMr1C,OAAS,EAAI,GAE3C82C,OAET5B,GAAO9N,GAAMnK,EAAMxwB,EAAOqF,GAAK2tB,yBAA2BqX,EAE5D,IAAI5B,EAAKnW,MAAQmW,EAAKtX,OAAkB,GAATnxB,EAC7B,KACFqF,GAAMrF,EACNA,GAAgB,EAChBi+B,EAAW,QAET9X,IAAmB,GAAbC,KACRqiB,EAAO6B,GAA0BpkB,EAAGzB,QAAQwD,QAASwgB,QAClD,CACDzoC,EAAQ,IACVi+B,EAAWmE,EAAO,QACpB,IAAIwG,EAEFH,GADEviB,EAAGzZ,QAAQqY,eAAiB8jB,EAAQpY,EAAKqY,kBAAkBt1C,OAAS,EAC/Dq1C,EAAc,SAARxG,EAAkBwG,EAAMr1C,OAAS,EAAI,GAE3Ci9B,EAAKwC,wBAEhB,GAAI7M,IAAmB,EAAbC,KAAmBpmB,KAAWyoC,IAASA,EAAKnW,OAASmW,EAAKtX,OAAQ,CAC1E,GAAIoZ,GAAQ/Z,EAAK8F,WAAWuS,iBAAiB,EAE3CJ,GADE8B,GAEAjY,KAAMiY,EAAMjY,KACZnB,MAAOoZ,EAAMjY,KAAO1F,GAAU1G,EAAGzB,SACjCgN,IAAK8Y,EAAM9Y,IACXJ,OAAQkZ,EAAMlZ,QAGTgZ,GAMX,IAAK,GAJDR,GAAOpB,EAAKhX,IAAM+X,EAASf,KAAKhX,IAChC+Y,EAAO/B,EAAKpX,OAASmY,EAASf,KAAKhX,IACnCgZ,GAAOZ,EAAOW,GAAQ,EACtB7B,EAAUa,EAASlgB,KAAKrB,QAAQ0gB,QAC3Bn0C,EAAI,EAAGA,EAAIm0C,EAAQp1C,OAAS,KAC/Bk3C,EAAM9B,EAAQn0C,IADoBA,KAGxC,GAAIi9B,GAAMj9B,EAAIm0C,EAAQn0C,EAAI,GAAK,EAC3B+gC,EAAMoT,EAAQn0C,GACd6N,GACFiwB,MAAmB,SAAZ2L,EAAsBwK,EAAKtX,MAAQsX,EAAKnW,MAAQkX,EAASf,KAAKnW,KACrEnB,OAAoB,QAAZ8M,EAAqBwK,EAAKnW,KAAOmW,EAAKtX,OAASqY,EAASf,KAAKnW,KACrEb,IAAKA,EACLJ,OAAQkE,EAQV,OANKkT,GAAKnW,MAASmW,EAAKtX,QACtB9uB,EAAOunC,OAAQ,GACZ1jB,EAAGzZ,QAAQ83B,4BACdliC,EAAOwnC,KAAOA,EACdxnC,EAAOynC,QAAUU,GAEZnoC,EAET,QAASioC,IAA0BriB,EAASwgB,GAC1C,IAAKvsB,OAAOwuB,QAAgC,MAAtBA,OAAOC,aAAuBD,OAAOC,aAAeD,OAAOE,aAAeC,GAAkB5iB,GAChH,MAAOwgB,EACT,IAAIqC,GAASJ,OAAOC,YAAcD,OAAOE,WACrCG,EAASL,OAAOM,YAAcN,OAAOO,UACzC,QACE3Y,KAAMmW,EAAKnW,KAAOwY,EAClB3Z,MAAOsX,EAAKtX,MAAQ2Z,EACpBrZ,IAAKgX,EAAKhX,IAAMsZ,EAChB1Z,OAAQoX,EAAKpX,OAAS0Z,GAG1B,QAASG,IAA6BxU,GACpC,GAAIA,EAASzO,UACXyO,EAASzO,QAAQ8gB,SACjBrS,EAASzO,QAAQ0gB,QAAU,KACvBjS,EAASf,MACX,IAAK,GAAInhC,GAAI,EAAGA,EAAIkiC,EAASf,KAAKpiC,OAAQiB,IACxCkiC,EAASzO,QAAQ+gB,OAAOx0C,MAGhC,QAAS22C,IAA0BjlB,GACjCA,EAAGzB,QAAQ2mB,gBAAkB,KAC7B3d,GAAevH,EAAGzB,QAAQyD,YAC1B,KAAK,GAAI1zB,GAAI,EAAGA,EAAI0xB,EAAGzB,QAAQ6E,KAAK/1B,OAAQiB,IAC1C02C,GAA6BhlB,EAAGzB,QAAQ6E,KAAK90B,IAEjD,QAAS03B,IAAYhG,GACnBilB,GAA0BjlB,GAC1BA,EAAGzB,QAAQ4F,gBAAkBnE,EAAGzB,QAAQ6F,iBAAmBpE,EAAGzB,QAAQ8F,eAAiB,KAClFrE,EAAGzZ,QAAQqY,eACdoB,EAAGzB,QAAQiG,gBAAiB,GAC9BxE,EAAGzB,QAAQ0F,aAAe,KAE5B,QAASkhB,MACP,MAAOnvB,QAAOovB,cAAgBvU,SAASwU,iBAAmBxU,SAAStzB,MAAMusB,WAE3E,QAASwb,MACP,MAAOtvB,QAAOuvB,cAAgB1U,SAASwU,iBAAmBxU,SAAStzB,MAAMssB,UAE3E,QAAS2b,IAAgBxlB,EAAIif,EAASsD,EAAMvnC,GAC1C,GAAIikC,EAAQpY,QACV,IAAK,GAAIv4B,GAAI,EAAGA,EAAI2wC,EAAQpY,QAAQx5B,SAAUiB,EAC5C,GAAI2wC,EAAQpY,QAAQv4B,GAAGwkC,MAAO,CAC5B,GAAIrG,GAAOgZ,GAAaxG,EAAQpY,QAAQv4B,GACxCi0C,GAAKhX,KAAOkB,EACZ8V,EAAKpX,QAAUsB,EAErB,GAAe,QAAXzxB,EACF,MAAOunC,EACJvnC,KACHA,EAAU,QACZ,IAAI0qC,GAAO5Z,GAAamT,EAKxB,IAJe,SAAXjkC,EACF0qC,GAAQja,GAAWzL,EAAGzB,SAEtBmnB,GAAQ1lB,EAAGzB,QAAQgF,WACN,QAAXvoB,GAAgC,UAAXA,EAAqB,CAC5C,GAAI2qC,GAAO3lB,EAAGzB,QAAQ0D,UAAU6K,uBAChC4Y,IAAQC,EAAKpa,KAAkB,UAAXvwB,EAAsB,EAAIsqC,KAC9C,IAAIM,GAAOD,EAAKvZ,MAAmB,UAAXpxB,EAAsB,EAAImqC,KAClD5C,GAAKnW,MAAQwZ,EACbrD,EAAKtX,OAAS2a,EAIhB,MAFArD,GAAKhX,KAAOma,EACZnD,EAAKpX,QAAUua,EACRnD,EAET,QAASsD,IAAgB7lB,EAAI+e,EAAQ/jC,GACnC,GAAe,OAAXA,EACF,MAAO+jC,EACT,IAAI3S,GAAO2S,EAAO3S,KACdb,EAAMwT,EAAOxT,GACjB,IAAe,QAAXvwB,EACFoxB,GAAQ+Y,KACR5Z,GAAO+Z,SACF,IAAe,SAAXtqC,IAAuBA,EAAS,CACzC,GAAI8qC,GAAW9lB,EAAGzB,QAAQ4D,MAAM2K,uBAChCV,IAAQ0Z,EAAS1Z,KACjBb,GAAOua,EAASva,IAElB,GAAIwa,GAAe/lB,EAAGzB,QAAQ0D,UAAU6K,uBACxC,QACEV,KAAMA,EAAO2Z,EAAa3Z,KAC1Bb,IAAKA,EAAMwa,EAAaxa,KAG5B,QAASyT,IAAWhf,EAAI/lB,EAAKe,EAASikC,EAAS/C,GAG7C,MAFK+C,KACHA,EAAU1W,GAAQvI,EAAG9B,IAAKjkB,EAAI8R,OACzBy5B,GAAgBxlB,EAAIif,EAASgE,GAAYjjB,EAAIif,EAAShlC,EAAI7B,GAAI8jC,GAAOlhC,GAE9E,QAASojC,IAAape,EAAI/lB,EAAKe,EAASikC,EAAS+G,EAAiBzC,GAIhE,QAASxxC,GAAIqG,EAAI6yB,GACf,GAAItQ,GAAIuoB,GAAoBljB,EAAIgmB,EAAiB5tC,EAAI6yB,EAAQ,QAAU,OAAQsY,EAK/E,OAJItY,GACFtQ,EAAEyR,KAAOzR,EAAEsQ,MAEXtQ,EAAEsQ,MAAQtQ,EAAEyR,KACPoZ,GAAgBxlB,EAAIif,EAAStkB,EAAG3f,GAEzC,QAASirC,GAAQ7tC,EAAIw/B,GACnB,GAAIsO,GAAOzO,EAAMG,GACb3M,EAAQib,EAAK30B,MAAQ,CAUzB,OATInZ,IAAM+tC,GAASD,IAAStO,GAAWsO,EAAK30B,MAAQkmB,EAAMG,EAAU,GAAGrmB,OACrE20B,EAAOzO,IAAQG,GACfx/B,EAAKguC,GAAUF,IAASA,EAAK30B,MAAQ,EAAI,EAAI,GAC7C0Z,GAAQ,GACC7yB,GAAMguC,GAAUF,IAAStO,EAAUH,EAAMpqC,OAAS,GAAK64C,EAAK30B,MAAQkmB,EAAMG,EAAU,GAAGrmB,QAChG20B,EAAOzO,IAAQG,GACfx/B,EAAK+tC,GAASD,GAAQA,EAAK30B,MAAQ,EACnC0Z,GAAQ,GAENA,GAAS7yB,GAAM8tC,EAAK7d,IAAMjwB,EAAK8tC,EAAK9d,KAC/Br2B,EAAIqG,EAAK,GACXrG,EAAIqG,EAAI6yB,GAzBjBgU,EAAUA,GAAW1W,GAAQvI,EAAG9B,IAAKjkB,EAAI8R,MACpCi6B,IACHA,EAAkB7C,GAAsBnjB,EAAIif,GAyB9C,IAAIxH,GAAQC,GAASuH,GACjB7mC,EAAK6B,EAAI7B,EACb,KAAKq/B,EACH,MAAO1lC,GAAIqG,EACb,IAAIw/B,GAAUC,GAAcJ,EAAOr/B,GAC/B6hC,EAAMgM,EAAQ7tC,EAAIw/B,EAGtB,OAFiB,OAAbyO,KACFpM,EAAIgB,MAAQgL,EAAQ7tC,EAAIiuC,KACnBpM,EAET,QAASqM,IAAetmB,EAAI/lB,GAC1B,GAAImyB,GAAO,EACPnyB,EAAMo+B,GAAQrY,EAAG9B,IAAKjkB,EACrB+lB,GAAGzZ,QAAQqY,eACdwN,EAAO1F,GAAU1G,EAAGzB,SAAWtkB,EAAI7B,GACrC,IAAI6mC,GAAU1W,GAAQvI,EAAG9B,IAAKjkB,EAAI8R,MAC9Bwf,EAAMO,GAAamT,GAAWxT,GAAWzL,EAAGzB,QAChD,QACE6N,KAAMA,EACNnB,MAAOmB,EACPb,IAAKA,EACLJ,OAAQI,EAAM0T,EAAQnY,QAG1B,QAASyf,IAAYx6B,EAAM3T,EAAIouC,EAASC,GACtC,GAAIxsC,GAAMo5B,GAAItnB,EAAM3T,EAIpB,OAHA6B,GAAIwsC,KAAOA,EACPD,IACFvsC,EAAIusC,SAAU,GACTvsC,EAET,QAASysC,IAAW1mB,EAAIhO,EAAGkJ,GACzB,GAAIgD,GAAM8B,EAAG9B,GAEb,IADAhD,GAAK8E,EAAGzB,QAAQgF,WACR,EAAJrI,EACF,MAAOqrB,IAAYroB,EAAI+E,MAAO,GAAG,EAAM,GACzC,IAAIsN,GAAQ7E,GAAaxN,EAAKhD,GAC1BtQ,EAAOsT,EAAI+E,MAAQ/E,EAAIuO,KAAO,CAClC,IAAI8D,EAAQ3lB,EACV,MAAO27B,IAAYroB,EAAI+E,MAAQ/E,EAAIuO,KAAO,EAAGlE,GAAQrK,EAAKtT,GAAMlB,KAAKrc,QAAQ,EAAM,EAC7E,GAAJ2kB,IACFA,EAAI,EAEN,KADA,GAAIitB,GAAU1W,GAAQrK,EAAKqS,KAChB,CACT,GAAIrI,GAAQye,GAAgB3mB,EAAIif,EAAS1O,EAAOve,EAAGkJ,GAC/C6M,EAASO,GAAmB2W,GAC5B2H,EAAY7e,GAAUA,EAAOI,KAAK,GAAG,EACzC,KAAIJ,KAAWG,EAAM9vB,GAAKwuC,EAAUxe,KAAKhwB,IAAM8vB,EAAM9vB,IAAMwuC,EAAUxe,KAAKhwB,IAAM8vB,EAAMue,KAAO,GAG3F,MAAOve,EAFPqI,GAAQoI,GAAOsG,EAAU2H,EAAUve,GAAGtc,OAK5C,QAAS46B,IAAgB3mB,EAAIif,EAAStG,EAAQ3mB,EAAGkJ,GAK/C,QAAS2rB,GAAKzuC,GACZ,GAAI+kC,GAAKiB,GAAape,EAAIqT,GAAIsF,EAAQvgC,GAAK,OAAQ6mC,EAAS+G,EAE5D,OADAc,IAAY,EACRC,EAAW5J,EAAGhS,OACTgS,EAAG/Q,KAAO4a,EACVD,EAAW5J,EAAG5R,IACd4R,EAAG/Q,KAAO4a,GAEjBF,GAAY,EACP3J,EAAG/Q,MAbZ,GAAI2a,GAAW7rB,EAAI4Q,GAAamT,GAC5B6H,GAAY,EACZE,EAAS,EAAIhnB,EAAGzB,QAAQE,QAAQgI,YAChCuf,EAAkB7C,GAAsBnjB,EAAIif,GAY5CgI,EAAOvP,GAASuH,GAChBjG,EAAOiG,EAAQv1B,KAAKrc,OACpB+6B,EAAO8e,GAASjI,GAChB5W,EAAK8e,GAAUlI,GACfmI,EAAQP,EAAKze,GACbif,EAAcP,EACdQ,EAAMT,EAAKxe,GACXkf,EAAYT,CAChB,IAAI90B,EAAIs1B,EACN,MAAOf,IAAY5N,EAAQtQ,EAAIkf,EAAW,EAC5C,QAAW,CACT,GAAIN,EAAO5e,GAAMD,GAAQC,GAAMmf,GAAavI,EAAS7W,EAAM,GAAkB,GAAbC,EAAKD,EAAW,CAG9E,IAFA,GAAIhwB,GAASgvC,EAAJp1B,GAA0Bs1B,EAAMt1B,GAAnBA,EAAIo1B,EAAmBhf,EAAOC,EAChDof,EAAQz1B,GAAK5Z,GAAMgwB,EAAOgf,EAAQE,GAC/BpD,GAAgBjF,EAAQv1B,KAAKxP,OAAO9B,OACvCA,CACJ,IAAI6B,GAAMssC,GAAY5N,EAAQvgC,EAAIA,GAAMgwB,EAAOif,EAAcE,EAAmB,GAARE,EAAa,GAAKA,EAAQ,EAAI,EAAI,EAC1G,OAAOxtC,GAET,GAAIytC,GAAOnhB,KAAKQ,KAAKiS,EAAO,GACxB2O,EAASvf,EAAOsf,CACpB,IAAIT,EAAM,CACRU,EAASvf,CACT,KAAK,GAAI95B,GAAI,EAAOo5C,EAAJp5C,IAAYA,EAC1Bq5C,EAASH,GAAavI,EAAS0I,EAAQ,GAE3C,GAAIC,GAAUf,EAAKc,EACfC,GAAU51B,GACZqW,EAAKsf,EACLL,EAAMM,GACFL,EAAYT,KACdQ,GAAO,KACTtO,EAAO0O,IAEPtf,EAAOuf,EACPP,EAAQQ,EACRP,EAAcP,EACd9N,GAAQ0O,IAKd,QAASthB,IAAW7H,GAClB,GAAgC,MAA5BA,EAAQ6F,iBACV,MAAO7F,GAAQ6F,gBACjB,IAAmB,MAAfyjB,GAAqB,CACvBA,GAAcnmB,GAAI,MAClB,KAAK,GAAIpzB,GAAI,EAAO,GAAJA,IAAUA,EACxBu5C,GAAY/kB,YAAY+N,SAASC,eAAe,MAChD+W,GAAY/kB,YAAYpB,GAAI,MAE9BmmB,IAAY/kB,YAAY+N,SAASC,eAAe,MAElDoR,GAAqB3jB,EAAQwD,QAAS8lB,GACtC,IAAI/gB,GAAS+gB,GAAYpZ,aAAe,EAIxC,OAHI3H,GAAS,IACXvI,EAAQ6F,iBAAmB0C,GAC7BS,GAAehJ,EAAQwD,SAChB+E,GAAU,EAEnB,QAASJ,IAAUnI,GACjB,GAA+B,MAA3BA,EAAQ4F,gBACV,MAAO5F,GAAQ4F,eACjB,IAAI6R,GAAStU,GAAI,OAAQ,cACrBqQ,EAAMrQ,GAAI,OAAQsU,GACtBkM,IAAqB3jB,EAAQwD,QAASgQ,EACtC,IAAIwQ,GAAOvM,EAAOlJ,wBACdpF,GAAS6a,EAAKtX,MAAQsX,EAAKnW,MAAQ,EAGvC,OAFI1E,GAAQ,IACVnJ,EAAQ4F,gBAAkBuD,GACrBA,GAAS,GAIlB,QAASnH,IAAeP,GACtBA,EAAGQ,OACDR,GAAIA,EACJ8nB,aAAa,EACbld,YAAa5K,EAAG9B,IAAI4I,OACpBrG,aAAa,EACbmU,YAAa,KACbK,QAAQ,EACR8S,WAAY,KACZC,uBAAwB,KACxBC,qBAAsB,EACtB3L,kBAAkB,EAClB4L,eAAe,EACfpe,WAAY,KACZD,UAAW,KACXse,YAAa,KACbppB,OAAO,EACPruB,KAAM03C,IAEJC,GACFA,GAAeC,IAAIj6C,KAAK2xB,EAAGQ,OAE3BR,EAAGQ,MAAM+nB,UAAYF,IACnBC,KAAMtoB,EAAGQ,OACTgoB,qBAIN,QAASC,IAAoBv5C,GAC3B,GAAIw5C,GAAYx5C,EAAMs5C,iBAClBl6C,EAAI,CACR,GAAG,CACD,KAAOA,EAAIo6C,EAAUr7C,OAAQiB,IAC3Bo6C,EAAUp6C,GAAGF,KAAK,KACpB,KAAK,GAAIe,GAAI,EAAGA,EAAID,EAAMo5C,IAAIj7C,OAAQ8B,IAAK,CACzC,GAAIw5C,GAAKz5C,EAAMo5C,IAAIn5C,EACnB,IAAIw5C,EAAGX,uBACL,KAAOW,EAAGV,qBAAuBU,EAAGX,uBAAuB36C,QACzDs7C,EAAGX,uBAAuBW,EAAGV,wBAAwB75C,KAAK,KAAMu6C,EAAG3oB,WAElE1xB,EAAIo6C,EAAUr7C,QAEzB,QAAS+zB,IAAapB,GACpB,GAAI2oB,GAAK3oB,EAAGQ,MACRtxB,EAAQy5C,EAAGJ,SACf,IAAKr5C,EAEL,IACEu5C,GAAoBv5C,GACpB,QACAm5C,GAAiB,IACjB,KAAK,GAAI/5C,GAAI,EAAGA,EAAIY,EAAMo5C,IAAIj7C,OAAQiB,IACpCY,EAAMo5C,IAAIh6C,GAAG0xB,GAAGQ,MAAQ,IAC1BooB,IAAc15C,IAGlB,QAAS05C,IAAc15C,GAErB,IAAK,GADDo5C,GAAMp5C,EAAMo5C,IACPh6C,EAAI,EAAGA,EAAIg6C,EAAIj7C,OAAQiB,IAC9Bu6C,GAAgBP,EAAIh6C,GACtB,KAAK,GAAIA,GAAI,EAAGA,EAAIg6C,EAAIj7C,OAAQiB,IAC9Bw6C,GAAgBR,EAAIh6C,GACtB,KAAK,GAAIA,GAAI,EAAGA,EAAIg6C,EAAIj7C,OAAQiB,IAC9By6C,GAAgBT,EAAIh6C,GACtB,KAAK,GAAIA,GAAI,EAAGA,EAAIg6C,EAAIj7C,OAAQiB,IAC9B06C,GAAgBV,EAAIh6C,GACtB,KAAK,GAAIA,GAAI,EAAGA,EAAIg6C,EAAIj7C,OAAQiB,IAC9B26C,GAAoBX,EAAIh6C,IAE5B,QAASu6C,IAAgBF,GACvB,GAAI3oB,GAAK2oB,EAAG3oB,GACRzB,EAAUyB,EAAGzB,OACjBmP,GAAoB1N,GAChB2oB,EAAGT,eACLpiB,EAAY9F,GACd2oB,EAAGO,WAAaP,EAAGb,aAAea,EAAGloB,aAA+B,MAAhBkoB,EAAG9e,WAAqB8e,EAAGR,cAAgBQ,EAAGR,YAAY/f,KAAKrc,KAAOwS,EAAQwE,UAAY4lB,EAAGR,YAAY9f,GAAGtc,MAAQwS,EAAQyE,SAAWzE,EAAQiG,gBAAkBxE,EAAGzZ,QAAQqY,aAChO+pB,EAAG3d,OAAS2d,EAAGO,YAAc,GAAInc,GAAc/M,EAAI2oB,EAAGO,aACpD3d,IAAKod,EAAG9e,UACR8B,OAAQgd,EAAGR,aACVQ,EAAGloB,aAER,QAASqoB,IAAgBH,GACvBA,EAAGQ,eAAiBR,EAAGO,YAAcrb,EAAsB8a,EAAG3oB,GAAI2oB,EAAG3d,QAEvE,QAAS+d,IAAgBJ,GACvB,GAAI3oB,GAAK2oB,EAAG3oB,GACRzB,EAAUyB,EAAGzB,OACboqB,GAAGQ,gBACLre,EAAwB9K,GAC1B2oB,EAAG/Z,WAAanG,EAAqBzI,GACjCzB,EAAQiG,iBAAmBxE,EAAGzZ,QAAQqY,eACxC+pB,EAAGS,cAAgBnG,GAAYjjB,EAAIzB,EAAQ+F,QAAS/F,EAAQ+F,QAAQ5a,KAAKrc,QAAQ++B,KAAO,EACxFpM,EAAGzB,QAAQ6D,WAAaumB,EAAGS,cAC3BT,EAAG/Z,WAAW5F,YAAczC,KAAKC,IAAIjI,EAAQkE,SAASgE,YAAalI,EAAQ4D,MAAM0N,WAAa8Y,EAAGS,cAAgB9f,GAAUtJ,GAAMA,EAAGzB,QAAQsF,UAC5I8kB,EAAGU,cAAgB9iB,KAAKC,IAAI,EAAGjI,EAAQ4D,MAAM0N,WAAa8Y,EAAGS,cAAgB9b,GAAatN,MAExF2oB,EAAGQ,gBAAkBR,EAAGrM,oBAC1BqM,EAAGW,kBAAoB/qB,EAAQ5M,MAAM+rB,oBAEzC,QAASsL,IAAgBL,GACvB,GAAI3oB,GAAK2oB,EAAG3oB,EACY,OAApB2oB,EAAGS,gBACLppB,EAAGzB,QAAQ4D,MAAMrqB,MAAM8tB,SAAW+iB,EAAGS,cAAgB,KACjDT,EAAGU,cAAgBrpB,EAAG9B,IAAI4L,YAC5BW,GAAczK,EAAIuG,KAAKwF,IAAI/L,EAAGzB,QAAQkE,SAASqH,WAAY6e,EAAGU,gBAAgB,GAChFrpB,EAAGzB,QAAQiG,gBAAiB,GAE1BmkB,EAAGW,mBACLtpB,EAAGzB,QAAQ5M,MAAM8rB,cAAckL,EAAGW,mBAChCX,EAAGQ,gBACLra,EAAkB9O,EAAI2oB,EAAG/Z,aACvB+Z,EAAGQ,gBAAkBR,EAAG/d,aAAe5K,EAAG9B,IAAI4I,SAChDb,EAAiBjG,EAAI2oB,EAAG/Z,YACtB+Z,EAAGrM,kBACLyD,GAAa/f,GACXA,EAAG7nB,MAAMmnB,SAAWqpB,EAAG/T,aACzB5U,EAAGzB,QAAQ5M,MAAMyO,MAAMuoB,EAAG1T,QACxB0T,EAAG5pB,OAAS4pB,EAAG5pB,OAASwP,MAC1BkF,EAAYkV,EAAG3oB,IAEnB,QAASipB,IAAoBN,GAC3B,GAAI3oB,GAAK2oB,EAAG3oB,GACRzB,EAAUyB,EAAGzB,QACbL,EAAM8B,EAAG9B,GAgBb,IAfIyqB,EAAGQ,gBACLza,EAAkB1O,EAAI2oB,EAAG3d,QACA,MAAvBzM,EAAQoG,aAAwC,MAAhBgkB,EAAG9e,WAAsC,MAAjB8e,EAAG7e,aAAsB6e,EAAGR,cACtF5pB,EAAQoG,YAAcpG,EAAQqG,YAAc,MAC1B,MAAhB+jB,EAAG9e,WAAsBtL,EAAQkE,SAASoH,WAAa8e,EAAG9e,YAAa8e,EAAGY,cAC5ErrB,EAAI2L,UAAYtD,KAAKC,IAAI,EAAGD,KAAKwF,IAAIxN,EAAQkE,SAAS4G,aAAe9K,EAAQkE,SAASqG,aAAc6f,EAAG9e,YACvGtL,EAAQ2L,WAAWQ,aAAaxM,EAAI2L,WACpCtL,EAAQkE,SAASoH,UAAY3L,EAAI2L,WAEd,MAAjB8e,EAAG7e,YAAuBvL,EAAQkE,SAASqH,YAAc6e,EAAG7e,aAAc6e,EAAGY,cAC/ErrB,EAAI4L,WAAavD,KAAKC,IAAI,EAAGD,KAAKwF,IAAIxN,EAAQkE,SAASuG,YAAcsE,GAAatN,GAAK2oB,EAAG7e,aAC1FvL,EAAQ2L,WAAWO,cAAcvM,EAAI4L,YACrCvL,EAAQkE,SAASqH,WAAa5L,EAAI4L,WAClCzC,EAAkBrH,IAEhB2oB,EAAGR,YAAa,CAClB,GAAIpJ,GAASyK,GAAkBxpB,EAAIqY,GAAQna,EAAKyqB,EAAGR,YAAY/f,MAAOiQ,GAAQna,EAAKyqB,EAAGR,YAAY9f,IAAKsgB,EAAGR,YAAYsB,OAClHd,GAAGR,YAAYuB,UAAY1pB,EAAG7nB,MAAMmnB,SACtCqqB,GAAkB3pB,EAAI+e,GAE1B,GAAI1S,GAASsc,EAAGiB,mBACZC,EAAWlB,EAAGmB,oBAClB,IAAIzd,EACF,IAAK,GAAI/9B,GAAI,EAAGA,EAAI+9B,EAAOh/B,SAAUiB,EAC9B+9B,EAAO/9B,GAAGwd,MAAMze,QACnB0hC,GAAO1C,EAAO/9B,GAAI,OACxB,IAAIu7C,EACF,IAAK,GAAIv7C,GAAI,EAAGA,EAAIu7C,EAASx8C,SAAUiB,EACjCu7C,EAASv7C,GAAGwd,MAAMze,QACpB0hC,GAAO8a,EAASv7C,GAAI,SACtBiwB,GAAQE,QAAQgQ,eAClBvQ,EAAI2L,UAAY7J,EAAGzB,QAAQkE,SAASoH,WAClC8e,EAAGZ,YACLhZ,GAAO/O,EAAI,UAAWA,EAAI2oB,EAAGZ,YAC3BY,EAAG3d,QACL2d,EAAG3d,OAAOiE,SAEd,QAASuG,IAAQxV,EAAI5G,GACnB,GAAI4G,EAAGQ,MACL,MAAOpH,IACTmH,IAAeP,EACf,KACE,MAAO5G,KACP,QACAgI,GAAapB,IAGjB,QAAS+pB,IAAU/pB,EAAI5G,GACrB,MAAO,YACL,GAAI4G,EAAGQ,MACL,MAAOpH,GAAE7rB,MAAMyyB,EAAI5yB,UACrBmzB,IAAeP,EACf,KACE,MAAO5G,GAAE7rB,MAAMyyB,EAAI5yB,WACnB;AACAg0B,GAAapB,KAInB,QAASgqB,IAAS5wB,GAChB,MAAO,YACL,GAAI5rB,KAAKgzB,MACP,MAAOpH,GAAE7rB,MAAMC,KAAMJ,UACvBmzB,IAAe/yB,KACf,KACE,MAAO4rB,GAAE7rB,MAAMC,KAAMJ,WACrB,QACAg0B,GAAa5zB,QAInB,QAASy8C,IAAY7wB,GACnB,MAAO,YACL,GAAI4G,GAAKxyB,KAAKwyB,EACd,KAAKA,GAAMA,EAAGQ,MACZ,MAAOpH,GAAE7rB,MAAMC,KAAMJ,UACvBmzB,IAAeP,EACf,KACE,MAAO5G,GAAE7rB,MAAMC,KAAMJ,WACrB,QACAg0B,GAAapB,KAInB,QAASgjB,IAAS9kB,EAAKnS,EAAMwkB,GAC3B/iC,KAAKue,KAAOA,EACZve,KAAKiiC,KAAOya,GAAoBn+B,GAChCve,KAAKi/B,KAAOj/B,KAAKiiC,KAAOkJ,GAAOhE,GAAInnC,KAAKiiC,OAASc,EAAQ,EAAI,EAC7D/iC,KAAK88B,KAAO98B,KAAKkc,KAAO,KACxBlc,KAAK6+B,OAAS1F,GAAazI,EAAKnS,GAElC,QAASo+B,IAAenqB,EAAIoI,EAAMC,GAGhC,IAAK,GADD+hB,GADArP,KAEK9gC,EAAMmuB,EAAYC,EAANpuB,EAAUA,EAAMmwC,EAAS,CAC5C,GAAIhnB,GAAO,GAAI4f,IAAShjB,EAAG9B,IAAKqK,GAAQvI,EAAG9B,IAAKjkB,GAAMA,EACtDmwC,GAAUnwC,EAAMmpB,EAAKqJ,KACrBsO,EAAM1sC,KAAK+0B,GAEb,MAAO2X,GAET,QAAStV,IAAUzF,EAAIoI,EAAMC,EAAIgiB,GACnB,MAARjiB,IACFA,EAAOpI,EAAG9B,IAAI+E,OACN,MAANoF,IACFA,EAAKrI,EAAG9B,IAAI+E,MAAQjD,EAAG9B,IAAIuO,MACxB4d,IACHA,EAAU,EACZ,IAAI9rB,GAAUyB,EAAGzB,OAIjB,IAHI8rB,GAAWhiB,EAAK9J,EAAQyE,SAAwC,MAA7BzE,EAAQmF,mBAA6BnF,EAAQmF,kBAAoB0E,KACtG7J,EAAQmF,kBAAoB0E,GAC9BpI,EAAGQ,MAAMsnB,aAAc,EACnB1f,GAAQ7J,EAAQyE,OACdiL,IAAqBC,GAAalO,EAAG9B,IAAKkK,GAAQ7J,EAAQyE,QAC5D8K,GAAU9N,OACP,IAAIqI,GAAM9J,EAAQwE,SACnBkL,IAAqBE,GAAgBnO,EAAG9B,IAAKmK,EAAKgiB,GAAW9rB,EAAQwE,SACvE+K,GAAU9N,IAEVzB,EAAQwE,UAAYsnB,EACpB9rB,EAAQyE,QAAUqnB,OAEf,IAAIjiB,GAAQ7J,EAAQwE,UAAYsF,GAAM9J,EAAQyE,OACnD8K,GAAU9N,OACL,IAAIoI,GAAQ7J,EAAQwE,SAAU,CACnC,GAAIunB,GAAMC,GAAiBvqB,EAAIqI,EAAIA,EAAKgiB,EAAS,EAC7CC,IACF/rB,EAAQ6E,KAAO7E,EAAQ6E,KAAKzkB,MAAM2rC,EAAIj+B,OACtCkS,EAAQwE,SAAWunB,EAAI/Z,MACvBhS,EAAQyE,QAAUqnB,GAElBvc,GAAU9N,OAEP,IAAIqI,GAAM9J,EAAQyE,OAAQ,CAC/B,GAAIsnB,GAAMC,GAAiBvqB,EAAIoI,EAAMA,EAAM,GACvCkiB,IACF/rB,EAAQ6E,KAAO7E,EAAQ6E,KAAKzkB,MAAM,EAAG2rC,EAAIj+B,OACzCkS,EAAQyE,OAASsnB,EAAI/Z,OAErBzC,GAAU9N,OAEP,CACL,GAAIwqB,GAASD,GAAiBvqB,EAAIoI,EAAMA,EAAM,IAC1CqiB,EAASF,GAAiBvqB,EAAIqI,EAAIA,EAAKgiB,EAAS,EAChDG,IAAUC,GACZlsB,EAAQ6E,KAAO7E,EAAQ6E,KAAKzkB,MAAM,EAAG6rC,EAAOn+B,OAAOnW,OAAOi0C,GAAenqB,EAAIwqB,EAAOja,MAAOka,EAAOla,QAAQr6B,OAAOqoB,EAAQ6E,KAAKzkB,MAAM8rC,EAAOp+B,QAC3IkS,EAAQyE,QAAUqnB,GAElBvc,GAAU9N,GAGd,GAAI4R,GAAMrT,EAAQ+E,gBACdsO,KACEvJ,EAAKuJ,EAAIrB,MACXqB,EAAIrB,OAAS8Z,EACNjiB,EAAOwJ,EAAIrB,MAAQqB,EAAInF,OAC9BlO,EAAQ+E,iBAAmB,OAGjC,QAASke,IAAcxhB,EAAIjU,EAAM/T,GAC/BgoB,EAAGQ,MAAMsnB,aAAc,CACvB,IAAIvpB,GAAUyB,EAAGzB,QACbqT,EAAM5R,EAAGzB,QAAQ+E,gBAGrB,IAFIsO,GAAO7lB,GAAQ6lB,EAAIrB,OAASxkB,EAAO6lB,EAAIrB,MAAQqB,EAAInF,OACrDlO,EAAQ+E,iBAAmB,QACzBvX,EAAOwS,EAAQwE,UAAYhX,GAAQwS,EAAQyE,QAA/C,CAEA,GAAIwN,GAAWjS,EAAQ6E,KAAKggB,GAAcpjB,EAAIjU,GAC9C,IAAqB,MAAjBykB,EAASlG,KAAb,CAEA,GAAIrkB,GAAMuqB,EAASG,UAAYH,EAASG,WACd,KAAtBxiC,GAAQ8X,EAAKjO,IACfiO,EAAI5X,KAAK2J,KAEb,QAAS81B,IAAU9N,GACjBA,EAAGzB,QAAQwE,SAAW/C,EAAGzB,QAAQyE,OAAShD,EAAG9B,IAAI+E,MACjDjD,EAAGzB,QAAQ6E,QACXpD,EAAGzB,QAAQgF,WAAa,EAE1B,QAAS6f,IAAcpjB,EAAIlF,GACzB,GAAIA,GAAKkF,EAAGzB,QAAQyE,OAClB,MAAO,KAET,IADAlI,GAAKkF,EAAGzB,QAAQwE,SACR,EAAJjI,EACF,MAAO,KAET,KAAK,GADDsI,GAAOpD,EAAGzB,QAAQ6E,KACb90B,EAAI,EAAGA,EAAI80B,EAAK/1B,OAAQiB,IAE/B,GADAwsB,GAAKsI,EAAK90B,GAAGm+B,KACL,EAAJ3R,EACF,MAAOxsB,GAGb,QAASi8C,IAAiBvqB,EAAI0qB,EAAMC,EAAM3N,GACxC,GACIzN,GADAljB,EAAQ+2B,GAAcpjB,EAAI0qB,GAE1BtnB,EAAOpD,EAAGzB,QAAQ6E,IACtB,KAAK6K,IAAqB0c,GAAQ3qB,EAAG9B,IAAI+E,MAAQjD,EAAG9B,IAAIuO,KACtD,OACEpgB,MAAOA,EACPkkB,MAAOoa,EAEX,KAAK,GAAIr8C,GAAI,EACTwsB,EAAIkF,EAAGzB,QAAQwE,SAAc1W,EAAJ/d,EAAWA,IACtCwsB,GAAKsI,EAAK90B,GAAGm+B,IACf,IAAI3R,GAAK4vB,EAAM,CACb,GAAI1N,EAAM,EAAG,CACX,GAAI3wB,GAAS+W,EAAK/1B,OAAS,EACzB,MAAO,KACTkiC,GAAQzU,EAAIsI,EAAK/W,GAAOogB,KAAQie,EAChCr+B,QAEAkjB,GAAOzU,EAAI4vB,CAEbA,IAAQnb,EACRob,GAAQpb,EAEV,KAAOrB,GAAalO,EAAG9B,IAAKysB,IAASA,GAAM,CACzC,GAAIt+B,IAAgB,EAAN2wB,EAAU,EAAI5Z,EAAK/1B,OAAS,GACxC,MAAO,KACTs9C,IAAQ3N,EAAM5Z,EAAK/W,GAAe,EAAN2wB,EAAU,EAAI,IAAIvQ,KAC9CpgB,GAAS2wB,EAEX,OACE3wB,MAAOA,EACPkkB,MAAOoa,GAGX,QAAStc,IAAWrO,EAAIoI,EAAMC,GAC5B,GAAI9J,GAAUyB,EAAGzB,QACb6E,EAAO7E,EAAQ6E,IACA,IAAfA,EAAK/1B,QAAe+6B,GAAQ7J,EAAQyE,QAAUqF,GAAM9J,EAAQwE,UAC9DxE,EAAQ6E,KAAO+mB,GAAenqB,EAAIoI,EAAMC,GACxC9J,EAAQwE,SAAWqF,IAEf7J,EAAQwE,SAAWqF,EACrB7J,EAAQ6E,KAAO+mB,GAAenqB,EAAIoI,EAAM7J,EAAQwE,UAAU7sB,OAAOqoB,EAAQ6E,MAClE7E,EAAQwE,SAAWqF,IAC1B7J,EAAQ6E,KAAO7E,EAAQ6E,KAAKzkB,MAAMykC,GAAcpjB,EAAIoI,KACtD7J,EAAQwE,SAAWqF,EACf7J,EAAQyE,OAASqF,EACnB9J,EAAQ6E,KAAO7E,EAAQ6E,KAAKltB,OAAOi0C,GAAenqB,EAAIzB,EAAQyE,OAAQqF,IAC/D9J,EAAQyE,OAASqF,IACxB9J,EAAQ6E,KAAO7E,EAAQ6E,KAAKzkB,MAAM,EAAGykC,GAAcpjB,EAAIqI,MAE3D9J,EAAQyE,OAASqF,EAEnB,QAAS0F,IAAe/N,GAGtB,IAAK,GAFDoD,GAAOpD,EAAGzB,QAAQ6E,KAClBwnB,EAAQ,EACHt8C,EAAI,EAAGA,EAAI80B,EAAK/1B,OAAQiB,IAAK,CACpC,GAAIkiC,GAAWpN,EAAK90B,EACfkiC,GAASnE,QAAYmE,EAASlG,OAAQkG,EAASG,WAChDia,EAEN,MAAOA,GAET,QAASvqB,IAAsBL,GAwB7B,QAAS6qB,KACH/5C,EAAEg0B,cACJgmB,EAAgB3qB,WAAW,WACzBrvB,EAAEg0B,YAAc,MACf,KACHimB,EAAYj6C,EAAEg0B,YACdimB,EAAU5rC,KAAO,GAAIohC,OAIzB,QAASyK,GAAsBr5C,GAC7B,GAAwB,GAApBA,EAAEs5C,QAAQ59C,OACZ,OAAO,CACT,IAAI69C,GAAQv5C,EAAEs5C,QAAQ,EACtB,OAAOC,GAAMC,SAAW,GAAKD,EAAME,SAAW,EAEhD,QAASC,GAAQH,EAAOjQ,GACtB,GAAkB,MAAdA,EAAM7O,KACR,OAAO,CACT,IAAIkf,GAAKrQ,EAAM7O,KAAO8e,EAAM9e,KACxBmf,EAAKtQ,EAAM1P,IAAM2f,EAAM3f,GAC3B,OAAO+f,GAAKA,EAAKC,EAAKA,EAAK,IA5C7B,GAAIz6C,GAAIkvB,EAAGzB,OACXqL,IAAG94B,EAAE2xB,SAAU,YAAasnB,GAAU/pB,EAAIwrB,KACtCvrB,IAAmB,GAAbC,GACR0J,GAAG94B,EAAE2xB,SAAU,WAAYsnB,GAAU/pB,EAAI,SAASruB,GAChD,IAAI85C,GAAezrB,EAAIruB,GAAvB,CAEA,GAAIsI,GAAMyxC,GAAa1rB,EAAIruB,EAC3B,IAAKsI,IAAO0xC,GAAc3rB,EAAIruB,KAAMi6C,GAAc5rB,EAAGzB,QAAS5sB,GAA9D,CAEAk6C,GAAiBl6C,EACjB,IAAIsH,GAAO+mB,EAAG8rB,WAAW7xC,EACzBmhC,IAAgBpb,EAAG9B,IAAKjlB,EAAK+8B,OAAQ/8B,EAAK08B,WAG5C/L,GAAG94B,EAAE2xB,SAAU,WAAY,SAAS9wB,GAClC85C,GAAezrB,EAAIruB,IAAMk6C,GAAiBl6C,KAEzCo6C,IACHniB,GAAG94B,EAAE2xB,SAAU,cAAe,SAAS9wB,GACrCq6C,GAAchsB,EAAIruB,IAEtB,IAAIm5C,GACAC,GAAa5rC,IAAK,EAwBtByqB,IAAG94B,EAAE2xB,SAAU,aAAc,SAAS9wB,GACpC,IAAKq5C,EAAsBr5C,GAAI,CAC7Bs6C,aAAanB,EACb,IAAIoB,IAAO,GAAI3L,KACfzvC,GAAEg0B,aACAhrB,MAAOoyC,EACPC,OAAO,EACP1xC,KAAMyxC,EAAMnB,EAAU5rC,KAAO,IAAM4rC,EAAY,MAEzB,GAApBp5C,EAAEs5C,QAAQ59C,SACZyD,EAAEg0B,YAAYsH,KAAOz6B,EAAEs5C,QAAQ,GAAGmB,MAClCt7C,EAAEg0B,YAAYyG,IAAM55B,EAAEs5C,QAAQ,GAAGoB,UAIvCziB,GAAG94B,EAAE2xB,SAAU,YAAa,WACtB3xB,EAAEg0B,cACJh0B,EAAEg0B,YAAYqnB,OAAQ,KAE1BviB,GAAG94B,EAAE2xB,SAAU,WAAY,SAAS9wB,GAClC,GAAIu5C,GAAQp6C,EAAEg0B,WACd,IAAIomB,IAAUU,GAAc96C,EAAGa,IAAoB,MAAdu5C,EAAM9e,OAAiB8e,EAAMiB,OAAS,GAAI5L,MAAO2K,EAAMpxC,MAAQ,IAAK,CACvG,GACI26B,GADAx6B,EAAM+lB,EAAG0mB,WAAW51C,EAAEg0B,YAAa,OAGrC2P,IADGyW,EAAMzwC,MAAQ4wC,EAAQH,EAAOA,EAAMzwC,MAC9B,GAAI2/B,IAAMngC,EAAKA,IACfixC,EAAMzwC,KAAKA,MAAQ4wC,EAAQH,EAAOA,EAAMzwC,KAAKA,MAC7CulB,EAAG8rB,WAAW7xC,GAEd,GAAImgC,IAAM/G,GAAIp5B,EAAI8R,KAAM,GAAIssB,GAAQrY,EAAG9B,IAAKmV,GAAIp5B,EAAI8R,KAAO,EAAG,KACxEiU,EAAGqb,aAAa5G,EAAMuB,OAAQvB,EAAMkB,MACpC3V,EAAGjB,QACH8sB,GAAiBl6C,GAEnBk5C,MAEFjhB,GAAG94B,EAAE2xB,SAAU,cAAeooB,GAC9BjhB,GAAG94B,EAAE2xB,SAAU,SAAU,WACnB3xB,EAAE2xB,SAASqG,eACb4B,GAAa1K,EAAIlvB,EAAE2xB,SAASoH,WAC5BY,GAAczK,EAAIlvB,EAAE2xB,SAASqH,YAAY,GACzCiF,GAAO/O,EAAI,SAAUA,MAGzB4J,GAAG94B,EAAE2xB,SAAU,aAAc,SAAS9wB,GACpC26C,GAActsB,EAAIruB,KAEpBi4B,GAAG94B,EAAE2xB,SAAU,iBAAkB,SAAS9wB,GACxC26C,GAActsB,EAAIruB,KAEpBi4B,GAAG94B,EAAE2tB,QAAS,SAAU,WACtB3tB,EAAE2tB,QAAQoL,UAAY/4B,EAAE2tB,QAAQqL,WAAa,IAE/Ch5B,EAAEy7C,eACAC,MAAO,SAAS76C,GACT85C,GAAezrB,EAAIruB,IACtB86C,GAAO96C,IAEX+6C,KAAM,SAAS/6C,GACR85C,GAAezrB,EAAIruB,KACtBg7C,GAAW3sB,EAAIruB,GACf86C,GAAO96C,KAGXmI,MAAO,SAASnI,GACdi7C,GAAY5sB,EAAIruB,IAElBk7C,KAAM9C,GAAU/pB,EAAI8sB,IACpBC,MAAO,WACLC,GAAgBhtB,IAGpB,IAAIitB,GAAMn8C,EAAE6gB,MAAMu7B,UAClBtjB,IAAGqjB,EAAK,QAAS,SAASt7C,GACxBw7C,GAAQ/+C,KAAK4xB,EAAIruB,KAEnBi4B,GAAGqjB,EAAK,UAAWlD,GAAU/pB,EAAIotB,KACjCxjB,GAAGqjB,EAAK,WAAYlD,GAAU/pB,EAAIqtB,KAClCzjB,GAAGqjB,EAAK,QAASrsB,GAAKC,GAASb,IAC/B4J,GAAGqjB,EAAK,OAAQrsB,GAAKE,GAAQd,IAE/B,QAASstB,IAAgBttB,EAAInwB,EAAO09C,GAClC,GAAIC,GAAQD,GAAOA,GAAOn2C,EAAW4pB,IACrC,KAAKnxB,IAAU29C,EAAO,CACpB,GAAIC,GAAQztB,EAAGzB,QAAQguB,cACnBmB,EAAS79C,EAAQ+5B,GAAK+jB,EAC1BD,GAAO1tB,EAAGzB,QAAQkE,SAAU,YAAagrB,EAAM3zC,OAC/C4zC,EAAO1tB,EAAGzB,QAAQkE,SAAU,YAAagrB,EAAMjB,OAC/CkB,EAAO1tB,EAAGzB,QAAQkE,SAAU,WAAYgrB,EAAMf,MAC9CgB,EAAO1tB,EAAGzB,QAAQkE,SAAU,YAAagrB,EAAMV,OAC/CW,EAAO1tB,EAAGzB,QAAQkE,SAAU,OAAQgrB,EAAMZ,OAG9C,QAASe,IAAS5tB,GAChB,GAAIlvB,GAAIkvB,EAAGzB,SACPztB,EAAE0yB,gBAAkB1yB,EAAE2tB,QAAQqK,cAAgBh4B,EAAE2yB,eAAiB3yB,EAAE2tB,QAAQgI,eAE/E31B,EAAEqzB,gBAAkBrzB,EAAEszB,iBAAmBtzB,EAAEuzB,eAAiB,KAC5DvzB,EAAEgzB,mBAAoB,EACtB9D,EAAG6tB,WAEL,QAASjC,IAAcrtB,EAAS5sB,GAC9B,IAAK,GAAImpB,GAAIgzB,GAASn8C,GAAImpB,GAAKyD,EAAQE,QAAS3D,EAAIA,EAAEsV,WACpD,IAAKtV,GAAoB,GAAdA,EAAE+d,UAAuD,QAAtC/d,EAAE6e,aAAa,qBAAmC7e,EAAEsV,YAAc7R,EAAQ4D,OAASrH,GAAKyD,EAAQ2D,MAC5H,OAAO,EAGb,QAASwpB,IAAa1rB,EAAIruB,EAAGo8C,EAASC,GACpC,GAAIzvB,GAAUyB,EAAGzB,OACjB,KAAKwvB,GAAyD,QAA9CD,GAASn8C,GAAGgoC,aAAa,kBACvC,MAAO,KACT,IAAI3nB,GACAkJ,EACA+yB,EAAQ1vB,EAAQ0D,UAAU6K,uBAC9B,KACE9a,EAAIrgB,EAAEu8C,QAAUD,EAAM7hB,KACtBlR,EAAIvpB,EAAEw8C,QAAUF,EAAM1iB,IACtB,MAAO55B,GACP,MAAO,MAET,GACIoa,GADAgzB,EAAS2H,GAAW1mB,EAAIhO,EAAGkJ,EAE/B,IAAI8yB,GAA0B,GAAfjP,EAAO0H,OAAc16B,EAAOwc,GAAQvI,EAAG9B,IAAK6gB,EAAOhzB,MAAMrC,MAAMrc,QAAU0xC,EAAO3mC,GAAI,CACjG,GAAIg2C,GAAUrM,GAAYh2B,EAAMA,EAAK1e,OAAQ2yB,EAAGzZ,QAAQy7B,SAAWj2B,EAAK1e,MACxE0xC,GAAS1L,GAAI0L,EAAOhzB,KAAMwa,KAAKC,IAAI,EAAGD,KAAKqC,OAAO5W,EAAIwtB,GAASxf,EAAGzB,SAAS6N,MAAQ1F,GAAU1G,EAAGzB,UAAY6vB,IAE9G,MAAOrP,GAET,QAASyM,IAAY75C,GACnB,GAAIquB,GAAKxyB,KACL+wB,EAAUyB,EAAGzB,OACjB,MAAIA,EAAQuG,aAAevG,EAAQ5M,MAAM08B,iBAAmB5C,GAAezrB,EAAIruB,IAA/E,CAGA,GADA4sB,EAAQrrB,MAAQvB,EAAE28C,SACd1C,GAAcrtB,EAAS5sB,GAOzB,YANK0vB,KACH9C,EAAQkE,SAASI,WAAY,EAC7B1C,WAAW,WACT5B,EAAQkE,SAASI,WAAY,GAC5B,MAIP,KAAI8oB,GAAc3rB,EAAIruB,GAAtB,CAEA,GAAImI,GAAQ4xC,GAAa1rB,EAAIruB,EAE7B,QADAqkB,OAAO+I,QACCwvB,GAAS58C,IACf,IAAK,GACCquB,EAAG7nB,MAAMunB,cACXM,EAAG7nB,MAAMunB,cAAc/tB,GAChBmI,EACP00C,GAAexuB,EAAIruB,EAAGmI,GACfg0C,GAASn8C,IAAM4sB,EAAQkE,UAC9BopB,GAAiBl6C,EACnB,MACF,KAAK,GACC0vB,KACFrB,EAAG7nB,MAAMs2C,gBAAkB,GAAIlO,OAC7BzmC,GACFshC,GAAgBpb,EAAG9B,IAAKpkB,GAC1BqmB,WAAW,WACT5B,EAAQ5M,MAAMoN,SACb,IACH8sB,GAAiBl6C,EACjB,MACF,KAAK,GACCo6C,GACFC,GAAchsB,EAAIruB,GAElB+8C,GAAe1uB,MAMvB,QAASwuB,IAAexuB,EAAIruB,EAAGmI,GACzBmmB,GACFE,WAAWS,GAAK6S,EAAazT,GAAK,GAElCA,EAAGQ,MAAMzB,MAAQwP,IACnB,IACIv2B,GADAk0C,GAAO,GAAI3L,KAEXoO,KAAmBA,GAAgBtO,KAAO6L,EAAM,KAA0C,GAAnC3Y,GAAIob,GAAgB10C,IAAKH,GAClF9B,EAAO,SACE42C,IAAaA,GAAUvO,KAAO6L,EAAM,KAAoC,GAA7B3Y,GAAIqb,GAAU30C,IAAKH,IACvE9B,EAAO,SACP22C,IACEtO,KAAM6L,EACNjyC,IAAKH,KAGP9B,EAAO,SACP42C,IACEvO,KAAM6L,EACNjyC,IAAKH,GAGT,IAEI+0C,GAFA7a,EAAMhU,EAAG9B,IAAI8V,IACb8a,EAAW5e,GAAMv+B,EAAEo9C,QAAUp9C,EAAEq9C,OAE/BhvB,GAAGzZ,QAAQ0oC,UAAYC,KAAgBxb,EAAW1T,IAAe,UAARhoB,IAAqB62C,EAAY7a,EAAI4E,SAAS9+B,IAAU,KAAOy5B,IAAKsb,EAAY7a,EAAIM,OAAOua,IAAYzmB,OAAQtuB,GAAS,GAAKA,EAAM2sC,KAAO,KAAOlT,GAAIsb,EAAUxmB,KAAMvuB,GAAS,GAAKA,EAAM2sC,KAAO,GAC3P0I,GAAoBnvB,EAAIruB,EAAGmI,EAAOg1C,GAElCM,GAAiBpvB,EAAIruB,EAAGmI,EAAO9B,EAAM82C,GAEzC,QAASK,IAAoBnvB,EAAIruB,EAAGmI,EAAOg1C,GACzC,GAAIvwB,GAAUyB,EAAGzB,QACb8wB,GAAa,GAAI9O,MACjB+O,EAAUvF,GAAU/pB,EAAI,SAASuvB,GAC/BluB,KACF9C,EAAQkE,SAASI,WAAY,GAC/B7C,EAAG7nB,MAAMwnB,cAAe,EACxBguB,GAAI9c,SAAU,UAAWye,GACzB3B,GAAIpvB,EAAQkE,SAAU,OAAQ6sB,GAC1B/oB,KAAKqc,IAAIjxC,EAAEu8C,QAAUqB,EAAGrB,SAAW3nB,KAAKqc,IAAIjxC,EAAEw8C,QAAUoB,EAAGpB,SAAW,KACxEtC,GAAiB0D,IACZT,IAAa,GAAIvO,MAAO,IAAM8O,GACjCjU,GAAgBpb,EAAG9B,IAAKpkB,GACtBunB,IAAUpB,IAAoB,GAAdC,GAClBC,WAAW,WACT0Q,SAAStzB,KAAKwhB,QACdR,EAAQ5M,MAAMoN,SACb,IAEHR,EAAQ5M,MAAMoN,UAGhBsC,MACF9C,EAAQkE,SAASI,WAAY,GAC/B7C,EAAG7nB,MAAMwnB,aAAe2vB,EACpB/wB,EAAQkE,SAASwsB,UACnB1wB,EAAQkE,SAASwsB,WACnBrlB,GAAGiH,SAAU,UAAWye,GACxB1lB,GAAGrL,EAAQkE,SAAU,OAAQ6sB,GAE/B,QAASF,IAAiBpvB,EAAIruB,EAAGmI,EAAO9B,EAAMw3C,GA2D5C,QAASC,GAASx1C,GAChB,GAAyB,GAArBs5B,GAAImc,EAASz1C,GAGjB,GADAy1C,EAAUz1C,EACE,QAARjC,EAAgB,CAOlB,IAAK,GANDs8B,MACA0N,EAAUhiB,EAAGzZ,QAAQy7B,QACrB2N,EAAW5N,GAAYxZ,GAAQrK,EAAKpkB,EAAMiS,MAAMrC,KAAM5P,EAAM1B,GAAI4pC,GAChE4N,EAAS7N,GAAYxZ,GAAQrK,EAAKjkB,EAAI8R,MAAMrC,KAAMzP,EAAI7B,GAAI4pC,GAC1D5V,EAAO7F,KAAKwF,IAAI4jB,EAAUC,GAC1B3kB,EAAQ1E,KAAKC,IAAImpB,EAAUC,GACtB7jC,EAAOwa,KAAKwF,IAAIjyB,EAAMiS,KAAM9R,EAAI8R,MACrC5M,EAAMonB,KAAKwF,IAAI/L,EAAGgM,WAAYzF,KAAKC,IAAI1sB,EAAMiS,KAAM9R,EAAI8R,OAAgB5M,GAAR4M,EAAaA,IAAQ,CACtF,GAAIrC,GAAO6e,GAAQrK,EAAKnS,GAAMrC,KAC1B21B,EAAUwQ,GAAWnmC,EAAM0iB,EAAM4V,EACjC5V,IAAQnB,EACVqJ,EAAOjmC,KAAK,GAAI+rC,IAAM/G,GAAItnB,EAAMszB,GAAUhM,GAAItnB,EAAMszB,KAC7C31B,EAAKrc,OAASgyC,GACrB/K,EAAOjmC,KAAK,GAAI+rC,IAAM/G,GAAItnB,EAAMszB,GAAUhM,GAAItnB,EAAM8jC,GAAWnmC,EAAMuhB,EAAO+W,MAE3E1N,EAAOjnC,QACVinC,EAAOjmC,KAAK,GAAI+rC,IAAMtgC,EAAOA,IAC/BuhC,GAAand,EAAKmc,GAAmByV,EAASxb,OAAO31B,MAAM,EAAGoxC,GAAU75C,OAAOo+B,GAASyb,IACtF9b,OAAQ,SACRxK,QAAQ,IAEVzJ,EAAGgwB,eAAe/1C,OACb,CACL,GAAIg2C,GAAWC,EACXla,EAASia,EAASja,OAClBL,EAAO17B,CACX,IAAY,UAARjC,EAAkB,CACpB,GAAY,UAARA,EACF,GAAIy8B,GAAQzU,EAAG8rB,WAAW7xC,OAE1B,IAAIw6B,GAAQ,GAAI2F,IAAM/G,GAAIp5B,EAAI8R,KAAM,GAAIssB,GAAQna,EAAKmV,GAAIp5B,EAAI8R,KAAO,EAAG,IACrEwnB,IAAIkB,EAAMuB,OAAQA,GAAU,GAC9BL,EAAOlB,EAAMkB,KACbK,EAASxC,EAAOyc,EAAS7nB,OAAQqM,EAAMuB,UAEvCL,EAAOlB,EAAMuB,OACbA,EAAS1C,EAAO2c,EAAS5nB,KAAMoM,EAAMkB,OAGzC,GAAIrB,GAASwb,EAASxb,OAAO31B,MAAM,EACnC21B,GAAOyb,GAAY,GAAI3V,IAAM/B,GAAQna,EAAK8X,GAASL,GACnD0F,GAAand,EAAKmc,GAAmB/F,EAAQyb,GAAWI,KAK5D,QAASjV,GAAOvpC,GACd,GAAIy+C,KAAaC,EACbroB,EAAM0jB,GAAa1rB,EAAIruB,GAAG,EAAc,QAARqG,EACpC,IAAKgwB,EAEL,GAAyB,GAArBuL,GAAIvL,EAAK0nB,GAAe,CAC1B1vB,EAAGQ,MAAMzB,MAAQwP,KACjBkhB,EAASznB,EACT,IAAIiF,GAAU5B,EAAa9M,EAASL,IAChC8J,EAAIjc,MAAQkhB,EAAQ5E,IAAML,EAAIjc,KAAOkhB,EAAQ7E,OAC/CjI,WAAW4pB,GAAU/pB,EAAI,WACnBqwB,GAAWD,GACblV,EAAOvpC,KACP,SACD,CACL,GAAI60C,GAAU70C,EAAEw8C,QAAUmC,EAAW/kB,IAAM,IAAM55B,EAAEw8C,QAAUmC,EAAWnlB,OAAS,GAAK,CAClFqb,IACFrmB,WAAW4pB,GAAU/pB,EAAI,WACnBqwB,GAAWD,IAEf7xB,EAAQkE,SAASoH,WAAa2c,EAC9BtL,EAAOvpC,MACL,KAGV,QAASwqB,GAAKxqB,GACZquB,EAAG7nB,MAAMunB,eAAgB,EACzB2wB,EAAU/sC,EAAAA,EACVuoC,GAAiBl6C,GACjB4sB,EAAQ5M,MAAMoN,QACd4uB,GAAI9c,SAAU,YAAa0f,GAC3B5C,GAAI9c,SAAU,UAAW2f,GACzBtyB,EAAI4d,QAAQ2U,cAAgB,KA7I9B,GAAIlyB,GAAUyB,EAAGzB,QACbL,EAAM8B,EAAG9B,GACb2tB,IAAiBl6C,EACjB,IAAIu+C,GACAH,EACAD,EAAW5xB,EAAI8V,IACfM,EAASwb,EAASxb,MAWtB,IAVIkb,IAAW79C,EAAE28C,UACfyB,EAAW7xB,EAAI8V,IAAI4E,SAAS9+B,GAE1Bo2C,EADEH,EAAW,GACFzb,EAAOyb,GAEP,GAAI3V,IAAMtgC,EAAOA,KAE9Bo2C,EAAWhyB,EAAI8V,IAAIsH,UACnByU,EAAW7xB,EAAI8V,IAAImG,WAEjBxoC,EAAE++C,OACJ14C,EAAO,OACFw3C,IACHU,EAAW,GAAI9V,IAAMtgC,EAAOA,IAC9BA,EAAQ4xC,GAAa1rB,EAAIruB,GAAG,GAAM,GAClCo+C,EAAW,OACN,IAAY,UAAR/3C,EAAkB,CAC3B,GAAIiB,GAAO+mB,EAAG8rB,WAAWhyC,EAEvBo2C,GADElwB,EAAGzB,QAAQrrB,OAASgrB,EAAIgd,OACfF,GAAY9c,EAAKgyB,EAAUj3C,EAAK+8B,OAAQ/8B,EAAK08B,MAE7C18B,MACR,IAAY,UAARjB,EAAkB,CAC3B,GAAI+T,GAAO,GAAIquB,IAAM/G,GAAIv5B,EAAMiS,KAAM,GAAIssB,GAAQna,EAAKmV,GAAIv5B,EAAMiS,KAAO,EAAG,IAExEmkC,GADElwB,EAAGzB,QAAQrrB,OAASgrB,EAAIgd,OACfF,GAAY9c,EAAKgyB,EAAUnkC,EAAKiqB,OAAQjqB,EAAK4pB,MAE7C5pB,MAEbmkC,GAAWlV,GAAY9c,EAAKgyB,EAAUp2C,EAEnC01C,GAIkB,IAAZO,GACTA,EAAWzb,EAAOjnC,OAClBguC,GAAand,EAAKmc,GAAmB/F,EAAOp+B,QAAQg6C,IAAYH,IAC9DtmB,QAAQ,EACRwK,OAAQ,YAEDK,EAAOjnC,OAAS,GAAKinC,EAAOyb,GAAUrb,SAAmB,UAAR18B,IAAqBrG,EAAE28C,UACjFjT,GAAand,EAAKmc,GAAmB/F,EAAO31B,MAAM,EAAGoxC,GAAU75C,OAAOo+B,EAAO31B,MAAMoxC,EAAW,IAAK,IACjGtmB,QAAQ,EACRwK,OAAQ,WAEV6b,EAAW5xB,EAAI8V,KAEf0H,GAAoBxd,EAAK6xB,EAAUG,EAAUC,KAhB7CJ,EAAW,EACX1U,GAAand,EAAK,GAAIgc,KAAWgW,GAAW,GAAIC,IAChDL,EAAW5xB,EAAI8V,IAgBjB,IAAI0b,GAAU51C,EAkDVw2C,EAAa/xB,EAAQE,QAAQqO,wBAC7BujB,EAAU,EAmCVE,EAAOxG,GAAU/pB,EAAI,SAASruB,GAC3B48C,GAAS58C,GAGZupC,EAAOvpC,GAFPwqB,EAAKxqB,KAIL6+C,EAAKzG,GAAU/pB,EAAI7D,EACvB6D,GAAG7nB,MAAMunB,cAAgB8wB,EACzB5mB,GAAGiH,SAAU,YAAa0f,GAC1B3mB,GAAGiH,SAAU,UAAW2f,GAE1B,QAASG,IAAY3wB,EAAIruB,EAAGqG,EAAM44C,EAASC,GACzC,IACE,GAAIC,GAAKn/C,EAAEu8C,QACP6C,EAAKp/C,EAAEw8C,QACX,MAAOx8C,GACP,OAAO,EAET,GAAIm/C,GAAMvqB,KAAKiF,MAAMxL,EAAGzB,QAAQgE,QAAQuK,wBAAwB7B,OAC9D,OAAO,CACL2lB,IACF/E,GAAiBl6C,EACnB,IAAI4sB,GAAUyB,EAAGzB,QACbyyB,EAAUzyB,EAAQgD,QAAQuL,uBAC9B,IAAIikB,EAAKC,EAAQ7lB,SAAW8Q,GAAWjc,EAAIhoB,GACzC,MAAOi5C,IAAmBt/C,EAC5Bo/C,IAAMC,EAAQzlB,IAAMhN,EAAQgF,UAC5B,KAAK,GAAIj1B,GAAI,EAAGA,EAAI0xB,EAAGzZ,QAAQgc,QAAQl1B,SAAUiB,EAAG,CAClD,GAAIiF,GAAIgrB,EAAQgE,QAAQ6V,WAAW9pC,EACnC,IAAIiF,GAAKA,EAAEu5B,wBAAwB7B,OAAS6lB,EAAI,CAC9C,GAAI/kC,GAAO2f,GAAa1L,EAAG9B,IAAK6yB,GAC5BzkB,EAAStM,EAAGzZ,QAAQgc,QAAQj0B,EAEhC,OADAuiD,GAAS7wB,EAAIhoB,EAAMgoB,EAAIjU,EAAMugB,EAAQ36B,GAC9Bs/C,GAAmBt/C,KAIhC,QAASg6C,IAAc3rB,EAAIruB,GACzB,MAAOg/C,IAAY3wB,EAAIruB,EAAG,eAAe,EAAMohC,IAGjD,QAAS+Z,IAAOn7C,GACd,GAAIquB,GAAKxyB,IAET,IADAw/C,GAAgBhtB,IACZyrB,GAAezrB,EAAIruB,KAAMi6C,GAAc5rB,EAAGzB,QAAS5sB,GAAvD,CAEAk6C,GAAiBl6C,GACbsuB,KACFixB,IAAY,GAAI3Q,MAClB,IAAItmC,GAAMyxC,GAAa1rB,EAAIruB,GAAG,GAC1Bw/C,EAAQx/C,EAAEy/C,aAAaD,KAC3B,IAAKl3C,IAAOy5B,EAAW1T,GAEvB,GAAImxB,GAASA,EAAM9jD,QAAU2oB,OAAOq7B,YAAcr7B,OAAOs7B,KA2BvD,IAAK,GA1BDx2B,GAAIq2B,EAAM9jD,OACVqc,EAAOnY,MAAMupB,GACb4C,EAAO,EACP6zB,EAAW,SAASC,EAAMljD,GAC5B,IAAI0xB,EAAGzZ,QAAQkrC,oBAA2E,IAArDtjD,GAAQ6xB,EAAGzZ,QAAQkrC,mBAAoBD,EAAKx5C,MAAjF,CAEA,GAAI05C,GAAS,GAAIL,WACjBK,GAAOC,OAAS5H,GAAU/pB,EAAI,WAC5B,GAAI/nB,GAAUy5C,EAAOv1C,MAIrB,IAHI,0BAA0B5D,KAAKN,KACjCA,EAAU,IACZyR,EAAKpb,GAAK2J,IACJylB,GAAQ5C,EAAG,CACf7gB,EAAMo+B,GAAQrY,EAAG9B,IAAKjkB,EACtB,IAAI23C,IACFxpB,KAAMnuB,EACNouB,GAAIpuB,EACJyP,KAAMsW,EAAG9B,IAAIkW,WAAW1qB,EAAKoI,KAAKkO,EAAG9B,IAAIE,kBACzC6V,OAAQ,QAEVa,IAAW9U,EAAG9B,IAAK0zB,GACnB/V,GAA2B7b,EAAG9B,IAAKuc,GAAgBxgC,EAAK43C,GAAUD,QAGtEF,EAAOI,WAAWN,KAEXljD,EAAI,EAAOwsB,EAAJxsB,IAASA,EACvBijD,EAASJ,EAAM7iD,GAAIA,OAChB,CACL,GAAI0xB,EAAG7nB,MAAMwnB,cAAgBK,EAAG9B,IAAI8V,IAAI4E,SAAS3+B,GAAO,GAKtD,MAJA+lB,GAAG7nB,MAAMwnB,aAAahuB,OACtBwuB,YAAW,WACTH,EAAGzB,QAAQ5M,MAAMoN,SAChB,GAGL,KACE,GAAIrV,GAAO/X,EAAEy/C,aAAa/b,QAAQ,OAClC,IAAI3rB,EAAM,CACR,GAAIsW,EAAG7nB,MAAMwnB,gBAAkBuQ,GAAMv+B,EAAE++C,OAAS/+C,EAAEq9C,SAChD,GAAI+C,GAAW/xB,EAAGgyB,gBAEpB,IADAjW,GAAmB/b,EAAG9B,IAAKuc,GAAgBxgC,EAAKA,IAC5C83C,EACF,IAAK,GAAIzjD,GAAI,EAAGA,EAAIyjD,EAAS1kD,SAAUiB,EACrC2jD,GAAajyB,EAAG9B,IAAK,GAAI6zB,EAASzjD,GAAG0nC,OAAQ+b,EAASzjD,GAAGqnC,KAAM,OACnE3V,GAAGkyB,iBAAiBxoC,EAAM,SAAU,SACpCsW,EAAGzB,QAAQ5M,MAAMoN,SAEnB,MAAOptB,OAGb,QAASi7C,IAAY5sB,EAAIruB,GACvB,GAAIsuB,MAAQD,EAAG7nB,MAAMwnB,eAAiB,GAAI4gB,MAAO2Q,GAAW,KAE1D,WADAzE,IAAO96C,EAGT,KAAI85C,GAAezrB,EAAIruB,KAAMi6C,GAAc5rB,EAAGzB,QAAS5sB,KAEvDA,EAAEy/C,aAAae,QAAQ,OAAQnyB,EAAGoyB,gBAC9BzgD,EAAEy/C,aAAaiB,eAAiBC,IAAQ,CAC1C,GAAIC,GAAM7wB,GAAI,MAAO,KAAM,KAAM,oCACjC6wB,GAAIC,IAAM,6EACNC,KACFF,EAAI7qB,MAAQ6qB,EAAIzrB,OAAS,EACzB9G,EAAGzB,QAAQE,QAAQqE,YAAYyvB,GAC/BA,EAAIG,KAAOH,EAAInjB,WAEjBz9B,EAAEy/C,aAAaiB,aAAaE,EAAK,EAAG,GAChCE,IACFF,EAAIniB,WAAWC,YAAYkiB,IAGjC,QAAS5F,IAAW3sB,EAAIruB,GACtB,GAAIsI,GAAMyxC,GAAa1rB,EAAIruB,EAC3B,IAAKsI,EAAL,CAEA,GAAI04C,GAAO9hB,SAASgN,wBACpBK,IAAoBle,EAAI/lB,EAAK04C,GACxB3yB,EAAGzB,QAAQq0B,aACd5yB,EAAGzB,QAAQq0B,WAAalxB,GAAI,MAAO,KAAM,6CACzC1B,EAAGzB,QAAQ0D,UAAUsI,aAAavK,EAAGzB,QAAQq0B,WAAY5yB,EAAGzB,QAAQuD,YAEtEogB,GAAqBliB,EAAGzB,QAAQq0B,WAAYD,IAE9C,QAAS3F,IAAgBhtB,GACnBA,EAAGzB,QAAQq0B,aACb5yB,EAAGzB,QAAQ0D,UAAUoO,YAAYrQ,EAAGzB,QAAQq0B,YAC5C5yB,EAAGzB,QAAQq0B,WAAa,MAG5B,QAASloB,IAAa1K,EAAIia,GACpB1T,KAAKqc,IAAI5iB,EAAG9B,IAAI2L,UAAYoQ,GAAO,IAEvCja,EAAG9B,IAAI2L,UAAYoQ,EACdrX,IACHoM,EAAoBhP,GAAKuL,IAAK0O,IAC5Bja,EAAGzB,QAAQkE,SAASoH,WAAaoQ,IACnCja,EAAGzB,QAAQkE,SAASoH,UAAYoQ,GAClCja,EAAGzB,QAAQ2L,WAAWQ,aAAauP,GAC/BrX,IACFoM,EAAoBhP,GACtBwF,GAAYxF,EAAI,MAElB,QAASyK,IAAczK,EAAIia,EAAK4Y,IAC1BA,EAAa5Y,GAAOja,EAAG9B,IAAI4L,WAAavD,KAAKqc,IAAI5iB,EAAG9B,IAAI4L,WAAamQ,GAAO,KAEhFA,EAAM1T,KAAKwF,IAAIkO,EAAKja,EAAGzB,QAAQkE,SAASuG,YAAchJ,EAAGzB,QAAQkE,SAASgE,aAC1EzG,EAAG9B,IAAI4L,WAAamQ,EACpB5S,EAAkBrH,GACdA,EAAGzB,QAAQkE,SAASqH,YAAcmQ,IACpCja,EAAGzB,QAAQkE,SAASqH,WAAamQ,GACnCja,EAAGzB,QAAQ2L,WAAWO,cAAcwP,IAgCtC,QAASqS,IAActsB,EAAIruB,GACzB,GAAImhD,GAAQC,GAAgBphD,GACxB25C,EAAKwH,EAAM9gC,EACXu5B,EAAKuH,EAAM53B,EACXqD,EAAUyB,EAAGzB,QACbkL,EAASlL,EAAQkE,SACjBuwB,EAAavpB,EAAOT,YAAcS,EAAOhD,YACzCwsB,EAAaxpB,EAAOJ,aAAeI,EAAOX,YAC9C,IAAMwiB,GAAM0H,GAAczH,GAAM0H,EAAhC,CAEA,GAAI1H,GAAMrb,IAAO7O,GACfhlB,EAAO,IAAK,GAAI2rB,GAAMr2B,EAAEmN,OACpBskB,EAAO7E,EAAQ6E,KAAM4E,GAAOyB,EAAQzB,EAAMA,EAAIoI,WAChD,IAAK,GAAI9hC,GAAI,EAAGA,EAAI80B,EAAK/1B,OAAQiB,IAC/B,GAAI80B,EAAK90B,GAAGg8B,MAAQtC,EAAK,CACvBhI,EAAGzB,QAAQ4R,mBAAqBnI,CAChC,MAAM3rB,GAKd,GAAIivC,IAAO1oB,KAAU6vB,IAAgC,MAAtBS,GAO7B,MANI3H,IAAM0H,GACRvoB,GAAa1K,EAAIuG,KAAKC,IAAI,EAAGD,KAAKwF,IAAItC,EAAOI,UAAY0hB,EAAK2H,GAAoBzpB,EAAOJ,aAAeI,EAAOX,gBACjH2B,GAAczK,EAAIuG,KAAKC,IAAI,EAAGD,KAAKwF,IAAItC,EAAOK,WAAawhB,EAAK4H,GAAoBzpB,EAAOT,YAAcS,EAAOhD,iBAC3G8kB,GAAOA,GAAM0H,IAChBpH,GAAiBl6C,QACnB4sB,EAAQoG,YAAc,KAGxB,IAAI4mB,GAA4B,MAAtB2H,GAA4B,CACpC,GAAIC,GAAS5H,EAAK2H,GACd3nB,EAAMvL,EAAG9B,IAAI2L,UACbwF,EAAM9D,EAAMhN,EAAQE,QAAQqK,YACnB,GAATqqB,EACF5nB,EAAMhF,KAAKC,IAAI,EAAG+E,EAAM4nB,EAAS,IAEjC9jB,EAAM9I,KAAKwF,IAAI/L,EAAG9B,IAAI4I,OAAQuI,EAAM8jB,EAAS,IAC/CnkB,EAAoBhP,GAClBuL,IAAKA,EACLJ,OAAQkE,IAGO,GAAf+jB,KACyB,MAAvB70B,EAAQoG,aACVpG,EAAQoG,YAAc8E,EAAOK,WAC7BvL,EAAQqG,YAAc6E,EAAOI,UAC7BtL,EAAQkG,QAAU6mB,EAClB/sB,EAAQmG,QAAU6mB,EAClBprB,WAAW,WACT,GAA2B,MAAvB5B,EAAQoG,YAAZ,CAEA,GAAI0uB,GAAS5pB,EAAOK,WAAavL,EAAQoG,YACrC2uB,EAAS7pB,EAAOI,UAAYtL,EAAQqG,YACpC2uB,EAAUD,GAAU/0B,EAAQmG,SAAW4uB,EAAS/0B,EAAQmG,SAAa2uB,GAAU90B,EAAQkG,SAAW4uB,EAAS90B,EAAQkG,OACvHlG,GAAQoG,YAAcpG,EAAQqG,YAAc,KACvC2uB,IAELL,IAAsBA,GAAqBE,GAAeG,IAAWH,GAAe,KAClFA,MACD,OAEH70B,EAAQkG,SAAW6mB,EACnB/sB,EAAQmG,SAAW6mB,KAIzB,QAASiI,IAAgBxzB,EAAIyzB,EAAOC,GAClC,GAAoB,gBAATD,KACTA,EAAQE,GAASF,IACZA,GACH,OAAO,CAEXzzB,GAAGzB,QAAQ5M,MAAMiiC,cACjB,IAAIC,GAAY7zB,EAAGzB,QAAQrrB,MACvBipB,GAAO,CACX,KACMuX,EAAW1T,KACbA,EAAG7nB,MAAMonB,eAAgB,GACvBm0B,IACF1zB,EAAGzB,QAAQrrB,OAAQ,GACrBipB,EAAOs3B,EAAMzzB,IAAO9a,GACpB,QACA8a,EAAGzB,QAAQrrB,MAAQ2gD,EACnB7zB,EAAG7nB,MAAMonB,eAAgB,EAE3B,MAAOpD,GAET,QAAS23B,IAAmB9zB,EAAI/yB,EAAM8mD,GACpC,IAAK,GAAIzlD,GAAI,EAAGA,EAAI0xB,EAAG7nB,MAAM8mB,QAAQ5xB,OAAQiB,IAAK,CAChD,GAAI6N,GAAS63C,GAAU/mD,EAAM+yB,EAAG7nB,MAAM8mB,QAAQ3wB,GAAIylD,EAAQ/zB,EAC1D,IAAI7jB,EACF,MAAOA,GAEX,MAAQ6jB,GAAGzZ,QAAQ0tC,WAAaD,GAAU/mD,EAAM+yB,EAAGzZ,QAAQ0tC,UAAWF,EAAQ/zB,IAAQg0B,GAAU/mD,EAAM+yB,EAAGzZ,QAAQ2tC,OAAQH,EAAQ/zB,GAGnI,QAASm0B,IAAYn0B,EAAI/yB,EAAM0E,EAAGoiD,GAChC,GAAIK,GAAMp0B,EAAG7nB,MAAM2nB,MACnB,IAAIs0B,EAAK,CACP,GAAIC,GAAcpnD,GAChB,MAAO,SACTqnD,IAAQ/hD,IAAI,GAAI,WACVytB,EAAG7nB,MAAM2nB,QAAUs0B,IACrBp0B,EAAG7nB,MAAM2nB,OAAS,KAClBE,EAAGzB,QAAQ5M,MAAMyO,WAGrBnzB,EAAOmnD,EAAM,IAAMnnD,EAErB,GAAIkP,GAAS23C,GAAmB9zB,EAAI/yB,EAAM8mD,EAS1C,OARc,SAAV53C,IACF6jB,EAAG7nB,MAAM2nB,OAAS7yB,GACN,WAAVkP,GACF42B,GAAY/S,EAAI,aAAcA,EAAI/yB,EAAM0E,IAC5B,WAAVwK,GAAiC,SAAVA,KACzB0vC,GAAiBl6C,GACjBouC,GAAa/f,IAEXo0B,IAAQj4C,GAAU,MAAM5D,KAAKtL,IAC/B4+C,GAAiBl6C,IACV,KAEAwK,EAEX,QAASo4C,IAAiBv0B,EAAIruB,GAC5B,GAAI1E,GAAOunD,GAAQ7iD,GAAG,EACtB,OAAK1E,GAED0E,EAAE28C,WAAatuB,EAAG7nB,MAAM2nB,OACnBq0B,GAAYn0B,EAAI,SAAW/yB,EAAM0E,EAAG,SAAS2kB,GAClD,MAAOk9B,IAAgBxzB,EAAI1J,GAAG,MAC1B69B,GAAYn0B,EAAI/yB,EAAM0E,EAAG,SAAS2kB,GACtC,OAAgB,gBAALA,GAAgB,WAAW/d,KAAK+d,GAAKA,EAAEm+B,QACzCjB,GAAgBxzB,EAAI1J,GAD7B,SAIK69B,GAAYn0B,EAAI/yB,EAAM0E,EAAG,SAAS2kB,GACvC,MAAOk9B,IAAgBxzB,EAAI1J,MAVtB,EAcX,QAASo+B,IAAkB10B,EAAIruB,EAAGyG,GAChC,MAAO+7C,IAAYn0B,EAAI,IAAM5nB,EAAK,IAAKzG,EAAG,SAAS2kB,GACjD,MAAOk9B,IAAgBxzB,EAAI1J,GAAG,KAIlC,QAAS82B,IAAUz7C,GACjB,GAAIquB,GAAKxyB,IAET,IADAwyB,EAAGQ,MAAMzB,MAAQwP,MACbkd,GAAezrB,EAAIruB,GAAvB,CAEIsuB,IAAmB,GAAbC,IAAgC,IAAbvuB,EAAEgjD,UAC7BhjD,EAAEijD,aAAc,EAClB,IAAI7+B,GAAOpkB,EAAEgjD,OACb30B,GAAGzB,QAAQrrB,MAAgB,IAAR6iB,GAAcpkB,EAAE28C,QACnC,IAAIuG,GAAUN,GAAiBv0B,EAAIruB,EAC/B8gD,MACFqC,GAAiBD,EAAU9+B,EAAO,MAC7B8+B,GAAmB,IAAR9+B,IAAeg/B,KAAiB7kB,GAAMv+B,EAAEo9C,QAAUp9C,EAAEq9C,UAClEhvB,EAAGkyB,iBAAiB,GAAI,KAAM,QAEtB,IAARn8B,GAAe,2BAA2Bxd,KAAKynB,EAAGzB,QAAQgD,QAAQtkB,YACpE+3C,GAAch1B,IAElB,QAASg1B,IAAch1B,GAGrB,QAASwwB,GAAG7+C,GACO,IAAbA,EAAEgjD,SAAkBhjD,EAAE++C,SACxB7qB,GAAQtE,EAAS,wBACjBosB,GAAI9c,SAAU,QAAS2f,GACvB7C,GAAI9c,SAAU,YAAa2f,IAN/B,GAAIjvB,GAAUvB,EAAGzB,QAAQgD,OACzBoE,IAASpE,EAAS,wBAQlBqI,GAAGiH,SAAU,QAAS2f,GACtB5mB,GAAGiH,SAAU,YAAa2f,GAE5B,QAASrD,IAAQx7C,GACE,IAAbA,EAAEgjD,UACJnnD,KAAK0wB,IAAI8V,IAAI9gC,OAAQ,GACvBu4C,GAAej+C,KAAMmE,GAEvB,QAAS07C,IAAW17C,GAClB,GAAIquB,GAAKxyB,IACT,MAAIo+C,GAAc5rB,EAAGzB,QAAS5sB,IAAM85C,GAAezrB,EAAIruB,IAAMA,EAAEq9C,UAAYr9C,EAAE++C,QAAUxgB,IAAOv+B,EAAEo9C,SAAhG,CAEA,GAAI4F,GAAUhjD,EAAEgjD,QACZM,EAAWtjD,EAAEsjD,QACjB,IAAIxC,IAAUkC,GAAWG,GAGvB,MAFAA,IAAiB,SACjBjJ,IAAiBl6C,EAGnB,KAAK8gD,IAAY9gD,EAAEujD,SAASvjD,EAAEujD,MAAQ,MAAQX,GAAiBv0B,EAAIruB,GAAnE,CAEA,GAAIyG,GAAKid,OAAOC,aAAyB,MAAZ2/B,EAAmBN,EAAUM,EACtDP,IAAkB10B,EAAIruB,EAAGyG,IAE7B4nB,EAAGzB,QAAQ5M,MAAM07B,WAAW17C,KAE9B,QAAS+8C,IAAe1uB,GACtBA,EAAG7nB,MAAMknB,mBAAoB,EAC7Bc,WAAW,WACLH,EAAG7nB,MAAMknB,oBACXW,EAAG7nB,MAAMknB,mBAAoB,EAC7ByB,GAAOd,KAER,KAEL,QAASa,IAAQb,GACXA,EAAG7nB,MAAMknB,oBACXW,EAAG7nB,MAAMknB,mBAAoB,GACJ,YAAvBW,EAAGzZ,QAAQotB,WAEV3T,EAAG7nB,MAAMmnB,UACZyP,GAAO/O,EAAI,QAASA,GACpBA,EAAG7nB,MAAMmnB,SAAU,EACnBqG,GAAS3F,EAAGzB,QAAQE,QAAS,sBACxBuB,EAAGQ,OAASR,EAAGzB,QAAQsG,mBAAqB7E,EAAG9B,IAAI8V,MACtDhU,EAAGzB,QAAQ5M,MAAMyO,QACbiB,IACFlB,WAAW,WACTH,EAAGzB,QAAQ5M,MAAMyO,OAAM,IACtB,KAEPJ,EAAGzB,QAAQ5M,MAAMwjC,iBAEnBpV,GAAa/f,IAEf,QAASc,IAAOd,GACVA,EAAG7nB,MAAMknB,oBAETW,EAAG7nB,MAAMmnB,UACXyP,GAAO/O,EAAI,OAAQA,GACnBA,EAAG7nB,MAAMmnB,SAAU,EACnBuG,GAAQ7F,EAAGzB,QAAQE,QAAS,uBAE9BuhB,cAAchgB,EAAGzB,QAAQ0hB,SACzB9f,WAAW,WACJH,EAAG7nB,MAAMmnB,UACZU,EAAGzB,QAAQrrB,OAAQ,IACpB,MAEL,QAAS84C,IAAchsB,EAAIruB,GACrBi6C,GAAc5rB,EAAGzB,QAAS5sB,IAAMyjD,GAAoBp1B,EAAIruB,IAExD85C,GAAezrB,EAAIruB,EAAG,gBAE1BquB,EAAGzB,QAAQ5M,MAAMq6B,cAAcr6C,GAEjC,QAASyjD,IAAoBp1B,EAAIruB,GAC/B,MAAKsqC,IAAWjc,EAAI,qBAEb2wB,GAAY3wB,EAAIruB,EAAG,qBAAqB,EAAOo9B,KAD7C,EAQX,QAASsmB,IAAgBp7C,EAAK23C,GAC5B,GAAIre,GAAIt5B,EAAK23C,EAAOxpB,MAAQ,EAC1B,MAAOnuB,EACT,IAAIs5B,GAAIt5B,EAAK23C,EAAOvpB,KAAO,EACzB,MAAOwpB,IAAUD,EACnB,IAAI7lC,GAAO9R,EAAI8R,KAAO6lC,EAAOloC,KAAKrc,QAAUukD,EAAOvpB,GAAGtc,KAAO6lC,EAAOxpB,KAAKrc,MAAQ,EAC7E3T,EAAK6B,EAAI7B,EAGb,OAFI6B,GAAI8R,MAAQ6lC,EAAOvpB,GAAGtc,OACxB3T,GAAMy5C,GAAUD,GAAQx5C,GAAKw5C,EAAOvpB,GAAGjwB,IAClCi7B,GAAItnB,EAAM3T,GAEnB,QAASk9C,IAAsBp3B,EAAK0zB,GAElC,IAAK,GADD5oC,MACK1a,EAAI,EAAGA,EAAI4vB,EAAI8V,IAAIM,OAAOjnC,OAAQiB,IAAK,CAC9C,GAAImmC,GAAQvW,EAAI8V,IAAIM,OAAOhmC,EAC3B0a,GAAI3a,KAAK,GAAI+rC,IAAMib,GAAgB5gB,EAAMuB,OAAQ4b,GAASyD,GAAgB5gB,EAAMkB,KAAMic,KAExF,MAAOvX,IAAmBrxB,EAAKkV,EAAI8V,IAAImG,WAEzC,QAASob,IAAUt7C,EAAKszC,EAAKiI,GAC3B,MAAIv7C,GAAI8R,MAAQwhC,EAAIxhC,KACXsnB,GAAImiB,EAAGzpC,KAAM9R,EAAI7B,GAAKm1C,EAAIn1C,GAAKo9C,EAAGp9C,IAElCi7B,GAAImiB,EAAGzpC,MAAQ9R,EAAI8R,KAAOwhC,EAAIxhC,MAAO9R,EAAI7B,IAEpD,QAASq9C,IAAmBv3B,EAAKyS,EAAS+kB,GAIxC,IAAK,GAHD1sC,MACA2sC,EAAUtiB,GAAInV,EAAI+E,MAAO,GACzB2yB,EAAUD,EACLrnD,EAAI,EAAGA,EAAIqiC,EAAQtjC,OAAQiB,IAAK,CACvC,GAAIsjD,GAASjhB,EAAQriC,GACjB85B,EAAOmtB,GAAU3D,EAAOxpB,KAAMutB,EAASC,GACvCvtB,EAAKktB,GAAU1D,GAAUD,GAAS+D,EAASC,EAG/C,IAFAD,EAAU/D,EAAOvpB,GACjButB,EAAUvtB,EACE,UAARqtB,EAAkB,CACpB,GAAIjhB,GAAQvW,EAAI8V,IAAIM,OAAOhmC,GACvBksC,EAAMjH,GAAIkB,EAAMkB,KAAMlB,EAAMuB,QAAU,CAC1ChtB,GAAI1a,GAAK,GAAI8rC,IAAMI,EAAMnS,EAAKD,EAAMoS,EAAMpS,EAAOC,OAEjDrf,GAAI1a,GAAK,GAAI8rC,IAAMhS,EAAMA,GAG7B,MAAO,IAAI8R,IAAUlxB,EAAKkV,EAAI8V,IAAImG,WAEpC,QAAS0b,IAAa33B,EAAK0zB,EAAQ5mB,GACjC,GAAIp5B,IACFkkD,UAAU,EACV1tB,KAAMwpB,EAAOxpB,KACbC,GAAIupB,EAAOvpB,GACX3e,KAAMkoC,EAAOloC,KACbuqB,OAAQ2d,EAAO3d,OACf8hB,OAAQ,WACNvoD,KAAKsoD,UAAW,GAiBpB,OAdI9qB,KACFp5B,EAAIo5B,OAAS,SAAS5C,EAAMC,EAAI3e,EAAMuqB,GAChC7L,IACF56B,KAAK46B,KAAOiQ,GAAQna,EAAKkK,IACvBC,IACF76B,KAAK66B,GAAKgQ,GAAQna,EAAKmK,IACrB3e,IACFlc,KAAKkc,KAAOA,GACC9a,SAAXqlC,IACFzmC,KAAKymC,OAASA,KAEpBlF,GAAO7Q,EAAK,eAAgBA,EAAKtsB,GAC7BssB,EAAI8B,IACN+O,GAAO7Q,EAAI8B,GAAI,eAAgB9B,EAAI8B,GAAIpuB,GACrCA,EAAIkkD,SACC,MAEP1tB,KAAMx2B,EAAIw2B,KACVC,GAAIz2B,EAAIy2B,GACR3e,KAAM9X,EAAI8X,KACVuqB,OAAQriC,EAAIqiC,QAGhB,QAASa,IAAW5W,EAAK0zB,EAAQoE,GAC/B,GAAI93B,EAAI8B,GAAI,CACV,IAAK9B,EAAI8B,GAAGQ,MACV,MAAOupB,IAAU7rB,EAAI8B,GAAI8U,IAAY5W,EAAK0zB,EAAQoE,EACpD,IAAI93B,EAAI8B,GAAG7nB,MAAMonB,cACf,OAEJ,KAAI0c,GAAW/d,EAAK,iBAAmBA,EAAI8B,IAAMic,GAAW/d,EAAI8B,GAAI,mBAClE4xB,EAASiE,GAAa33B,EAAK0zB,GAAQ,IADrC,CAKA,GAAI3+C,GAAQgjD,KAAqBD,GAAkBE,GAAqBh4B,EAAK0zB,EAAOxpB,KAAMwpB,EAAOvpB,GACjG,IAAIp1B,EACF,IAAK,GAAI3E,GAAI2E,EAAM5F,OAAS,EAAGiB,GAAK,IAAKA,EACvC6nD,GAAgBj4B,GACdkK,KAAMn1B,EAAM3E,GAAG85B,KACfC,GAAIp1B,EAAM3E,GAAG+5B,GACb3e,KAAMpb,GAAK,IAAMsjD,EAAOloC,WAG5BysC,IAAgBj4B,EAAK0zB,IAGzB,QAASuE,IAAgBj4B,EAAK0zB,GAC5B,GAA0B,GAAtBA,EAAOloC,KAAKrc,QAAiC,IAAlBukD,EAAOloC,KAAK,IAA2C,GAA/B6pB,GAAIqe,EAAOxpB,KAAMwpB,EAAOvpB,IAA/E,CAEA,GAAI+tB,GAAWd,GAAsBp3B,EAAK0zB,EAC1CyE,IAAmBn4B,EAAK0zB,EAAQwE,EAAUl4B,EAAI8B,GAAK9B,EAAI8B,GAAGQ,MAAM9vB,GAAK2S,KACrEizC,GAAoBp4B,EAAK0zB,EAAQwE,EAAUG,GAAuBr4B,EAAK0zB,GACvE,IAAI4E,KACJC,IAAWv4B,EAAK,SAASA,EAAKw4B,GACvBA,GAA+C,IAAjCvoD,GAAQqoD,EAASt4B,EAAI4d,WACtC6a,GAAWz4B,EAAI4d,QAAS8V,GACxB4E,EAAQnoD,KAAK6vB,EAAI4d,UAEnBwa,GAAoBp4B,EAAK0zB,EAAQ,KAAM2E,GAAuBr4B,EAAK0zB,OAGvE,QAASgF,IAAsB14B,EAAKlmB,EAAM6+C,GACxC,IAAI34B,EAAI8B,KAAM9B,EAAI8B,GAAG7nB,MAAMonB,cAA3B,CAOA,IAAK,GAJDu3B,GADAC,EAAO74B,EAAI4d,QAEXsa,EAAWl4B,EAAI8V,IACfz/B,EAAiB,QAARyD,EAAiB++C,EAAK56B,KAAO46B,EAAKC,OAC3CC,EAAe,QAARj/C,EAAiB++C,EAAKC,OAASD,EAAK56B,KACtC7tB,EAAI,EAAGA,EAAIiG,EAAOlH,SACzBypD,EAAQviD,EAAOjG,GACXuoD,GAAqBC,EAAMxiB,QAAWwiB,EAAMza,OAAOne,EAAI8V,KAAQ8iB,EAAMxiB,QAFxChmC,KAKnC,GAAIA,GAAKiG,EAAOlH,OAAhB,CAGA,IADA0pD,EAAKG,WAAaH,EAAKtG,cAAgB,KAErCqG,EAAQviD,EAAOwB,MACX+gD,EAAMxiB,QAFD,CAIP,GADA6iB,GAAuBL,EAAOG,GAC1BJ,IAAuBC,EAAMza,OAAOne,EAAI8V,KAE1C,WADAqH,IAAand,EAAK44B,GAAQM,WAAW,GAGvChB,GAAWU,EAIf,GAAIO,KACJF,IAAuBf,EAAUa,GACjCA,EAAK5oD,MACHsiC,QAAS0mB,EACTC,WAAYP,EAAKO,aAEnBP,EAAKO,WAAaR,EAAMQ,cAAgBP,EAAKQ,aAE7C,KAAK,GADDC,GAASvb,GAAW/d,EAAK,iBAAmBA,EAAI8B,IAAMic,GAAW/d,EAAI8B,GAAI,gBACpE1xB,EAAIwoD,EAAMnmB,QAAQtjC,OAAS,EAAGiB,GAAK,IAAKA,EAAG,CAClD,GAAIsjD,GAASkF,EAAMnmB,QAAQriC,EAE3B,IADAsjD,EAAO3d,OAASj8B,EACZw/C,IAAW3B,GAAa33B,EAAK0zB,GAAQ,GAEvC,YADAr9C,EAAOlH,OAAS,EAGlBgqD,GAAYhpD,KAAKopD,GAAwBv5B,EAAK0zB,GAC9C,IAAI7Y,GAAQzqC,EAAIgnD,GAAsBp3B,EAAK0zB,GAAUjd,GAAIpgC,EACzD+hD,IAAoBp4B,EAAK0zB,EAAQ7Y,EAAO2e,GAAcx5B,EAAK0zB,KACtDtjD,GAAK4vB,EAAI8B,IACZ9B,EAAI8B,GAAGgwB,gBACL5nB,KAAMwpB,EAAOxpB,KACbC,GAAIwpB,GAAUD,IAElB,IAAI4E,KACJC,IAAWv4B,EAAK,SAASA,EAAKw4B,GACvBA,GAA+C,IAAjCvoD,GAAQqoD,EAASt4B,EAAI4d,WACtC6a,GAAWz4B,EAAI4d,QAAS8V,GACxB4E,EAAQnoD,KAAK6vB,EAAI4d,UAEnBwa,GAAoBp4B,EAAK0zB,EAAQ,KAAM8F,GAAcx5B,EAAK0zB,SAIhE,QAAS+F,IAASz5B,EAAK05B,GACrB,GAAgB,GAAZA,IAEJ15B,EAAI+E,OAAS20B,EACb15B,EAAI8V,IAAM,GAAIkG,IAAU1F,GAAItW,EAAI8V,IAAIM,OAAQ,SAASG,GACnD,MAAO,IAAI2F,IAAM/G,GAAIoB,EAAMuB,OAAOjqB,KAAO6rC,EAAUnjB,EAAMuB,OAAO59B,IAAKi7B,GAAIoB,EAAMkB,KAAK5pB,KAAO6rC,EAAUnjB,EAAMkB,KAAKv9B,OAC9G8lB,EAAI8V,IAAImG,WACRjc,EAAI8B,IAAI,CACVyF,GAAUvH,EAAI8B,GAAI9B,EAAI+E,MAAO/E,EAAI+E,MAAQ20B,EAAUA,EACnD,KAAK,GAAI9mD,GAAIotB,EAAI8B,GAAGzB,QAChBhwB,EAAIuC,EAAEiyB,SAAUx0B,EAAIuC,EAAEkyB,OAAQz0B,IAChCizC,GAActjB,EAAI8B,GAAIzxB,EAAG,WAG/B,QAAS+nD,IAAoBp4B,EAAK0zB,EAAQwE,EAAUyB,GAClD,GAAI35B,EAAI8B,KAAO9B,EAAI8B,GAAGQ,MACpB,MAAOupB,IAAU7rB,EAAI8B,GAAIs2B,IAAqBp4B,EAAK0zB,EAAQwE,EAAUyB,EACvE,IAAIjG,EAAOvpB,GAAGtc,KAAOmS,EAAI+E,MAEvB,WADA00B,IAASz5B,EAAK0zB,EAAOloC,KAAKrc,OAAS,GAAKukD,EAAOvpB,GAAGtc,KAAO6lC,EAAOxpB,KAAKrc,MAGvE,MAAI6lC,EAAOxpB,KAAKrc,KAAOmS,EAAI8N,YAA3B,CAEA,GAAI4lB,EAAOxpB,KAAKrc,KAAOmS,EAAI+E,MAAO,CAChC,GAAI/vB,GAAQ0+C,EAAOloC,KAAKrc,OAAS,GAAK6wB,EAAI+E,MAAQ2uB,EAAOxpB,KAAKrc,KAC9D4rC,IAASz5B,EAAKhrB,GACd0+C,GACExpB,KAAMiL,GAAInV,EAAI+E,MAAO,GACrBoF,GAAIgL,GAAIue,EAAOvpB,GAAGtc,KAAO7Y,EAAO0+C,EAAOvpB,GAAGjwB,IAC1CsR,MAAOirB,GAAIid,EAAOloC,OAClBuqB,OAAQ2d,EAAO3d,QAGnB,GAAIrpB,GAAOsT,EAAI8N,UACX4lB,GAAOvpB,GAAGtc,KAAOnB,IACnBgnC,GACExpB,KAAMwpB,EAAOxpB,KACbC,GAAIgL,GAAIzoB,EAAM2d,GAAQrK,EAAKtT,GAAMlB,KAAKrc,QACtCqc,MAAOkoC,EAAOloC,KAAK,IACnBuqB,OAAQ2d,EAAO3d,SAGnB2d,EAAOkG,QAAUhe,GAAW5b,EAAK0zB,EAAOxpB,KAAMwpB,EAAOvpB,IAChD+tB,IACHA,EAAWd,GAAsBp3B,EAAK0zB,IACpC1zB,EAAI8B,GACN+3B,GAA4B75B,EAAI8B,GAAI4xB,EAAQiG,GAE5CG,GAAU95B,EAAK0zB,EAAQiG,GACzB9b,GAAmB7d,EAAKk4B,EAAU3Z,KAEpC,QAASsb,IAA4B/3B,EAAI4xB,EAAQiG,GAC/C,GAAI35B,GAAM8B,EAAG9B,IACTK,EAAUyB,EAAGzB,QACb6J,EAAOwpB,EAAOxpB,KACdC,EAAKupB,EAAOvpB,GACZ4vB,GAAqB,EACrBC,EAAkB9vB,EAAKrc,IACtBiU,GAAGzZ,QAAQqY,eACds5B,EAAkBvf,GAAOiH,GAAWrX,GAAQrK,EAAKkK,EAAKrc,QACtDmS,EAAIkH,KAAK8yB,EAAiB7vB,EAAGtc,KAAO,EAAG,SAASA,GAC9C,MAAIA,IAAQwS,EAAQ+F,SAClB2zB,GAAqB,GACd,GAFT,UAMA/5B,EAAI8V,IAAI4E,SAASgZ,EAAOxpB,KAAMwpB,EAAOvpB,IAAM,IAC7CkU,GAAqBvc,GACvBg4B,GAAU95B,EAAK0zB,EAAQiG,EAAO3xB,EAAelG,IACxCA,EAAGzZ,QAAQqY,eACdV,EAAIkH,KAAK8yB,EAAiB9vB,EAAKrc,KAAO6lC,EAAOloC,KAAKrc,OAAQ,SAAS0e,GACjE,GAAIE,GAAM6b,EAAW/b,EACjBE,GAAMsS,EAAQgG,gBAChBhG,EAAQ+F,QAAUvY,EAClBwS,EAAQgG,cAAgBtY,EACxBsS,EAAQiG,gBAAiB,EACzByzB,GAAqB,KAGrBA,IACFj4B,EAAGQ,MAAM0nB,eAAgB,IAE7BhqB,EAAIqH,SAAWgB,KAAKwF,IAAI7N,EAAIqH,SAAU6C,EAAKrc,MAC3CyZ,GAAYxF,EAAI,IAChB,IAAIqqB,GAAUuH,EAAOloC,KAAKrc,QAAUg7B,EAAGtc,KAAOqc,EAAKrc,MAAQ,CACvD6lC,GAAOuG,KACT1yB,GAAUzF,GACHoI,EAAKrc,MAAQsc,EAAGtc,MAA8B,GAAtB6lC,EAAOloC,KAAKrc,QAAgB+qD,GAAkBp4B,EAAG9B,IAAK0zB,GAGrFnsB,GAAUzF,EAAIoI,EAAKrc,KAAMsc,EAAGtc,KAAO,EAAGs+B,GAFtC7I,GAAcxhB,EAAIoI,EAAKrc,KAAM,OAG/B,IAAIssC,GAAiBpc,GAAWjc,EAAI,WAChCs4B,EAAgBrc,GAAWjc,EAAI,SACnC,IAAIs4B,GAAiBD,EAAgB,CACnC,GAAIzmD,IACFw2B,KAAMA,EACNC,GAAIA,EACJ3e,KAAMkoC,EAAOloC,KACbouC,QAASlG,EAAOkG,QAChB7jB,OAAQ2d,EAAO3d,OAEbqkB,IACFvlB,GAAY/S,EAAI,SAAUA,EAAIpuB,GAC5BymD,IACDr4B,EAAGQ,MAAMunB,aAAe/nB,EAAGQ,MAAMunB,gBAAkB15C,KAAKuD,GAE7DouB,EAAGzB,QAAQsG,kBAAoB,KAEjC,QAASotB,IAAa/zB,EAAKnI,EAAMqS,EAAMC,EAAI4L,GAGzC,GAFK5L,IACHA,EAAKD,GACHmL,GAAIlL,EAAID,GAAQ,EAAG,CACrB,GAAIkX,GAAMjX,CACVA,GAAKD,EACLA,EAAOkX,EAEU,gBAARvpB,KACTA,EAAOmI,EAAIkW,WAAWre,IACxB+e,GAAW5W,GACTkK,KAAMA,EACNC,GAAIA,EACJ3e,KAAMqM,EACNke,OAAQA,IAGZ,QAAS0V,IAAkB3pB,EAAI+e,GAC7B,IAAI0M,GAAezrB,EAAI,wBAAvB,CAEA,GAAIzB,GAAUyB,EAAGzB,QACb+Q,EAAM/Q,EAAQ4D,MAAM2K,wBACpByrB,EAAW,IAKf,IAJIxZ,EAAOxT,IAAM+D,EAAI/D,IAAM,EACzBgtB,GAAW,EACJxZ,EAAO5T,OAASmE,EAAI/D,KAAOvV,OAAOwiC,aAAe3nB,SAASwU,gBAAgBvc,gBACjFyvB,GAAW,GACG,MAAZA,IAAqBE,GAAS,CAChC,GAAIC,GAAah3B,GAAI,MAAO,IAAU,KAAM,6BAA+Bqd,EAAOxT,IAAMhN,EAAQgF,WAAakI,GAAWzL,EAAGzB,UAAY,gBAAkBwgB,EAAO5T,OAAS4T,EAAOxT,IAAMjC,GAAUtJ,GAAMzB,EAAQqF,WAAa,aAAemb,EAAO3S,KAAO,kBACxPpM,GAAGzB,QAAQ0D,UAAUa,YAAY41B,GACjCA,EAAW1I,eAAeuI,GAC1Bv4B,EAAGzB,QAAQ0D,UAAUoO,YAAYqoB,KAGrC,QAASlP,IAAkBxpB,EAAI/lB,EAAKkF,EAAKsqC,GACzB,MAAVA,IACFA,EAAS,EACX,KAAK,GAAIkP,GAAQ,EAAW,EAARA,EAAWA,IAAS,CACtC,GAAIC,IAAU,EACV7Z,EAASX,GAAape,EAAI/lB,GAC1B4+C,EAAa15C,GAAOA,GAAOlF,EAAemkC,GAAape,EAAI7gB,GAA1B4/B,EACjC+Z,EAAYC,GAAmB/4B,EAAIuG,KAAKwF,IAAIgT,EAAO3S,KAAMysB,EAAUzsB,MAAO7F,KAAKwF,IAAIgT,EAAOxT,IAAKstB,EAAUttB,KAAOke,EAAQljB,KAAKC,IAAIuY,EAAO3S,KAAMysB,EAAUzsB,MAAO7F,KAAKC,IAAIuY,EAAO5T,OAAQ0tB,EAAU1tB,QAAUse,GAC3MuP,EAAWh5B,EAAG9B,IAAI2L,UAClBovB,EAAYj5B,EAAG9B,IAAI4L,UAWvB,IAV2B,MAAvBgvB,EAAUjvB,YACZa,GAAa1K,EAAI84B,EAAUjvB,WACvBtD,KAAKqc,IAAI5iB,EAAG9B,IAAI2L,UAAYmvB,GAAY,IAC1CJ,GAAU,IAEc,MAAxBE,EAAUhvB,aACZW,GAAczK,EAAI84B,EAAUhvB,YACxBvD,KAAKqc,IAAI5iB,EAAG9B,IAAI4L,WAAamvB,GAAa,IAC5CL,GAAU,KAETA,EACH,MAEJ,MAAO7Z,GAET,QAASiR,IAAehwB,EAAIk5B,EAAIC,EAAIC,EAAIC,GACtC,GAAIP,GAAYC,GAAmB/4B,EAAIk5B,EAAIC,EAAIC,EAAIC,EACxB,OAAvBP,EAAUjvB,WACZa,GAAa1K,EAAI84B,EAAUjvB,WACD,MAAxBivB,EAAUhvB,YACZW,GAAczK,EAAI84B,EAAUhvB,YAEhC,QAASivB,IAAmB/4B,EAAIk5B,EAAIC,EAAIC,EAAIC,GAC1C,GAAI96B,GAAUyB,EAAGzB,QACb+6B,EAAalzB,GAAWpG,EAAGzB,QACtB,GAAL46B,IACFA,EAAK,EACP,IAAII,GAAYv5B,EAAGQ,OAA+B,MAAtBR,EAAGQ,MAAMqJ,UAAoB7J,EAAGQ,MAAMqJ,UAAYtL,EAAQkE,SAASoH,UAC3F2a,EAAS7V,GAAc3O,GACvB7jB,IACAk9C,GAAKF,EAAK3U,IACZ6U,EAAKF,EAAK3U,EACZ,IAAIgV,GAAYx5B,EAAG9B,IAAI4I,OAAS+B,GAAYtK,GACxCk7B,EAAaH,EAALH,EACRO,EAAWL,EAAKG,EAAYF,CAChC,IAASC,EAALJ,EACFh9C,EAAO0tB,UAAY4vB,EAAQ,EAAIN,MAC1B,IAAIE,EAAKE,EAAY/U,EAAQ,CAClC,GAAImV,GAASpzB,KAAKwF,IAAIotB,GAAKO,EAAWF,EAAYH,GAAM7U,EACpDmV,IAAUJ,IACZp9C,EAAO0tB,UAAY8vB,GAEvB,GAAIC,GAAa55B,EAAGQ,OAAgC,MAAvBR,EAAGQ,MAAMsJ,WAAqB9J,EAAGQ,MAAMsJ,WAAavL,EAAQkE,SAASqH,WAC9F+vB,EAAUvsB,GAAatN,IAAOA,EAAGzZ,QAAQ4iB,YAAc5K,EAAQgE,QAAQqF,YAAc,GACrFkyB,EAAUV,EAAKF,EAAKW,CASxB,OARIC,KACFV,EAAKF,EAAKW,GACH,GAALX,EACF/8C,EAAO2tB,WAAa,EACR8vB,EAALV,EACP/8C,EAAO2tB,WAAavD,KAAKC,IAAI,EAAG0yB,GAAMY,EAAU,EAAI,KAC7CV,EAAKS,EAAUD,EAAa,IACnCz9C,EAAO2tB,WAAasvB,GAAMU,EAAU,EAAI,IAAMD,GACzC19C,EAET,QAAS49C,IAAe/5B,EAAIoM,EAAMb,IACpB,MAARa,GAAuB,MAAPb,IAClByuB,GAAmBh6B,GACT,MAARoM,IACFpM,EAAGQ,MAAMsJ,YAAqC,MAAvB9J,EAAGQ,MAAMsJ,WAAqB9J,EAAG9B,IAAI4L,WAAa9J,EAAGQ,MAAMsJ,YAAcsC,GACvF,MAAPb,IACFvL,EAAGQ,MAAMqJ,WAAmC,MAAtB7J,EAAGQ,MAAMqJ,UAAoB7J,EAAG9B,IAAI2L,UAAY7J,EAAGQ,MAAMqJ,WAAa0B,GAEhG,QAASyJ,IAAoBhV,GAC3Bg6B,GAAmBh6B,EACnB,IAAIgI,GAAMhI,EAAGi6B,YACT7xB,EAAOJ,EACPK,EAAKL,CACJhI,GAAGzZ,QAAQqY,eACdwJ,EAAOJ,EAAI5vB,GAAKi7B,GAAIrL,EAAIjc,KAAMic,EAAI5vB,GAAK,GAAK4vB,EAC5CK,EAAKgL,GAAIrL,EAAIjc,KAAMic,EAAI5vB,GAAK,IAE9B4nB,EAAGQ,MAAM2nB,aACP/f,KAAMA,EACNC,GAAIA,EACJohB,OAAQzpB,EAAGzZ,QAAQ2zC,mBACnBxQ,UAAU,GAGd,QAASsQ,IAAmBh6B,GAC1B,GAAIyU,GAAQzU,EAAGQ,MAAM2nB,WACrB,IAAI1T,EAAO,CACTzU,EAAGQ,MAAM2nB,YAAc,IACvB,IAAI/f,GAAOke,GAAetmB,EAAIyU,EAAMrM,MAChCC,EAAKie,GAAetmB,EAAIyU,EAAMpM,IAC9B8xB,EAAOpB,GAAmB/4B,EAAIuG,KAAKwF,IAAI3D,EAAKgE,KAAM/D,EAAG+D,MAAO7F,KAAKwF,IAAI3D,EAAKmD,IAAKlD,EAAGkD,KAAOkJ,EAAMgV,OAAQljB,KAAKC,IAAI4B,EAAK6C,MAAO5C,EAAG4C,OAAQ1E,KAAKC,IAAI4B,EAAK+C,OAAQ9C,EAAG8C,QAAUsJ,EAAMgV,OACpLzpB,GAAGo6B,SAASD,EAAKrwB,WAAYqwB,EAAKtwB,YAGtC,QAASgM,IAAW7V,EAAIlF,EAAGu/B,EAAKC,GAC9B,GACIniD,GADA+lB,EAAM8B,EAAG9B,GAEF,OAAPm8B,IACFA,EAAM,OACG,SAAPA,IACGn8B,EAAIrX,KAAKzK,OAGZjE,EAAQuoC,GAAe1gB,EAAIlF,GAF3Bu/B,EAAM,OAIV,IAAIrY,GAAUhiB,EAAGzZ,QAAQy7B,QACrBj2B,EAAOwc,GAAQrK,EAAKpD,GACpBy/B,EAAWxY,GAAYh2B,EAAKrC,KAAM,KAAMs4B,EACxCj2B,GAAKsZ,aACPtZ,EAAKsZ,WAAa,KACpB,IACIrgB,GADAw1C,EAAiBzuC,EAAKrC,KAAK9U,MAAM,QAAQ,EAE7C,IAAK0lD,GAAe,KAAK/hD,KAAKwT,EAAKrC,OAG5B,GAAW,SAAP2wC,IACTr1C,EAAckZ,EAAIrX,KAAKzK,OAAOjE,EAAO4T,EAAKrC,KAAK/K,MAAM67C,EAAentD,QAAS0e,EAAKrC,MAC9E1E,GAAeE,IAAQF,EAAc,KAAK,CAC5C,IAAKs1C,EACH,MACFD,GAAM,YAPRr1C,GAAc,EACdq1C,EAAM,KASG,SAAPA,EAEAr1C,EADE8V,EAAIoD,EAAI+E,MACI8e,GAAYxZ,GAAQrK,EAAKpD,EAAI,GAAGpR,KAAM,KAAMs4B,GAE5C,EACA,OAAPqY,EACTr1C,EAAcu1C,EAAWv6B,EAAGzZ,QAAQ7F,WACpB,YAAP25C,EACTr1C,EAAcu1C,EAAWv6B,EAAGzZ,QAAQ7F,WACb,gBAAP25C,KAChBr1C,EAAcu1C,EAAWF,GAE3Br1C,EAAcuhB,KAAKC,IAAI,EAAGxhB,EAC1B,IAAIy1C,GAAe,GACfxgD,EAAM,CACV,IAAI+lB,EAAGzZ,QAAQm0C,eACb,IAAK,GAAIpsD,GAAIi4B,KAAKiF,MAAMxmB,EAAcg9B,GAAU1zC,IAAKA,EACnD2L,GAAO+nC,EACPyY,GAAgB,GAIpB,IAFUz1C,EAAN/K,IACFwgD,GAAgBE,GAAS31C,EAAc/K,IACrCwgD,GAAgBD,EAGlB,MAFAvI,IAAa/zB,EAAKu8B,EAAcpnB,GAAIvY,EAAG,GAAIuY,GAAIvY,EAAG0/B,EAAentD,QAAS,UAC1E0e,EAAKsZ,WAAa,MACX,CAEP,KAAK,GAAI/2B,GAAI,EAAGA,EAAI4vB,EAAI8V,IAAIM,OAAOjnC,OAAQiB,IAAK,CAC9C,GAAImmC,GAAQvW,EAAI8V,IAAIM,OAAOhmC,EAC3B,IAAImmC,EAAMkB,KAAK5pB,MAAQ+O,GAAK2Z,EAAMkB,KAAKv9B,GAAKoiD,EAAentD,OAAQ,CACjE,GAAI4M,GAAMo5B,GAAIvY,EAAG0/B,EAAentD,OAChCquC,IAAoBxd,EAAK5vB,EAAG,GAAI8rC,IAAMngC,EAAKA,GAC3C,SAKR,QAAS2gD,IAAW18B,EAAK61B,EAAQ8G,EAAYlS,GAC3C,GAAImS,GAAK/G,EACLhoC,EAAOgoC,CAKX,OAJqB,gBAAVA,GACThoC,EAAOwc,GAAQrK,EAAKwc,GAASxc,EAAK61B,IAElC+G,EAAKniB,GAAOob,GACJ,MAAN+G,EACK,MACLnS,EAAG58B,EAAM+uC,IAAO58B,EAAI8B,IACtBwhB,GAActjB,EAAI8B,GAAI86B,EAAID,GACrB9uC,GAET,QAASgvC,IAAoB/6B,EAAIg7B,GAG/B,IAAK,GAFD1mB,GAAStU,EAAG9B,IAAI8V,IAAIM,OACpB2mB,KACK3sD,EAAI,EAAGA,EAAIgmC,EAAOjnC,OAAQiB,IAAK,CAEtC,IADA,GAAI4sD,GAASF,EAAQ1mB,EAAOhmC,IACrB2sD,EAAK5tD,QAAUkmC,GAAI2nB,EAAO9yB,KAAMuM,GAAIsmB,GAAM5yB,KAAO,GAAG,CACzD,GAAI8yB,GAAWF,EAAKllD,KACpB,IAAIw9B,GAAI4nB,EAAS/yB,KAAM8yB,EAAO9yB,MAAQ,EAAG,CACvC8yB,EAAO9yB,KAAO+yB,EAAS/yB,IACvB,QAGJ6yB,EAAK5sD,KAAK6sD,GAEZ1lB,GAAQxV,EAAI,WACV,IAAK,GAAI1xB,GAAI2sD,EAAK5tD,OAAS,EAAGiB,GAAK,EAAGA,IACpC2jD,GAAajyB,EAAG9B,IAAK,GAAI+8B,EAAK3sD,GAAG85B,KAAM6yB,EAAK3sD,GAAG+5B,GAAI,UACrD2M,IAAoBhV,KAGxB,QAASo7B,IAASl9B,EAAKjkB,EAAK+iC,EAAKqe,EAAMC,GAMrC,QAASC,KACP,GAAIhtD,GAAIwd,EAAOixB,CACf,OAAIzuC,GAAI2vB,EAAI+E,OAAS10B,GAAK2vB,EAAI+E,MAAQ/E,EAAIuO,KAChC+uB,GAAW,GACrBzvC,EAAOxd,EACA0wC,EAAU1W,GAAQrK,EAAK3vB,IAEhC,QAASktD,GAASC,GAChB,GAAIjkD,IAAQ6jD,EAAW9T,GAAemU,IAAe1c,EAAS7mC,EAAI4kC,GAAK,EACvE,IAAY,MAARvlC,EAAc,CAChB,GAAKikD,IAAeH,IAMlB,MAAQC,IAAW,CAJjBpjD,GADEkjD,GACU,EAANte,EAAUmK,GAAYD,IAAUjI,GAE3B,EAANjC,EAAUiC,EAAQv1B,KAAKrc,OAAS,MAIzC+K,GAAKX,CACP,QAAO,EAxBT,GAAIsU,GAAO9R,EAAI8R,KACX3T,EAAK6B,EAAI7B,GACTwjD,EAAU5e,EACViC,EAAU1W,GAAQrK,EAAKnS,GACvByvC,GAAW,CAsBf,IAAY,QAARH,EACFI,QACG,IAAY,UAARJ,EACPI,GAAS,OACN,IAAY,QAARJ,GAA0B,SAARA,EAIzB,IAAK,GAHDQ,GAAU,KACV3sD,EAAgB,SAARmsD,EACRS,EAAS59B,EAAI8B,IAAM9B,EAAI8B,GAAG+7B,UAAU9hD,EAAK,aACpCgpB,GAAQ,IACL,EAAN+Z,IAAYye,GAAUx4B,GADHA,GAAQ,EAAO,CAGtC,GAAI+E,GAAMiX,EAAQv1B,KAAKxP,OAAO9B,IAAO,KACjCJ,EAAOgkD,GAAWh0B,EAAK8zB,GAAU,IAAM5sD,GAAgB,MAAP84B,EAAc,KAAO94B,GAAS,KAAKqJ,KAAKyvB,GAAO,KAAO,GAG1G,KAFI94B,GAAU+zB,GAAUjrB,IACtBA,EAAO,KACL6jD,GAAWA,GAAW7jD,EAAM,CACpB,EAANglC,IACFA,EAAM,EACNye,IAEF,OAIF,GAFIzjD,IACF6jD,EAAU7jD,GACRglC,EAAM,IAAMye,GAAUx4B,GACxB,MAGN,GAAI9mB,GAASygC,GAAW1e,EAAKmV,GAAItnB,EAAM3T,GAAKwjD,GAAS,EAGrD,OAFKJ,KACHr/C,EAAO8/C,SAAU,GACZ9/C,EAET,QAAS+/C,IAASl8B,EAAI/lB,EAAK+iC,EAAKqe,GAC9B,GAEIngC,GAFAgD,EAAM8B,EAAG9B,IACTlM,EAAI/X,EAAImyB,IAEZ,IAAY,QAARivB,EAAgB,CAClB,GAAIc,GAAW51B,KAAKwF,IAAI/L,EAAGzB,QAAQE,QAAQqK,aAAc9S,OAAOwiC,aAAe3nB,SAASwU,gBAAgBvc,aACxG5N,GAAIjhB,EAAIsxB,IAAMyR,GAAOmf,GAAkB,EAANnf,EAAU,IAAM,IAAM5W,GAAWpG,EAAGzB,cACpD,QAAR88B,IACTngC,EAAI8hB,EAAM,EAAI/iC,EAAIkxB,OAAS,EAAIlxB,EAAIsxB,IAAM,EAE3C,QAAW,CACT,GAAIzsB,GAAS4nC,GAAW1mB,EAAIhO,EAAGkJ,EAC/B,KAAKpc,EAAO0nC,QACV,KACF,IAAU,EAANxJ,EAAe,GAAL9hB,EAASA,GAAKgD,EAAI4I,OAAQ,CACtChoB,EAAOm9C,SAAU,CACjB,OAEF/gC,GAAW,EAAN8hB,EAEP,MAAOl+B,GAiiBT,QAASs9C,IAAOnvD,EAAMovD,EAAOtI,EAAQuI,GACnCllD,EAAW4mB,SAAS/wB,GAAQovD,EACxBtI,IACFhzB,GAAe9zB,GAAQqvD,EAAY,SAASt8B,EAAIia,EAAKsT,GAC/CA,GAAOvsB,IACT+yB,EAAO/zB,EAAIia,EAAKsT,IAChBwG,GA2mBR,QAASwI,IAAiBtvD,GAOxB,IAAK,GAJDuvD,GACAC,EACAvpD,EACAwpD,EALAC,EAAQ1vD,EAAKgG,MAAM,UACnBhG,EAAO0vD,EAAMA,EAAMtvD,OAAS,GAKvBiB,EAAI,EAAGA,EAAIquD,EAAMtvD,OAAS,EAAGiB,IAAK,CACzC,GAAI6I,GAAMwlD,EAAMruD,EAChB,IAAI,kBAAkBiK,KAAKpB,GACzBulD,GAAM,MACH,IAAI,YAAYnkD,KAAKpB,GACxBqlD,GAAM,MACH,IAAI,sBAAsBjkD,KAAKpB,GAClCslD,GAAO,MACJ,CAAA,IAAI,aAAalkD,KAAKpB,GAGzB,KAAM,IAAI3G,OAAM,+BAAiC2G,EAFjDjE,IAAQ,GAYZ,MARIspD,KACFvvD,EAAO,OAASA,GACdwvD,IACFxvD,EAAO,QAAUA,GACfyvD,IACFzvD,EAAO,OAASA,GACdiG,IACFjG,EAAO,SAAWA,GACbA,EA4ET,QAAS2vD,IAAU3iB,GACjB,MAAqB,gBAAPA,GAAkBia,GAAOja,GAAOA,EAuRhD,QAAS4iB,IAAS3+B,EAAKkK,EAAMC,EAAI9hB,EAASvO,GACxC,GAAIuO,GAAWA,EAAQu2C,OACrB,MAAOC,IAAe7+B,EAAKkK,EAAMC,EAAI9hB,EAASvO,EAChD,IAAIkmB,EAAI8B,KAAO9B,EAAI8B,GAAGQ,MACpB,MAAOupB,IAAU7rB,EAAI8B,GAAI68B,IAAU3+B,EAAKkK,EAAMC,EAAI9hB,EAASvO,EAC7D,IAAIwhC,GAAS,GAAIwjB,IAAW9+B,EAAKlmB,GAC7Bu3B,EAAOgE,GAAInL,EAAMC,EAGrB,IAFI9hB,GACFwX,GAAQxX,EAASizB,GAAQ,GACvBjK,EAAO,GAAa,GAARA,GAAaiK,EAAOyjB,kBAAmB,EACrD,MAAOzjB,EAST,IARIA,EAAO0jB,eACT1jB,EAAOwE,WAAY,EACnBxE,EAAO2jB,WAAaz7B,GAAI,QAAS8X,EAAO0jB,cAAe,qBAClD32C,EAAQqsB,mBACX4G,EAAO2jB,WAAWx7B,aAAa,mBAAoB,QACjDpb,EAAQw9B,aACVvK,EAAO2jB,WAAWpZ,YAAa,IAE/BvK,EAAOwE,UAAW,CACpB,GAAIof,GAA0Bl/B,EAAKkK,EAAKrc,KAAMqc,EAAMC,EAAImR,IAAWpR,EAAKrc,MAAQsc,EAAGtc,MAAQqxC,GAA0Bl/B,EAAKmK,EAAGtc,KAAMqc,EAAMC,EAAImR,GAC3I,KAAM,IAAIhpC,OAAM,mEAClBy9B,KAAoB,EAElBuL,EAAO6jB,cACThH,GAAmBn4B,GACjBkK,KAAMA,EACNC,GAAIA,EACJ4L,OAAQ,YACP/V,EAAI8V,IAAK3wB,IACd,IAEI6kC,GAFAoV,EAAUl1B,EAAKrc,KACfiU,EAAK9B,EAAI8B,EA4Bb,IA1BA9B,EAAIkH,KAAKk4B,EAASj1B,EAAGtc,KAAO,EAAG,SAASA,GAClCiU,GAAMwZ,EAAOwE,YAAche,EAAGzZ,QAAQqY,cAAgBghB,GAAW7zB,IAASiU,EAAGzB,QAAQ+F,UACvF4jB,GAAgB,GACd1O,EAAOwE,WAAasf,GAAWl1B,EAAKrc,MACtCmb,GAAiBnb,EAAM,GACzBwxC,GAAcxxC,EAAM,GAAIyxC,IAAWhkB,EAAQ8jB,GAAWl1B,EAAKrc,KAAOqc,EAAKhwB,GAAK,KAAMklD,GAAWj1B,EAAGtc,KAAOsc,EAAGjwB,GAAK,SAC7GklD,IAEA9jB,EAAOwE,WACT9f,EAAIkH,KAAKgD,EAAKrc,KAAMsc,EAAGtc,KAAO,EAAG,SAASA,GACpC4a,GAAazI,EAAKnS,IACpBmb,GAAiBnb,EAAM,KAEzBytB,EAAOikB,cACT7zB,GAAG4P,EAAQ,oBAAqB,WAC9BA,EAAOrP,UAEPqP,EAAO7F,WACTsiB,IAAmB,GACf/3B,EAAI4d,QAAQ3f,KAAK9uB,QAAU6wB,EAAI4d,QAAQkb,OAAO3pD,SAChD6wB,EAAIw/B,gBAEJlkB,EAAOwE,YACTxE,EAAO9oC,KAAOitD,GACdnkB,EAAO+D,QAAS,GAEdvd,EAAI,CAGN,GAFIkoB,IACFloB,EAAGQ,MAAM0nB,eAAgB,GACvB1O,EAAOwE,UACTvY,GAAUzF,EAAIoI,EAAKrc,KAAMsc,EAAGtc,KAAO,OAChC,IAAIytB,EAAOv8B,WAAau8B,EAAOokB,OAASpkB,EAAOqkB,YAAcrkB,EAAOskB,UAAYtkB,EAAOukB,IAC1F,IAAK,GAAIzvD,GAAI85B,EAAKrc,KAAMzd,GAAK+5B,EAAGtc,KAAMzd,IACpCkzC,GAAcxhB,EAAI1xB,EAAG,OACrBkrC,GAAO+D,QACTf,GAAiBxc,EAAG9B,KACtB6U,GAAY/S,EAAI,cAAeA,EAAIwZ,GAErC,MAAOA,GAoBT,QAASujB,IAAe7+B,EAAKkK,EAAMC,EAAI9hB,EAASvO,GAC9CuO,EAAUwX,GAAQxX,GAClBA,EAAQu2C,QAAS,CACjB,IAAI3qB,IAAW0qB,GAAS3+B,EAAKkK,EAAMC,EAAI9hB,EAASvO,IAC5CsjC,EAAUnJ,EAAQ,GAClBQ,EAASpsB,EAAQ42C,UAUrB,OATA1G,IAAWv4B,EAAK,SAASA,GACnByU,IACFpsB,EAAQ42C,WAAaxqB,EAAOqrB,WAAU,IACxC7rB,EAAQ9jC,KAAKwuD,GAAS3+B,EAAKma,GAAQna,EAAKkK,GAAOiQ,GAAQna,EAAKmK,GAAK9hB,EAASvO,GAC1E,KAAK,GAAI1J,GAAI,EAAGA,EAAI4vB,EAAI+/B,OAAO5wD,SAAUiB,EACvC,GAAI4vB,EAAI+/B,OAAO3vD,GAAG4vD,SAChB,MACJ5iB,GAAU3G,GAAIxC,KAET,GAAIgsB,IAAiBhsB,EAASmJ,GAEvC,QAAS8iB,IAAkBlgC,GACzB,MAAOA,GAAI2b,UAAUxG,GAAInV,EAAI+E,MAAO,GAAI/E,EAAIma,QAAQhF,GAAInV,EAAI8N,aAAc,SAASrR,GACjF,MAAOA,GAAExT,SAGb,QAASk3C,IAAkBngC,EAAKiU,GAC9B,IAAK,GAAI7jC,GAAI,EAAGA,EAAI6jC,EAAQ9kC,OAAQiB,IAAK,CACvC,GAAIkrC,GAASrH,EAAQ7jC,GACjB2L,EAAMu/B,EAAOrR,OACbm2B,EAAQpgC,EAAIma,QAAQp+B,EAAImuB,MACxBm2B,EAAMrgC,EAAIma,QAAQp+B,EAAIouB,GAC1B,IAAIkL,GAAI+qB,EAAOC,GAAM,CACnB,GAAIC,GAAU3B,GAAS3+B,EAAKogC,EAAOC,EAAK/kB,EAAO8B,QAAS9B,EAAO8B,QAAQtjC,KACvEwhC,GAAOrH,QAAQ9jC,KAAKmwD,GACpBA,EAAQr3C,OAASqyB,IAIvB,QAASilB,IAAoBtsB,GAC3B,IAAK,GAAI7jC,GAAI,EAAGA,EAAI6jC,EAAQ9kC,OAAQiB,IAAK,CACvC,GAAIkrC,GAASrH,EAAQ7jC,GACjB2vD,GAAUzkB,EAAO8B,QAAQpd,IAE7Bu4B,IAAWjd,EAAO8B,QAAQpd,IAAK,SAASptB,GACtCmtD,EAAO5vD,KAAKyC,IAEd,KAAK,GAAI3B,GAAI,EAAGA,EAAIqqC,EAAOrH,QAAQ9kC,OAAQ8B,IAAK,CAC9C,GAAIuvD,GAAYllB,EAAOrH,QAAQhjC,EACO,KAAlChB,GAAQ8vD,EAAQS,EAAUxgC,OAC5BwgC,EAAUv3C,OAAS,KACnBqyB,EAAOrH,QAAQtjC,OAAOM,IAAK,MAKnC,QAASquD,IAAWhkB,EAAQpR,EAAMC,GAChC76B,KAAKgsC,OAASA,EACdhsC,KAAK46B,KAAOA,EACZ56B,KAAK66B,GAAKA,EAEZ,QAASs2B,IAAiB9G,EAAOre,GAC/B,GAAIqe,EACF,IAAK,GAAIvpD,GAAI,EAAGA,EAAIupD,EAAMxqD,SAAUiB,EAAG,CACrC,GAAIswD,GAAO/G,EAAMvpD,EACjB,IAAIswD,EAAKplB,QAAUA,EACjB,MAAOolB,IAGf,QAASC,IAAiBhH,EAAO+G,GAC/B,IAAK,GAAI5jC,GACL1sB,EAAI,EAAGA,EAAIupD,EAAMxqD,SAAUiB,EACzBupD,EAAMvpD,IAAMswD,IACb5jC,IAAMA,OAAS3sB,KAAKwpD,EAAMvpD,GAC/B,OAAO0sB,GAET,QAASuiC,IAAcxxC,EAAM6yC,GAC3B7yC,EAAKmxB,YAAcnxB,EAAKmxB,YAAcnxB,EAAKmxB,YAAYhnC,QAAQ0oD,KAAUA,GACzEA,EAAKplB,OAAOslB,WAAW/yC,GAEzB,QAASgzC,IAAkBxR,EAAKyR,EAASC,GACvC,GAAI1R,EACF,IAAK,GACDiI,GADKlnD,EAAI,EACLA,EAAIi/C,EAAIlgD,SAAUiB,EAAG,CAC3B,GAAIswD,GAAOrR,EAAIj/C,GACXkrC,EAASolB,EAAKplB,OACd0lB,EAA4B,MAAbN,EAAKx2B,OAAiBoR,EAAO4D,cAAgBwhB,EAAKx2B,MAAQ42B,EAAUJ,EAAKx2B,KAAO42B,EACnG,IAAIE,GAAgBN,EAAKx2B,MAAQ42B,GAA0B,YAAfxlB,EAAOxhC,QAAwBinD,IAAaL,EAAKplB,OAAOuK,YAAa,CAC/G,GAAIob,GAAuB,MAAXP,EAAKv2B,KAAemR,EAAO6D,eAAiBuhB,EAAKv2B,IAAM22B,EAAUJ,EAAKv2B,GAAK22B,IAC1FxJ,IAAOA,OAAUnnD,KAAK,GAAImvD,IAAWhkB,EAAQolB,EAAKx2B,KAAM+2B,EAAY,KAAOP,EAAKv2B,MAGvF,MAAOmtB,GAET,QAAS4J,IAAiB7R,EAAK8R,EAAOJ,GACpC,GAAI1R,EACF,IAAK,GACDiI,GADKlnD,EAAI,EACLA,EAAIi/C,EAAIlgD,SAAUiB,EAAG,CAC3B,GAAIswD,GAAOrR,EAAIj/C,GACXkrC,EAASolB,EAAKplB,OACd2lB,EAAuB,MAAXP,EAAKv2B,KAAemR,EAAO6D,eAAiBuhB,EAAKv2B,IAAMg3B,EAAQT,EAAKv2B,GAAKg3B,EACzF,IAAIF,GAAaP,EAAKx2B,MAAQi3B,GAAwB,YAAf7lB,EAAOxhC,QAAwBinD,GAAYL,EAAKplB,OAAOuK,YAAa,CACzG,GAAImb,GAA4B,MAAbN,EAAKx2B,OAAiBoR,EAAO4D,cAAgBwhB,EAAKx2B,MAAQi3B,EAAQT,EAAKx2B,KAAOi3B,IAChG7J,IAAOA,OAAUnnD,KAAK,GAAImvD,IAAWhkB,EAAQ0lB,EAAe,KAAON,EAAKx2B,KAAOi3B,EAAkB,MAAXT,EAAKv2B,GAAa,KAAOu2B,EAAKv2B,GAAKg3B,KAGhI,MAAO7J,GAET,QAASe,IAAuBr4B,EAAK0zB,GACnC,GAAIA,EAAOuG,KACT,MAAO,KACT,IAAImH,GAAWzkB,GAAO3c,EAAK0zB,EAAOxpB,KAAKrc,OAASwc,GAAQrK,EAAK0zB,EAAOxpB,KAAKrc,MAAMmxB,YAC3EqiB,EAAU1kB,GAAO3c,EAAK0zB,EAAOvpB,GAAGtc,OAASwc,GAAQrK,EAAK0zB,EAAOvpB,GAAGtc,MAAMmxB,WAC1E,KAAKoiB,IAAaC,EAChB,MAAO,KACT,IAAIP,GAAUpN,EAAOxpB,KAAKhwB,GACtBinD,EAAQzN,EAAOvpB,GAAGjwB,GAClB6mD,EAA0C,GAA/B1rB,GAAIqe,EAAOxpB,KAAMwpB,EAAOvpB,IACnCpF,EAAQ87B,GAAkBO,EAAUN,EAASC,GAC7Cr0C,EAAOw0C,GAAiBG,EAASF,EAAOJ,GACxCO,EAAiC,GAAtB5N,EAAOloC,KAAKrc,OACvB+e,EAASuoB,GAAIid,EAAOloC,MAAMrc,QAAUmyD,EAAWR,EAAU,EAC7D,IAAI/7B,EACF,IAAK,GAAI30B,GAAI,EAAGA,EAAI20B,EAAM51B,SAAUiB,EAAG,CACrC,GAAIswD,GAAO37B,EAAM30B,EACjB,IAAe,MAAXswD,EAAKv2B,GAAY,CACnB,GAAIH,GAAQy2B,GAAiB/zC,EAAMg0C,EAAKplB,OACnCtR,GAEIs3B,IACPZ,EAAKv2B,GAAiB,MAAZH,EAAMG,GAAa,KAAOH,EAAMG,GAAKjc,GAF/CwyC,EAAKv2B,GAAK22B,GAMlB,GAAIp0C,EACF,IAAK,GAAItc,GAAI,EAAGA,EAAIsc,EAAKvd,SAAUiB,EAAG,CACpC,GAAIswD,GAAOh0C,EAAKtc,EAGhB,IAFe,MAAXswD,EAAKv2B,KACPu2B,EAAKv2B,IAAMjc,GACI,MAAbwyC,EAAKx2B,KAAc,CACrB,GAAIF,GAAQy2B,GAAiB17B,EAAO27B,EAAKplB,OACpCtR,KACH02B,EAAKx2B,KAAOhc,EACRozC,IACDv8B,IAAUA,OAAa50B,KAAKuwD,QAGjCA,GAAKx2B,MAAQhc,EACTozC,IACDv8B,IAAUA,OAAa50B,KAAKuwD,GAIjC37B,IACFA,EAAQw8B,GAAgBx8B,IACtBrY,GAAQA,GAAQqY,IAClBrY,EAAO60C,GAAgB70C,GACzB,IAAI80C,IAAcz8B,EAClB,KAAKu8B,EAAU,CACb,GACIG,GADAC,EAAMhO,EAAOloC,KAAKrc,OAAS,CAE/B,IAAIuyD,EAAM,GAAK38B,EACb,IAAK,GAAI30B,GAAI,EAAGA,EAAI20B,EAAM51B,SAAUiB,EACf,MAAf20B,EAAM30B,GAAG+5B,KACVs3B,IAAeA,OAAkBtxD,KAAK,GAAImvD,IAAWv6B,EAAM30B,GAAGkrC,OAAQ,KAAM,MACnF,KAAK,GAAIlrC,GAAI,EAAOsxD,EAAJtxD,IAAWA,EACzBoxD,EAAWrxD,KAAKsxD,EAClBD,GAAWrxD,KAAKuc,GAElB,MAAO80C,GAET,QAASD,IAAgB5H,GACvB,IAAK,GAAIvpD,GAAI,EAAGA,EAAIupD,EAAMxqD,SAAUiB,EAAG,CACrC,GAAIswD,GAAO/G,EAAMvpD,EACA,OAAbswD,EAAKx2B,MAAgBw2B,EAAKx2B,MAAQw2B,EAAKv2B,IAAMu2B,EAAKplB,OAAOyjB,kBAAmB,GAC9EpF,EAAMhpD,OAAOP,IAAK,GAEtB,MAAKupD,GAAMxqD,OAEJwqD,EADE,KAGX,QAASH,IAAcx5B,EAAK0zB,GAC1B,GAAIrE,GAAMsS,GAAY3hC,EAAK0zB,GACvBkO,EAAYvJ,GAAuBr4B,EAAK0zB,EAC5C,KAAKrE,EACH,MAAOuS,EACT,KAAKA,EACH,MAAOvS,EACT,KAAK,GAAIj/C,GAAI,EAAGA,EAAIi/C,EAAIlgD,SAAUiB,EAAG,CACnC,GAAIyxD,GAASxS,EAAIj/C,GACb0xD,EAAaF,EAAUxxD,EAC3B,IAAIyxD,GAAUC,EACZnI,EAAO,IAAK,GAAI1oD,GAAI,EAAGA,EAAI6wD,EAAW3yD,SAAU8B,EAAG,CAEjD,IAAK,GADDyvD,GAAOoB,EAAW7wD,GACburB,EAAI,EAAGA,EAAIqlC,EAAO1yD,SAAUqtB,EACnC,GAAIqlC,EAAOrlC,GAAG8e,QAAUolB,EAAKplB,OAC3B,QAASqe,EACbkI,GAAO1xD,KAAKuwD,OAELoB,KACTzS,EAAIj/C,GAAK0xD,GAGb,MAAOzS,GAET,QAAS2I,IAAqBh4B,EAAKkK,EAAMC,GACvC,GAAI8J,GAAU,IASd,IARAjU,EAAIkH,KAAKgD,EAAKrc,KAAMsc,EAAGtc,KAAO,EAAG,SAASA,GACxC,GAAIA,EAAKmxB,YACP,IAAK,GAAI5uC,GAAI,EAAGA,EAAIyd,EAAKmxB,YAAY7vC,SAAUiB,EAAG,CAChD,GAAI2xD,GAAOl0C,EAAKmxB,YAAY5uC,GAAGkrC,QAC3BymB,EAAKtsB,UAAcxB,GAAqC,IAA1BhkC,GAAQgkC,EAAS8tB,KAChD9tB,IAAYA,OAAe9jC,KAAK4xD,OAGpC9tB,EACH,MAAO,KAKT,KAAK,GAJDwqB,KACFv0B,KAAMA,EACNC,GAAIA,IAEG/5B,EAAI,EAAGA,EAAI6jC,EAAQ9kC,SAAUiB,EAGpC,IAAK,GAFD4xD,GAAK/tB,EAAQ7jC,GACbqsB,EAAIulC,EAAG/3B,KAAK,GACPh5B,EAAI,EAAGA,EAAIwtD,EAAMtvD,SAAU8B,EAAG,CACrC,GAAIY,GAAI4sD,EAAMxtD,EACd,MAAIokC,GAAIxjC,EAAEs4B,GAAI1N,EAAEyN,MAAQ,GAAKmL,GAAIxjC,EAAEq4B,KAAMzN,EAAE0N,IAAM,GAAjD,CAEA,GAAI83B,IAAYhxD,EAAG,GACfixD,EAAQ7sB,GAAIxjC,EAAEq4B,KAAMzN,EAAEyN,MACtBi4B,EAAM9sB,GAAIxjC,EAAEs4B,GAAI1N,EAAE0N,KACV,EAAR+3B,IAAcF,EAAG9iB,gBAAkBgjB,IACrCD,EAAS9xD,MACP+5B,KAAMr4B,EAAEq4B,KACRC,GAAI1N,EAAEyN,QAENi4B,EAAM,IAAMH,EAAG7iB,iBAAmBgjB,IACpCF,EAAS9xD,MACP+5B,KAAMzN,EAAE0N,GACRA,GAAIt4B,EAAEs4B,KAEVs0B,EAAM9tD,OAAOtB,MAAMovD,EAAOwD,GAC1BhxD,GAAKgxD,EAAS9yD,OAAS,GAG3B,MAAOsvD,GAET,QAAS2D,IAAkBv0C,GACzB,GAAI8rC,GAAQ9rC,EAAKmxB,WACjB,IAAK2a,EAAL,CAEA,IAAK,GAAIvpD,GAAI,EAAGA,EAAIupD,EAAMxqD,SAAUiB,EAClCupD,EAAMvpD,GAAGkrC,OAAO+mB,WAAWx0C,EAC7BA,GAAKmxB,YAAc,MAErB,QAASsjB,IAAkBz0C,EAAM8rC,GAC/B,GAAKA,EAAL,CAEA,IAAK,GAAIvpD,GAAI,EAAGA,EAAIupD,EAAMxqD,SAAUiB,EAClCupD,EAAMvpD,GAAGkrC,OAAOslB,WAAW/yC,EAC7BA,GAAKmxB,YAAc2a,GAErB,QAAS4I,IAAUjnB,GACjB,MAAOA,GAAO4D,cAAgB,GAAK,EAErC,QAASsjB,IAAWlnB,GAClB,MAAOA,GAAO6D,eAAiB,EAAI,EAErC,QAASsjB,IAAwBjvD,EAAG4kB,GAClC,GAAIsqC,GAAUlvD,EAAEoa,MAAMze,OAASipB,EAAExK,MAAMze,MACvC,IAAe,GAAXuzD,EACF,MAAOA,EACT,IAAIC,GAAOnvD,EAAEy2B,OACT24B,EAAOxqC,EAAE6R,OACT44B,EAAUxtB,GAAIstB,EAAKz4B,KAAM04B,EAAK14B,OAASq4B,GAAU/uD,GAAK+uD,GAAUnqC,EACpE,IAAIyqC,EACF,OAAQA,CACV,IAAIC,GAAQztB,GAAIstB,EAAKx4B,GAAIy4B,EAAKz4B,KAAOq4B,GAAWhvD,GAAKgvD,GAAWpqC,EAChE,OAAI0qC,GACKA,EACF1qC,EAAE5lB,GAAKgB,EAAEhB,GAElB,QAASuwD,IAAoBl1C,EAAMjS,GACjC,GACIouB,GADAg5B,EAAMjzB,IAAqBliB,EAAKmxB,WAEpC,IAAIgkB,EACF,IAAK,GAAI/jB,GACL7uC,EAAI,EAAGA,EAAI4yD,EAAI7zD,SAAUiB,EAC3B6uC,EAAK+jB,EAAI5yD,GACL6uC,EAAG3D,OAAOwE,WAA0C,OAA5BlkC,EAAQqjC,EAAG/U,KAAO+U,EAAG9U,OAAiBH,GAASy4B,GAAwBz4B,EAAOiV,EAAG3D,QAAU,KACrHtR,EAAQiV,EAAG3D,OAEjB,OAAOtR,GAET,QAASD,IAAqBlc,GAC5B,MAAOk1C,IAAoBl1C,GAAM,GAEnC,QAASuc,IAAmBvc,GAC1B,MAAOk1C,IAAoBl1C,GAAM,GAEnC,QAASqxC,IAA0Bl/B,EAAKya,EAAQvQ,EAAMC,EAAImR,GACxD,GAAIztB,GAAOwc,GAAQrK,EAAKya,GACpBuoB,EAAMjzB,IAAqBliB,EAAKmxB,WACpC,IAAIgkB,EACF,IAAK,GAAI5yD,GAAI,EAAGA,EAAI4yD,EAAI7zD,SAAUiB,EAAG,CACnC,GAAI6uC,GAAK+jB,EAAI5yD,EACb,IAAK6uC,EAAG3D,OAAOwE,UAAf,CAEA,GAAI9V,GAAQiV,EAAG3D,OAAOrR,KAAK,GACvB44B,EAAUxtB,GAAIrL,EAAME,KAAMA,IAASq4B,GAAUtjB,EAAG3D,QAAUinB,GAAUjnB,GACpEwnB,EAAQztB,GAAIrL,EAAMG,GAAIA,IAAOq4B,GAAWvjB,EAAG3D,QAAUknB,GAAWlnB,EACpE,MAAIunB,GAAW,GAAc,GAATC,GAAyB,GAAXD,GAAgBC,GAAS,KAE5C,GAAXD,IAAiBxtB,GAAIrL,EAAMG,GAAID,GAAQ,GAAM+U,EAAG3D,OAAO6D,gBAAkB7D,EAAO4D,gBAAmB2jB,GAAW,IAAMxtB,GAAIrL,EAAME,KAAMC,GAAM,GAAM8U,EAAG3D,OAAO4D,eAAiB5D,EAAO6D,iBACpL,OAAO,IAGf,QAASuC,IAAW7zB,GAElB,IADA,GAAIgc,GACGA,EAASE,GAAqBlc,IACnCA,EAAOgc,EAAOI,KAAK,IAAI,GAAMpc,IAC/B,OAAOA,GAET,QAASm+B,IAAoBn+B,GAG3B,IAFA,GAAIgc,GACAjc,EACGic,EAASO,GAAmBvc,IACjCA,EAAOgc,EAAOI,KAAK,GAAG,GAAMpc,MAC3BD,IAAUA,OAAazd,KAAK0d,EAE/B,OAAOD,GAET,QAASoiB,IAAahQ,EAAKqS,GACzB,GAAIxkB,GAAOwc,GAAQrK,EAAKqS,GACpB4wB,EAAMvhB,GAAW7zB;AACrB,MAAIA,IAAQo1C,EACH5wB,EACFoI,GAAOwoB,GAEhB,QAAShzB,IAAgBjQ,EAAKqS,GAC5B,GAAIA,EAAQrS,EAAI8N,WACd,MAAOuE,EACT,IACIxI,GADAhc,EAAOwc,GAAQrK,EAAKqS,EAExB,KAAK5J,GAAazI,EAAKnS,GACrB,MAAOwkB,EACT,MAAOxI,EAASO,GAAmBvc,IACjCA,EAAOgc,EAAOI,KAAK,GAAG,GAAMpc,IAC9B,OAAO4sB,IAAO5sB,GAAQ,EAExB,QAAS4a,IAAazI,EAAKnS,GACzB,GAAIm1C,GAAMjzB,IAAqBliB,EAAKmxB,WACpC,IAAIgkB,EACF,IAAK,GAAI/jB,GACL7uC,EAAI,EAAGA,EAAI4yD,EAAI7zD,SAAUiB,EAE3B,GADA6uC,EAAK+jB,EAAI5yD,GACJ6uC,EAAG3D,OAAOwE,UAAf,CAEA,GAAe,MAAXb,EAAG/U,KACL,OAAO,CACT,KAAI+U,EAAG3D,OAAO2jB,YAEC,GAAXhgB,EAAG/U,MAAa+U,EAAG3D,OAAO4D,eAAiBgkB,GAAkBljC,EAAKnS,EAAMoxB,GAC1E,OAAO,GAGf,QAASikB,IAAkBljC,EAAKnS,EAAM6yC,GACpC,GAAe,MAAXA,EAAKv2B,GAAY,CACnB,GAAIlpB,GAAMy/C,EAAKplB,OAAOrR,KAAK,GAAG,EAC9B,OAAOi5B,IAAkBljC,EAAK/e,EAAI4M,KAAM4yC,GAAiBx/C,EAAI4M,KAAKmxB,YAAa0hB,EAAKplB,SAEtF,GAAIolB,EAAKplB,OAAO6D,gBAAkBuhB,EAAKv2B,IAAMtc,EAAKrC,KAAKrc,OACrD,OAAO,CACT,KAAK,GAAI8vC,GACL7uC,EAAI,EAAGA,EAAIyd,EAAKmxB,YAAY7vC,SAAUiB,EAExC,GADA6uC,EAAKpxB,EAAKmxB,YAAY5uC,GAClB6uC,EAAG3D,OAAOwE,YAAcb,EAAG3D,OAAO2jB,YAAchgB,EAAG/U,MAAQw2B,EAAKv2B,KAAgB,MAAT8U,EAAG9U,IAAc8U,EAAG9U,IAAMu2B,EAAKx2B,QAAU+U,EAAG3D,OAAO4D,eAAiBwhB,EAAKplB,OAAO6D,iBAAmB+jB,GAAkBljC,EAAKnS,EAAMoxB,GACzM,OAAO,EAYb,QAASkkB,IAA6BrhC,EAAIjU,EAAMwjB,GAC1CzD,GAAa/f,IAAUiU,EAAGQ,OAASR,EAAGQ,MAAMqJ,WAAc7J,EAAG9B,IAAI2L,YACnEkwB,GAAe/5B,EAAI,KAAMuP,GAqC7B,QAASkW,IAAa9S,GACpB,GAAqB,MAAjBA,EAAO7L,OACT,MAAO6L,GAAO7L,MAChB,IAAI9G,GAAK2S,EAAOzU,IAAI8B,EACpB,KAAKA,EACH,MAAO,EACT,KAAK4Y,GAAS/H,SAAStzB,KAAMo1B,EAAOrI,MAAO,CACzC,GAAIg3B,GAAc,qBACd3uB,GAAOM,cACTquB,GAAe,iBAAmBthC,EAAGzB,QAAQgE,QAAQqF,YAAc,OACjE+K,EAAOK,YACTsuB,GAAe,UAAYthC,EAAGzB,QAAQE,QAAQgI,YAAc,OAC9Dyb,GAAqBliB,EAAGzB,QAAQwD,QAASL,GAAI,OAAQiR,EAAOrI,MAAO,KAAMg3B,IAE3E,MAAO3uB,GAAO7L,OAAS6L,EAAOrI,KAAKmE,aAErC,QAAS8yB,IAAcrjC,EAAK61B,EAAQzpB,EAAM/jB,GACxC,GAAIosB,GAAS,GAAI6uB,IAAWtjC,EAAKoM,EAAM/jB,GACnCyZ,EAAK9B,EAAI8B,EAmBb,OAlBIA,IAAM2S,EAAOK,YACfhT,EAAGzB,QAAQ2F,cAAe,GAC5B02B,GAAW18B,EAAK61B,EAAQ,SAAU,SAAShoC,GACzC,GAAI8a,GAAU9a,EAAK8a,UAAY9a,EAAK8a,WAMpC,IALuB,MAAnB8L,EAAO8uB,SACT56B,EAAQx4B,KAAKskC,GAEb9L,EAAQh4B,OAAO03B,KAAKwF,IAAIlF,EAAQx5B,OAAS,EAAGk5B,KAAKC,IAAI,EAAGmM,EAAO8uB,WAAY,EAAG9uB,GAChFA,EAAO5mB,KAAOA,EACViU,IAAO2G,GAAazI,EAAKnS,GAAO,CAClC,GAAI21C,GAAe51B,GAAa/f,GAAQmS,EAAI2L,SAC5C3C,IAAiBnb,EAAMA,EAAK+a,OAAS2e,GAAa9S,IAC9C+uB,GACF3H,GAAe/5B,EAAI,KAAM2S,EAAO7L,QAClC9G,EAAGQ,MAAMC,aAAc,EAEzB,OAAO,IAEFkS,EAWT,QAASgvB,IAAW51C,EAAMrC,EAAMwzB,EAAahX,GAC3Cna,EAAKrC,KAAOA,EACRqC,EAAKsZ,aACPtZ,EAAKsZ,WAAa,MAChBtZ,EAAKuZ,SACPvZ,EAAKuZ,OAAS,MACE,MAAdvZ,EAAK0rB,QACP1rB,EAAK0rB,MAAQ,MACf6oB,GAAkBv0C,GAClBy0C,GAAkBz0C,EAAMmxB,EACxB,IAAIjW,GAAYf,EAAiBA,EAAena,GAAQ,CACpDkb,IAAalb,EAAK+a,QACpBI,GAAiBnb,EAAMkb,GAE3B,QAAS26B,IAAY71C,GACnBA,EAAK5E,OAAS,KACdm5C,GAAkBv0C,GAEpB,QAAS81C,IAAmB7pD,EAAMrH,GAChC,GAAIqH,EACF,OAAW,CACT,GAAI8pD,GAAY9pD,EAAKpD,MAAM,oCAC3B,KAAKktD,EACH,KACF9pD,GAAOA,EAAK2G,MAAM,EAAGmjD,EAAUz1C,OAASrU,EAAK2G,MAAMmjD,EAAUz1C,MAAQy1C,EAAU,GAAGz0D,OAClF,IAAIwE,GAAOiwD,EAAU,GAAK,UAAY,WAClB,OAAhBnxD,EAAOkB,GACTlB,EAAOkB,GAAQiwD,EAAU,GACjB,GAAK5sD,QAAO,UAAa4sD,EAAU,GAAK,WAAavpD,KAAK5H,EAAOkB,MACzElB,EAAOkB,IAAS,IAAMiwD,EAAU,IAEtC,MAAO9pD,GAET,QAAS+pD,IAAcl7C,EAAM1O,GAC3B,GAAI0O,EAAKm7C,UACP,MAAOn7C,GAAKm7C,UAAU7pD,EACxB,IAAK0O,EAAKi7B,UAAV,CAEA,GAAImgB,GAAQ7qD,EAAW0qC,UAAUj7B,EAAM1O,EACvC,OAAI8pD,GAAMp7C,KAAKm7C,UACNC,EAAMp7C,KAAKm7C,UAAUC,EAAM9pD,OADpC,QAGF,QAAS+pD,IAAUr7C,EAAMrP,EAAQW,EAAO8pD,GACtC,IAAK,GAAI3zD,GAAI,EAAO,GAAJA,EAAQA,IAAK,CACvB2zD,IACFA,EAAM,GAAK7qD,EAAW0qC,UAAUj7B,EAAM1O,GAAO0O,KAC/C,IAAI/O,GAAQ+O,EAAK/B,MAAMtN,EAAQW,EAC/B,IAAIX,EAAOyC,IAAMzC,EAAOsC,MACtB,MAAOhC,GAEX,KAAM,IAAItH,OAAM,QAAUqW,EAAK5Z,KAAO,8BAExC,QAASk1D,IAAUniC,EAAI/lB,EAAKynC,EAAS0gB,GACnC,QAASC,GAAOC,GACd,OACExoD,MAAOtC,EAAOsC,MACdqF,IAAK3H,EAAOyC,IACZJ,OAAQrC,EAAOsB,UACfd,KAAMF,GAAS,KACfK,MAAOmqD,EAAO7hB,GAAUviB,EAAIrX,KAAM1O,GAASA,GAG/C,GAEIL,GAFAomB,EAAM8B,EAAG9B,IACTrX,EAAOqX,EAAIrX,IAEf5M,GAAMo+B,GAAQna,EAAKjkB,EACnB,IAGIsS,GAHAR,EAAOwc,GAAQrK,EAAKjkB,EAAI8R,MACxB5T,EAAQuoC,GAAe1gB,EAAI/lB,EAAI8R,KAAM21B,GACrClqC,EAAS,GAAI+qD,IAAax2C,EAAKrC,KAAMsW,EAAGzZ,QAAQy7B,QAIpD,KAFIogB,IACF71C,OACM61C,GAAW5qD,EAAOyC,IAAMA,EAAI7B,MAAQZ,EAAOgZ,OACjDhZ,EAAOsC,MAAQtC,EAAOyC,IACtBnC,EAAQoqD,GAAUr7C,EAAMrP,EAAQW,GAC5BiqD,GACF71C,EAAOle,KAAKg0D,GAAO,GAEvB,OAAOD,GAAU71C,EAAS81C,IAE5B,QAASG,IAAQxiC,EAAItW,EAAM7C,EAAM1O,EAAOihB,EAAGqpC,EAAaC,GACtD,GAAIC,GAAe97C,EAAK87C,YACJ,OAAhBA,IACFA,EAAe3iC,EAAGzZ,QAAQo8C,aAC5B,IAGI7qD,GAHA8qD,EAAW,EACXC,EAAW,KACXrrD,EAAS,GAAI+qD,IAAa74C,EAAMsW,EAAGzZ,QAAQy7B,SAE3CigB,EAAQjiC,EAAGzZ,QAAQu8C,eAAiB,KAGxC,KAFY,IAARp5C,GACFm4C,GAAmBE,GAAcl7C,EAAM1O,GAAQsqD,IACzCjrD,EAAOgZ,OAAO,CAUpB,GATIhZ,EAAOyC,IAAM+lB,EAAGzZ,QAAQu6B,oBAC1B6hB,GAAe,EACXD,GACFphB,GAAYthB,EAAItW,EAAMvR,EAAOX,EAAOyC,KACtCzC,EAAOyC,IAAMyP,EAAKrc,OAClByK,EAAQ,MAERA,EAAQ+pD,GAAmBK,GAAUr7C,EAAMrP,EAAQW,EAAO8pD,GAAQQ,GAEhER,EAAO,CACT,GAAIc,GAAQd,EAAM,GAAGh1D,IACjB81D,KACFjrD,EAAQ,MAAQA,EAAQirD,EAAQ,IAAMjrD,EAAQirD,IAElD,IAAKJ,GAAgBE,GAAY/qD,EAAO,CACtC,KAAO8qD,EAAWprD,EAAOsC,OACvB8oD,EAAWr8B,KAAKwF,IAAIv0B,EAAOsC,MAAO8oD,EAAW,KAC7CxpC,EAAEwpC,EAAUC,EAEdA,GAAW/qD,EAEbN,EAAOsC,MAAQtC,EAAOyC,IAExB,KAAO2oD,EAAWprD,EAAOyC,KAAK,CAC5B,GAAIA,GAAMssB,KAAKwF,IAAIv0B,EAAOyC,IAAK2oD,EAAW,IAC1CxpC,GAAEnf,EAAK4oD,GACPD,EAAW3oD,GAGf,QAAS+mC,IAAchhB,EAAIjU,EAAM5T,EAAOuqD,GACtC,GAAIM,IAAMhjC,EAAG7nB,MAAMgnB,SACfsjC,IACJD,IAAQxiC,EAAIjU,EAAKrC,KAAMsW,EAAG9B,IAAIrX,KAAM1O,EAAO,SAASgH,EAAKrH,GACvDkrD,EAAG30D,KAAK8Q,EAAKrH,IACZ2qD,EAAaC,EAChB,KAAK,GAAIloC,GAAI,EAAGA,EAAIwF,EAAG7nB,MAAM+mB,SAAS7xB,SAAUmtB,EAAG,CACjD,GAAIyoC,GAAUjjC,EAAG7nB,MAAM+mB,SAAS1E,GAC5BlsB,EAAI,EACJ40D,EAAK,CACTV,IAAQxiC,EAAIjU,EAAKrC,KAAMu5C,EAAQp8C,MAAM,EAAM,SAAS1H,EAAKrH,GAEvD,IADA,GAAIgC,GAAQxL,EACA6Q,EAAL+jD,GAAU,CACf,GAAIC,GAAQH,EAAG10D,EACX60D,GAAQhkD,GACV6jD,EAAGn0D,OAAOP,EAAG,EAAG6Q,EAAK6jD,EAAG10D,EAAI,GAAI60D,GAClC70D,GAAK,EACL40D,EAAK38B,KAAKwF,IAAI5sB,EAAKgkD,GAErB,GAAKrrD,EAEL,GAAImrD,EAAQG,OACVJ,EAAGn0D,OAAOiL,EAAOxL,EAAIwL,EAAOqF,EAAK,cAAgBrH,GACjDxJ,EAAIwL,EAAQ,MAEZ,MAAexL,EAARwL,EAAWA,GAAS,EAAG,CAC5B,GAAIkuB,GAAMg7B,EAAGlpD,EAAQ,EACrBkpD,GAAGlpD,EAAQ,IAAMkuB,EAAMA,EAAM,IAAM,IAAM,cAAgBlwB,IAG5D2qD,GAEL,OACEn9B,OAAQ09B,EACR5hB,QAASqhB,EAAYjxB,SAAWixB,EAAYzwB,UAAYywB,EAAc,MAG1E,QAASY,IAAcrjC,EAAIjU,EAAMu3C,GAC/B,IAAKv3C,EAAKuZ,QAAUvZ,EAAKuZ,OAAO,IAAMtF,EAAG7nB,MAAMgnB,QAAS,CACtD,GAAIhnB,GAAQuoC,GAAe1gB,EAAI2Y,GAAO5sB,IAClC5P,EAAS6kC,GAAchhB,EAAIjU,EAAMA,EAAKrC,KAAKrc,OAAS2yB,EAAGzZ,QAAQu6B,mBAAqBL,GAAUzgB,EAAG9B,IAAIrX,KAAM1O,GAASA,EACxH4T,GAAKsZ,WAAaltB,EAClB4T,EAAKuZ,OAASnpB,EAAOmpB,OACjBnpB,EAAOilC,QACTr1B,EAAKm1B,aAAe/kC,EAAOilC,QACpBr1B,EAAKm1B,eACZn1B,EAAKm1B,aAAe,MAClBoiB,IAAmBtjC,EAAG9B,IAAIqH,UAC5BvF,EAAG9B,IAAIqH,WAEX,MAAOxZ,GAAKuZ,OAEd,QAASgc,IAAYthB,EAAItW,EAAMvR,EAAOorD,GACpC,GAAI18C,GAAOmZ,EAAG9B,IAAIrX,KACdrP,EAAS,GAAI+qD,IAAa74C,EAAMsW,EAAGzZ,QAAQy7B,QAI/C,KAHAxqC,EAAOsC,MAAQtC,EAAOyC,IAAMspD,GAAW,EAC3B,IAAR75C,GACFq4C,GAAcl7C,EAAM1O,IACdX,EAAOgZ,OACb0xC,GAAUr7C,EAAMrP,EAAQW,GACxBX,EAAOsC,MAAQtC,EAAOyC,IAK1B,QAASupD,IAAoB1rD,EAAOyO,GAClC,IAAKzO,GAAS,QAAQS,KAAKT,GACzB,MAAO,KACT,IAAI+qC,GAAQt8B,EAAQu8C,aAAeW,GAA4BC,EAC/D,OAAO7gB,GAAM/qC,KAAW+qC,EAAM/qC,GAASA,EAAMrD,QAAQ,OAAQ,UAE/D,QAASq9B,IAAiB9R,EAAIwQ,GAC5B,GAAIv4B,GAAUypB,GAAI,OAAQ,KAAM,KAAML,GAAS,sBAAwB,MACnEsiC,GACF5xB,IAAKrQ,GAAI,OAAQzpB,GAAU,mBAC3BA,QAASA,EACT2rD,IAAK,EACL3pD,IAAK,EACL+lB,GAAIA,EACJ6jC,aAAc5jC,IAAMoB,KAAWrB,EAAG8jC,UAAU,gBAE9CtzB,GAASzO,UACT,KAAK,GAAIzzB,GAAI,EAAGA,IAAMkiC,EAASf,KAAOe,EAASf,KAAKpiC,OAAS,GAAIiB,IAAK,CACpE,GACImpC,GADA1rB,EAAOzd,EAAIkiC,EAASf,KAAKnhC,EAAI,GAAKkiC,EAASzkB,IAE/C43C,GAAQ1pD,IAAM,EACd0pD,EAAQI,SAAWC,GACfC,GAAgBjkC,EAAGzB,QAAQwD,WAAa0V,EAAQC,GAAS3rB,MAC3D43C,EAAQI,SAAWG,GAAkBP,EAAQI,SAAUtsB,IACzDksB,EAAQnvB,MACR,IAAI2vB,GAAsB3zB,GAAYxQ,EAAGzB,QAAQ+E,kBAAoBqV,GAAO5sB,EAC5Eq4C,IAAkBr4C,EAAM43C,EAASN,GAAcrjC,EAAIjU,EAAMo4C,IACrDp4C,EAAKm1B,eACHn1B,EAAKm1B,aAAa1P,UACpBmyB,EAAQnyB,QAAU6yB,GAAYt4C,EAAKm1B,aAAa1P,QAASmyB,EAAQnyB,SAAW,KAC1EzlB,EAAKm1B,aAAalP,YACpB2xB,EAAQ3xB,UAAYqyB,GAAYt4C,EAAKm1B,aAAalP,UAAW2xB,EAAQ3xB,WAAa,MAE5D,GAAtB2xB,EAAQnvB,IAAInnC,QACds2D,EAAQnvB,IAAInmC,KAAK,EAAG,EAAGs1D,EAAQ1rD,QAAQ6qB,YAAYwhC,GAAiBtkC,EAAGzB,QAAQwD,WACxE,GAALzzB,GACFkiC,EAASzO,QAAQyS,IAAMmvB,EAAQnvB,IAC/BhE,EAASzO,QAAQ8gB,YAEhBrS,EAASzO,QAAQ0W,OAASjI,EAASzO,QAAQ0W,UAAYpqC,KAAKs1D,EAAQnvB,MACpEhE,EAASzO,QAAQ+gB,SAAWtS,EAASzO,QAAQ+gB,YAAcz0C,UAQhE,MALIgzB,KAAU,aAAa9oB,KAAKorD,EAAQ1rD,QAAQssD,UAAUtnD,aACxD0mD,EAAQ1rD,QAAQgF,UAAY,oBAC9B8xB,GAAO/O,EAAI,aAAcA,EAAIwQ,EAASzkB,KAAM43C,EAAQ5xB,KAChD4xB,EAAQ5xB,IAAI90B,YACd0mD,EAAQ3xB,UAAYqyB,GAAYV,EAAQ5xB,IAAI90B,UAAW0mD,EAAQ3xB,WAAa,KACvE2xB,EAET,QAASa,IAA8BpsD,GACrC,GAAI0M,GAAQ4c,GAAI,OAAQ,IAAU,iBAGlC,OAFA5c,GAAM84C,MAAQ,MAAQxlD,EAAGsb,WAAW,GAAGvd,SAAS,IAChD2O,EAAM6c,aAAa,aAAc7c,EAAM84C,OAChC94C,EAET,QAASk/C,IAAWL,EAASj6C,EAAM5R,EAAO+lD,EAAYC,EAAUF,EAAOG,GACrE,GAAKr0C,EAAL,CAEA,GAAI+6C,GAAcd,EAAQE,YAAcn6C,EAAKjV,QAAQ,SAAUovD,IAAen6C,EAC1Eg7C,EAAUf,EAAQ3jC,GAAG7nB,MAAM4nB,aAC3B4kC,GAAW,CACf,IAAKD,EAAQnsD,KAAKmR,GAUhB,IAFA,GAAIzR,GAAU44B,SAASgN,yBACnB5jC,EAAM,IACG,CACXyqD,EAAQrvD,UAAY4E,CACpB,IAAI0gB,GAAI+pC,EAAQpvD,KAAKoU,GACjBk7C,EAAUjqC,EAAIA,EAAEtO,MAAQpS,EAAMyP,EAAKrc,OAAS4M,CAChD,IAAI2qD,EAAS,CACX,GAAIC,GAAMh0B,SAASC,eAAe2zB,EAAY9lD,MAAM1E,EAAKA,EAAM2qD,GAC3D3kC,KAAmB,EAAbC,GACRjoB,EAAQ6qB,YAAYpB,GAAI,QAASmjC,KAEjC5sD,EAAQ6qB,YAAY+hC,GACtBlB,EAAQnvB,IAAInmC,KAAKs1D,EAAQ1pD,IAAK0pD,EAAQ1pD,IAAM2qD,EAASC,GACrDlB,EAAQC,KAAOgB,EACfjB,EAAQ1pD,KAAO2qD,EAEjB,IAAKjqC,EACH,KAEF,IADA1gB,GAAO2qD,EAAU,EACL,KAARjqC,EAAE,GAAY,CAChB,GAAIqnB,GAAU2hB,EAAQ3jC,GAAGzZ,QAAQy7B,QAC7B8iB,EAAW9iB,EAAU2hB,EAAQC,IAAM5hB,EACnC6iB,EAAM5sD,EAAQ6qB,YAAYpB,GAAI,OAAQi5B,GAASmK,GAAW,UAC9DD,GAAIljC,aAAa,OAAQ,gBACzBkjC,EAAIljC,aAAa,UAAW,KAC5BgiC,EAAQC,KAAOkB,MACV,IAAY,MAARnqC,EAAE,IAAsB,MAARA,EAAE,GAAY,CACvC,GAAIkqC,GAAM5sD,EAAQ6qB,YAAYpB,GAAI,OAAgB,MAAR/G,EAAE,GAAa,IAAW,IAAU,kBAC9EkqC,GAAIljC,aAAa,UAAWhH,EAAE,IAC9BgpC,EAAQC,KAAO,MACV,CACL,GAAIiB,GAAMlB,EAAQ3jC,GAAGzZ,QAAQw+C,uBAAuBpqC,EAAE,GACtDkqC,GAAIljC,aAAa,UAAWhH,EAAE,IAC1BsF,IAAmB,EAAbC,GACRjoB,EAAQ6qB,YAAYpB,GAAI,QAASmjC,KAEjC5sD,EAAQ6qB,YAAY+hC,GACtBlB,EAAQC,KAAO,EAEjBD,EAAQnvB,IAAInmC,KAAKs1D,EAAQ1pD,IAAK0pD,EAAQ1pD,IAAM,EAAG4qD,GAC/ClB,EAAQ1pD,UAhDa,CACvB0pD,EAAQC,KAAOl6C,EAAKrc,MACpB,IAAI4K,GAAU44B,SAASC,eAAe2zB,EACtCd,GAAQnvB,IAAInmC,KAAKs1D,EAAQ1pD,IAAK0pD,EAAQ1pD,IAAMyP,EAAKrc,OAAQ4K,GACrDgoB,IAAmB,EAAbC,KACRykC,GAAW,GACbhB,EAAQ1pD,KAAOyP,EAAKrc,OA6CtB,GAAIyK,GAAS+lD,GAAcC,GAAY6G,GAAY5G,EAAK,CACtD,GAAIiH,GAAYltD,GAAS,EACrB+lD,KACFmH,GAAanH,GACXC,IACFkH,GAAalH,EACf,IAAIh5C,GAAQ4c,GAAI,QAASzpB,GAAU+sD,EAAWjH,EAG9C,OAFIH,KACF94C,EAAM84C,MAAQA,GACT+F,EAAQ1rD,QAAQ6qB,YAAYhe,GAErC6+C,EAAQ1rD,QAAQ6qB,YAAY7qB,IAE9B,QAAS4rD,IAAYtW,GAEnB,IAAK,GADDvkC,GAAM,IACD1a,EAAI,EAAGA,EAAIi/C,EAAIlgD,OAAS,IAAKiB,EACpC0a,GAAO1a,EAAI,EAAI,IAAM,GAEvB,OADA0a,IAAO,IAGT,QAASk7C,IAAkBjC,EAAOxqB,GAChC,MAAO,UAASksB,EAASj6C,EAAM5R,EAAO+lD,EAAYC,EAAUF,EAAOG,GACjEjmD,EAAQA,EAAQA,EAAQ,mBAAqB,iBAG7C,KAFA,GAAIgC,GAAQ6pD,EAAQ1pD,IAChBkF,EAAMrF,EAAQ4P,EAAKrc,SACZ,CACT,IAAK,GAAIiB,GAAI,EAAGA,EAAImpC,EAAMpqC,OAAQiB,IAAK,CACrC,GAAI43C,GAAOzO,EAAMnpC,EACjB,IAAI43C,EAAK7d,GAAKvuB,GAASosC,EAAK9d,MAAQtuB,EAClC,MAEJ,GAAIosC,EAAK7d,IAAMlpB,EACb,MAAO8iD,GAAM0B,EAASj6C,EAAM5R,EAAO+lD,EAAYC,EAAUF,EAAOG,EAClEkE,GAAM0B,EAASj6C,EAAK/K,MAAM,EAAGunC,EAAK7d,GAAKvuB,GAAQhC,EAAO+lD,EAAY,KAAMD,EAAOG,GAC/EF,EAAa,KACbn0C,EAAOA,EAAK/K,MAAMunC,EAAK7d,GAAKvuB,GAC5BA,EAAQosC,EAAK7d,KAInB,QAAS48B,IAAmBtB,EAASl3B,EAAM+M,EAAQ0rB,GACjD,GAAIvyB,IAAUuyB,GAAgB1rB,EAAO2jB,UACjCxqB,IACFgxB,EAAQnvB,IAAInmC,KAAKs1D,EAAQ1pD,IAAK0pD,EAAQ1pD,IAAMwyB,EAAMkG,IAC/CuyB,GAAgBvB,EAAQ3jC,GAAGzB,QAAQ5M,MAAMwzC,wBACvCxyB,IACHA,EAASgxB,EAAQ1rD,QAAQ6qB,YAAY+N,SAASu0B,cAAc,UAC9DzyB,EAAOhR,aAAa,YAAa6X,EAAO9oC,KAEtCiiC,IACFgxB,EAAQ3jC,GAAGzB,QAAQ5M,MAAM2gB,cAAcK,GACvCgxB,EAAQ1rD,QAAQ6qB,YAAY6P,IAE9BgxB,EAAQ1pD,KAAOwyB,EAEjB,QAAS23B,IAAkBr4C,EAAM43C,EAASr+B,GACxC,GAAIuyB,GAAQ9rC,EAAKmxB,YACbmoB,EAAUt5C,EAAKrC,KACfw5C,EAAK,CACT,IAAKrL,EAiBL,IAZA,GAII//C,GACAimD,EAEAuH,EACAC,EACAC,EACA5H,EACA5f,EAXA/xB,EAAMo5C,EAAQh4D,OACd4M,EAAM,EACN3L,EAAI,EACJob,EAAO,GAGP+7C,EAAa,IAMN,CACT,GAAIA,GAAcxrD,EAAK,CACrBqrD,EAAYC,EAAeC,EAAiB5H,EAAQG,EAAM,GAC1D/f,EAAY,KACZynB,EAAaniD,EAAAA,CAEb,KAAK,GADDoiD,MACKv2D,EAAI,EAAGA,EAAI0oD,EAAMxqD,SAAU8B,EAAG,CACrC,GAAIguC,GAAK0a,EAAM1oD,GACXwrB,EAAIwiB,EAAG3D,MACG,aAAV7e,EAAE3iB,MAAsBmlC,EAAG/U,MAAQnuB,GAAO0gB,EAAEwiC,WAC9CuI,EAAer3D,KAAKssB,GACXwiB,EAAG/U,MAAQnuB,IAAiB,MAATkjC,EAAG9U,IAAc8U,EAAG9U,GAAKpuB,GAAO0gB,EAAEqjB,WAAab,EAAG9U,IAAMpuB,GAAOkjC,EAAG/U,MAAQnuB,IACzF,MAATkjC,EAAG9U,IAAc8U,EAAG9U,IAAMpuB,GAAOwrD,EAAatoB,EAAG9U,KACnDo9B,EAAatoB,EAAG9U,GAChBk9B,EAAe,IAEb5qC,EAAE1d,YACJqoD,GAAa,IAAM3qC,EAAE1d,WACnB0d,EAAEojC,MACJA,EAAMpjC,EAAEojC,KACNpjC,EAAEkjC,YAAc1gB,EAAG/U,MAAQnuB,IAC7BurD,GAAkB,IAAM7qC,EAAEkjC,YACxBljC,EAAEmjC,UAAY3gB,EAAG9U,IAAMo9B,IACzBF,GAAgB,IAAM5qC,EAAEmjC,UACtBnjC,EAAEijC,QAAUA,IACdA,EAAQjjC,EAAEijC,OACRjjC,EAAEqjB,aAAeA,GAAa2iB,GAAwB3iB,EAAUxE,OAAQ7e,GAAK,KAC/EqjB,EAAYb,IACLA,EAAG/U,KAAOnuB,GAAOwrD,EAAatoB,EAAG/U,OAC1Cq9B,EAAatoB,EAAG/U,MAGpB,GAAI4V,IAAcA,EAAU5V,MAAQ,IAAMnuB,EAAK,CAE7C,GADAgrD,GAAmBtB,GAA0B,MAAhB3lB,EAAU3V,GAAapc,EAAM,EAAI+xB,EAAU3V,IAAMpuB,EAAK+jC,EAAUxE,OAA0B,MAAlBwE,EAAU5V,MAC3F,MAAhB4V,EAAU3V,GACZ,MACE2V,GAAU3V,IAAMpuB,IAClB+jC,GAAY,GAEhB,IAAKA,GAAa0nB,EAAer4D,OAC/B,IAAK,GAAI8B,GAAI,EAAGA,EAAIu2D,EAAer4D,SAAU8B,EAC3C81D,GAAmBtB,EAAS,EAAG+B,EAAev2D,IAEpD,GAAI8K,GAAOgS,EACT,KAEF,KADA,GAAI05C,GAAOp/B,KAAKwF,IAAI9f,EAAKw5C,KACZ,CACX,GAAI/7C,EAAM,CACR,GAAIvK,GAAMlF,EAAMyP,EAAKrc,MACrB,KAAK2wC,EAAW,CACd,GAAI4nB,GAAYzmD,EAAMwmD,EAAOj8C,EAAK/K,MAAM,EAAGgnD,EAAO1rD,GAAOyP,CACzDi6C,GAAQI,SAASJ,EAASiC,EAAW9tD,EAAQA,EAAQwtD,EAAYA,EAAWE,EAAgBvrD,EAAM2rD,EAAUv4D,QAAUo4D,EAAaF,EAAe,GAAI3H,EAAOG,GAE/J,GAAI5+C,GAAOwmD,EAAM,CACfj8C,EAAOA,EAAK/K,MAAMgnD,EAAO1rD,GACzBA,EAAM0rD,CACN,OAEF1rD,EAAMkF,EACNqmD,EAAiB,GAEnB97C,EAAO27C,EAAQ1mD,MAAMukD,EAAIA,EAAK59B,EAAOh3B,MACrCwJ,EAAQ0rD,GAAoBl+B,EAAOh3B,KAAMq1D,EAAQ3jC,GAAGzZ,cA9EtD,KAAK,GAAIjY,GAAI,EAAGA,EAAIg3B,EAAOj4B,OAAQiB,GAAK,EACtCq1D,EAAQI,SAASJ,EAAS0B,EAAQ1mD,MAAMukD,EAAIA,EAAK59B,EAAOh3B,IAAKk1D,GAAoBl+B,EAAOh3B,EAAI,GAAIq1D,EAAQ3jC,GAAGzZ,UAiFjH,QAAS6xC,IAAkBl6B,EAAK0zB,GAC9B,MAAyB,IAAlBA,EAAOxpB,KAAKhwB,IAA2B,GAAhBw5C,EAAOvpB,GAAGjwB,IAA+B,IAApBu8B,GAAIid,EAAOloC,SAAiBwU,EAAI8B,IAAM9B,EAAI8B,GAAGzZ,QAAQs/C,uBAE1G,QAAS7N,IAAU95B,EAAK0zB,EAAQ1U,EAAahX,GAC3C,QAAS4/B,GAAShrC,GAChB,MAAOoiB,GAAcA,EAAYpiB,GAAK,KAExC,QAASkQ,GAAOjf,EAAMrC,EAAMmuC,GAC1B8J,GAAW51C,EAAMrC,EAAMmuC,EAAO3xB,GAC9B6M,GAAYhnB,EAAM,SAAUA,EAAM6lC,GAEpC,QAASmU,GAASjsD,EAAOqF,GACvB,IAAK,GAAI7Q,GAAIwL,EACTqC,KAAiBgD,EAAJ7Q,IAAWA,EAC1B6N,EAAO9N,KAAK,GAAI23D,IAAKt8C,EAAKpb,GAAIw3D,EAASx3D,GAAI43B,GAC7C,OAAO/pB,GAET,GAAIisB,GAAOwpB,EAAOxpB,KACdC,EAAKupB,EAAOvpB,GACZ3e,EAAOkoC,EAAOloC,KACdu8C,EAAY19B,GAAQrK,EAAKkK,EAAKrc,MAC9BigB,EAAWzD,GAAQrK,EAAKmK,EAAGtc,MAC3Bm6C,EAAWvxB,GAAIjrB,GACfy8C,EAAYL,EAASp8C,EAAKrc,OAAS,GACnC+4D,EAAS/9B,EAAGtc,KAAOqc,EAAKrc,IAC5B,IAAI6lC,EAAOuG,KACTj6B,EAAImoC,OAAO,EAAGN,EAAS,EAAGr8C,EAAKrc,SAC/B6wB,EAAIooC,OAAO58C,EAAKrc,OAAQ6wB,EAAIuO,KAAO/iB,EAAKrc,YACnC,IAAI+qD,GAAkBl6B,EAAK0zB,GAAS,CACzC,GAAI2U,GAAQR,EAAS,EAAGr8C,EAAKrc,OAAS,EACtC29B,GAAOgB,EAAUA,EAAStiB,KAAMy8C,GAC5BC,GACFloC,EAAIooC,OAAOl+B,EAAKrc,KAAMq6C,GACpBG,EAAMl5D,QACR6wB,EAAImoC,OAAOj+B,EAAKrc,KAAMw6C,OACnB,IAAIN,GAAaj6B,EACtB,GAAmB,GAAftiB,EAAKrc,OACP29B,EAAOi7B,EAAWA,EAAUv8C,KAAK/K,MAAM,EAAGypB,EAAKhwB,IAAM8tD,EAAWD,EAAUv8C,KAAK/K,MAAM0pB,EAAGjwB,IAAK+tD,OACxF,CACL,GAAII,GAAQR,EAAS,EAAGr8C,EAAKrc,OAAS,EACtCk5D,GAAMl4D,KAAK,GAAI23D,IAAKE,EAAWD,EAAUv8C,KAAK/K,MAAM0pB,EAAGjwB,IAAK+tD,EAAWjgC,IACvE8E,EAAOi7B,EAAWA,EAAUv8C,KAAK/K,MAAM,EAAGypB,EAAKhwB,IAAMsR,EAAK,GAAIo8C,EAAS,IACvE5nC,EAAImoC,OAAOj+B,EAAKrc,KAAO,EAAGw6C,OAEvB,IAAmB,GAAf78C,EAAKrc,OACd29B,EAAOi7B,EAAWA,EAAUv8C,KAAK/K,MAAM,EAAGypB,EAAKhwB,IAAMsR,EAAK,GAAKsiB,EAAStiB,KAAK/K,MAAM0pB,EAAGjwB,IAAK0tD,EAAS,IACpG5nC,EAAIooC,OAAOl+B,EAAKrc,KAAO,EAAGq6C,OACrB,CACLp7B,EAAOi7B,EAAWA,EAAUv8C,KAAK/K,MAAM,EAAGypB,EAAKhwB,IAAMsR,EAAK,GAAIo8C,EAAS,IACvE96B,EAAOgB,EAAUk6B,EAAWl6B,EAAStiB,KAAK/K,MAAM0pB,EAAGjwB,IAAK+tD,EACxD,IAAII,GAAQR,EAAS,EAAGr8C,EAAKrc,OAAS,EAClC+4D,GAAS,GACXloC,EAAIooC,OAAOl+B,EAAKrc,KAAO,EAAGq6C,EAAS,GACrCloC,EAAImoC,OAAOj+B,EAAKrc,KAAO,EAAGw6C,GAE5BxzB,GAAY7U,EAAK,SAAUA,EAAK0zB,GAElC,QAAS4U,IAAU16C,GACjBte,KAAKse,MAAQA,EACbte,KAAK2Z,OAAS,IACd,KAAK,GAAI7Y,GAAI,EACTw4B,EAAS,EAAGx4B,EAAIwd,EAAMze,SAAUiB,EAClCwd,EAAMxd,GAAG6Y,OAAS3Z,KAClBs5B,GAAUhb,EAAMxd,GAAGw4B,MAErBt5B,MAAKs5B,OAASA,EA+BhB,QAAS2/B,IAAYC,GACnBl5D,KAAKk5D,SAAWA,CAGhB,KAAK,GAFDj6B,GAAO,EACP3F,EAAS,EACJx4B,EAAI,EAAGA,EAAIo4D,EAASr5D,SAAUiB,EAAG,CACxC,GAAI8J,GAAKsuD,EAASp4D,EAClBm+B,IAAQr0B,EAAGuuD,YACX7/B,GAAU1uB,EAAG0uB,OACb1uB,EAAG+O,OAAS3Z,KAEdA,KAAKi/B,KAAOA,EACZj/B,KAAKs5B,OAASA,EACdt5B,KAAK2Z,OAAS,KA4iBhB,QAASsvC,IAAWv4B,EAAK9E,EAAGwtC,GAC1B,QAASC,GAAU3oC,EAAK4oC,EAAMpQ,GAC5B,GAAIx4B,EAAI+/B,OACN,IAAK,GAAI3vD,GAAI,EAAGA,EAAI4vB,EAAI+/B,OAAO5wD,SAAUiB,EAAG,CAC1C,GAAIy4D,GAAM7oC,EAAI+/B,OAAO3vD,EACrB,IAAIy4D,EAAI7oC,KAAO4oC,EAAf,CAEA,GAAIhK,GAASpG,GAAcqQ,EAAIrQ,aAC3BkQ,GAAmB9J,KAEvB1jC,EAAE2tC,EAAI7oC,IAAK4+B,GACX+J,EAAUE,EAAI7oC,IAAKA,EAAK4+B,MAG9B+J,EAAU3oC,EAAK,MAAM,GAEvB,QAASwC,IAAUV,EAAI9B,GACrB,GAAIA,EAAI8B,GACN,KAAM,IAAIxvB,OAAM,mCAClBwvB,GAAG9B,IAAMA,EACTA,EAAI8B,GAAKA,EACT+F,EAAoB/F,GACpBgF,EAAShF,GACJA,EAAGzZ,QAAQqY,cACdkH,EAAY9F,GACdA,EAAGzZ,QAAQM,KAAOqX,EAAIgH,WACtBO,GAAUzF,GAEZ,QAASuI,IAAQrK,EAAKpD,GAEpB,GADAA,GAAKoD,EAAI+E,MACD,EAAJnI,GAASA,GAAKoD,EAAIuO,KACpB,KAAM,IAAIj8B,OAAM,qBAAuBsqB,EAAIoD,EAAI+E,OAAS,oBAC1D,KAAK,GAAI+jC,GAAQ9oC,GAAM8oC,EAAMl7C,OAC3B,IAAK,GAAIxd,GAAI,KAAOA,EAAG,CACrB,GAAI24D,GAAQD,EAAMN,SAASp4D,GACvB44D,EAAKD,EAAMN,WACf,IAAQO,EAAJpsC,EAAQ,CACVksC,EAAQC,CACR,OAEFnsC,GAAKosC,EAGT,MAAOF,GAAMl7C,MAAMgP,GAErB,QAASgf,IAAW5b,EAAKpkB,EAAOqF,GAC9B,GAAI6J,MACA8R,EAAIhhB,EAAMiS,IAUd,OATAmS,GAAIkH,KAAKtrB,EAAMiS,KAAM5M,EAAI4M,KAAO,EAAG,SAASA,GAC1C,GAAIrC,GAAOqC,EAAKrC,IACZoR,IAAK3b,EAAI4M,OACXrC,EAAOA,EAAK/K,MAAM,EAAGQ,EAAI/G,KACvB0iB,GAAKhhB,EAAMiS,OACbrC,EAAOA,EAAK/K,MAAM7E,EAAM1B,KAC1B4Q,EAAI3a,KAAKqb,KACPoR,IAEG9R,EAET,QAASm+C,IAASjpC,EAAKkK,EAAMC,GAC3B,GAAIrf,KAIJ,OAHAkV,GAAIkH,KAAKgD,EAAMC,EAAI,SAAStc,GAC1B/C,EAAI3a,KAAK0d,EAAKrC,QAETV,EAET,QAASke,IAAiBnb,EAAM+a,GAC9B,GAAIyI,GAAOzI,EAAS/a,EAAK+a,MACzB,IAAIyI,EACF,IAAK,GAAIzU,GAAI/O,EAAM+O,EAAGA,EAAIA,EAAE3T,OAC1B2T,EAAEgM,QAAUyI,EAElB,QAASoJ,IAAO5sB,GACd,GAAmB,MAAfA,EAAK5E,OACP,MAAO,KAGT,KAAK,GAFD6gB,GAAMjc,EAAK5E,OACX2zC,EAAK3sD,GAAQ65B,EAAIlc,MAAOC,GACnBi7C,EAAQh/B,EAAI7gB,OAAQ6/C,EAAOh/B,EAAMg/B,EAAOA,EAAQA,EAAM7/C,OAC7D,IAAK,GAAI7Y,GAAI,EACP04D,EAAMN,SAASp4D,IAAM05B,IADP15B,EAGlBwsD,GAAMkM,EAAMN,SAASp4D,GAAGq4D,WAG5B,OAAO7L,GAAK9yB,EAAI/E,MAElB,QAASyI,IAAas7B,EAAO3tC,GAC3B,GAAIyB,GAAIksC,EAAM/jC,KACd5mB,GAAO,EAAG,CACR,IAAK,GAAI/N,GAAI,EAAGA,EAAI04D,EAAMN,SAASr5D,SAAUiB,EAAG,CAC9C,GAAI24D,GAAQD,EAAMN,SAASp4D,GACvB8J,EAAK6uD,EAAMngC,MACf,IAAQ1uB,EAAJihB,EAAQ,CACV2tC,EAAQC,CACR,SAAS5qD,GAEXgd,GAAKjhB,EACL0iB,GAAKmsC,EAAMN,YAEb,MAAO7rC,UACCksC,EAAMl7C,MAChB,KAAK,GAAIxd,GAAI,EAAGA,EAAI04D,EAAMl7C,MAAMze,SAAUiB,EAAG,CAC3C,GAAIyd,GAAOi7C,EAAMl7C,MAAMxd,GACnB84D,EAAKr7C,EAAK+a,MACd,IAAQsgC,EAAJ/tC,EACF,KACFA,IAAK+tC,EAEP,MAAOtsC,GAAIxsB,EAEb,QAASw9B,IAAamT,GACpBA,EAAUW,GAAWX,EAGrB,KAAK,GAFD5lB,GAAI,EACJ2tC,EAAQ/nB,EAAQ93B,OACX7Y,EAAI,EAAGA,EAAI04D,EAAMl7C,MAAMze,SAAUiB,EAAG,CAC3C,GAAIyd,GAAOi7C,EAAMl7C,MAAMxd,EACvB,IAAIyd,GAAQkzB,EACV,KAEA5lB,IAAKtN,EAAK+a,OAEd,IAAK,GAAI/2B,GAAIi3D,EAAM7/C,OAAQpX,EAAGi3D,EAAQj3D,EAAGA,EAAIi3D,EAAM7/C,OACjD,IAAK,GAAI7Y,GAAI,EAAGA,EAAIyB,EAAE22D,SAASr5D,SAAUiB,EAAG,CAC1C,GAAI05B,GAAMj4B,EAAE22D,SAASp4D,EACrB,IAAI05B,GAAOg/B,EACT,KAEA3tC,IAAK2O,EAAIlB,OAGf,MAAOzN,GAET,QAASqe,IAAS3rB,GAChB,GAAI0rB,GAAQ1rB,EAAK0rB,KAGjB,OAFa,OAATA,IACFA,EAAQ1rB,EAAK0rB,MAAQ4vB,GAAat7C,EAAKrC,OAClC+tB,EAET,QAAS6vB,IAAQC,GACf/5D,KAAK2uB,QACL3uB,KAAKwpD,UACLxpD,KAAKg6D,UAAYlkD,EAAAA,EACjB9V,KAAKi6D,YAAcj6D,KAAKk6D,YAAc,EACtCl6D,KAAKm6D,OAASn6D,KAAKo6D,UAAY,KAC/Bp6D,KAAK0pD,WAAa1pD,KAAKijD,cAAgB,KACvCjjD,KAAK8pD,WAAa9pD,KAAK+pD,cAAgBgQ,GAAY,EAErD,QAAS9P,IAAwBv5B,EAAK0zB,GACpC,GAAIiW,IACFz/B,KAAMgL,EAAQwe,EAAOxpB,MACrBC,GAAIwpB,GAAUD,GACdloC,KAAMowB,GAAW5b,EAAK0zB,EAAOxpB,KAAMwpB,EAAOvpB,IAM5C,OAJAy/B,IAAiB5pC,EAAK2pC,EAAYjW,EAAOxpB,KAAKrc,KAAM6lC,EAAOvpB,GAAGtc,KAAO,GACrE0qC,GAAWv4B,EAAK,SAASA,GACvB4pC,GAAiB5pC,EAAK2pC,EAAYjW,EAAOxpB,KAAKrc,KAAM6lC,EAAOvpB,GAAGtc,KAAO,KACpE,GACI87C,EAET,QAASE,IAAqBhtB,GAC5B,KAAOA,EAAM1tC,QAAQ,CACnB,GAAIud,GAAO+pB,GAAIoG,EACf,KAAInwB,EAAK0pB,OAGP,KAFAyG,GAAMhlC,OAKZ,QAASiyD,IAAgBjR,EAAM/pB,GAC7B,MAAIA,IACF+6B,GAAqBhR,EAAK56B,MACnBwY,GAAIoiB,EAAK56B,OACP46B,EAAK56B,KAAK9uB,SAAWsnC,GAAIoiB,EAAK56B,MAAMmY,OACtCK,GAAIoiB,EAAK56B,MACP46B,EAAK56B,KAAK9uB,OAAS,IAAM0pD,EAAK56B,KAAK46B,EAAK56B,KAAK9uB,OAAS,GAAGinC,QAClEyiB,EAAK56B,KAAKpmB,MACH4+B,GAAIoiB,EAAK56B,OAFX,OAKT,QAASk6B,IAAmBn4B,EAAK0zB,EAAQwE,EAAU6R,GACjD,GAAIlR,GAAO74B,EAAI4d,OACfib,GAAKC,OAAO3pD,OAAS,CACrB,IACI26B,GADAqY,GAAQ,GAAIE,KAEhB,KAAKwW,EAAK4Q,QAAUM,GAAQlR,EAAKG,YAActF,EAAO3d,QAAU2d,EAAO3d,SAAuC,KAA3B2d,EAAO3d,OAAO/5B,OAAO,IAAagkB,EAAI8B,IAAM+2B,EAAK0Q,YAAcpnB,EAAOniB,EAAI8B,GAAGzZ,QAAQ2hD,mBAAiD,KAA3BtW,EAAO3d,OAAO/5B,OAAO,OAAgB8tB,EAAMggC,GAAgBjR,EAAMA,EAAK4Q,QAAUM,IAAQ,CACpR,GAAIr9C,GAAO+pB,GAAI3M,EAAI2I,QACgB,IAA/B4C,GAAIqe,EAAOxpB,KAAMwpB,EAAOvpB,KAAyC,GAA7BkL,GAAIqe,EAAOxpB,KAAMxd,EAAKyd,IAC5Dzd,EAAKyd,GAAKwpB,GAAUD,GAEpB5pB,EAAI2I,QAAQtiC,KAAKopD,GAAwBv5B,EAAK0zB,QAE3C,CACL,GAAI1Y,GAASvE,GAAIoiB,EAAK56B,KAQtB,KAPK+c,GAAWA,EAAO5E,QACrB6iB,GAAuBj5B,EAAI8V,IAAK+iB,EAAK56B,MACvC6L,GACE2I,SAAU8mB,GAAwBv5B,EAAK0zB,IACvC0F,WAAYP,EAAKO,YAEnBP,EAAK56B,KAAK9tB,KAAK25B,GACR+uB,EAAK56B,KAAK9uB,OAAS0pD,EAAKyQ,WAC7BzQ,EAAK56B,KAAKjpB,QACL6jD,EAAK56B,KAAK,GAAGmY,QAChByiB,EAAK56B,KAAKjpB,QAGhB6jD,EAAK56B,KAAK9tB,KAAK+nD,GACfW,EAAKO,aAAeP,EAAKQ,cACzBR,EAAK0Q,YAAc1Q,EAAK2Q,YAAcrnB,EACtC0W,EAAK4Q,OAAS5Q,EAAK6Q,UAAYK,EAC/BlR,EAAKG,WAAaH,EAAKtG,cAAgBmB,EAAO3d,OACzCrpB,GACHmkB,GAAO7Q,EAAK,gBAEhB,QAASiqC,IAA0BjqC,EAAK+V,EAAQx5B,EAAMu5B,GACpD,GAAI57B,GAAK67B,EAAO/5B,OAAO,EACvB,OAAa,KAAN9B,GAAmB,KAANA,GAAaqC,EAAK65B,OAAOjnC,QAAU2mC,EAAIM,OAAOjnC,QAAUoN,EAAK2tD,qBAAuBp0B,EAAIo0B,qBAAuB,GAAI7nB,MAAOriB,EAAI4d,QAAQ4rB,cAAgBxpC,EAAI8B,GAAK9B,EAAI8B,GAAGzZ,QAAQ2hD,kBAAoB,KAExN,QAASlsB,IAAsB9d,EAAK8V,EAAKi0B,EAAM1hD,GAC7C,GAAIwwC,GAAO74B,EAAI4d,QACX7H,EAAS1tB,GAAWA,EAAQ0tB,MAC5Bg0B,IAAQlR,EAAK6Q,WAAc3zB,GAAU8iB,EAAKtG,eAAiBxc,IAAW8iB,EAAK0Q,aAAe1Q,EAAK2Q,aAAe3Q,EAAKG,YAAcjjB,GAAUk0B,GAA0BjqC,EAAK+V,EAAQU,GAAIoiB,EAAK56B,MAAO6X,IACpM+iB,EAAK56B,KAAK46B,EAAK56B,KAAK9uB,OAAS,GAAK2mC,EAElCmjB,GAAuBnjB,EAAK+iB,EAAK56B,MACnC46B,EAAK2Q,aAAe,GAAInnB,MACxBwW,EAAKtG,cAAgBxc,EACrB8iB,EAAK6Q,UAAYK,EACb1hD,GAAWA,EAAQ6wC,aAAc,GACnC2Q,GAAqBhR,EAAKC,QAE9B,QAASG,IAAuBnjB,EAAKijB,GACnC,GAAI1rB,GAAMoJ,GAAIsiB,EACR1rB,IAAOA,EAAI+I,QAAU/I,EAAI8Q,OAAOrI,IACpCijB,EAAK5oD,KAAK2lC,GAEd,QAAS8zB,IAAiB5pC,EAAK0zB,EAAQxpB,EAAMC,GAC3C,GAAIggC,GAAWzW,EAAO,SAAW1zB,EAAIxtB,IACjCoqB,EAAI,CACRoD,GAAIkH,KAAKmB,KAAKC,IAAItI,EAAI+E,MAAOmF,GAAO7B,KAAKwF,IAAI7N,EAAI+E,MAAQ/E,EAAIuO,KAAMpE,GAAK,SAAStc,GAC3EA,EAAKmxB,eACNmrB,IAAaA,EAAWzW,EAAO,SAAW1zB,EAAIxtB,SAAWoqB,GAAK/O,EAAKmxB,eACpEpiB,IAGN,QAASwtC,IAAmBzQ,GAC1B,IAAKA,EACH,MAAO,KACT,KAAK,GACD7uC,GADK1a,EAAI,EACJA,EAAIupD,EAAMxqD,SAAUiB,EACvBupD,EAAMvpD,GAAGkrC,OAAO8D,kBACbt0B,IACHA,EAAM6uC,EAAMl5C,MAAM,EAAGrQ,IACd0a,GACTA,EAAI3a,KAAKwpD,EAAMvpD,GAEnB,OAAQ0a,GAAcA,EAAI3b,OAAS2b,EAAM,KAA3B6uC,EAEhB,QAASgI,IAAY3hC,EAAK0zB,GACxB,GAAI1pB,GAAQ0pB,EAAO,SAAW1zB,EAAIxtB,GAClC,KAAKw3B,EACH,MAAO,KACT,KAAK,GAAI55B,GAAI,EACTknD,KAASlnD,EAAIsjD,EAAOloC,KAAKrc,SAAUiB,EACrCknD,EAAGnnD,KAAKi6D,GAAmBpgC,EAAM55B,IACnC,OAAOknD,GAET,QAAS+S,IAAiB96B,EAAQ+6B,EAAUC,GAC1C,IAAK,GAAIn6D,GAAI,EACTg0D,KAAWh0D,EAAIm/B,EAAOpgC,SAAUiB,EAAG,CACrC,GAAIwoD,GAAQrpB,EAAOn/B,EACnB,IAAIwoD,EAAMxiB,OACRguB,EAAKj0D,KAAKo6D,EAAiBvuB,GAAU1oC,UAAUk3D,SAASt6D,KAAK0oD,GAASA,OADxE,CAIA,GAAInmB,GAAUmmB,EAAMnmB,QAChBg4B,IACJrG,GAAKj0D,MAAMsiC,QAASg4B,GACpB,KAAK,GAAIx5D,GAAI,EAAGA,EAAIwhC,EAAQtjC,SAAU8B,EAAG,CACvC,GACIwrB,GADAi3B,EAASjhB,EAAQxhC,EAOrB,IALAw5D,EAAWt6D,MACT+5B,KAAMwpB,EAAOxpB,KACbC,GAAIupB,EAAOvpB,GACX3e,KAAMkoC,EAAOloC,OAEX8+C,EACF,IAAK,GAAI32D,KAAQ+/C,IACXj3B,EAAI9oB,EAAK+C,MAAM,mBACbzG,GAAQq6D,EAAUjvC,OAAOoB,EAAE,KAAO,KACpCga,GAAIg0B,GAAY92D,GAAQ+/C,EAAO//C,SACxB+/C,GAAO//C,MAK1B,MAAOywD,GAET,QAASsG,IAAoB3uD,EAAKmuB,EAAMC,EAAIkH,GACtClH,EAAKpuB,EAAI8R,KACX9R,EAAI8R,MAAQwjB,EACHnH,EAAOnuB,EAAI8R,OACpB9R,EAAI8R,KAAOqc,EACXnuB,EAAI7B,GAAK,GAGb,QAASywD,IAAgB9tB,EAAO3S,EAAMC,EAAIkH,GACxC,IAAK,GAAIjhC,GAAI,EAAGA,EAAIysC,EAAM1tC,SAAUiB,EAAG,CACrC,GAAIw6D,GAAM/tB,EAAMzsC,GACZy6D,GAAK,CACT,IAAID,EAAIx0B,OAAR,CACOw0B,EAAIE,SACPF,EAAM/tB,EAAMzsC,GAAKw6D,EAAIJ,WACrBI,EAAIE,QAAS,EAEf,KAAK,GAAI75D,GAAI,EAAGA,EAAI25D,EAAIx0B,OAAOjnC,OAAQ8B,IACrCy5D,GAAoBE,EAAIx0B,OAAOnlC,GAAG6mC,OAAQ5N,EAAMC,EAAIkH,GACpDq5B,GAAoBE,EAAIx0B,OAAOnlC,GAAGwmC,KAAMvN,EAAMC,EAAIkH,OAPtD,CAWA,IAAK,GAAIpgC,GAAI,EAAGA,EAAI25D,EAAIn4B,QAAQtjC,SAAU8B,EAAG,CAC3C,GAAI64B,GAAM8gC,EAAIn4B,QAAQxhC,EACtB,IAAIk5B,EAAKL,EAAII,KAAKrc,KAChBic,EAAII,KAAOiL,GAAIrL,EAAII,KAAKrc,KAAOwjB,EAAMvH,EAAII,KAAKhwB,IAC9C4vB,EAAIK,GAAKgL,GAAIrL,EAAIK,GAAGtc,KAAOwjB,EAAMvH,EAAIK,GAAGjwB,QACnC,IAAIgwB,GAAQJ,EAAIK,GAAGtc,KAAM,CAC9Bg9C,GAAK,CACL,QAGCA,IACHhuB,EAAMlsC,OAAO,EAAGP,EAAI,GACpBA,EAAI,KAIV,QAASqoD,IAAWI,EAAMnF,GACxB,GAAIxpB,GAAOwpB,EAAOxpB,KAAKrc,KACnBsc,EAAKupB,EAAOvpB,GAAGtc,KACfwjB,EAAOqiB,EAAOloC,KAAKrc,QAAUg7B,EAAKD,GAAQ,CAC9CygC,IAAgB9R,EAAK56B,KAAMiM,EAAMC,EAAIkH,GACrCs5B,GAAgB9R,EAAKC,OAAQ5uB,EAAMC,EAAIkH,GAczC,QAAS0hB,IAAmBt/C,GAC1B,MAA6B,OAAtBA,EAAEs3D,iBAA2Bt3D,EAAEs3D,iBAAoC,GAAjBt3D,EAAEijD,YAM7D,QAAS9G,IAASn8C,GAChB,MAAOA,GAAEmN,QAAUnN,EAAEu3D,WAEvB,QAAS3a,IAAS58C,GAChB,GAAI2kB,GAAI3kB,EAAEujD,KAWV,OAVS,OAAL5+B,IACa,EAAX3kB,EAAEw3D,OACJ7yC,EAAI,EACc,EAAX3kB,EAAEw3D,OACT7yC,EAAI,EACc,EAAX3kB,EAAEw3D,SACT7yC,EAAI,IAEJ4Z,IAAOv+B,EAAEq9C,SAAgB,GAAL14B,IACtBA,EAAI,GACCA,EAcT,QAAS8yC,IAAYC,EAASrxD,EAAMsqD,GAClC,GAAIr8C,GAAMojD,EAAQC,WAAaD,EAAQC,UAAUtxD,EACjD,OAAIsqD,GACKr8C,GAAOA,EAAI5Y,OAAS,EAAI4Y,EAAItH,QAAU4qD,GAEtCtjD,GAAOsjD,GAyBlB,QAASx2B,IAAYs2B,EAASrxD,GAc5B,QAASwxD,GAAIpwC,GACX,MAAO,YACLA,EAAE7rB,MAAM,KAAMswB,IAflB,GAAI5X,GAAMmjD,GAAYC,EAASrxD,GAAM,EACrC,IAAKiO,EAAI5Y,OAAT,CAEA,GACIwO,GADAgiB,EAAOtsB,MAAMC,UAAUmN,MAAMvQ,KAAKhB,UAAW,EAE7Ci7C,IACFxsC,EAAOwsC,GAAeG,iBACbihB,GACT5tD,EAAO4tD,IAEP5tD,EAAO4tD,MACPtpC,WAAWupC,GAAmB,GAQhC,KAAK,GAAIp7D,GAAI,EAAGA,EAAI2X,EAAI5Y,SAAUiB,EAChCuN,EAAKxN,KAAKm7D,EAAIvjD,EAAI3X,MAEtB,QAASo7D,MACP,GAAIC,GAAUF,EACdA,IAAyB,IACzB,KAAK,GAAIn7D,GAAI,EAAGA,EAAIq7D,EAAQt8D,SAAUiB,EACpCq7D,EAAQr7D,KAEZ,QAASm9C,IAAezrB,EAAIruB,EAAGi4D,GAS7B,MARgB,gBAALj4D,KACTA,GACEqG,KAAMrG,EACN2jC,eAAgB,WACd9nC,KAAKy7D,kBAAmB,KAG9Bl6B,GAAO/O,EAAI4pC,GAAYj4D,EAAEqG,KAAMgoB,EAAIruB,GAC5Bs/C,GAAmBt/C,IAAMA,EAAEk4D,iBAEpC,QAASttB,IAAqBvc,GAC5B,GAAI/Z,GAAM+Z,EAAGspC,WAAatpC,EAAGspC,UAAUQ,cACvC,IAAK7jD,EAGL,IAAK,GADD1T,GAAMytB,EAAGQ,MAAMwnB,yBAA2BhoB,EAAGQ,MAAMwnB,2BAC9C15C,EAAI,EAAGA,EAAI2X,EAAI5Y,SAAUiB,EACJ,IAAxBH,GAAQoE,EAAK0T,EAAI3X,KACnBiE,EAAIlE,KAAK4X,EAAI3X,IAEnB,QAAS2tC,IAAWotB,EAASrxD,GAC3B,MAAOoxD,IAAYC,EAASrxD,GAAM3K,OAAS,EAE7C,QAAS08D,IAAWC,GAClBA,EAAKx4D,UAAUo4B,GAAK,SAAS5xB,EAAMohB,GACjCwQ,GAAGp8B,KAAMwK,EAAMohB,IAEjB4wC,EAAKx4D,UAAUm8C,IAAM,SAAS31C,EAAMohB,GAClCu0B,GAAIngD,KAAMwK,EAAMohB,IAUpB,QAASyG,MACPryB,KAAKkD,GAAK,KAuCZ,QAASiqD,IAAS7/B,GAChB,KAAOmvC,GAAU58D,QAAUytB,GACzBmvC,GAAU57D,KAAKsmC,GAAIs1B,IAAa,IAClC,OAAOA,IAAUnvC,GAEnB,QAAS6Z,IAAI1uB,GACX,MAAOA,GAAIA,EAAI5Y,OAAS,GAgB1B,QAASc,IAAQ4sC,EAAOrZ,GACtB,IAAK,GAAIpzB,GAAI,EAAGA,EAAIysC,EAAM1tC,SAAUiB,EAClC,GAAIysC,EAAMzsC,IAAMozB,EACd,MAAOpzB,EACX,OAAO,GAET,QAASkmC,IAAIuG,EAAO3hB,GAElB,IAAK,GADDpQ,MACK1a,EAAI,EAAGA,EAAIysC,EAAM1tC,OAAQiB,IAChC0a,EAAI1a,GAAK8qB,EAAE2hB,EAAMzsC,GAAIA,EACvB,OAAO0a,GAET,QAASkhD,OACT,QAASC,IAAUC,EAAMC,GACvB,GAAIC,EASJ,OARIv5D,QAAOw5D,OACTD,EAAOv5D,OAAOw5D,OAAOH,IAErBF,GAAQ14D,UAAY44D,EACpBE,EAAO,GAAIJ,KAETG,GACFtsC,GAAQssC,EAAOC,GACVA,EAGT,QAASvsC,IAAQnsB,EAAKkN,EAAQsgB,GACvBtgB,IACHA,KACF,KAAK,GAAIjN,KAAQD,IACXA,EAAIX,eAAeY,IAAUutB,KAAc,GAAUtgB,EAAO7N,eAAeY,KAC7EiN,EAAOjN,GAAQD,EAAIC,GACvB,OAAOiN,GAET,QAAS8hB,IAAKxH,GACZ,GAAIyE,GAAOtsB,MAAMC,UAAUmN,MAAMvQ,KAAKhB,UAAW,EACjD,OAAO,YACL,MAAOgsB,GAAE7rB,MAAM,KAAMswB,IAOzB,QAASm+B,IAAW5jD,EAAI0jD,GACtB,MAAKA,GAEDA,EAAOvnD,OAAOpG,QAAQ,OAAS,IAAMq8D,GAAgBpyD,IAChD,EACF0jD,EAAOvjD,KAAKH,GAHVoyD,GAAgBpyD,GAK3B,QAASqyD,IAAQ74D,GACf,IAAK,GAAIkpB,KAAKlpB,GACZ,GAAIA,EAAIX,eAAe6pB,IAAMlpB,EAAIkpB,GAC/B,OAAO,CACX,QAAO,EAGT,QAASopB,IAAgB9rC,GACvB,MAAOA,GAAGsb,WAAW,IAAM,KAAOg3C,GAAenyD,KAAKH,GAExD,QAASspB,IAAIipC,EAAK1yD,EAASgF,EAAWnF,GACpC,GAAInG,GAAIk/B,SAASu0B,cAAcuF,EAK/B,IAJI1tD,IACFtL,EAAEsL,UAAYA,GACZnF,IACFnG,EAAEmG,MAAM8yD,QAAU9yD,GACE,gBAAXG,GACTtG,EAAEmxB,YAAY+N,SAASC,eAAe74B,QACnC,IAAIA,EACP,IAAK,GAAI3J,GAAI,EAAGA,EAAI2J,EAAQ5K,SAAUiB,EACpCqD,EAAEmxB,YAAY7qB,EAAQ3J,GAC1B,OAAOqD,GAuBT,QAAS41B,IAAe51B,GACtB,IAAK,GAAIk5D,GAAQl5D,EAAEymC,WAAW/qC,OAAQw9D,EAAQ,IAAKA,EACjDl5D,EAAE0+B,YAAY1+B,EAAEs6B,WAClB,OAAOt6B,GAET,QAASuwC,IAAqB/6B,EAAQxV,GACpC,MAAO41B,IAAepgB,GAAQ2b,YAAYnxB,GAc5C,QAAS48B,MAEP,IADA,GAAIu8B,GAAgBj6B,SAASi6B,cACtBA,GAAiBA,EAAcC,MAAQD,EAAcC,KAAKD,eAC/DA,EAAgBA,EAAcC,KAAKD,aACrC,OAAOA,GAUT,QAASE,IAAUz5B,GACjB,MAAO,IAAIr8B,QAAO,UAAYq8B,EAAM,iBAetC,QAAS8yB,IAAY3yD,EAAG4kB,GAEtB,IAAK,GADD20C,GAAKv5D,EAAEuB,MAAM,KACR3E,EAAI,EAAGA,EAAI28D,EAAG59D,OAAQiB,IACzB28D,EAAG38D,KAAO08D,GAAUC,EAAG38D,IAAIiK,KAAK+d,KAClCA,GAAK,IAAM20C,EAAG38D,GAClB,OAAOgoB,GAET,QAAS40C,IAAkB9xC,GACzB,GAAKyX,SAAStzB,KAAK4tD,uBAGnB,IAAK,GADDC,GAAUv6B,SAAStzB,KAAK4tD,uBAAuB,cAC1C78D,EAAI,EAAGA,EAAI88D,EAAQ/9D,OAAQiB,IAAK,CACvC,GAAI0xB,GAAKorC,EAAQ98D,GAAG8I,UAChB4oB,IACF5G,EAAE4G,IAIR,QAASM,MACH+qC,KAEJC,KACAD,IAAoB,GAEtB,QAASC,MACP,GAAIC,EACJ3hC,IAAG5T,OAAQ,SAAU,WACA,MAAfu1C,IACFA,EAAcprC,WAAW,WACvBorC,EAAc,KACdL,GAAkBtd,KACjB,QAEPhkB,GAAG5T,OAAQ,OAAQ,WACjBk1C,GAAkBpqC,MAUtB,QAASwjC,IAAiBviC,GACxB,GAAqB,MAAjBypC,GAAuB,CACzB,GAAIjzD,GAAOmpB,GAAI,OAAQ,IACvBwgB,IAAqBngB,EAASL,GAAI,QAASnpB,EAAMs4B,SAASC,eAAe,QAClC,GAAnC/O,EAAQkK,WAAWwC,eACrB+8B,GAAgBjzD,EAAKqvB,aAAe,GAAKrvB,EAAKk2B,aAAe,KAAOxO,IAAmB,EAAbC,KAE9E,GAAIoK,GAAOkhC,GAAgB9pC,GAAI,OAAQ,KAAYA,GAAI,OAAQ,IAAU,KAAM,wDAE/E,OADA4I,GAAK3I,aAAa,UAAW,IACtB2I,EAGT,QAAS25B,IAAgBliC,GACvB,GAAoB,MAAhB0pC,GACF,MAAOA,GACT,IAAI5G,GAAM3iB,GAAqBngB,EAAS8O,SAASC,eAAe,QAC5D46B,EAAKj3B,GAAMowB,EAAK,EAAG,GAAG/3B,uBAC1B,KAAK4+B,GAAMA,EAAGt/B,MAAQs/B,EAAGzgC,MACvB,OAAO,CACT,IAAI0gC,GAAKl3B,GAAMowB,EAAK,EAAG,GAAG/3B,uBAC1B,OAAO2+B,IAAgBE,EAAG1gC,MAAQygC,EAAGzgC,MAAQ,EA8C/C,QAAS0Z,IAAkB5iB,GACzB,GAAsB,MAAlB6pC,GACF,MAAOA,GACT,IAAIthC,GAAO4X,GAAqBngB,EAASL,GAAI,OAAQ,MACjDmqC,EAASvhC,EAAKwC,wBACdg/B,EAAYr3B,GAAMnK,EAAM,EAAG,GAAGwC,uBAClC,OAAO8+B,IAAiBrlC,KAAKqc,IAAIipB,EAAOz/B,KAAO0/B,EAAU1/B,MAAQ,EAmEnE,QAAS+S,IAAoB1H,EAAOrP,EAAMC,EAAIjP,GAC5C,IAAKqe,EACH,MAAOre,GAAEgP,EAAMC,EAAI,MAErB,KAAK,GADDH,IAAQ,EACH55B,EAAI,EAAGA,EAAImpC,EAAMpqC,SAAUiB,EAAG,CACrC,GAAI43C,GAAOzO,EAAMnpC,IACb43C,EAAK9d,KAAOC,GAAM6d,EAAK7d,GAAKD,GAAQA,GAAQC,GAAM6d,EAAK7d,IAAMD,KAC/DhP,EAAEmN,KAAKC,IAAI0f,EAAK9d,KAAMA,GAAO7B,KAAKwF,IAAIma,EAAK7d,GAAIA,GAAmB,GAAd6d,EAAK30B,MAAa,MAAQ,OAC9E2W,GAAQ,GAGPA,GACH9O,EAAEgP,EAAMC,EAAI,OAEhB,QAAS8d,IAASD,GAChB,MAAOA,GAAK30B,MAAQ,EAAI20B,EAAK7d,GAAK6d,EAAK9d,KAEzC,QAASge,IAAUF,GACjB,MAAOA,GAAK30B,MAAQ,EAAI20B,EAAK9d,KAAO8d,EAAK7d,GAE3C,QAAS6e,IAASn7B,GAChB,GAAI0rB,GAAQC,GAAS3rB,EACrB,OAAO0rB,GAAQ0O,GAAS1O,EAAM,IAAM,EAEtC,QAAS0P,IAAUp7B,GACjB,GAAI0rB,GAAQC,GAAS3rB,EACrB,OAAK0rB,GAEE2O,GAAUzR,GAAI8C,IADZ1rB,EAAKrC,KAAKrc,OAGrB,QAAS0+D,IAAU/rC,EAAIuQ,GACrB,GAAIxkB,GAAOwc,GAAQvI,EAAG9B,IAAKqS,GACvBy7B,EAASpsB,GAAW7zB,EACpBigD,IAAUjgD,IACZwkB,EAAQoI,GAAOqzB,GACjB,IAAIv0B,GAAQC,GAASs0B,GACjB5zD,EAAMq/B,EAAYA,EAAM,GAAGlmB,MAAQ,EAAI41B,GAAU6kB,GAAU9kB,GAAS8kB,GAAtD,CAClB,OAAO34B,IAAI9C,EAAOn4B,GAEpB,QAAS6zD,IAAQjsC,EAAIuQ,GAGnB,IAFA,GAAIxI,GACAhc,EAAOwc,GAAQvI,EAAG9B,IAAKqS,GACpBxI,EAASO,GAAmBvc,IACjCA,EAAOgc,EAAOI,KAAK,GAAG,GAAMpc,KAC5BwkB,EAAQ,IAEV,IAAIkH,GAAQC,GAAS3rB,GACjB3T,EAAMq/B,EAA2BA,EAAM,GAAGlmB,MAAQ,EAAI21B,GAASn7B,GAAQo7B,GAAUp7B,GAAnEA,EAAKrC,KAAKrc,MAC5B,OAAOgmC,IAAa,MAAT9C,EAAgBoI,GAAO5sB,GAAQwkB,EAAOn4B,GAEnD,QAAS8zD,IAAelsC,EAAI/lB,GAC1B,GAAIH,GAAQiyD,GAAU/rC,EAAI/lB,EAAI8R,MAC1BA,EAAOwc,GAAQvI,EAAG9B,IAAKpkB,EAAMiS,MAC7B0rB,EAAQC,GAAS3rB,EACrB,KAAK0rB,GAA2B,GAAlBA,EAAM,GAAGlmB,MAAY,CACjC,GAAI46C,GAAa5lC,KAAKC,IAAI,EAAGza,EAAKrC,KAAKuzB,OAAO,OAC1CmvB,EAAOnyD,EAAI8R,MAAQjS,EAAMiS,MAAQ9R,EAAI7B,IAAM+zD,GAAclyD,EAAI7B,EACjE,OAAOi7B,IAAIv5B,EAAMiS,KAAMqgD,EAAO,EAAID,GAEpC,MAAOryD,GAET,QAASuyD,IAAiB50B,EAAO/lC,EAAG4kB,GAClC,GAAIg2C,GAAU70B,EAAM,GAAGlmB,KACvB,OAAI7f,IAAK46D,GACA,EACLh2C,GAAKg2C,GACA,EACEh2C,EAAJ5kB,EAGT,QAASmmC,IAAcJ,EAAOx9B,GAC5BosC,GAAY,IACZ,KAAK,GACDne,GADK55B,EAAI,EACFA,EAAImpC,EAAMpqC,SAAUiB,EAAG,CAChC,GAAI05B,GAAMyP,EAAMnpC,EAChB,IAAI05B,EAAII,KAAOnuB,GAAO+tB,EAAIK,GAAKpuB,EAC7B,MAAO3L,EACT,IAAK05B,EAAII,MAAQnuB,GAAO+tB,EAAIK,IAAMpuB,EAAM,CACtC,GAAa,MAATiuB,EAEG,MAAImkC,IAAiB50B,EAAOzP,EAAIzW,MAAOkmB,EAAMvP,GAAO3W,QACrDyW,EAAII,MAAQJ,EAAIK,KAClBge,GAAYne,GACP55B,IAEH05B,EAAII,MAAQJ,EAAIK,KAClBge,GAAY/3C,GACP45B,EARPA,GAAQ55B,GAYd,MAAO45B,GAET,QAASqkC,IAAWxgD,EAAM9R,EAAK+iC,EAAKwvB,GAClC,IAAKA,EACH,MAAOvyD,GAAM+iC,CACf,GACE/iC,IAAO+iC,QACL/iC,EAAM,GAAKiqC,GAAgBn4B,EAAKrC,KAAKxP,OAAOD,IAChD,OAAOA,GAET,QAASutC,IAAaz7B,EAAMjS,EAAOkjC,EAAKwvB,GACtC,GAAIvlB,GAAOvP,GAAS3rB,EACpB,KAAKk7B,EACH,MAAO0U,IAAc5vC,EAAMjS,EAAOkjC,EAAKwvB,EAIzC,KAHA,GAAIvyD,GAAM49B,GAAcoP,EAAMntC,GAC1BosC,EAAOe,EAAKhtC,GACZ6E,EAASytD,GAAWxgD,EAAMjS,EAAOosC,EAAK30B,MAAQ,GAAKyrB,EAAMA,EAAKwvB,KACvD,CACT,GAAI1tD,EAASonC,EAAK9d,MAAQtpB,EAASonC,EAAK7d,GACtC,MAAOvpB,EACT,IAAIA,GAAUonC,EAAK9d,MAAQtpB,GAAUonC,EAAK7d,GACxC,MAAIwP,IAAcoP,EAAMnoC,IAAW7E,EAC1B6E,GACTonC,EAAOe,EAAKhtC,GAAO+iC,GACXA,EAAM,GAAMkJ,EAAK30B,MAAQ,EAAI20B,EAAK7d,GAAK6d,EAAK9d,KAGpD,IADA8d,EAAOe,EAAKhtC,GAAO+iC,IACdkJ,EACH,MAAO,KAEPpnC,GADGk+B,EAAM,GAAMkJ,EAAK30B,MAAQ,EACnBg7C,GAAWxgD,EAAMm6B,EAAK7d,GAAI,GAAImkC,GAE9BD,GAAWxgD,EAAMm6B,EAAK9d,KAAM,EAAGokC,IAIhD,QAAS7Q,IAAc5vC,EAAMjS,EAAOkjC,EAAKwvB,GACvC,GAAI1tD,GAAShF,EAAQkjC,CACrB,IAAIwvB,EACF,KAAO1tD,EAAS,GAAKolC,GAAgBn4B,EAAKrC,KAAKxP,OAAO4E,KACpDA,GAAUk+B,CACd,OAAgB,GAATl+B,GAAcA,EAASiN,EAAKrC,KAAKrc,OAAS,KAAOyR,EAnvR1D,GAAI2tD,IAAYC,UAAUD,UACtBE,GAAWD,UAAUC,SACrB/pC,GAAQ,aAAarqB,KAAKk0D,IAC1BG,GAAY,UAAUr0D,KAAKk0D,IAC3BI,GAAU,wCAAwCv3D,KAAKm3D,IACvDxsC,GAAK2sC,IAAaC,GAClB3sC,GAAaD,KAAO2sC,GAAY/7B,SAASi8B,cAAgB,EAAID,GAAQ,IACrExrC,GAAS,WAAW9oB,KAAKk0D,IACzBM,GAAW1rC,IAAU,eAAe9oB,KAAKk0D,IACzCO,GAAS,WAAWz0D,KAAKk0D,IACzBha,GAAS,UAAUl6C,KAAKk0D,IACxBna,GAAS,iBAAiB/5C,KAAKm0D,UAAUO,QACzCC,GAAqB,+BAA+B30D,KAAKk0D,IACzDhU,GAAU,YAAYlgD,KAAKk0D,IAC3B31B,GAAM,cAAcv+B,KAAKk0D,KAAc,cAAcl0D,KAAKk0D,IAC1D3tC,GAASgY,IAAO,2DAA2Dv+B,KAAKk0D,IAChFv8B,GAAM4G,IAAO,MAAMv+B,KAAKo0D,IACxBQ,GAAU,OAAO50D,KAAKo0D,IACtBS,GAAiB3a,IAAUga,GAAU73D,MAAM,sBAC3Cw4D,MACFA,GAAiB7zC,OAAO6zC,GAAe,KACrCA,IAAkBA,IAAkB,KACtC3a,IAAS,EACTpxB,IAAS,EAEX,IAAIgsC,IAAcn9B,KAAQ68B,IAAYta,KAA6B,MAAlB2a,IAA2C,MAAjBA,KACvErhB,GAAoBnpB,IAAU3C,IAAMC,IAAc,EAClD+1B,IAAmB,EACnBhoB,IAAoB,CAgSxBzE,GAAiBh4B,UAAYusB,IAC3BiN,OAAQ,SAASjJ,GACf,GAAIurC,GAASvrC,EAAQiH,YAAcjH,EAAQ0E,YAAc,EACrD8mC,EAASxrC,EAAQsH,aAAetH,EAAQ+G,aAAe,EACvD0kC,EAASzrC,EAAQ4B,cACrB,IAAI4pC,EAAQ,CACV//D,KAAKk8B,KAAK5xB,MAAMymB,QAAU,QAC1B/wB,KAAKk8B,KAAK5xB,MAAMqzB,OAASmiC,EAASE,EAAS,KAAO,GAClD,IAAIC,GAAc1rC,EAAQgH,YAAcukC,EAASE,EAAS,EAC1DhgE,MAAKk8B,KAAKuC,WAAWn0B,MAAMgvB,OAASP,KAAKC,IAAI,EAAGzE,EAAQsH,aAAetH,EAAQ+G,aAAe2kC,GAAe,SAE7GjgE,MAAKk8B,KAAK5xB,MAAMymB,QAAU,GAC1B/wB,KAAKk8B,KAAKuC,WAAWn0B,MAAMgvB,OAAS,GAEtC,IAAIwmC,EAAQ,CACV9/D,KAAKm8B,MAAM7xB,MAAMymB,QAAU,QAC3B/wB,KAAKm8B,MAAM7xB,MAAMmzB,MAAQsiC,EAASC,EAAS,KAAO,IAClDhgE,KAAKm8B,MAAM7xB,MAAMs0B,KAAOrK,EAAQmH,QAAU,IAC1C,IAAIwkC,GAAa3rC,EAAQkH,UAAYlH,EAAQmH,SAAWqkC,EAASC,EAAS,EAC1EhgE,MAAKm8B,MAAMsC,WAAWn0B,MAAM4vB,MAAS3F,EAAQiH,YAAcjH,EAAQ0E,YAAcinC,EAAc,SAE/FlgE,MAAKm8B,MAAM7xB,MAAMymB,QAAU,GAC3B/wB,KAAKm8B,MAAMsC,WAAWn0B,MAAM4vB,MAAQ,GAOtC,QALKl6B,KAAKu8B,gBAAkBhI,EAAQ+G,aAAe,IACnC,GAAV0kC,GACFhgE,KAAKmgE,cACPngE,KAAKu8B,gBAAiB,IAGtBkB,MAAOsiC,EAASC,EAAS,EACzBriC,OAAQmiC,EAASE,EAAS,IAG9B/iC,cAAe,SAASxwB,GAClBzM,KAAKm8B,MAAMG,YAAc7vB,IAC3BzM,KAAKm8B,MAAMG,WAAa7vB,IAE5BywB,aAAc,SAASzwB,GACjBzM,KAAKk8B,KAAKG,WAAa5vB,IACzBzM,KAAKk8B,KAAKG,UAAY5vB,IAE1B0zD,YAAa,WACX,GAAIvyC,GAAI8U,KAAQg9B,GAAqB,OAAS,MAC9C1/D,MAAKm8B,MAAM7xB,MAAMkyB,UAAYx8B,KAAKk8B,KAAK5xB,MAAM8tB,SAAWxK,CACxD,IAAIxoB,GAAOpF,KACPogE,EAAe,SAASj8D,GACtBm8C,GAASn8C,IAAMiB,EAAK82B,MAAQokB,GAASn8C,IAAMiB,EAAK+2B,OAClDogB,GAAUn3C,EAAKotB,GAAIwrB,IAAa75C,GAEpCi4B,IAAGp8B,KAAKk8B,KAAM,YAAakkC,GAC3BhkC,GAAGp8B,KAAKm8B,MAAO,YAAaikC,IAE9BzjC,MAAO,WACL,GAAIhjB,GAAS3Z,KAAKm8B,MAAMyG,UACxBjpB,GAAOkpB,YAAY7iC,KAAKm8B,OACxBxiB,EAAOkpB,YAAY7iC,KAAKk8B,QAEzBF,EAAiBh4B,WAEpBy4B,EAAez4B,UAAYusB,IACzBiN,OAAQ,WACN,OACEG,OAAQ,EACRF,MAAO,IAGXR,cAAe,aACfC,aAAc,aACdP,MAAO,cACNF,EAAez4B,WAClB4F,EAAWgzB,gBACTyjC,SAAUrkC,EACVpmB,OAAQ6mB,GA0IV8C,EAAcv7B,UAAUu9B,OAAS,SAASs6B,EAASrxD,GAC7CikC,GAAWotB,EAASrxD,IACtBxK,KAAKigC,OAAOp/B,KAAKjB,YAErB2/B,EAAcv7B,UAAUy9B,OAAS,WAC/B,IAAK,GAAI3gC,GAAI,EAAGA,EAAId,KAAKigC,OAAOpgC,OAAQiB,IACtCygC,GAAOxhC,MAAM,KAAMC,KAAKigC,OAAOn/B,IAkXnC,IAAI+kC,IAAMj8B,EAAWi8B,IAAM,SAAStnB,EAAM3T,GACxC,MAAM5K,gBAAgB6lC,KAEtB7lC,KAAKue,KAAOA,OACZve,KAAK4K,GAAKA,IAFD,GAAIi7B,IAAItnB,EAAM3T,IAIrBm7B,GAAMn8B,EAAW02D,OAAS,SAASp8D,EAAG4kB,GACxC,MAAO5kB,GAAEqa,KAAOuK,EAAEvK,MAAQra,EAAE0G,GAAKke,EAAEle,IAoBjCm8B,GAAa,IAgIjB6B,IAAc5kC,UAAYusB,IACxBgH,KAAM,SAASxG,GAmBb,QAASwvC,GAAep8D,GACtB,GAAIquB,EAAGooC,oBACL7zB,GAAavU,EAAGguC,gBACZr8C,EAAM6kB,sBACR7kB,EAAM0kB,UAAY,GAClB1kB,EAAM6kB,qBAAsB,EAC5BI,EAAG/mC,MAAQ0kC,GAAWziB,KAAK,MAC3Bm8C,GAAYr3B,QAET,CAAA,IAAK5W,EAAGzZ,QAAQ2nD,gBACrB,MAEA,IAAI55B,GAASwB,GAAe9V,EAC5BuU,IAAaD,EAAO5qB,KACN,OAAV/X,EAAEqG,KACJgoB,EAAGmuC,cAAc75B,EAAOA,OAAQ,KAAMmI,KAEtC9qB,EAAM0kB,UAAY,GAClBO,EAAG/mC,MAAQykC,EAAO5qB,KAAKoI,KAAK,MAC5Bm8C,GAAYr3B,IAGF,OAAVjlC,EAAEqG,OACJgoB,EAAG7nB,MAAMsnB,aAAc,GAzC3B,GAAI9N,GAAQnkB,KACRwyB,EAAKxyB,KAAKwyB,GACV6W,EAAMrpC,KAAKixB,QAAUkY,KACrBC,EAAKppC,KAAK4gE,SAAWv3B,EAAI5K,UAC7B1N,GAAQE,QAAQ8L,aAAasM,EAAKtY,EAAQE,QAAQwN,YAC9C6K,KACFF,EAAG9+B,MAAM4vB,MAAQ,OACnBkC,GAAGgN,EAAI,QAAS,WACV3W,IAAMC,IAAc,GAAKvO,EAAM8kB,eACjC9kB,EAAM8kB,aAAe,MACvB9kB,EAAM08C,SAERzkC,GAAGgN,EAAI,QAAS,SAASjlC,GACvB,MAAIujC,GAAYvjC,EAAGquB,IACV,GACTA,EAAG7nB,MAAMqnB,eAAgB,MACzB7N,GAAM28C,cA2BR1kC,GAAGgN,EAAI,MAAOm3B,GACdnkC,GAAGgN,EAAI,OAAQm3B,GACfnkC,GAAGrL,EAAQkE,SAAU,QAAS,SAAS9wB,GACjCi6C,GAAcrtB,EAAS5sB,KAE3BquB,EAAG7nB,MAAMqnB,eAAgB,EACzB7N,EAAMoN,WAER6K,GAAGrL,EAAQ0D,UAAW,cAAe,SAAStwB,GACvCi6C,GAAcrtB,EAAS5sB,IAC1Bk6C,GAAiBl6C,KAErBi4B,GAAGgN,EAAI,mBAAoB,WACzB,GAAI98B,GAAQkmB,EAAGi6B,UAAU,OACrBtoC,GAAM+kB,WACR/kB,EAAM+kB,UAAUjC,MAAMtK,QACxBxY,EAAM+kB,WACJ58B,MAAOA,EACP26B,MAAOzU,EAAG68B,SAAS/iD,EAAOkmB,EAAGi6B,UAAU,OAAQh9C,UAAW,4BAG9D2sB,GAAGgN,EAAI,iBAAkB,WACnBjlB,EAAM+kB,YACR/kB,EAAM08C,OACN18C,EAAM+kB,UAAUjC,MAAMtK,QACtBxY,EAAM+kB,UAAY,SAIxBgH,iBAAkB,WAChB,GAAI1d,GAAKxyB,KAAKwyB,GACVzB,EAAUyB,EAAGzB,QACbL,EAAM8B,EAAG9B,IACT/hB,EAASuhC,GAAiB1d,EAC9B,IAAIA,EAAGzZ,QAAQgoD,oBAAqB,CAClC,GAAIC,GAAUpwB,GAAape,EAAI9B,EAAI8V,IAAIsH,UAAU3F,KAAM,OACnD84B,EAAUlwC,EAAQE,QAAQqO,wBAC1B4hC,EAAUnwC,EAAQgD,QAAQuL,uBAC9B3wB,GAAOwyD,MAAQpoC,KAAKC,IAAI,EAAGD,KAAKwF,IAAIxN,EAAQE,QAAQqK,aAAe,GAAI0lC,EAAQjjC,IAAMmjC,EAAQnjC,IAAMkjC,EAAQljC,MAC3GpvB,EAAOyyD,OAASroC,KAAKC,IAAI,EAAGD,KAAKwF,IAAIxN,EAAQE,QAAQgI,YAAc,GAAI+nC,EAAQpiC,KAAOsiC,EAAQtiC,KAAOqiC,EAAQriC,OAE/G,MAAOjwB,IAETshC,cAAe,SAASoxB,GACtB,GAAI7uC,GAAKxyB,KAAKwyB,GACVzB,EAAUyB,EAAGzB,OACjB2jB,IAAqB3jB,EAAQuD,UAAW+sC,EAAMjxB,SAC9CsE,GAAqB3jB,EAAQsD,aAAcgtC,EAAM9wB,WAC9B,MAAf8wB,EAAMF,QACRnhE,KAAKixB,QAAQ3mB,MAAMyzB,IAAMsjC,EAAMF,MAAQ,KACvCnhE,KAAKixB,QAAQ3mB,MAAMs0B,KAAOyiC,EAAMD,OAAS,OAG7CxuC,MAAO,SAAS6U,GACd,IAAIznC,KAAKshE,mBAAT,CAEA,GAAIC,GACAhd,EACA/xB,EAAKxyB,KAAKwyB,GACV9B,EAAM8B,EAAG9B,GACb,IAAI8B,EAAGooC,oBAAqB,CAC1B56D,KAAK6oC,UAAY,EACjB,IAAI5B,GAAQvW,EAAI8V,IAAIsH,SACpByzB,GAAUha,KAAiBtgB,EAAMpM,KAAKtc,KAAO0oB,EAAMrM,OAAOrc,KAAO,MAAQgmC,EAAW/xB,EAAGoyB,gBAAgB/kD,OAAS,IAChH,IAAI4K,GAAU82D,EAAU,IAAMhd,GAAY/xB,EAAGoyB,cAC7C5kD,MAAK4gE,SAASv+D,MAAQoI,EAClB+nB,EAAG7nB,MAAMmnB,SACX2uC,GAAYzgE,KAAK4gE,UACfnuC,IAAMC,IAAc,IACtB1yB,KAAKipC,aAAex+B,OACZg9B,KACVznC,KAAK6oC,UAAY7oC,KAAK4gE,SAASv+D,MAAQ,GACnCowB,IAAMC,IAAc,IACtB1yB,KAAKipC,aAAe,MAExBjpC,MAAKgpC,oBAAsBu4B,IAE7B7hB,SAAU,WACR,MAAO1/C,MAAK4gE,UAEd/f,cAAe,WACb,OAAO,GAETtvB,MAAO,WACL,GAAgC,YAA5BvxB,KAAKwyB,GAAGzZ,QAAQotB,YAA4B7U,IAAUyP,MAAe/gC,KAAK4gE,UAC5E,IACE5gE,KAAK4gE,SAASrvC,QACd,MAAOptB,MAGbq9D,KAAM,WACJxhE,KAAK4gE,SAASY,QAEhBC,cAAe,WACbzhE,KAAKixB,QAAQ3mB,MAAMyzB,IAAM/9B,KAAKixB,QAAQ3mB,MAAMs0B,KAAO,GAErD+oB,cAAe,WACb3nD,KAAK0hE,YAEPA,SAAU,WACR,GAAIv9C,GAAQnkB,IACRmkB,GAAM2kB,aAEV3kB,EAAM4kB,QAAQhkC,IAAI/E,KAAKwyB,GAAGzZ,QAAQ4oD,aAAc,WAC9Cx9C,EAAM08C,OACF18C,EAAMqO,GAAG7nB,MAAMmnB,SACjB3N,EAAMu9C,cAGZZ,SAAU,WAIR,QAASv+D,KACP,GAAI6oD,GAAUjnC,EAAM08C,MACfzV,IAAYwW,GAIfz9C,EAAM2kB,aAAc,EACpB3kB,EAAMu9C,aAJNE,GAAS,EACTz9C,EAAM4kB,QAAQhkC,IAAI,GAAIxC,IAP1B,GAAIq/D,IAAS,EACTz9C,EAAQnkB,IACZmkB,GAAM2kB,aAAc,EAWpB3kB,EAAM4kB,QAAQhkC,IAAI,GAAIxC,IAExBs+D,KAAM,WACJ,GAAIruC,GAAKxyB,KAAKwyB,GACVrO,EAAQnkB,KAAK4gE,SACb/3B,EAAY7oC,KAAK6oC,SACrB,IAAI7oC,KAAKshE,qBAAuB9uC,EAAG7nB,MAAMmnB,SAAYmX,GAAa9kB,KAAW0kB,IAAc7oC,KAAKkpC,WAAchD,EAAW1T,IAAOA,EAAGzZ,QAAQgvB,cAAgBvV,EAAG7nB,MAAM2nB,OAClK,OAAO,CACT,IAAIpW,GAAOiI,EAAM9hB,KACjB,IAAI6Z,GAAQ2sB,IAAcrW,EAAGooC,oBAC3B,OAAO,CACT,IAAInoC,IAAMC,IAAc,GAAK1yB,KAAKipC,eAAiB/sB,GAAQwmB,IAAO,kBAAkB33B,KAAKmR,GAEvF,MADAsW,GAAGzB,QAAQ5M,MAAMyO,SACV,CAET,IAAIJ,EAAG9B,IAAI8V,KAAOhU,EAAGzB,QAAQsG,kBAAmB,CAC9C,GAAI5B,GAAQvZ,EAAKgK,WAAW,EAG5B,IAFa,MAATuP,GAAoBoT,IACtBA,EAAY,KACD,MAATpT,EAEF,MADAz1B,MAAK4yB,QACE5yB,KAAKwyB,GAAGqvC,YAAY,QAK/B,IAFA,GAAIC,GAAO,EACP/gE,EAAIg4B,KAAKwF,IAAIsK,EAAUhpC,OAAQqc,EAAKrc,QAC1BkB,EAAP+gE,GAAYj5B,EAAU3iB,WAAW47C,IAAS5lD,EAAKgK,WAAW47C,MAC7DA,CACJ,IAAI18D,GAAOpF,IAYX,OAXAgoC,IAAQxV,EAAI,WACV6T,EAAe7T,EAAItW,EAAK/K,MAAM2wD,GAAOj5B,EAAUhpC,OAASiiE,EAAM,KAAM18D,EAAK8jC,UAAY,WAAa,MAC9FhtB,EAAKrc,OAAS,KAAQqc,EAAKvb,QAAQ,MAAQ,GAC7CwjB,EAAM9hB,MAAQ+C,EAAKyjC,UAAY,GAE/BzjC,EAAKyjC,UAAY3sB,EACf9W,EAAK8jC,YACP9jC,EAAK8jC,UAAUjC,MAAMtK,QACrBv3B,EAAK8jC,UAAUjC,MAAQzU,EAAG68B,SAASjqD,EAAK8jC,UAAU58B,MAAOkmB,EAAGi6B,UAAU,OAAQh9C,UAAW,6BAGtF,GAET22C,aAAc,WACRpmD,KAAK8oC,aAAe9oC,KAAK6gE,SAC3B7gE,KAAK8oC,aAAc,IAEvB+W,WAAY,WACNptB,IAAMC,IAAc,IACtB1yB,KAAKipC,aAAe,MACtBjpC,KAAK8gE,YAEPtiB,cAAe,SAASr6C,GA0BtB,QAAS49D,KACP,GAAyB,MAArB34B,EAAG44B,eAAwB,CAC7B,GAAIzd,GAAW/xB,EAAGooC,oBACdqH,EAAS,KAAY1d,EAAWnb,EAAG/mC,MAAQ,GAC/C+mC,GAAG/mC,MAAQ,IACX+mC,EAAG/mC,MAAQ4/D,EACX99C,EAAM0kB,UAAY0b,EAAW,GAAK,IAClCnb,EAAG44B,eAAiB,EACpB54B,EAAG84B,aAAeD,EAAOpiE,OACzBkxB,EAAQsG,kBAAoB7E,EAAG9B,IAAI8V,KAGvC,QAAS27B,KAMP,GALAh+C,EAAMm9C,oBAAqB,EAC3Bn9C,EAAM8M,QAAQ3mB,MAAMq7B,SAAW,WAC/ByD,EAAG9+B,MAAM8yD,QAAUgF,EACf3vC,IAAmB,EAAbC,IACR3B,EAAQ2L,WAAWQ,aAAanM,EAAQkE,SAASoH,UAAYivB,GACtC,MAArBliB,EAAG44B,eAAwB,GACxBvvC,IAAOA,IAAmB,EAAbC,KAChBqvC,GACF,IAAIjhE,GAAI,EACJ+/D,EAAO,WACD9vC,EAAQsG,mBAAqB7E,EAAG9B,IAAI8V,KAA4B,GAArB4C,EAAG44B,gBAAuB54B,EAAG84B,aAAe,GAAwB,KAAnB/9C,EAAM0kB,UACpG0T,GAAU/pB,EAAI2zB,GAASkc,WAAW7vC,GAC3B1xB,IAAM,GACbiwB,EAAQuxC,mBAAqB3vC,WAAWkuC,EAAM,KAE9C9vC,EAAQ5M,MAAMyO,QAEtB7B,GAAQuxC,mBAAqB3vC,WAAWkuC,EAAM,MAvDlD,GAAI18C,GAAQnkB,KACRwyB,EAAKrO,EAAMqO,GACXzB,EAAUyB,EAAGzB,QACbqY,EAAKjlB,EAAMy8C,SACXn0D,EAAMyxC,GAAa1rB,EAAIruB,GACvBmnD,EAAYv6B,EAAQkE,SAASoH,SACjC,IAAK5vB,IAAOw4C,GAAZ,CAEA,GAAIryB,GAAQJ,EAAGzZ,QAAQwpD,2BACnB3vC,IAAqC,IAA5BJ,EAAG9B,IAAI8V,IAAI4E,SAAS3+B,IAC/B8vC,GAAU/pB,EAAIqb,IAAcrb,EAAG9B,IAAKuc,GAAgBxgC,GAAMwiC,GAC5D,IAAImzB,GAASh5B,EAAG9+B,MAAM8yD,OAGtB,IAFAj5C,EAAM8M,QAAQ3mB,MAAMq7B,SAAW,WAC/ByD,EAAG9+B,MAAM8yD,QAAU,qDAAuDj5D,EAAEw8C,QAAU,GAAK,cAAgBx8C,EAAEu8C,QAAU,GAAK,mCAAqCjuB,GAAK,2BAA6B,eAAiB,6GAChNoB,GACF,GAAI2uC,GAAah6C,OAAOi6C,OA6C1B,IA5CA1xC,EAAQ5M,MAAMoN,QACVsC,IACFrL,OAAOokC,SAAS,KAAM4V,GACxBzxC,EAAQ5M,MAAMyO,QACTJ,EAAGooC,sBACNxxB,EAAG/mC,MAAQ8hB,EAAM0kB,UAAY,KAC/B1kB,EAAMm9C,oBAAqB,EAC3BvwC,EAAQsG,kBAAoB7E,EAAG9B,IAAI8V,IACnCiY,aAAa1tB,EAAQuxC,oBAkCjB7vC,IAAMC,IAAc,GACtBqvC,IACExjB,GAAmB,CACrBU,GAAO96C,EACP,IAAIu+D,GAAU,WACZviB,GAAI33B,OAAQ,UAAWk6C,GACvB/vC,WAAWwvC,EAAQ,IAErB/lC,IAAG5T,OAAQ,UAAWk6C,OAEtB/vC,YAAWwvC,EAAQ,MAGvBQ,gBAAiB,SAASl2B,GACnBA,GACHzsC,KAAK4yB,SAETkS,cAAe43B,GACf/E,uBAAuB,GACtB/uB,GAAc5kC,WAOjBwlC,GAAqBxlC,UAAYusB,IAC/BgH,KAAM,SAASxG,GAkDb,QAAS6xC,GAAUz+D,GACjB,GAAIquB,EAAGooC,oBACL7zB,GAAavU,EAAGguC,gBACF,OAAVr8D,EAAEqG,MACJgoB,EAAGkyB,iBAAiB,GAAI,KAAM,WAC3B,CAAA,IAAKlyB,EAAGzZ,QAAQ2nD,gBACrB,MAEA,IAAI55B,GAASwB,GAAe9V,EAC5BuU,IAAaD,EAAO5qB,KACN,OAAV/X,EAAEqG,MACJgoB,EAAG+pB,UAAU,WACX/pB,EAAGmuC,cAAc75B,EAAOA,OAAQ,EAAGmI,IACnCzc,EAAGkyB,iBAAiB,GAAI,KAAM,SAIpC,GAAIvgD,EAAEyjC,gBAAkB0B,GACtBnlC,EAAE2jC,iBACF3jC,EAAEyjC,cAAci7B,YAChB1+D,EAAEyjC,cAAc+c,QAAQ,aAAc5d,GAAWziB,KAAK,WACjD,CACL,GAAIw+C,GAAS35B,KACTC,EAAK05B,EAAOrkC,UAChBjM,GAAGzB,QAAQ0D,UAAUsI,aAAa+lC,EAAQtwC,EAAGzB,QAAQ0D,UAAUgK,YAC/D2K,EAAG/mC,MAAQ0kC,GAAWziB,KAAK,KAC3B,IAAIy+C,GAAW1/B,SAASi6B,aACxBmD,IAAYr3B,GACZzW,WAAW,WACTH,EAAGzB,QAAQ0D,UAAUoO,YAAYigC,GACjCC,EAASxxC,SACR,KAhFP,GAAIpN,GAAQnkB,KACRwyB,EAAKrO,EAAMqO,GACX6W,EAAMllB,EAAMklB,IAAMtY,EAAQgD,OAC9B2U,IAAoBW,GACpBjN,GAAGiN,EAAK,QAAS,SAASllC,GACxBujC,EAAYvjC,EAAGquB,KAEjB4J,GAAGiN,EAAK,mBAAoB,SAASllC,GACnC,GAAIywC,GAAOzwC,EAAEywC,IAMb,IALAzwB,EAAM+kB,WACJ1C,IAAKhU,EAAG9B,IAAI8V,IACZoO,KAAMA,EACNouB,UAAWpuB,GAERA,EAAL,CAEA,GAAI9H,GAAOta,EAAG9B,IAAI8V,IAAIsH,UAClBvvB,EAAOiU,EAAGuI,QAAQ+R,EAAK3E,KAAK5pB,MAC5Bmc,EAAQnc,EAAK5d,QAAQi0C,EAAM7b,KAAKC,IAAI,EAAG8T,EAAK3E,KAAKv9B,GAAKgqC,EAAK/0C,QAC3D66B,GAAQ,IAAMA,GAASoS,EAAK3E,KAAKv9B,KACnCuZ,EAAM+kB,UAAU1C,IAAMyG,GAAgBpH,GAAIiH,EAAK3E,KAAK5pB,KAAMmc,GAAQmL,GAAIiH,EAAK3E,KAAK5pB,KAAMmc,EAAQka,EAAK/0C,aAEvGu8B,GAAGiN,EAAK,oBAAqB,SAASllC,GACpCggB,EAAM+kB,UAAU0L,KAAOzwC,EAAEywC,OAE3BxY,GAAGiN,EAAK,iBAAkB,SAASllC,GACjC,GAAI8+D,GAAO9+C,EAAM+kB,SACZ+5B,KAED9+D,EAAEywC,MAAQquB,EAAKD,WAAc,SAASj4D,KAAK5G,EAAEywC,QAC/CquB,EAAKruB,KAAOzwC,EAAEywC,MAChBjiB,WAAW,WACJswC,EAAK5b,SACRljC,EAAM++C,iBAAiBD,GACrB9+C,EAAM+kB,WAAa+5B,IACrB9+C,EAAM+kB,UAAY,OACnB,OAEL9M,GAAGiN,EAAK,aAAc,WACpBllB,EAAMg/C,wBAER/mC,GAAGiN,EAAK,QAAS,WACXllB,EAAM+kB,YAENhD,EAAW1T,KAAQrO,EAAMi/C,gBAC3Bp7B,GAAQ7jB,EAAMqO,GAAI,WAChByF,GAAUzF,OAqChB4J,GAAGiN,EAAK,OAAQu5B,GAChBxmC,GAAGiN,EAAK,MAAOu5B,IAEjB1yB,iBAAkB,WAChB,GAAIvhC,GAASuhC,GAAiBlwC,KAAKwyB,IAAI,EAEvC,OADA7jB,GAAO4iB,MAAQvxB,KAAKwyB,GAAG7nB,MAAMmnB,QACtBnjB,GAETshC,cAAe,SAAS/iC,GACjBA,GAASlN,KAAKwyB,GAAGzB,QAAQ6E,KAAK/1B,SAE/BqN,EAAKqkB,OACPvxB,KAAKqjE,uBACPrjE,KAAKsjE,uBAAuBp2D,KAE9Bm2D,qBAAsB,WACpB,GAAI78B,GAAMhe,OAAOo8B,eACb9X,EAAO9sC,KAAKwyB,GAAG9B,IAAI8V,IAAIsH,UACvBy1B,EAAY74B,GAAS1qC,KAAKwyB,GAAIgU,EAAIg9B,WAAYh9B,EAAIi9B,cAClDC,EAAWh5B,GAAS1qC,KAAKwyB,GAAIgU,EAAIm9B,UAAWn9B,EAAIo9B,YACpD,KAAIL,GAAcA,EAAU94B,MAAOi5B,GAAaA,EAASj5B,KAAwD,GAAjD1E,GAAIC,EAAOu9B,EAAWG,GAAW52B,EAAKlS,SAA+D,GAA/CmL,GAAID,EAAOy9B,EAAWG,GAAW52B,EAAKjS,MAA5J,CAEA,GAAIvuB,GAAQw9B,GAAS9pC,KAAKwyB,GAAIsa,EAAKlS,QAC/BjpB,EAAMm4B,GAAS9pC,KAAKwyB,GAAIsa,EAAKjS,KACjC,IAAKvuB,GAAUqF,EAAf,CAEA,GAAIikB,GAAO51B,KAAKwyB,GAAGzB,QAAQ6E,KACvBmqB,EAAMvZ,EAAIq9B,YAAcr9B,EAAIs9B,WAAW,EAC3C,IAAKx3D,GAKE,IAAKqF,EAAK,CACf,GAAI4iB,GAAUqB,EAAKA,EAAK/1B,OAAS,GAAG00B,QAChCyS,EAAMzS,EAAQ0W,KAAO1W,EAAQ0W,KAAK1W,EAAQ0W,KAAKprC,OAAS,GAAK00B,EAAQyS,GACzEr1B,IACEmrB,KAAMkK,EAAIA,EAAInnC,OAAS,GACvB+e,OAAQooB,EAAIA,EAAInnC,OAAS,GAAKmnC,EAAIA,EAAInnC,OAAS,SATjDyM,IACEwwB,KAAMlH,EAAK,GAAGrB,QAAQyS,IAAI,GAC1BpoB,OAAQ,EAUZ,KACE,GAAImlD,GAAM98B,GAAM36B,EAAMwwB,KAAMxwB,EAAMsS,OAAQjN,EAAIiN,OAAQjN,EAAImrB,MAC1D,MAAO34B,IACL4/D,IACFv9B,EAAIw9B,kBACJx9B,EAAIy9B,SAASF,GACThkB,GAAyB,MAAlBvZ,EAAIg9B,WACbh9B,EAAIy9B,SAASlkB,GACN3qB,IACPp1B,KAAKkkE,oBAETlkE,KAAKmkE,uBAEPD,iBAAkB,WAChB,GAAI//C,GAAQnkB,IACZy+C,cAAaz+C,KAAK6pC,aAClB7pC,KAAK6pC,YAAclX,WAAW,WAC5BxO,EAAM0lB,aAAc,EAChB1lB,EAAM2qB,oBACR3qB,EAAMqO,GAAG+pB,UAAU,WACjBp4B,EAAMqO,GAAGQ,MAAM8b,kBAAmB,KAErC,KAELw0B,uBAAwB,SAASp2D,GAC/BwnC,GAAqB10C,KAAKwyB,GAAGzB,QAAQuD,UAAWpnB,EAAKkjC,SACrDsE,GAAqB10C,KAAKwyB,GAAGzB,QAAQsD,aAAcnnB,EAAKqjC,YAE1D4zB,kBAAmB,WACjB,GAAI39B,GAAMhe,OAAOo8B,cACjB5kD,MAAKypC,eAAiBjD,EAAIg9B,WAC1BxjE,KAAK0pC,iBAAmBlD,EAAIi9B,aAC5BzjE,KAAK2pC,cAAgBnD,EAAIm9B,UACzB3jE,KAAK4pC,gBAAkBpD,EAAIo9B,aAE7BQ,kBAAmB,WACjB,GAAI59B,GAAMhe,OAAOo8B,cACjB,KAAKpe,EAAIq9B,WACP,OAAO,CACT,IAAI/mC,GAAO0J,EAAIs9B,WAAW,GAAGO,uBAC7B,OAAOj5B,IAASprC,KAAKqpC,IAAKvM,IAE5BvL,MAAO,WAC2B,YAA5BvxB,KAAKwyB,GAAGzZ,QAAQotB,UAClBnmC,KAAKqpC,IAAI9X,SAEbiwC,KAAM,WACJxhE,KAAKqpC,IAAIm4B,QAEX9hB,SAAU,WACR,MAAO1/C,MAAKqpC,KAEdwX,cAAe,WACb,OAAO,GAET8G,cAAe,WAQb,QAASkZ,KACH18C,EAAMqO,GAAG7nB,MAAMmnB,UACjB3N,EAAMmgD,gBACNngD,EAAM4kB,QAAQhkC,IAAIof,EAAMqO,GAAGzZ,QAAQ4oD,aAAcd,IAVrD,GAAI18C,GAAQnkB,IACRA,MAAKokE,oBACPpkE,KAAKskE,gBAELt8B,GAAQhoC,KAAKwyB,GAAI,WACfrO,EAAMqO,GAAGQ,MAAM8b,kBAAmB,IAQtC9uC,KAAK+oC,QAAQhkC,IAAI/E,KAAKwyB,GAAGzZ,QAAQ4oD,aAAcd,IAEjD/xB,iBAAkB,WAChB,GAAItI,GAAMhe,OAAOo8B,cACjB,OAAOpe,GAAIg9B,YAAcxjE,KAAKypC,gBAAkBjD,EAAIi9B,cAAgBzjE,KAAK0pC,kBAAoBlD,EAAIm9B,WAAa3jE,KAAK2pC,eAAiBnD,EAAIo9B,aAAe5jE,KAAK4pC,iBAE9J06B,cAAe,WACb,IAAKtkE,KAAKkpC,YAAclpC,KAAK6pC,aAAe7pC,KAAK8uC,mBAAoB,CACnE,GAAItI,GAAMhe,OAAOo8B,eACbpyB,EAAKxyB,KAAKwyB,EACdxyB,MAAKmkE,mBACL,IAAI37B,GAASkC,GAASlY,EAAIgU,EAAIg9B,WAAYh9B,EAAIi9B,cAC1Ct7B,EAAOuC,GAASlY,EAAIgU,EAAIm9B,UAAWn9B,EAAIo9B;AACvCp7B,GAAUL,GACZH,GAAQxV,EAAI,WACVqb,GAAarb,EAAG9B,IAAKuc,GAAgBzE,EAAQL,GAAO8G,KAChDzG,EAAOiC,KAAOtC,EAAKsC,OACrBjY,EAAGQ,MAAM8b,kBAAmB,OAItCs0B,YAAa,WACX,GAAI5wC,GAAKxyB,KAAKwyB,GACVzB,EAAUyB,EAAGzB,QACbyV,EAAMhU,EAAG9B,IAAI8V,IAAIsH,UACjBlT,EAAO4L,EAAI5L,OACXC,EAAK2L,EAAI3L,IACb,IAAID,EAAKrc,KAAOwS,EAAQwE,UAAYsF,EAAGtc,KAAOwS,EAAQyE,OAAS,EAC7D,OAAO,CACT,IAAI+uC,EACJ,IAAI3pC,EAAKrc,MAAQwS,EAAQwE,UAA0D,IAA7CgvC,EAAY3uB,GAAcpjB,EAAIoI,EAAKrc,OACvE,GAAIstB,GAAWV,GAAOpa,EAAQ6E,KAAK,GAAGrX,MAClCimD,EAAWzzC,EAAQ6E,KAAK,GAAGkH,SAE/B,IAAI+O,GAAWV,GAAOpa,EAAQ6E,KAAK2uC,GAAWhmD,MAC1CimD,EAAWzzC,EAAQ6E,KAAK2uC,EAAY,GAAGznC,KAAKsF,WAElD,IAAIqiC,GAAU7uB,GAAcpjB,EAAIqI,EAAGtc,KACnC,IAAIkmD,GAAW1zC,EAAQ6E,KAAK/1B,OAAS,EACnC,GAAIisC,GAAS/a,EAAQyE,OAAS,EAC1BkvC,EAAS3zC,EAAQgD,QAAQgjC,cAE7B,IAAIjrB,GAASX,GAAOpa,EAAQ6E,KAAK6uC,EAAU,GAAGlmD,MAAQ,EAClDmmD,EAAS3zC,EAAQ6E,KAAK6uC,EAAU,GAAG3nC,KAAK6O,eAI9C,KAFA,GAAIg5B,GAAUnyC,EAAG9B,IAAIkW,WAAWgF,GAAepZ,EAAIgyC,EAAUE,EAAQ74B,EAAUC,IAC3E84B,EAAUt4B,GAAW9Z,EAAG9B,IAAKmV,GAAIgG,EAAU,GAAIhG,GAAIiG,EAAQ/Q,GAAQvI,EAAG9B,IAAKob,GAAQ5vB,KAAKrc,SACrF8kE,EAAQ9kE,OAAS,GAAK+kE,EAAQ/kE,OAAS,GAC5C,GAAIsnC,GAAIw9B,IAAYx9B,GAAIy9B,GACtBD,EAAQp8D,MACRq8D,EAAQr8D,MACRujC,QACK,CAAA,GAAI64B,EAAQ,IAAMC,EAAQ,GAK/B,KAJAD,GAAQj/D,QACRk/D,EAAQl/D,QACRmmC,IASJ,IALA,GAAIg5B,GAAW,EACXC,EAAS,EACT3Y,EAASwY,EAAQ,GACjBI,EAASH,EAAQ,GACjBI,EAAcjsC,KAAKwF,IAAI4tB,EAAOtsD,OAAQklE,EAAOllE,QAC/BmlE,EAAXH,GAA0B1Y,EAAOjmC,WAAW2+C,IAAaE,EAAO7+C,WAAW2+C,MAC9EA,CAIJ,KAHA,GAAII,GAAS99B,GAAIw9B,GACbO,EAAS/9B,GAAIy9B,GACbO,EAAYpsC,KAAKwF,IAAI0mC,EAAOplE,QAA4B,GAAlB8kE,EAAQ9kE,OAAcglE,EAAW,GAAIK,EAAOrlE,QAA4B,GAAlB+kE,EAAQ/kE,OAAcglE,EAAW,IACjHM,EAATL,GAAsBG,EAAO/+C,WAAW++C,EAAOplE,OAASilE,EAAS,IAAMI,EAAOh/C,WAAWg/C,EAAOrlE,OAASilE,EAAS,MACrHA,CACJH,GAAQA,EAAQ9kE,OAAS,GAAKolE,EAAO9zD,MAAM,EAAG8zD,EAAOplE,OAASilE,GAC9DH,EAAQ,GAAKA,EAAQ,GAAGxzD,MAAM0zD,EAC9B,IAAIO,GAASv/B,GAAIgG,EAAUg5B,GACvBQ,EAAOx/B,GAAIiG,EAAQ84B,EAAQ/kE,OAASsnC,GAAIy9B,GAAS/kE,OAASilE,EAAS,EACvE,OAAIH,GAAQ9kE,OAAS,GAAK8kE,EAAQ,IAAM5+B,GAAIq/B,EAAQC,IAClD5gB,GAAajyB,EAAG9B,IAAKi0C,EAASS,EAAQC,EAAM,WACrC,GAFT,QAKFjf,aAAc,WACZpmD,KAAKmjE,uBAEPvwC,MAAO,WACL5yB,KAAKmjE,uBAEPA,oBAAqB,WACdnjE,KAAKkpC,YAAalpC,KAAKkpC,UAAUme,UAEtCrnD,KAAKkjE,iBAAiBljE,KAAKkpC,WAC3BlpC,KAAKkpC,UAAUme,SAAU,EACzBrnD,KAAKqpC,IAAIm4B,OACTxhE,KAAKqpC,IAAI9X,UAEX2xC,iBAAkB,SAASh6B,GACrBhD,EAAWlmC,KAAKwyB,IAClB+pB,GAAUv8C,KAAKwyB,GAAIyF,IAAWj4B,KAAKwyB,IAC5B0W,EAAU0L,MAAQ1L,EAAU0L,MAAQ1L,EAAU85B,WACrDzmB,GAAUv8C,KAAKwyB,GAAI6T,GAAgBrmC,KAAKwyB,GAAI0W,EAAU0L,KAAM,EAAG1L,EAAU1C,MAE7E1B,cAAe,SAAShI,GACtBA,EAAKwoC,gBAAkB,SAEzBzlB,WAAY,SAAS17C,GACnBA,EAAE2jC,iBACG5B,EAAWlmC,KAAKwyB,KACnB+pB,GAAUv8C,KAAKwyB,GAAI6T,GAAgBrmC,KAAKwyB,GAAI3K,OAAOC,aAA2B,MAAd3jB,EAAEsjD,SAAmBtjD,EAAEgjD,QAAUhjD,EAAEsjD,UAAW,IAElHkb,gBAAiB,SAASl2B,GACxBzsC,KAAKqpC,IAAIi8B,gBAAkBz9C,OAAc,YAAP4kB,IAEpC+R,cAAeke,GACf+E,cAAe/E,GACf/E,uBAAuB,GACtBnuB,GAAqBxlC,WA2JxB4F,EAAWinB,aACT+vC,SAAYh4B,GACZ28B,gBAAmB/7B,IAMrBkD,GAAU1oC,WACR8pC,QAAS,WACP,MAAO9tC,MAAK8mC,OAAO9mC,KAAK2sC,YAE1BkC,OAAQ,SAASpB,GACf,GAAIA,GAASztC,KACX,OAAO,CACT,IAAIytC,EAAMd,WAAa3sC,KAAK2sC,WAAac,EAAM3G,OAAOjnC,QAAUG,KAAK8mC,OAAOjnC,OAC1E,OAAO,CACT,KAAK,GAAIiB,GAAI,EAAGA,EAAId,KAAK8mC,OAAOjnC,OAAQiB,IAAK,CAC3C,GAAI0kE,GAAOxlE,KAAK8mC,OAAOhmC,GACnB2kE,EAAQh4B,EAAM3G,OAAOhmC,EACzB,IAAsC,GAAlCilC,GAAIy/B,EAAKh9B,OAAQi9B,EAAMj9B,SAA8C,GAA9BzC,GAAIy/B,EAAKr9B,KAAMs9B,EAAMt9B,MAC9D,OAAO,EAEX,OAAO,GAET+yB,SAAU,WACR,IAAK,GAAI1/C,MACL1a,EAAI,EAAGA,EAAId,KAAK8mC,OAAOjnC,OAAQiB,IACjC0a,EAAI1a,GAAK,GAAI8rC,IAAMhH,EAAQ5lC,KAAK8mC,OAAOhmC,GAAG0nC,QAAS5C,EAAQ5lC,KAAK8mC,OAAOhmC,GAAGqnC,MAC5E,OAAO,IAAIuE,IAAUlxB,EAAKxb,KAAK2sC,YAEjCiuB,kBAAmB,WACjB,IAAK,GAAI95D,GAAI,EAAGA,EAAId,KAAK8mC,OAAOjnC,OAAQiB,IACtC,IAAKd,KAAK8mC,OAAOhmC,GAAGomC,QAClB,OAAO,CACX,QAAO,GAETkE,SAAU,SAAS3+B,EAAKkF,GACjBA,IACHA,EAAMlF,EACR,KAAK,GAAI3L,GAAI,EAAGA,EAAId,KAAK8mC,OAAOjnC,OAAQiB,IAAK,CAC3C,GAAImmC,GAAQjnC,KAAK8mC,OAAOhmC,EACxB,IAAIilC,GAAIp0B,EAAKs1B,EAAMrM,SAAW,GAAKmL,GAAIt5B,EAAKw6B,EAAMpM,OAAS,EACzD,MAAO/5B,GAEX,MAAO,KAOX8rC,GAAM5oC,WACJ42B,KAAM,WACJ,MAAOoL,GAAOhmC,KAAKwoC,OAAQxoC,KAAKmoC,OAElCtN,GAAI,WACF,MAAOiL,GAAO9lC,KAAKwoC,OAAQxoC,KAAKmoC,OAElCjB,MAAO,WACL,MAAOlnC,MAAKmoC,KAAK5pB,MAAQve,KAAKwoC,OAAOjqB,MAAQve,KAAKmoC,KAAKv9B,IAAM5K,KAAKwoC,OAAO59B,IA0jB7E,IAuWIyvC,IA0nBA+G,GACAD,GAl+BAxK,IACF/X,KAAM,EACNnB,MAAO,EACPM,IAAK,EACLJ,OAAQ,GAkYNkd,GAAiB,KACjBD,GAAW,EAg1BX8I,GAAW,EA+HXkC,GAAe,EACfF,GAAqB,IACrBjzB,IACFizB,IAAsB,IACftwB,GACPswB,GAAqB,GACd8Z,GACP9Z,IAAsB,GACfZ,KACPY,GAAqB,GAAK,EAC5B,IAAIH,IAAkB,SAASphD,GAC7B,GAAI25C,GAAK35C,EAAEuhE,YACP3nB,EAAK55C,EAAEwhE,WAOX,OANU,OAAN7nB,GAAc35C,EAAEyhE,QAAUzhE,EAAE64B,MAAQ74B,EAAE0hE,kBACxC/nB,EAAK35C,EAAEyhE,QACC,MAAN7nB,GAAc55C,EAAEyhE,QAAUzhE,EAAE64B,MAAQ74B,EAAE2hE,cACxC/nB,EAAK55C,EAAEyhE,OACM,MAAN7nB,IACPA,EAAK55C,EAAE4hE,aAEPvhD,EAAGs5B,EACHpwB,EAAGqwB,GAGPn0C,GAAWo8D,iBAAmB,SAAS7hE,GACrC,GAAImhD,GAAQC,GAAgBphD,EAG5B,OAFAmhD,GAAM9gC,GAAKkhC,GACXJ,EAAM53B,GAAKg4B,GACJJ,EAkGT,IAAIwB,IAAU,GAAIz0B,IAmDdi1B,GAAiB,KA8GjBjD,GAAYz6C,EAAWy6C,UAAY,SAASD,GAC9C,MAAKA,GAAOloC,KAEL2pB,GAAIue,EAAOxpB,KAAKrc,KAAO6lC,EAAOloC,KAAKrc,OAAS,EAAGsnC,GAAIid,EAAOloC,MAAMrc,QAAgC,GAAtBukD,EAAOloC,KAAKrc,OAAcukD,EAAOxpB,KAAKhwB,GAAK,IADnHw5C,EAAOvpB,GA6lBlBjxB,GAAW5F,WACTwS,YAAa5M,EACb2nB,MAAO,WACL/I,OAAO+I,QACPvxB,KAAK+wB,QAAQ5M,MAAMoN,SAErB00C,UAAW,SAASrX,EAAQvsD,GAC1B,GAAI0W,GAAU/Y,KAAK+Y,QACfgnC,EAAMhnC,EAAQ61C,IACd71C,EAAQ61C,IAAWvsD,GAAmB,QAAVusD,KAEhC71C,EAAQ61C,GAAUvsD,EACdkxB,GAAe9vB,eAAemrD,IAChCrS,GAAUv8C,KAAMuzB,GAAeq7B,IAAS5uD,KAAMqC,EAAO09C,KAEzDuW,UAAW,SAAS1H,GAClB,MAAO5uD,MAAK+Y,QAAQ61C,IAEtBsX,OAAQ,WACN,MAAOlmE,MAAK0wB,KAEdy1C,UAAW,SAASn/B,EAAKrJ,GACvB39B,KAAK2K,MAAM8mB,QAAQkM,EAAS,OAAS,WAAWyxB,GAAUpoB,KAE5Do/B,aAAc,SAASp/B,GAErB,IAAK,GADDiE,GAAOjrC,KAAK2K,MAAM8mB,QACb3wB,EAAI,EAAGA,EAAImqC,EAAKprC,SAAUiB,EACjC,GAAImqC,EAAKnqC,IAAMkmC,GAAOiE,EAAKnqC,GAAGrB,MAAQunC,EAEpC,MADAiE,GAAK5pC,OAAOP,EAAG,IACR,GAGbulE,WAAY7pB,GAAS,SAAS8pB,EAAMvtD,GAClC,GAAIM,GAAOitD,EAAKhvD,MAAQgvD,EAAO18D,EAAW6tB,QAAQz3B,KAAK+Y,QAASutD,EAChE,IAAIjtD,EAAKjC,WACP,KAAM,IAAIpU,OAAM,gCAClBhD,MAAK2K,MAAM+mB,SAAS7wB,MAClBwY,KAAMA,EACNktD,SAAUD,EACV1Q,OAAQ78C,GAAWA,EAAQ68C,SAE7B51D,KAAK2K,MAAMgnB,UACXsG,GAAUj4B,QAEZwmE,cAAehqB,GAAS,SAAS8pB,GAE/B,IAAK,GADD50C,GAAW1xB,KAAK2K,MAAM+mB,SACjB5wB,EAAI,EAAGA,EAAI4wB,EAAS7xB,SAAUiB,EAAG,CACxC,GAAI05B,GAAM9I,EAAS5wB,GAAGylE,QACtB,IAAI/rC,GAAO8rC,GAAuB,gBAARA,IAAoB9rC,EAAI/6B,MAAQ6mE,EAIxD,MAHA50C,GAASrwB,OAAOP,EAAG,GACnBd,KAAK2K,MAAMgnB,cACXsG,IAAUj4B,SAKhBqoC,WAAYmU,GAAS,SAASlvB,EAAGkiB,EAAKsd,GAClB,gBAAPtd,IAAiC,gBAAPA,KAEjCA,EADS,MAAPA,EACIxvC,KAAK+Y,QAAQmvB,YAAc,QAAU,OAErCsH,EAAM,MAAQ,YAEpBnC,GAAOrtC,KAAK0wB,IAAKpD,IACnB+a,GAAWroC,KAAMstB,EAAGkiB,EAAKsd,KAE7B2Z,gBAAiBjqB,GAAS,SAASqQ,GAGjC,IAAK,GAFD/lB,GAAS9mC,KAAK0wB,IAAI8V,IAAIM,OACtBn1B,EAAM,GACD7Q,EAAI,EAAGA,EAAIgmC,EAAOjnC,OAAQiB,IAAK,CACtC,GAAImmC,GAAQH,EAAOhmC,EACnB,IAAKmmC,EAAMC,QAUAD,EAAMkB,KAAK5pB,KAAO5M,IAC3B02B,GAAWroC,KAAMinC,EAAMkB,KAAK5pB,KAAMsuC,GAAK,GACvCl7C,EAAMs1B,EAAMkB,KAAK5pB,KACbzd,GAAKd,KAAK0wB,IAAI8V,IAAImG,WACpBnF,GAAoBxnC,WAdJ,CAClB,GAAI46B,GAAOqM,EAAMrM,OACbC,EAAKoM,EAAMpM,KACXvuB,EAAQysB,KAAKC,IAAIrnB,EAAKipB,EAAKrc,KAC/B5M,GAAMonB,KAAKwF,IAAIv+B,KAAKw+B,WAAY3D,EAAGtc,MAAQsc,EAAGjwB,GAAK,EAAI,IAAM,CAC7D,KAAK,GAAIjJ,GAAI2K,EAAWqF,EAAJhQ,IAAWA,EAC7B0mC,GAAWroC,KAAM2B,EAAGkrD,EACtB,IAAI6Z,GAAY1mE,KAAK0wB,IAAI8V,IAAIM,MACd,IAAXlM,EAAKhwB,IAAWk8B,EAAOjnC,QAAU6mE,EAAU7mE,QAAU6mE,EAAU5lE,GAAG85B,OAAOhwB,GAAK,GAChFsjC,GAAoBluC,KAAK0wB,IAAK5vB,EAAG,GAAI8rC,IAAMhS,EAAM8rC,EAAU5lE,GAAG+5B,MAAOoU,QAS7E03B,WAAY,SAASl6D,EAAKynC,GACxB,MAAOygB,IAAU30D,KAAMyM,EAAKynC,IAE9B0yB,cAAe,SAASroD,EAAM21B,GAC5B,MAAOygB,IAAU30D,KAAM6lC,GAAItnB,GAAO21B,GAAS,IAE7C2yB,eAAgB,SAASp6D,GACvBA,EAAMo+B,GAAQ7qC,KAAK0wB,IAAKjkB,EACxB,IAIIjC,GAJAstB,EAAS+9B,GAAc71D,KAAM+6B,GAAQ/6B,KAAK0wB,IAAKjkB,EAAI8R,OACnDmtB,EAAS,EACTH,GAASzT,EAAOj4B,OAAS,GAAK,EAC9B+K,EAAK6B,EAAI7B,EAEb,IAAU,GAANA,EACFJ,EAAOstB,EAAO,OAEd,QAAW,CACT,GAAIif,GAAOrL,EAASH,GAAU,CAC9B,KAAKwL,EAAMjf,EAAa,EAANif,EAAU,GAAK,IAAMnsC,EACrC2gC,EAAQwL,MACL,CAAA,KAAIjf,EAAa,EAANif,EAAU,GAAKnsC,GAE1B,CACHJ,EAAOstB,EAAa,EAANif,EAAU,EACxB,OAHArL,EAASqL,EAAM,GAMrB,GAAI+F,GAAMtyC,EAAOA,EAAK7J,QAAQ,eAAiB,EAC/C,OAAa,GAANm8C,EAAUtyC,EAAc,GAAPsyC,EAAW,KAAOtyC,EAAK2G,MAAM,EAAG2rC,EAAM,IAEhE1U,UAAW,SAAS37B,GAClB,GAAI4M,GAAOrZ,KAAK0wB,IAAIrX,IACpB,OAAKA,GAAKi7B,UAEH1qC,EAAW0qC,UAAUj7B,EAAMrZ,KAAK2mE,WAAWl6D,GAAK9B,OAAO0O,KADrDA,GAGXk1C,UAAW,SAAS9hD,EAAKjC,GACvB,MAAOxK,MAAK8mE,WAAWr6D,EAAKjC,GAAM,IAEpCs8D,WAAY,SAASr6D,EAAKjC,GACxB,GAAIkwB,KACJ,KAAKqsC,GAAQtjE,eAAe+G,GAC1B,MAAOkwB,EACT,IAAIssC,GAAOD,GAAQv8D,GACf6O,EAAOrZ,KAAKooC,UAAU37B,EAC1B,IAAyB,gBAAd4M,GAAK7O,GACVw8D,EAAK3tD,EAAK7O,KACZkwB,EAAM75B,KAAKmmE,EAAK3tD,EAAK7O,SAClB,IAAI6O,EAAK7O,GACd,IAAK,GAAI1J,GAAI,EAAGA,EAAIuY,EAAK7O,GAAM3K,OAAQiB,IAAK,CAC1C,GAAI2rC,GAAMu6B,EAAK3tD,EAAK7O,GAAM1J,GACtB2rC,IACF/R,EAAM75B,KAAK4rC,OAENpzB,GAAKhB,YAAc2uD,EAAK3tD,EAAKhB,YACtCqiB,EAAM75B,KAAKmmE,EAAK3tD,EAAKhB,aACZ2uD,EAAK3tD,EAAK5Z,OACnBi7B,EAAM75B,KAAKmmE,EAAK3tD,EAAK5Z,MAEvB,KAAK,GAAIqB,GAAI,EAAGA,EAAIkmE,EAAKC,QAAQpnE,OAAQiB,IAAK,CAC5C,GAAI05B,GAAMwsC,EAAKC,QAAQnmE,EACnB05B,GAAI0sC,KAAK7tD,EAAMrZ,OAAoC,IAA3BW,GAAQ+5B,EAAOF,EAAIiS,MAC7C/R,EAAM75B,KAAK25B,EAAIiS,KAEnB,MAAO/R,IAETysC,cAAe,SAAS5oD,EAAM21B,GAC5B,GAAIxjB,GAAM1wB,KAAK0wB,GAEf,OADAnS,GAAO2uB,GAASxc,EAAa,MAARnS,EAAemS,EAAI+E,MAAQ/E,EAAIuO,KAAO,EAAI1gB,GACxD20B,GAAelzC,KAAMue,EAAO,EAAG21B,IAExCtD,aAAc,SAAStkC,EAAO+M,GAC5B,GAAI5M,GACAw6B,EAAQjnC,KAAK0wB,IAAI8V,IAAIsH,SAOzB,OALErhC,GADW,MAATH,EACI26B,EAAMkB,KACW,gBAAT77B,GACRu+B,GAAQ7qC,KAAK0wB,IAAKpkB,GAElBA,EAAQ26B,EAAMrM,OAASqM,EAAMpM,KAC9B+V,GAAa5wC,KAAMyM,EAAK4M,GAAQ,SAEzCm4B,WAAY,SAAS/kC,EAAK4M,GACxB,MAAOm4B,IAAWxxC,KAAM6qC,GAAQ7qC,KAAK0wB,IAAKjkB,GAAM4M,GAAQ,SAE1D6/B,WAAY,SAAS3H,EAAQl4B,GAE3B,MADAk4B,GAAS8G,GAAgBr4C,KAAMuxC,EAAQl4B,GAAQ,QACxC6/B,GAAWl5C,KAAMuxC,EAAO3S,KAAM2S,EAAOxT,MAE9CG,aAAc,SAAS5E,EAAQjgB,GAK7B,MAJAigB,GAAS+e,GAAgBr4C,MACvB+9B,IAAKzE,EACLsF,KAAM,GACLvlB,GAAQ,QAAQ0kB,IACZG,GAAal+B,KAAK0wB,IAAK4I,EAASt5B,KAAK+wB,QAAQgF,aAEtDuI,aAAc,SAAS/f,EAAMlF,GAC3B,GACIo4B,GADA9/B,GAAM,CAEV,IAAmB,gBAAR4M,GAAkB,CAC3B,GAAInB,GAAOpd,KAAK0wB,IAAI+E,MAAQz1B,KAAK0wB,IAAIuO,KAAO,CACxC1gB,GAAOve,KAAK0wB,IAAI+E,MAClBlX,EAAOve,KAAK0wB,IAAI+E,MACTlX,EAAOnB,IACdmB,EAAOnB,EACPzL,GAAM,GAER8/B,EAAU1W,GAAQ/6B,KAAK0wB,IAAKnS,OAE5BkzB,GAAUlzB,CAEZ,OAAOy5B,IAAgBh4C,KAAMyxC,GAC3B1T,IAAK,EACLa,KAAM,GACLvlB,GAAQ,QAAQ0kB,KAAOpsB,EAAM3R,KAAK0wB,IAAI4I,OAASgF,GAAamT,GAAW,IAE5E21B,kBAAmB,WACjB,MAAOxuC,IAAW54B,KAAK+wB,UAEzBs2C,iBAAkB,WAChB,MAAOnuC,IAAUl5B,KAAK+wB,UAExBu2C,gBAAiB9qB,GAAS,SAASj+B,EAAMgpD,EAAUllE,GACjD,MAAO+qD,IAAWptD,KAAK0wB,IAAKnS,EAAM,SAAU,SAASA,GACnD,GAAIomB,GAAUpmB,EAAKqmB,gBAAkBrmB,EAAKqmB,iBAI1C,OAHAD,GAAQ4iC,GAAYllE,GACfA,GAAS46D,GAAQt4B,KACpBpmB,EAAKqmB,cAAgB,OAChB,MAGX4iC,YAAahrB,GAAS,SAAS+qB,GAC7B,GAAI/0C,GAAKxyB,KACL0wB,EAAM8B,EAAG9B,IACT5vB,EAAI4vB,EAAI+E,KACZ/E,GAAIkH,KAAK,SAASrZ,GACZA,EAAKqmB,eAAiBrmB,EAAKqmB,cAAc2iC,KAC3ChpD,EAAKqmB,cAAc2iC,GAAY,KAC/BvzB,GAAcxhB,EAAI1xB,EAAG,UACjBm8D,GAAQ1+C,EAAKqmB,iBACfrmB,EAAKqmB,cAAgB,SAEvB9jC,MAGN2mE,SAAU,SAASlpD,GACjB,GAAmB,gBAARA,GAAkB,CAC3B,IAAK8uB,GAAOrtC,KAAK0wB,IAAKnS,GACpB,MAAO,KACT,IAAI+O,GAAI/O,CAER,IADAA,EAAOwc,GAAQ/6B,KAAK0wB,IAAKnS,IACpBA,EACH,MAAO,UACJ,CACL,GAAI+O,GAAI6d,GAAO5sB,EACf,IAAS,MAAL+O,EACF,MAAO,MAEX,OACE/O,KAAM+O,EACNi5B,OAAQhoC,EACRrC,KAAMqC,EAAKrC,KACX0oB,cAAermB,EAAKqmB,cACpBJ,UAAWjmB,EAAKimB,UAChBR,QAASzlB,EAAKylB,QACdS,UAAWlmB,EAAKkmB,UAChBpL,QAAS9a,EAAK8a,UAGlBquC,YAAa,WACX,OACE9sC,KAAM56B,KAAK+wB,QAAQwE,SACnBsF,GAAI76B,KAAK+wB,QAAQyE,SAGrBmyC,UAAW,SAASl7D,EAAKqwB,EAAMb,EAAQC,EAAMC,GAC3C,GAAIpL,GAAU/wB,KAAK+wB,OACnBtkB,GAAMmkC,GAAa5wC,KAAM6qC,GAAQ7qC,KAAK0wB,IAAKjkB,GAC3C,IAAIsxB,GAAMtxB,EAAIkxB,OACViB,EAAOnyB,EAAImyB,IAKf,IAJA9B,EAAKxyB,MAAMq7B,SAAW,WACtB7I,EAAK3I,aAAa,mBAAoB,QACtCn0B,KAAK+wB,QAAQ5M,MAAM2gB,cAAchI,GACjC/L,EAAQ4D,MAAMW,YAAYwH,GACd,QAARZ,EACF6B,EAAMtxB,EAAIsxB,QACL,IAAY,SAAR7B,GAA2B,QAARA,EAAgB,CAC5C,GAAI0rC,GAAS7uC,KAAKC,IAAIjI,EAAQE,QAAQqK,aAAct7B,KAAK0wB,IAAI4I,QACzDuuC,EAAS9uC,KAAKC,IAAIjI,EAAQ4D,MAAMsE,YAAalI,EAAQ0D,UAAUwE,cACtD,SAARiD,GAAmBzvB,EAAIkxB,OAASb,EAAKmE,aAAe2mC,IAAWn7D,EAAIsxB,IAAMjB,EAAKmE,aACjFlD,EAAMtxB,EAAIsxB,IAAMjB,EAAKmE,aACdx0B,EAAIkxB,OAASb,EAAKmE,cAAgB2mC,IACzC7pC,EAAMtxB,EAAIkxB,QACRiB,EAAO9B,EAAK1C,YAAcytC,IAC5BjpC,EAAOipC,EAAS/qC,EAAK1C,aAEzB0C,EAAKxyB,MAAMyzB,IAAMA,EAAM,KACvBjB,EAAKxyB,MAAMs0B,KAAO9B,EAAKxyB,MAAMmzB,MAAQ,GACxB,SAATtB,GACFyC,EAAO7N,EAAQ4D,MAAMsE,YAAc6D,EAAK1C,YACxC0C,EAAKxyB,MAAMmzB,MAAQ,QAEN,QAATtB,EACFyC,EAAO,EACS,UAATzC,IACPyC,GAAQ7N,EAAQ4D,MAAMsE,YAAc6D,EAAK1C,aAAe,GAC1D0C,EAAKxyB,MAAMs0B,KAAOA,EAAO,MAEvB3C,GACFumB,GAAexiD,KAAM4+B,EAAMb,EAAKa,EAAO9B,EAAK1C,YAAa2D,EAAMjB,EAAKmE,eAExE6mC,iBAAkBtrB,GAASoD,IAC3BmoB,kBAAmBvrB,GAASqD,IAC5BmoB,eAAgBroB,GAChBkiB,YAAa,SAAS3S,GACpB,MAAI/I,IAAS1iD,eAAeyrD,GACnB/I,GAAS+I,GAAKtuD,KAAK,KAAMZ,MADlC,QAGFunC,gBAAiBiV,GAAS,SAAStgC,GACjCqrB,GAAgBvnC,KAAMkc,KAExB0xC,SAAU,SAAShzB,EAAMqtC,EAAQpa,EAAMC,GACrC,GAAIte,GAAM,CACG,GAATy4B,IACFz4B,EAAM,GACNy4B,GAAUA,EAEZ,KAAK,GAAInnE,GAAI,EACT05B,EAAMqQ,GAAQ7qC,KAAK0wB,IAAKkK,GAAWqtC,EAAJnnE,IACjC05B,EAAMozB,GAAS5tD,KAAK0wB,IAAK8J,EAAKgV,EAAKqe,EAAMC,IACrCtzB,EAAIi0B,WAFuC3tD,GAKjD,MAAO05B,IAET0tC,MAAO1rB,GAAS,SAAShN,EAAKqe,GAC5B,GAAIr7B,GAAKxyB,IACTwyB,GAAG21C,mBAAmB,SAASlhC,GAC7B,MAAIzU,GAAGzB,QAAQrrB,OAAS8sB,EAAG9B,IAAIgd,QAAUzG,EAAMC,QACtC0mB,GAASp7B,EAAG9B,IAAKuW,EAAMkB,KAAMqH,EAAKqe,EAAMr7B,EAAGzZ,QAAQqvD,iBAE7C,EAAN54B,EAAUvI,EAAMrM,OAASqM,EAAMpM,MACvCwtC,MAELC,QAAS9rB,GAAS,SAAShN,EAAKqe,GAC9B,GAAIrnB,GAAMxmC,KAAK0wB,IAAI8V,IACf9V,EAAM1wB,KAAK0wB,GACX8V,GAAIo0B,oBACNlqC,EAAIg0B,iBAAiB,GAAI,KAAM,WAE/B6I,GAAoBvtD,KAAM,SAASinC,GACjC,GAAIwG,GAAQmgB,GAASl9B,EAAKuW,EAAMkB,KAAMqH,EAAKqe,GAAM,EACjD,OAAa,GAANre,GACL5U,KAAM6S,EACN5S,GAAIoM,EAAMkB,OAEVvN,KAAMqM,EAAMkB,KACZtN,GAAI4S,OAIZihB,SAAU,SAAS9zB,EAAMqtC,EAAQpa,EAAM0a,GACrC,GAAI/4B,GAAM,EACNhrB,EAAI+jD,CACK,GAATN,IACFz4B,EAAM,GACNy4B,GAAUA,EAEZ,KAAK,GAAInnE,GAAI,EACT05B,EAAMqQ,GAAQ7qC,KAAK0wB,IAAKkK,GAAWqtC,EAAJnnE,IAAcA,EAAG,CAClD,GAAIywC,GAASX,GAAa5wC,KAAMw6B,EAAK,MAMrC,IALS,MAALhW,EACFA,EAAI+sB,EAAO3S,KAEX2S,EAAO3S,KAAOpa,EAChBgW,EAAMk0B,GAAS1uD,KAAMuxC,EAAQ/B,EAAKqe,GAC9BrzB,EAAIi0B,QACN,MAEJ,MAAOj0B,IAETguC,MAAOhsB,GAAS,SAAShN,EAAKqe,GAC5B,GAAIr7B,GAAKxyB,KACL0wB,EAAM1wB,KAAK0wB,IACX+3C,KACAl+B,GAAY/X,EAAGzB,QAAQrrB,QAAUgrB,EAAIgd,QAAUhd,EAAI8V,IAAIo0B,mBAa3D,IAZAlqC,EAAIy3C,mBAAmB,SAASlhC,GAC9B,GAAIsD,EACF,MAAa,GAANiF,EAAUvI,EAAMrM,OAASqM,EAAMpM,IACxC,IAAImmC,GAAUpwB,GAAape,EAAIyU,EAAMkB,KAAM,MACnB,OAApBlB,EAAMshC,aACRvH,EAAQpiC,KAAOqI,EAAMshC,YACvBE,EAAM5nE,KAAKmgE,EAAQpiC,KACnB,IAAInyB,GAAMiiD,GAASl8B,EAAIwuC,EAASxxB,EAAKqe,EAGrC,OAFY,QAARA,GAAkB5mB,GAASvW,EAAI8V,IAAIsH,WACrCye,GAAe/5B,EAAI,KAAMgf,GAAWhf,EAAI/lB,EAAK,OAAOsxB,IAAMijC,EAAQjjC,KAC7DtxB,GACN47D,IACCI,EAAM5oE,OACR,IAAK,GAAIiB,GAAI,EAAGA,EAAI4vB,EAAI8V,IAAIM,OAAOjnC,OAAQiB,IACzC4vB,EAAI8V,IAAIM,OAAOhmC,GAAGynE,WAAaE,EAAM3nE,KAE3Cw9C,WAAY,SAAS7xC,GACnB,GAAIikB,GAAM1wB,KAAK0wB,IACXnS,EAAOwc,GAAQrK,EAAKjkB,EAAI8R,MAAMrC,KAC9B5P,EAAQG,EAAI7B,GACZ+G,EAAMlF,EAAI7B,EACd,IAAI2T,EAAM,CACR,GAAI+vC,GAAStuD,KAAKuuD,UAAU9hD,EAAK,cAC5BA,EAAIwsC,KAAO,GAAKtnC,GAAO4M,EAAK1e,SAAWyM,IACxCA,IAEAqF,CASJ,KARA,GAAI+2D,GAAYnqD,EAAK7R,OAAOJ,GACxBq8D,EAAQna,GAAWka,EAAWpa,GAAU,SAAS1jD,GACnD,MAAO4jD,IAAW5jD,EAAI0jD,IACpB,KAAKvjD,KAAK29D,GAAa,SAAS99D,GAClC,MAAO,KAAKG,KAAKH,IACf,SAASA,GACX,OAAQ,KAAKG,KAAKH,KAAQ4jD,GAAW5jD,IAEhC0B,EAAQ,GAAKq8D,EAAMpqD,EAAK7R,OAAOJ,EAAQ,OAC1CA,CACJ,MAAOqF,EAAM4M,EAAK1e,QAAU8oE,EAAMpqD,EAAK7R,OAAOiF,OAC1CA,EAEN,MAAO,IAAIi7B,IAAM/G,GAAIp5B,EAAI8R,KAAMjS,GAAQu5B,GAAIp5B,EAAI8R,KAAM5M,KAEvDi3D,gBAAiB,SAASvmE,IACX,MAATA,GAAiBA,GAASrC,KAAK2K,MAAMinB,cAErC5xB,KAAK2K,MAAMinB,WAAa5xB,KAAK2K,MAAMinB,WACrCuG,GAASn4B,KAAK+wB,QAAQuD,UAAW,wBAEjC+D,GAAQr4B,KAAK+wB,QAAQuD,UAAW,wBAClCiN,GAAOvhC,KAAM,kBAAmBA,KAAMA,KAAK2K,MAAMinB,aAEnDuB,SAAU,WACR,MAAOnzB,MAAK+wB,QAAQ5M,MAAMu7B,YAAc3e,MAE1C6rB,SAAUpQ,GAAS,SAASh4B,EAAGkJ,IACpB,MAALlJ,GAAkB,MAALkJ,IACf8+B,GAAmBxsD,MACZ,MAALwkB,IACFxkB,KAAKgzB,MAAMsJ,WAAa9X,GACjB,MAALkJ,IACF1tB,KAAKgzB,MAAMqJ,UAAY3O,KAE3Bm7C,cAAe,WACb,GAAI5zC,GAAWj1B,KAAK+wB,QAAQkE,QAC5B,QACE2J,KAAM3J,EAASqH,WACfyB,IAAK9I,EAASoH,UACd/C,OAAQrE,EAAS4G,aAAeC,GAAU97B,MAAQA,KAAK+wB,QAAQqF,UAC/D8D,MAAOjF,EAASuG,YAAcM,GAAU97B,MAAQA,KAAK+wB,QAAQsF,SAC7DiF,aAAc6F,GAAcnhC,MAC5Bi5B,YAAa6G,GAAa9/B,QAG9BwiD,eAAgBhG,GAAS,SAASvV,EAAOgV,GAsBvC,GArBa,MAAThV,GACFA,GACErM,KAAM56B,KAAK0wB,IAAI8V,IAAIsH,UAAU3F,KAC7BtN,GAAI,MAEQ,MAAVohB,IACFA,EAASj8C,KAAK+Y,QAAQ2zC,qBACC,gBAATzlB,GAChBA,GACErM,KAAMiL,GAAIoB,EAAO,GACjBpM,GAAI,MAEiB,MAAdoM,EAAMrM,OACfqM,GACErM,KAAMqM,EACNpM,GAAI,OAGHoM,EAAMpM,KACToM,EAAMpM,GAAKoM,EAAMrM,MACnBqM,EAAMgV,OAASA,GAAU,EACF,MAAnBhV,EAAMrM,KAAKrc,KACbiuC,GAAmBxsD,MACnBA,KAAKgzB,MAAM2nB,YAAc1T,MACpB,CACL,GAAI0lB,GAAOpB,GAAmBvrD,KAAM+4B,KAAKwF,IAAI0I,EAAMrM,KAAKgE,KAAMqI,EAAMpM,GAAG+D,MAAO7F,KAAKwF,IAAI0I,EAAMrM,KAAKmD,IAAKkJ,EAAMpM,GAAGkD,KAAOkJ,EAAMgV,OAAQljB,KAAKC,IAAIiO,EAAMrM,KAAK6C,MAAOwJ,EAAMpM,GAAG4C,OAAQ1E,KAAKC,IAAIiO,EAAMrM,KAAK+C,OAAQsJ,EAAMpM,GAAG8C,QAAUsJ,EAAMgV,OACtOj8C,MAAK4sD,SAASD,EAAKrwB,WAAYqwB,EAAKtwB,cAGxCgkB,QAAS7D,GAAS,SAAStiB,EAAOZ,GAEhC,QAASwvC,GAAUr8B,GACjB,MAAqB,gBAAPA,IAAmB,QAAQ1hC,KAAK8c,OAAO4kB,IAAQA,EAAM,KAAOA,EAF5E,GAAIja,GAAKxyB,IAII,OAATk6B,IACF1H,EAAGzB,QAAQE,QAAQ3mB,MAAM4vB,MAAQ4uC,EAAU5uC,IAC/B,MAAVZ,IACF9G,EAAGzB,QAAQE,QAAQ3mB,MAAMgvB,OAASwvC,EAAUxvC,IAC1C9G,EAAGzZ,QAAQqY,cACbqmB,GAA0Bz3C,KAC5B,IAAImrC,GAAS3Y,EAAGzB,QAAQwE,QACxB/C,GAAG9B,IAAIkH,KAAKuT,EAAQ3Y,EAAGzB,QAAQyE,OAAQ,SAASjX,GAC9C,GAAIA,EAAK8a,QACP,IAAK,GAAIv4B,GAAI,EAAGA,EAAIyd,EAAK8a,QAAQx5B,OAAQiB,IACvC,GAAIyd,EAAK8a,QAAQv4B,GAAG0kC,UAAW,CAC7BwO,GAAcxhB,EAAI2Y,EAAQ,SAC1B,SAEJA,IAEJ3Y,EAAGQ,MAAMC,aAAc,EACvBsO,GAAO/O,EAAI,UAAWxyB,QAExBu8C,UAAW,SAAS3wB,GAClB,MAAOoc,IAAQhoC,KAAM4rB,IAEvBm9C,QAASvsB,GAAS,WAChB,GAAIwsB,GAAYhpE,KAAK+wB,QAAQ6F,gBAC7BqB,IAAUj4B,MACVA,KAAKgzB,MAAMC,aAAc,EACzBuF,GAAYx4B,MACZA,KAAK4sD,SAAS5sD,KAAK0wB,IAAI4L,WAAYt8B,KAAK0wB,IAAI2L,WAC5ClC,EAAkBn6B,OACD,MAAbgpE,GAAqBjwC,KAAKqc,IAAI4zB,EAAYpwC,GAAW54B,KAAK+wB,UAAY,KACxEwH,EAAoBv4B,MACtBuhC,GAAOvhC,KAAM,UAAWA,QAE1BipE,QAASzsB,GAAS,SAAS9rB,GACzB,GAAIqvB,GAAM//C,KAAK0wB,GAQf,OAPAqvB,GAAIvtB,GAAK,KACTU,GAAUlzB,KAAM0wB,GAChB8H,GAAYx4B,MACZA,KAAK+wB,QAAQ5M,MAAMyO,QACnB5yB,KAAK4sD,SAASl8B,EAAI4L,WAAY5L,EAAI2L,WAClCr8B,KAAKgzB,MAAM+oB,aAAc,EACzBxW,GAAYvlC,KAAM,UAAWA,KAAM+/C,GAC5BA,IAETmpB,cAAe,WACb,MAAOlpE,MAAK+wB,QAAQ5M,MAAMu7B,YAE5BypB,kBAAmB,WACjB,MAAOnpE,MAAK+wB,QAAQE,SAEtBm4C,mBAAoB,WAClB,MAAOppE,MAAK+wB,QAAQkE,UAEtBo0C,iBAAkB,WAChB,MAAOrpE,MAAK+wB,QAAQgE,UAGxBwnC,GAAW3yD,EACX,IAAI4mB,IAAW5mB,EAAW4mB,YACtB+C,GAAiB3pB,EAAW2pB,kBAS5BC,GAAO5pB,EAAW4pB,MAAQ7qB,SAAU,WACpC,MAAO,mBAEXimD,IAAO,QAAS,GAAI,SAASp8B,EAAIia,GAC/Bja,EAAG82C,SAAS78B,KACX,GACHmiB,GAAO,OAAQ,KAAM,SAASp8B,EAAIia,GAChCja,EAAG9B,IAAIgH,WAAa+U,EACpBjV,EAAShF,KACR,GACHo8B,GAAO,aAAc,EAAGp3B,GAAU,GAClCo3B,GAAO,kBAAkB,GACzBA,GAAO,eAAe,GACtBA,GAAO,UAAW,EAAG,SAASp8B,GAC5BmF,EAAenF,GACfgG,GAAYhG,GACZyF,GAAUzF,KACT,GACHo8B,GAAO,gBAAiB,KAAM,SAASp8B,EAAIia,GAEzC,GADAja,EAAG9B,IAAI6b,QAAUE,EACZA,EAAL,CAEA,GAAI88B,MACAp+B,EAAS3Y,EAAG9B,IAAI+E,KACpBjD,GAAG9B,IAAIkH,KAAK,SAASrZ,GACnB,IAAK,GAAI9R,GAAM,IAAO,CACpB,GAAIiuB,GAAQnc,EAAKrC,KAAKvb,QAAQ8rC,EAAKhgC,EACnC,IAAa,IAATiuB,EACF,KACFjuB,GAAMiuB,EAAQ+R,EAAI5sC,OAClB0pE,EAAU1oE,KAAKglC,GAAIsF,EAAQzQ,IAE7ByQ,KAEF,KAAK,GAAIrqC,GAAIyoE,EAAU1pE,OAAS,EAAGiB,GAAK,EAAGA,IACzC2jD,GAAajyB,EAAG9B,IAAK+b,EAAK88B,EAAUzoE,GAAI+kC,GAAI0jC,EAAUzoE,GAAGyd,KAAMgrD,EAAUzoE,GAAG8J,GAAK6hC,EAAI5sC,YAEzF+uD,GAAO,eAAgB,0DAA2D,SAASp8B,EAAIia,EAAKsT,GAClGvtB,EAAG7nB,MAAM4nB,aAAe,GAAI7qB,QAAO+kC,EAAI1lC,QAAU0lC,EAAI1hC,KAAK,KAAQ,GAAK,MAAQ,KAC3Eg1C,GAAOn2C,EAAW4pB,MACpBhB,EAAGu2C,YAEPna,GAAO,yBAA0BoI,GAA+B,SAASxkC,GACvEA,EAAGu2C,YACF,GACHna,GAAO,iBAAiB,GACxBA,GAAO,aAAct9B,GAAS,kBAAoB,WAAY,WAC5D,KAAM,IAAItuB,OAAM,6DACf,GACH4rD,GAAO,mBAAoB+Q,IAC3B/Q,GAAO,yBAAyB,GAChCA,GAAO,QAAS,UAAW,SAASp8B,GAClCrB,EAAaqB,GACboH,EAAepH,KACd,GACHo8B,GAAO,SAAU,UAAW,SAASp8B,EAAIia,EAAKsT,GAC5C,GAAI91C,GAAOmlD,GAAU3iB,GACjBx/B,EAAO8yC,GAAOn2C,EAAW4pB,MAAQ47B,GAAUrP,EAC3C9yC,IAAQA,EAAKu8D,QACfv8D,EAAKu8D,OAAOh3C,EAAIvoB,GACdA,EAAKw/D,QACPx/D,EAAKw/D,OAAOj3C,EAAIvlB,GAAQ,QAE5B2hD,GAAO,YAAa,MACpBA,GAAO,gBAAgB,EAAO12B,GAAiB,GAC/C02B,GAAO,aAAe,SAASp8B,GAC7B/B,EAAyB+B,EAAGzZ,SAC5B6gB,EAAepH,KACd,GACHo8B,GAAO,eAAe,EAAM,SAASp8B,EAAIia,GACvCja,EAAGzB,QAAQgE,QAAQzqB,MAAMs0B,KAAO6N,EAAM9N,EAAqBnM,EAAGzB,SAAW,KAAO,IAChFyB,EAAGu2C,YACF,GACHna,GAAO,8BAA8B,EAAO,SAASp8B,GACnDiG,EAAiBjG,KAChB,GACHo8B,GAAO,iBAAkB,SAAU,SAASp8B,GAC1ChB,EAAegB,GACfiG,EAAiBjG,GACjBA,EAAGzB,QAAQ2L,WAAWQ,aAAa1K,EAAG9B,IAAI2L,WAC1C7J,EAAGzB,QAAQ2L,WAAWO,cAAczK,EAAG9B,IAAI4L,cAC1C,GACHsyB,GAAO,eAAe,EAAO,SAASp8B,GACpC/B,EAAyB+B,EAAGzZ,SAC5B6gB,EAAepH,KACd,GACHo8B,GAAO,kBAAmB,EAAGh1B,GAAgB,GAC7Cg1B,GAAO,sBAAuB,SAAS8a,GACrC,MAAOA,IACN9vC,GAAgB,GACnBg1B,GAAO,2BAA2B,EAAOvtB,IAAiB,GAC1DutB,GAAO,+BAA+B,GACtCA,GAAO,mBAAmB,GAC1BA,GAAO,YAAY,EAAO,SAASp8B,EAAIia,GAC1B,YAAPA,GACFnZ,GAAOd,GACPA,EAAGzB,QAAQ5M,MAAMq9C,OACjBhvC,EAAGzB,QAAQ44C,UAAW,GAEtBn3C,EAAGzB,QAAQ44C,UAAW,EAExBn3C,EAAGzB,QAAQ5M,MAAMw+C,gBAAgBl2B,KAEnCmiB,GAAO,gBAAgB,EAAO,SAASp8B,EAAIia,GACpCA,GACHja,EAAGzB,QAAQ5M,MAAMyO,UAClB,GACHg8B,GAAO,YAAY,EAAM9O,IACzB8O,GAAO,qBAAsB,MAC7BA,GAAO,kBAAmB,KAC1BA,GAAO,qBAAsB,GAC7BA,GAAO,eAAgB,EAAGvtB,IAAiB,GAC3CutB,GAAO,6BAA6B,EAAMvtB,IAAiB,GAC3DutB,GAAO,WAAY,KACnBA,GAAO,YAAa,KACpBA,GAAO,gBAAgB,EAAMj3B,GAAgB,GAC7Ci3B,GAAO,gBAAgB,EAAOj3B,GAAgB,GAC9Ci3B,GAAO,eAAgB,KACvBA,GAAO,YAAa,IAAK,SAASp8B,EAAIia,GACpCja,EAAG9B,IAAI4d,QAAQ0rB,UAAYvtB,IAE7BmiB,GAAO,oBAAqB,MAC5BA,GAAO,iBAAkB,GAAI,SAASp8B,GACpCA,EAAGu2C,YACF,GACHna,GAAO,qBAAsB,IAAOj3B,GAAgB,GACpDi3B,GAAO,uBAAuB,EAAM,SAASp8B,EAAIia,GAC1CA,GACHja,EAAGzB,QAAQ5M,MAAMs9C,kBAErB7S,GAAO,WAAY,KAAM,SAASp8B,EAAIia,GACpCja,EAAGzB,QAAQ5M,MAAMu7B,WAAWkqB,SAAWn9B,GAAO,KAEhDmiB,GAAO,YAAa,KACpB,IAAIib,IAAQjgE,EAAWigE,SACnBC,GAAYlgE,EAAWkgE,YAC3BlgE,GAAWC,WAAa,SAASpK,EAAM4Z,GAChCzP,EAAW4mB,SAASnX,MAAgB,QAAR5Z,IAC/BmK,EAAW4mB,SAASnX,KAAO5Z,GACzBG,UAAUC,OAAS,IACrBwZ,EAAKrX,aAAe+B,MAAMC,UAAUmN,MAAMvQ,KAAKhB,UAAW,IAC5DiqE,GAAMpqE,GAAQ4Z,GAEhBzP,EAAW2O,WAAa,SAASwxD,EAAMzD,GACrCwD,GAAUC,GAAQzD,GAEpB18D,EAAWogE,YAAc,SAAS1D,GAChC,GAAmB,gBAARA,IAAoBwD,GAAUrmE,eAAe6iE,GACtDA,EAAOwD,GAAUxD,OACZ,IAAIA,GAA4B,gBAAbA,GAAK7mE,MAAoBqqE,GAAUrmE,eAAe6iE,EAAK7mE,MAAO,CACtF,GAAIi7B,GAAQovC,GAAUxD,EAAK7mE,KACP,iBAATi7B,KACTA,GAASj7B,KAAMi7B,IACjB4rC,EAAO3J,GAAUjiC,EAAO4rC,GACxBA,EAAK7mE,KAAOi7B,EAAMj7B,SACb,IAAmB,gBAAR6mE,IAAoB,0BAA0Bv7D,KAAKu7D,GACnE,MAAO18D,GAAWogE,YAAY,kBAEhC,OAAmB,gBAAR1D,IACD7mE,KAAM6mE,GAEPA,IAAS7mE,KAAM,SAE1BmK,EAAW6tB,QAAU,SAAS1e,EAASutD,GACrC,GAAIA,GAAO18D,EAAWogE,YAAY1D,GAC9B2D,EAAWJ,GAAMvD,EAAK7mE,KAC1B,KAAKwqE,EACH,MAAOrgE,GAAW6tB,QAAQ1e,EAAS,aACrC,IAAImxD,GAAUD,EAASlxD,EAASutD,EAChC,IAAI6D,GAAe1mE,eAAe6iE,EAAK7mE,MAAO,CAC5C,GAAI2qE,GAAOD,GAAe7D,EAAK7mE,KAC/B,KAAK,GAAI4E,KAAQ+lE,GACVA,EAAK3mE,eAAeY,KAErB6lE,EAAQzmE,eAAeY,KACzB6lE,EAAQ,IAAM7lE,GAAQ6lE,EAAQ7lE,IAChC6lE,EAAQ7lE,GAAQ+lE,EAAK/lE,IAMzB,GAHA6lE,EAAQzqE,KAAO6mE,EAAK7mE,KAChB6mE,EAAKjuD,aACP6xD,EAAQ7xD,WAAaiuD,EAAKjuD,YACxBiuD,EAAK+D,UACP,IAAK,GAAIhmE,KAAQiiE,GAAK+D,UACpBH,EAAQ7lE,GAAQiiE,EAAK+D,UAAUhmE,EACnC,OAAO6lE,IAETtgE,EAAWC,WAAW,OAAQ,WAC5B,OAAQyN,MAAO,SAAStN,GACpBA,EAAOmB,gBAGbvB,EAAW2O,WAAW,aAAc,OACpC,IAAI4xD,IAAiBvgE,EAAWugE,iBAChCvgE,GAAW0gE,WAAa,SAASjxD,EAAMkxD,GACrC,GAAIH,GAAOD,GAAe1mE,eAAe4V,GAAQ8wD,GAAe9wD,GAAS8wD,GAAe9wD,KACxFkX,IAAQg6C,EAAYH,IAEtBxgE,EAAW4gE,gBAAkB,SAAS/qE,EAAMgrE,GAC1C7gE,EAAW5F,UAAUvE,GAAQgrE,GAE/B7gE,EAAW8gE,mBAAqB,SAASjrE,EAAMgrE,GAC7C95C,GAAI3sB,UAAUvE,GAAQgrE,GAExB7gE,EAAW+gE,aAAe/b,EAC1B,IAAIj7B,MACJ/pB,GAAWghE,eAAiB,SAASh/C,GACnC+H,GAAU9yB,KAAK+qB,GAEjB,IAAIm7C,IAAUn9D,EAAWm9D,UACzBn9D,GAAW0O,eAAiB,SAAS9N,EAAM/K,EAAM4C,GAC1C0kE,GAAQtjE,eAAe+G,KAC1Bu8D,GAAQv8D,GAAQZ,EAAWY,IAASy8D,aACtCF,GAAQv8D,GAAM/K,GAAQ4C,GAExBuH,EAAWihE,qBAAuB,SAASrgE,EAAM/K,EAAMqrE,EAAWzoE,GAChEuH,EAAW0O,eAAe9N,EAAM/K,EAAM4C,GACtC0kE,GAAQv8D,GAAMy8D,QAAQpmE,MACpBqmE,KAAM4D,EACNr+B,IAAKpqC,IAGT,IAAI4wC,IAAYrpC,EAAWqpC,UAAY,SAAS55B,EAAM1O,GACpD,GAAIA,KAAU,EACZ,MAAOA,EACT,IAAI0O,EAAK45B,UACP,MAAO55B,GAAK45B,UAAUtoC,EACxB,IAAIogE,KACJ,KAAK,GAAIz9C,KAAK3iB,GAAO,CACnB,GAAI8hC,GAAM9hC,EAAM2iB,EACZmf,aAAe1oC,SACjB0oC,EAAMA,EAAI/jC,YACZqiE,EAAOz9C,GAAKmf,EAEd,MAAOs+B,IAEL3zD,GAAaxN,EAAWwN,WAAa,SAASiC,EAAM2xD,EAAIC,GAC1D,MAAO5xD,GAAKjC,WAAaiC,EAAKjC,WAAW4zD,EAAIC,IAAM,EAErDrhE,GAAW0qC,UAAY,SAASj7B,EAAM1O,GACpC,KAAO0O,EAAKi7B,WAAW,CACrB,GAAIpnC,GAAOmM,EAAKi7B,UAAU3pC,EAC1B,KAAKuC,GAAQA,EAAKmM,MAAQA,EACxB,KACF1O,GAAQuC,EAAKvC,MACb0O,EAAOnM,EAAKmM,KAEd,MAAOnM,KACLmM,KAAMA,EACN1O,MAAOA,GAGX,IAAIw7C,IAAWv8C,EAAWu8C,UACxBkc,UAAW,SAAS7vC,GAClBA,EAAGqb,aAAahI,GAAIrT,EAAGimC,YAAa,GAAI5yB,GAAIrT,EAAGgM,YAAayQ,KAE9Di8B,gBAAiB,SAAS14C,GACxBA,EAAGqb,aAAarb,EAAGi6B,UAAU,UAAWj6B,EAAGi6B,UAAU,QAASxd,KAEhEk8B,SAAU,SAAS34C,GACjB+6B,GAAoB/6B,EAAI,SAASyU,GAC/B,GAAIA,EAAMC,QAAS,CACjB,GAAIzoB,GAAMsc,GAAQvI,EAAG9B,IAAKuW,EAAMkB,KAAK5pB,MAAMrC,KAAKrc,MAChD,OAAIonC,GAAMkB,KAAKv9B,IAAM6T,GAAOwoB,EAAMkB,KAAK5pB,KAAOiU,EAAGgM,YAE7C5D,KAAMqM,EAAMkB,KACZtN,GAAIgL,GAAIoB,EAAMkB,KAAK5pB,KAAO,EAAG,KAI7Bqc,KAAMqM,EAAMkB,KACZtN,GAAIgL,GAAIoB,EAAMkB,KAAK5pB,KAAME,IAG7B,OACEmc,KAAMqM,EAAMrM,OACZC,GAAIoM,EAAMpM,SAKlBuwC,WAAY,SAAS54C,GACnB+6B,GAAoB/6B,EAAI,SAASyU,GAC/B,OACErM,KAAMiL,GAAIoB,EAAMrM,OAAOrc,KAAM,GAC7Bsc,GAAIgQ,GAAQrY,EAAG9B,IAAKmV,GAAIoB,EAAMpM,KAAKtc,KAAO,EAAG,QAInD8sD,YAAa,SAAS74C,GACpB+6B,GAAoB/6B,EAAI,SAASyU,GAC/B,OACErM,KAAMiL,GAAIoB,EAAMrM,OAAOrc,KAAM,GAC7Bsc,GAAIoM,EAAMrM,WAIhB0wC,mBAAoB,SAAS94C,GAC3B+6B,GAAoB/6B,EAAI,SAASyU,GAC/B,GAAIlJ,GAAMvL,EAAGgf,WAAWvK,EAAMkB,KAAM,OAAOpK,IAAM,EAC7C8T,EAAUrf,EAAG0mB,YACfta,KAAM,EACNb,IAAKA,GACJ,MACH,QACEnD,KAAMiX,EACNhX,GAAIoM,EAAMrM,WAIhB2wC,oBAAqB,SAAS/4C,GAC5B+6B,GAAoB/6B,EAAI,SAASyU,GAC/B,GAAIlJ,GAAMvL,EAAGgf,WAAWvK,EAAMkB,KAAM,OAAOpK,IAAM,EAC7C6T,EAAWpf,EAAG0mB,YAChBta,KAAMpM,EAAGzB,QAAQgD,QAAQqG,YAAc,IACvC2D,IAAKA,GACJ,MACH,QACEnD,KAAMqM,EAAMrM,OACZC,GAAI+W,MAIV45B,KAAM,SAASh5C,GACbA,EAAGg5C,QAELC,KAAM,SAASj5C,GACbA,EAAGi5C,QAELC,cAAe,SAASl5C,GACtBA,EAAGk5C,iBAELC,cAAe,SAASn5C,GACtBA,EAAGm5C,iBAELC,WAAY,SAASp5C,GACnBA,EAAGob,gBAAgB/H,GAAIrT,EAAGimC,YAAa,KAEzCoT,SAAU,SAASr5C,GACjBA,EAAGob,gBAAgB/H,GAAIrT,EAAGgM,cAE5BstC,YAAa,SAASt5C,GACpBA,EAAG21C,mBAAmB,SAASlhC,GAC7B,MAAOs3B,IAAU/rC,EAAIyU,EAAMkB,KAAK5pB,QAEhCkoB,OAAQ,QACRiI,KAAM,KAGVq9B,iBAAkB,SAASv5C,GACzBA,EAAG21C,mBAAmB,SAASlhC,GAC7B,MAAOy3B,IAAelsC,EAAIyU,EAAMkB,QAEhC1B,OAAQ,QACRiI,KAAM,KAGVs9B,UAAW,SAASx5C,GAClBA,EAAG21C,mBAAmB,SAASlhC,GAC7B,MAAOw3B,IAAQjsC,EAAIyU,EAAMkB,KAAK5pB,QAE9BkoB,OAAQ,QACRiI,KAAM,MAGVu9B,YAAa,SAASz5C,GACpBA,EAAG21C,mBAAmB,SAASlhC,GAC7B,GAAIlJ,GAAMvL,EAAGgf,WAAWvK,EAAMkB,KAAM,OAAOpK,IAAM,CACjD,OAAOvL,GAAG0mB,YACRta,KAAMpM,EAAGzB,QAAQgD,QAAQqG,YAAc,IACvC2D,IAAKA,GACJ,QACFsqC,KAEL6D,WAAY,SAAS15C,GACnBA,EAAG21C,mBAAmB,SAASlhC,GAC7B,GAAIlJ,GAAMvL,EAAGgf,WAAWvK,EAAMkB,KAAM,OAAOpK,IAAM,CACjD,OAAOvL,GAAG0mB,YACRta,KAAM,EACNb,IAAKA,GACJ,QACFsqC,KAEL8D,gBAAiB,SAAS35C,GACxBA,EAAG21C,mBAAmB,SAASlhC,GAC7B,GAAIlJ,GAAMvL,EAAGgf,WAAWvK,EAAMkB,KAAM,OAAOpK,IAAM,EAC7CtxB,EAAM+lB,EAAG0mB,YACXta,KAAM,EACNb,IAAKA,GACJ,MACH,OAAItxB,GAAI7B,GAAK4nB,EAAGuI,QAAQtuB,EAAI8R,MAAMkxB,OAAO,MAChCivB,GAAelsC,EAAIyU,EAAMkB,MAC3B17B,GACN47D,KAEL+D,SAAU,SAAS55C,GACjBA,EAAGg2C,MAAM,GAAI,SAEf6D,WAAY,SAAS75C,GACnBA,EAAGg2C,MAAM,EAAG,SAEd8D,SAAU,SAAS95C,GACjBA,EAAGg2C,MAAM,GAAI,SAEf+D,WAAY,SAAS/5C,GACnBA,EAAGg2C,MAAM,EAAG,SAEdgE,WAAY,SAASh6C,GACnBA,EAAG01C,MAAM,GAAI,SAEfuE,YAAa,SAASj6C,GACpBA,EAAG01C,MAAM,EAAG,SAEdwE,aAAc,SAASl6C,GACrBA,EAAG01C,MAAM,GAAI,WAEfyE,cAAe,SAASn6C,GACtBA,EAAG01C,MAAM,EAAG,WAEd0E,WAAY,SAASp6C,GACnBA,EAAG01C,MAAM,GAAI,SAEf2E,aAAc,SAASr6C,GACrBA,EAAG01C,MAAM,EAAG,UAEd4E,YAAa,SAASt6C,GACpBA,EAAG01C,MAAM,GAAI,UAEf6E,YAAa,SAASv6C,GACpBA,EAAG01C,MAAM,EAAG,SAEd8E,cAAe,SAASx6C,GACtBA,EAAG81C,QAAQ,GAAI,SAEjB2E,aAAc,SAASz6C,GACrBA,EAAG81C,QAAQ,EAAG,SAEhB4E,cAAe,SAAS16C,GACtBA,EAAG81C,QAAQ,GAAI,SAEjB6E,aAAc,SAAS36C,GACrBA,EAAG81C,QAAQ,EAAG,SAEhB8E,eAAgB,SAAS56C,GACvBA,EAAG81C,QAAQ,GAAI,UAEjB+E,cAAe,SAAS76C,GACtBA,EAAG81C,QAAQ,EAAG,UAEhBgF,WAAY,SAAS96C,GACnBA,EAAGi0C,gBAAgB,UAErB8G,WAAY,SAAS/6C,GACnBA,EAAGi0C,gBAAgB,QAErB+G,WAAY,SAASh7C,GACnBA,EAAGi0C,gBAAgB,aAErBgH,UAAW,SAASj7C,GAClBA,EAAGkyB,iBAAiB,MAEtBgpB,cAAe,SAASl7C,GAItB,IAAK,GAHDm7C,MACA7mC,EAAStU,EAAGgyB,iBACZhQ,EAAUhiB,EAAGzZ,QAAQy7B,QAChB1zC,EAAI,EAAGA,EAAIgmC,EAAOjnC,OAAQiB,IAAK,CACtC,GAAI2L,GAAMq6B,EAAOhmC,GAAG85B,OAChBw7B,EAAM7hB,GAAY/hB,EAAGuI,QAAQtuB,EAAI8R,MAAO9R,EAAI7B,GAAI4pC,EACpDm5B,GAAO9sE,KAAK,GAAIkD,OAAMywC,EAAU4hB,EAAM5hB,EAAU,GAAGlwB,KAAK,MAE1DkO,EAAGo7C,kBAAkBD,IAEvBE,WAAY,SAASr7C,GACfA,EAAGooC,oBACLpoC,EAAGi0C,gBAAgB,OAEnBj0C,EAAGqvC,YAAY,cAEnBiM,eAAgB,SAASt7C,GACvBwV,GAAQxV,EAAI,WAGV,IAAK,GAFDsU,GAAStU,EAAGgyB,iBACZvW,KACKntC,EAAI,EAAGA,EAAIgmC,EAAOjnC,OAAQiB,IAAK,CACtC,GAAI05B,GAAMsM,EAAOhmC,GAAGqnC,KAChB5pB,EAAOwc,GAAQvI,EAAG9B,IAAK8J,EAAIjc,MAAMrC,IACrC,IAAIqC,EAGF,GAFIic,EAAI5vB,IAAM2T,EAAK1e,SACjB26B,EAAM,GAAIqL,IAAIrL,EAAIjc,KAAMic,EAAI5vB,GAAK,IAC/B4vB,EAAI5vB,GAAK,EACX4vB,EAAM,GAAIqL,IAAIrL,EAAIjc,KAAMic,EAAI5vB,GAAK,GACjC4nB,EAAGiyB,aAAalmC,EAAK7R,OAAO8tB,EAAI5vB,GAAK,GAAK2T,EAAK7R,OAAO8tB,EAAI5vB,GAAK,GAAIi7B,GAAIrL,EAAIjc,KAAMic,EAAI5vB,GAAK,GAAI4vB,EAAK,kBAC9F,IAAIA,EAAIjc,KAAOiU,EAAG9B,IAAI+E,MAAO,CAClC,GAAIxoB,GAAO8tB,GAAQvI,EAAG9B,IAAK8J,EAAIjc,KAAO,GAAGrC,IACrCjP,IACFulB,EAAGiyB,aAAalmC,EAAK7R,OAAO,GAAK8lB,EAAG9B,IAAIE,gBAAkB3jB,EAAKP,OAAOO,EAAKpN,OAAS,GAAIgmC,GAAIrL,EAAIjc,KAAO,EAAGtR,EAAKpN,OAAS,GAAIgmC,GAAIrL,EAAIjc,KAAM,GAAI,cAGpJ0vB,EAAOptC,KAAK,GAAI+rC,IAAMpS,EAAKA,IAE7BhI,EAAGmuC,cAAc1yB,MAGrB8/B,iBAAkB,SAASv7C,GACzBwV,GAAQxV,EAAI,WAEV,IAAK,GADD/T,GAAM+T,EAAGgyB,iBAAiB3kD,OACrBiB,EAAI,EAAO2d,EAAJ3d,EAASA,IAAK,CAC5B,GAAImmC,GAAQzU,EAAGgyB,iBAAiB1jD,EAChC0xB,GAAGiyB,aAAajyB,EAAG9B,IAAIE,gBAAiBqW,EAAMuB,OAAQvB,EAAMkB,KAAM,UAClE3V,EAAG6V,WAAWpB,EAAMrM,OAAOrc,KAAO,EAAG,MAAM,GAE7CipB,GAAoBhV,MAGxBo2C,gBAAiB,SAASp2C,GACxBA,EAAGo2C,oBAGHliB,GAAS98C,EAAW88C,SACxBA,IAAOsnB,OACLC,KAAQ,aACRC,MAAS,cACTC,GAAM,WACNC,KAAQ,aACRC,IAAO,YACPC,KAAQ,mBACRC,OAAU,WACVC,SAAY,aACZC,OAAU,eACVC,UAAa,gBACbC,kBAAmB,gBACnBC,IAAO,aACPC,YAAa,aACbC,MAAS,mBACTC,OAAU,kBACVC,IAAO,mBAETtoB,GAAOuoB,WACLC,SAAU,YACVC,SAAU,aACVC,SAAU,OACVC,eAAgB,OAChBC,SAAU,OACVC,YAAa,aACbC,WAAY,WACZC,UAAW,WACXC,YAAa,aACbC,YAAa,cACbC,aAAc,eACdC,WAAY,cACZC,YAAa,YACbC,iBAAkB,iBAClBC,cAAe,gBACfC,SAAU,OACVC,SAAU,OACVC,SAAU,WACVC,eAAgB,WAChBC,eAAgB,UAChBC,eAAgB,aAChBC,SAAU,aACVC,SAAU,aACVC,SAAU,gBACVC,eAAgB,gBAChBC,QAAS,gBACTC,YAAa,SAEflqB,GAAOmqB,QACLX,SAAU,cACVY,SAAU,aACVC,SAAU,WACVC,SAAU,aACVC,QAAS,cACTC,QAAS,aACThC,SAAU,cACViC,SAAU,YACVC,SAAU,aACVC,eAAgB,WAChBlC,SAAU,eACVmC,SAAU,gBACVC,QAAS,eACTC,gBAAiB,gBACjBC,SAAU,WACVC,SAAU,kBAEZhrB,GAAOirB,YACLC,QAAS,YACTC,QAAS,aACTC,QAAS,OACTC,cAAe,OACfC,QAAS,OACTC,WAAY,aACZC,SAAU,aACVC,UAAW,WACXC,WAAY,WACZvC,WAAY,cACZC,YAAa,eACbuC,WAAY,aACZC,YAAa,cACbd,gBAAiB,iBACjBe,qBAAsB,gBACtBC,aAAc,gBACdC,QAAS,OACTC,QAAS,OACTC,QAAS,WACTC,cAAe,WACfC,YAAa,UACbC,kBAAmB,aACnBC,QAAS,aACTC,QAAS,aACTC,gBAAiB,qBACjBC,aAAc,sBACdC,QAAS,gBACTC,cAAe,gBACf3D,UAAW,aACXC,YAAa,WACbkB,aAAc,QAAS,WAEzBlqB,GAAO,WAAahkB,GAAMgkB,GAAOirB,WAAajrB,GAAOuoB,UA+BrDrlE,EAAWypE,gBAAkB,SAASC,GACpC,GAAIxe,KACJ,KAAK,GAAIye,KAAWD,GAClB,GAAIA,EAAO7vE,eAAe8vE,GAAU,CAClC,GAAIlxE,GAAQixE,EAAOC,EACnB,IAAI,mCAAmCxoE,KAAKwoE,GAC1C,QACF,IAAa,OAATlxE,EAAgB,OACXixE,GAAOC,EACd,UAGF,IAAK,GADD1tE,GAAOmhC,GAAIusC,EAAQ9tE,MAAM,KAAMspD,IAC1BjuD,EAAI,EAAGA,EAAI+E,EAAKhG,OAAQiB,IAAK,CACpC,GAAI2rC,GACAhtC,CACAqB,IAAK+E,EAAKhG,OAAS,GACrBJ,EAAOoG,EAAKye,KAAK,KACjBmoB,EAAMpqC,IAEN5C,EAAOoG,EAAKsL,MAAM,EAAGrQ,EAAI,GAAGwjB,KAAK,KACjCmoB,EAAM,MAER,IAAIx/B,GAAO6nD,EAAKr1D,EAChB,IAAKwN,GAEA,GAAIA,GAAQw/B,EACf,KAAM,IAAIzpC,OAAM,6BAA+BvD,OAF/Cq1D,GAAKr1D,GAAQgtC,QAIV6mC,GAAOC,GAElB,IAAK,GAAIlvE,KAAQywD,GACfwe,EAAOjvE,GAAQywD,EAAKzwD,EACtB,OAAOivE,GAET,IAAI9sB,IAAY58C,EAAW48C,UAAY,SAASxQ,EAAKhP,EAAKuf,EAAQ/4C,GAChEw5B,EAAMooB,GAAUpoB,EAChB,IAAItM,GAAQsM,EAAIpmC,KAAOomC,EAAIpmC,KAAKo1C,EAAKxoC,GAAWw5B,EAAIgP,EACpD,IAAItb,KAAU,EACZ,MAAO,SACT,IAAc,QAAVA,EACF,MAAO,OACT,IAAa,MAATA,GAAiB6rB,EAAO7rB,GAC1B,MAAO,SACT,IAAIsM,EAAI4pC,YAAa,CACnB,GAAuD,kBAAnDrtE,OAAOS,UAAU2E,SAAS/H,KAAKomC,EAAI4pC,aACrC,MAAOpqB,IAAUxQ,EAAKhP,EAAI4pC,YAAarqB,EAAQ/4C,EACjD,KAAK,GAAI1M,GAAI,EAAGA,EAAIkmC,EAAI4pC,YAAY/wE,OAAQiB,IAAK,CAC/C,GAAI6N,GAAS63C,GAAUxQ,EAAKhP,EAAI4pC,YAAY9vE,GAAIylD,EAAQ/4C,EACxD,IAAImB,EACF,MAAOA,MAIXk4C,GAAgBj9C,EAAWi9C,cAAgB,SAASxkD,GACtD,GAAI5C,GAAuB,gBAAT4C,GAAoBA,EAAQmxE,GAASnxE,EAAM8kD,QAC7D,OAAe,QAAR1nD,GAA0B,OAARA,GAAyB,SAARA,GAA2B,OAARA,GAE3DunD,GAAUp9C,EAAWo9C,QAAU,SAASsC,EAAOmqB,GACjD,GAAIxuB,IAA2B,IAAjBqE,EAAMnC,SAAiBmC,EAAM,QACzC,OAAO,CACT,IAAIsT,GAAO4W,GAASlqB,EAAMnC,SACtB1nD,EAAOm9D,CACX,OAAY,OAARn9D,GAAgB6pD,EAAMoqB,aACjB,GACLpqB,EAAMpG,QAAkB,OAAR0Z,IAClBn9D,EAAO,OAASA,IACbogE,GAAcvW,EAAM/H,QAAU+H,EAAM9H,UAAoB,QAARob,IACnDn9D,EAAO,QAAUA,IACdogE,GAAcvW,EAAM9H,QAAU8H,EAAM/H,UAAoB,OAARqb,IACnDn9D,EAAO,OAASA,IACbg0E,GAAWnqB,EAAMxI,UAAoB,SAAR8b,IAChCn9D,EAAO,SAAWA,GACbA,GAKTmK,GAAW+pE,aAAe,SAAS/S,EAAU7nD,GAW3C,QAAS07B,KACPmsB,EAASv+D,MAAQmwB,EAAGohD,WALtB,GANA76D,EAAUA,EAAUwX,GAAQxX,MAC5BA,EAAQ1W,MAAQu+D,EAASv+D,OACpB0W,EAAQ86D,UAAYjT,EAASgJ,WAChC7wD,EAAQ86D,SAAWjT,EAASgJ,WACzB7wD,EAAQ+6D,aAAelT,EAASkT,cACnC/6D,EAAQ+6D,YAAclT,EAASkT,aACR,MAArB/6D,EAAQsY,UAAmB,CAC7B,GAAI8B,GAAW4N,IACfhoB,GAAQsY,UAAY8B,GAAYytC,GAAkD,MAAtCA,EAASz0B,aAAa,cAAwBhZ,GAAYkQ,SAAStzB,KAKjH,GAAI6wD,EAASmT,OACX33C,GAAGwkC,EAASmT,KAAM,SAAUt/B,IACvB17B,EAAQi7D,wBAAwB,CACnC,GAAID,GAAOnT,EAASmT,KAChBE,EAAaF,EAAKG,MACtB,KACE,GAAIC,GAAgBJ,EAAKG,OAAS,WAChCz/B,IACAs/B,EAAKG,OAASD,EACdF,EAAKG,SACLH,EAAKG,OAASC,GAEhB,MAAOhwE,KAGb4U,EAAQ2a,WAAa,SAASlB,GAC5BA,EAAGiiB,KAAOA,EACVjiB,EAAG4hD,YAAc,WACf,MAAOxT,IAETpuC,EAAG6hD,WAAa,WACd7hD,EAAG6hD,WAAax/B,MAChBJ,IACAmsB,EAASh+B,WAAWC,YAAYrQ,EAAG22C,qBACnCvI,EAASt2D,MAAMymB,QAAU,GACrB6vC,EAASmT,OACX5zB,GAAIygB,EAASmT,KAAM,SAAUt/B,GACM,kBAAxBmsB,GAASmT,KAAKG,SACvBtT,EAASmT,KAAKG,OAASD,MAI/BrT,EAASt2D,MAAMymB,QAAU,MACzB,IAAIyB,GAAK5oB,EAAW,SAASkzB,GAC3B8jC,EAASh+B,WAAW7F,aAAaD,EAAM8jC,EAASx+B,cAC/CrpB,EACH,OAAOyZ,GAET,IAAIuiC,IAAenrD,EAAWmrD,aAAe,SAAS1oD,EAAQmoC,GAC5Dx0C,KAAKyM,IAAMzM,KAAKsM,MAAQ,EACxBtM,KAAKqM,OAASA,EACdrM,KAAKw0C,QAAUA,GAAW,EAC1Bx0C,KAAKs0E,cAAgBt0E,KAAKu0E,gBAAkB,EAC5Cv0E,KAAKu+D,UAAY,EAEnBxJ,IAAa/wD,WACXgf,IAAK,WACH,MAAOhjB,MAAKyM,KAAOzM,KAAKqM,OAAOxM,QAEjC0X,IAAK,WACH,MAAOvX,MAAKyM,KAAOzM,KAAKu+D,WAE1BxyD,KAAM,WACJ,MAAO/L,MAAKqM,OAAOK,OAAO1M,KAAKyM,MAAQrL,QAEzC6I,KAAM,WACJ,MAAIjK,MAAKyM,IAAMzM,KAAKqM,OAAOxM,OAClBG,KAAKqM,OAAOK,OAAO1M,KAAKyM,OADjC,QAGFzB,IAAK,SAAS5D,GACZ,GAAIwD,GAAK5K,KAAKqM,OAAOK,OAAO1M,KAAKyM,IACjC,IAAoB,gBAATrF,GACT,GAAIm0D,GAAK3wD,GAAMxD,MAEf,IAAIm0D,GAAK3wD,IAAOxD,EAAM2D,KAAO3D,EAAM2D,KAAKH,GAAMxD,EAAMwD,GACtD,OAAI2wD,MACAv7D,KAAKyM,IACA7B,GAFT,QAKFK,SAAU,SAAS7D,GAEjB,IADA,GAAIkF,GAAQtM,KAAKyM,IACVzM,KAAKgL,IAAI5D,KAChB,MAAOpH,MAAKyM,IAAMH,GAEpBmL,SAAU,WAER,IADA,GAAInL,GAAQtM,KAAKyM,IACV,aAAa1B,KAAK/K,KAAKqM,OAAOK,OAAO1M,KAAKyM,SAC7CzM,KAAKyM,GACT,OAAOzM,MAAKyM,IAAMH,GAEpBnB,UAAW,WACTnL,KAAKyM,IAAMzM,KAAKqM,OAAOxM,QAEzB20E,OAAQ,SAAS5pE,GACf,GAAI8vB,GAAQ16B,KAAKqM,OAAO1L,QAAQiK,EAAI5K,KAAKyM,IACzC,OAAIiuB,GAAQ,IACV16B,KAAKyM,IAAMiuB,GACJ,GAFT,QAKF+5C,OAAQ,SAASnnD,GACfttB,KAAKyM,KAAO6gB,GAEdvgB,OAAQ,WAKN,MAJI/M,MAAKs0E,cAAgBt0E,KAAKsM,QAC5BtM,KAAKu0E,gBAAkBhgC,GAAYv0C,KAAKqM,OAAQrM,KAAKsM,MAAOtM,KAAKw0C,QAASx0C,KAAKs0E,cAAet0E,KAAKu0E,iBACnGv0E,KAAKs0E,cAAgBt0E,KAAKsM,OAErBtM,KAAKu0E,iBAAmBv0E,KAAKu+D,UAAYhqB,GAAYv0C,KAAKqM,OAAQrM,KAAKu+D,UAAWv+D,KAAKw0C,SAAW,IAE3Gh9B,YAAa,WACX,MAAO+8B,IAAYv0C,KAAKqM,OAAQ,KAAMrM,KAAKw0C,UAAYx0C,KAAKu+D,UAAYhqB,GAAYv0C,KAAKqM,OAAQrM,KAAKu+D,UAAWv+D,KAAKw0C,SAAW,IAEnIptC,MAAO,SAAS+I,EAASukE,EAASC,GAChC,GAAsB,gBAAXxkE,GAUJ,CACL,GAAI/I,GAAQpH,KAAKqM,OAAO8E,MAAMnR,KAAKyM,KAAKrF,MAAM+I,EAC9C,OAAI/I,IAASA,EAAMyX,MAAQ,EAClB,MACLzX,GAASstE,KAAY,IACvB10E,KAAKyM,KAAOrF,EAAM,GAAGvH,QAChBuH,GAfP,GAAIwtE,GAAQ,SAASC,GACnB,MAAOF,GAAkBE,EAAIC,cAAgBD,GAE3ChxE,EAAS7D,KAAKqM,OAAOxI,OAAO7D,KAAKyM,IAAK0D,EAAQtQ,OAClD,OAAI+0E,GAAM/wE,IAAW+wE,EAAMzkE,IACrBukE,KAAY,IACd10E,KAAKyM,KAAO0D,EAAQtQ,SACf,GAHT,QAcJyL,QAAS,WACP,MAAOtL,MAAKqM,OAAO8E,MAAMnR,KAAKsM,MAAOtM,KAAKyM,MAE5CsoE,eAAgB,SAASznD,EAAGmnC,GAC1Bz0D,KAAKu+D,WAAajxC,CAClB,KACE,MAAOmnC,KACP,QACAz0D,KAAKu+D,WAAajxC,IAIxB,IAAI6iC,IAAe,EACfX,GAAa5lD,EAAW4lD,WAAa,SAAS9+B,EAAKlmB,GACrDxK,KAAKse,SACLte,KAAKwK,KAAOA,EACZxK,KAAK0wB,IAAMA,EACX1wB,KAAKkD,KAAOitD,GAEdoM,IAAW/M,IACXA,GAAWxrD,UAAU24B,MAAQ,WAC3B,IAAI38B,KAAK8vC,kBAAT,CAEA,GAAItd,GAAKxyB,KAAK0wB,IAAI8B,GACdwiD,EAASxiD,IAAOA,EAAGQ,KAGvB,IAFIgiD,GACFjiD,GAAeP,GACbic,GAAWzuC,KAAM,SAAU,CAC7B,GAAI06B,GAAQ16B,KAAK26B,MACbD,IACF6K,GAAYvlC,KAAM,QAAS06B,EAAME,KAAMF,EAAMG,IAIjD,IAAK,GAFD0D,GAAM,KACNvF,EAAM,KACDl4B,EAAI,EAAGA,EAAId,KAAKse,MAAMze,SAAUiB,EAAG,CAC1C,GAAIyd,GAAOve,KAAKse,MAAMxd,GAClBswD,EAAOD,GAAiB5yC,EAAKmxB,YAAa1vC,KAC1CwyB,KAAOxyB,KAAKwwC,UACdwD,GAAcxhB,EAAI2Y,GAAO5sB,GAAO,QACzBiU,IACQ,MAAX4+B,EAAKv2B,KACP7B,EAAMmS,GAAO5sB,IACE,MAAb6yC,EAAKx2B,OACP2D,EAAM4M,GAAO5sB,KAEjBA,EAAKmxB,YAAc2hB,GAAiB9yC,EAAKmxB,YAAa0hB,GACrC,MAAbA,EAAKx2B,MAAgB56B,KAAKwwC,YAAcrX,GAAan5B,KAAK0wB,IAAKnS,IAASiU,GAC1EkH,GAAiBnb,EAAMqa,GAAWpG,EAAGzB,UAEzC,GAAIyB,GAAMxyB,KAAKwwC,YAAche,EAAGzZ,QAAQqY,aACtC,IAAK,GAAItwB,GAAI,EAAGA,EAAId,KAAKse,MAAMze,SAAUiB,EAAG,CAC1C,GAAI09D,GAASpsB,GAAWpyC,KAAKse,MAAMxd,IAC/B2d,EAAM6b,EAAWkkC,EACjB//C,GAAM+T,EAAGzB,QAAQgG,gBACnBvE,EAAGzB,QAAQ+F,QAAU0nC,EACrBhsC,EAAGzB,QAAQgG,cAAgBtY,EAC3B+T,EAAGzB,QAAQiG,gBAAiB,GAGvB,MAAPuH,GAAe/L,GAAMxyB,KAAKwwC,WAC5BvY,GAAUzF,EAAI+L,EAAKvF,EAAM,GAC3Bh5B,KAAKse,MAAMze,OAAS,EACpBG,KAAK8vC,mBAAoB,EACrB9vC,KAAK+vC,QAAU/vC,KAAK0wB,IAAI0V,WAC1BpmC,KAAK0wB,IAAI0V,UAAW,EAChB5T,GACFwc,GAAiBxc,EAAG9B,MAEpB8B,GACF+S,GAAY/S,EAAI,gBAAiBA,EAAIxyB,MACnCg1E,GACFphD,GAAapB,GACXxyB,KAAK2Z,QACP3Z,KAAK2Z,OAAOgjB,UAEhB6yB,GAAWxrD,UAAU22B,KAAO,SAASwP,EAAMsH,GAC7B,MAARtH,GAA6B,YAAbnqC,KAAKwK,OACvB2/B,EAAO,EAGT,KAAK,GAFDvP,GACAC,EACK/5B,EAAI,EAAGA,EAAId,KAAKse,MAAMze,SAAUiB,EAAG,CAC1C,GAAIyd,GAAOve,KAAKse,MAAMxd,GAClBswD,EAAOD,GAAiB5yC,EAAKmxB,YAAa1vC,KAC9C,IAAiB,MAAboxD,EAAKx2B,OACPA,EAAOiL,GAAI4L,EAAUlzB,EAAO4sB,GAAO5sB,GAAO6yC,EAAKx2B,MACnC,IAARuP,GACF,MAAOvP,EAEX,IAAe,MAAXw2B,EAAKv2B,KACPA,EAAKgL,GAAI4L,EAAUlzB,EAAO4sB,GAAO5sB,GAAO6yC,EAAKv2B,IACjC,GAARsP,GACF,MAAOtP,GAGb,MAAOD,KACLA,KAAMA,EACNC,GAAIA,IAGR20B,GAAWxrD,UAAUonD,QAAU,WAC7B,GAAI3+C,GAAMzM,KAAK26B,KAAK,IAAI,GACpBwK,EAASnlC,KACTwyB,EAAKxyB,KAAK0wB,IAAI8B,EACb/lB,IAAQ+lB,GAEbwV,GAAQxV,EAAI,WACV,GAAIjU,GAAO9R,EAAI8R,KACXwkB,EAAQoI,GAAO1+B,EAAI8R,MACnBqX,EAAOmU,GAAgBvX,EAAIuQ,EAM/B,IALInN,IACF4hB,GAA6B5hB,GAC7BpD,EAAGQ,MAAM8b,iBAAmBtc,EAAGQ,MAAMC,aAAc,GAErDT,EAAGQ,MAAM0nB,eAAgB,GACpBvhB,GAAagM,EAAOzU,IAAKnS,IAA0B,MAAjB4mB,EAAO7L,OAAgB,CAC5D,GAAI0vC,GAAY7jC,EAAO7L,MACvB6L,GAAO7L,OAAS,IAChB,IAAI27C,GAAUh9B,GAAa9S,GAAU6jC,CACjCiM,IACFv7C,GAAiBnb,EAAMA,EAAK+a,OAAS27C,OAI7CzlB,GAAWxrD,UAAUstD,WAAa,SAAS/yC,GACzC,IAAKve,KAAKse,MAAMze,QAAUG,KAAK0wB,IAAI8B,GAAI,CACrC,GAAI2oB,GAAKn7C,KAAK0wB,IAAI8B,GAAGQ,KAChBmoB,GAAGiB,oBAA8D,IAAxCz7C,GAAQw6C,EAAGiB,mBAAoBp8C,QAC1Dm7C,EAAGmB,uBAAyBnB,EAAGmB,0BAA4Bz7C,KAAKb,MAErEA,KAAKse,MAAMzd,KAAK0d,IAElBixC,GAAWxrD,UAAU+uD,WAAa,SAASx0C,GAEzC,GADAve,KAAKse,MAAMjd,OAAOV,GAAQX,KAAKse,MAAOC,GAAO,IACxCve,KAAKse,MAAMze,QAAUG,KAAK0wB,IAAI8B,GAAI,CACrC,GAAI2oB,GAAKn7C,KAAK0wB,IAAI8B,GAAGQ,OACpBmoB,EAAGiB,qBAAuBjB,EAAGiB,wBAA0Bv7C,KAAKb,OAGjE,IAAImwD,IAAe,EA0EfQ,GAAmB/mD,EAAW+mD,iBAAmB,SAAShsB,EAASmJ,GACrE9tC,KAAK2kC,QAAUA,EACf3kC,KAAK8tC,QAAUA,CACf,KAAK,GAAIhtC,GAAI,EAAGA,EAAI6jC,EAAQ9kC,SAAUiB,EACpC6jC,EAAQ7jC,GAAG6Y,OAAS3Z,KAExBu8D,IAAW5L,IACXA,GAAiB3sD,UAAU24B,MAAQ,WACjC,IAAI38B,KAAK8vC,kBAAT,CAEA9vC,KAAK8vC,mBAAoB,CACzB,KAAK,GAAIhvC,GAAI,EAAGA,EAAId,KAAK2kC,QAAQ9kC,SAAUiB,EACzCd,KAAK2kC,QAAQ7jC,GAAG67B,OAClB4I,IAAYvlC,KAAM,WAEpB2wD,GAAiB3sD,UAAU22B,KAAO,SAASwP,EAAMsH,GAC/C,MAAOzxC,MAAK8tC,QAAQnT,KAAKwP,EAAMsH,GA0XjC,IAAIuiB,IAAapqD,EAAWoqD,WAAa,SAAStjC,EAAKoM,EAAM/jB,GAC3D,GAAIA,EACF,IAAK,GAAIzU,KAAOyU,GACVA,EAAQtV,eAAea,KACzBtE,KAAKsE,GAAOyU,EAAQzU,GAC1BtE,MAAK0wB,IAAMA,EACX1wB,KAAK88B,KAAOA,EAEdy/B,IAAWvI,IAKXA,GAAWhwD,UAAU24B,MAAQ,WAC3B,GAAInK,GAAKxyB,KAAK0wB,IAAI8B,GACd0S,EAAKllC,KAAKue,KAAK8a,QACf9a,EAAOve,KAAKue,KACZ+uC,EAAKniB,GAAO5sB,EAChB,IAAU,MAAN+uC,GAAepoB,EAAnB,CAEA,IAAK,GAAIpkC,GAAI,EAAGA,EAAIokC,EAAGrlC,SAAUiB,EAC3BokC,EAAGpkC,IAAMd,MACXklC,EAAG7jC,OAAOP,IAAK,EACdokC,GAAGrlC,SACN0e,EAAK8a,QAAU,KACjB,IAAIC,GAAS2e,GAAaj4C,KAC1B05B,IAAiBnb,EAAMwa,KAAKC,IAAI,EAAGza,EAAK+a,OAASA,IAC7C9G,GACFwV,GAAQxV,EAAI,WACVqhC,GAA6BrhC,EAAIjU,GAAO+a,GACxC0a,GAAcxhB,EAAI86B,EAAI,cAG5B0G,GAAWhwD,UAAUonD,QAAU,WAC7B,GAAI8pB,GAAOl1E,KAAKs5B,OACZ9G,EAAKxyB,KAAK0wB,IAAI8B,GACdjU,EAAOve,KAAKue,IAChBve,MAAKs5B,OAAS,IACd,IAAIyI,GAAOkW,GAAaj4C,MAAQk1E,CAC3BnzC,KAELrI,GAAiBnb,EAAMA,EAAK+a,OAASyI,GACjCvP,GACFwV,GAAQxV,EAAI,WACVA,EAAGQ,MAAMC,aAAc,EACvB4gC,GAA6BrhC,EAAIjU,EAAMwjB,MA0C7C,IAAIy2B,IAAO5uD,EAAW4uD,KAAO,SAASt8C,EAAMwzB,EAAahX,GACvD14B,KAAKkc,KAAOA,EACZ82C,GAAkBhzD,KAAM0vC,GACxB1vC,KAAKs5B,OAASZ,EAAiBA,EAAe14B,MAAQ,EAExDu8D,IAAW/D,IACXA,GAAKx0D,UAAUmnC,OAAS,WACtB,MAAOA,IAAOnrC,MA0LhB,IAAIk2D,OACAD,KAmUJ+C,IAAUh1D,WACRm1D,UAAW,WACT,MAAOn5D,MAAKse,MAAMze,QAEpBs1E,YAAa,SAASzf,EAAIpoC,GACxB,IAAK,GAAIxsB,GAAI40D,EACTvxD,EAAIuxD,EAAKpoC,EAAOnpB,EAAJrD,IAASA,EAAG,CAC1B,GAAIyd,GAAOve,KAAKse,MAAMxd,EACtBd,MAAKs5B,QAAU/a,EAAK+a,OACpB86B,GAAY71C,GACZgnB,GAAYhnB,EAAM,UAEpBve,KAAKse,MAAMjd,OAAOq0D,EAAIpoC,IAExBid,SAAU,SAASjsB,GACjBA,EAAMzd,KAAKd,MAAMue,EAAOte,KAAKse,QAE/B82D,YAAa,SAAS1f,EAAIp3C,EAAOgb,GAC/Bt5B,KAAKs5B,QAAUA,EACft5B,KAAKse,MAAQte,KAAKse,MAAMnN,MAAM,EAAGukD,GAAIhtD,OAAO4V,GAAO5V,OAAO1I,KAAKse,MAAMnN,MAAMukD,GAC3E,KAAK,GAAI50D,GAAI,EAAGA,EAAIwd,EAAMze,SAAUiB,EAClCwd,EAAMxd,GAAG6Y,OAAS3Z,MAEtBq1E,MAAO,SAAS3f,EAAIpoC,EAAG6tB,GACrB,IAAK,GAAIh3C,GAAIuxD,EAAKpoC,EAAQnpB,EAALuxD,IAAUA,EAC7B,GAAIva,EAAGn7C,KAAKse,MAAMo3C,IAChB,OAAO,IAiBfuD,GAAYj1D,WACVm1D,UAAW,WACT,MAAOn5D,MAAKi/B,MAEdk2C,YAAa,SAASzf,EAAIpoC,GACxBttB,KAAKi/B,MAAQ3R,CACb,KAAK,GAAIxsB,GAAI,EAAGA,EAAId,KAAKk5D,SAASr5D,SAAUiB,EAAG,CAC7C,GAAI24D,GAAQz5D,KAAKk5D,SAASp4D,GACtB44D,EAAKD,EAAMN,WACf,IAASO,EAALhE,EAAS,CACX,GAAIjzB,GAAK1J,KAAKwF,IAAIjR,EAAGosC,EAAKhE,GACtBsT,EAAYvP,EAAMngC,MAOtB,IANAmgC,EAAM0b,YAAYzf,EAAIjzB,GACtBziC,KAAKs5B,QAAU0vC,EAAYvP,EAAMngC,OAC7BogC,GAAMj3B,IACRziC,KAAKk5D,SAAS73D,OAAOP,IAAK,GAC1B24D,EAAM9/C,OAAS,MAEA,IAAZ2T,GAAKmV,GACR,KACFizB,GAAK,MAELA,IAAMgE,EAEV,GAAI15D,KAAKi/B,KAAO3R,EAAI,KAAOttB,KAAKk5D,SAASr5D,OAAS,KAAOG,KAAKk5D,SAAS,YAAcF,MAAa,CAChG,GAAI16C,KACJte,MAAKuqC,SAASjsB,GACdte,KAAKk5D,UAAY,GAAIF,IAAU16C,IAC/Bte,KAAKk5D,SAAS,GAAGv/C,OAAS3Z,OAG9BuqC,SAAU,SAASjsB,GACjB,IAAK,GAAIxd,GAAI,EAAGA,EAAId,KAAKk5D,SAASr5D,SAAUiB,EAC1Cd,KAAKk5D,SAASp4D,GAAGypC,SAASjsB,IAE9B82D,YAAa,SAAS1f,EAAIp3C,EAAOgb,GAC/Bt5B,KAAKi/B,MAAQ3gB,EAAMze,OACnBG,KAAKs5B,QAAUA,CACf,KAAK,GAAIx4B,GAAI,EAAGA,EAAId,KAAKk5D,SAASr5D,SAAUiB,EAAG,CAC7C,GAAI24D,GAAQz5D,KAAKk5D,SAASp4D,GACtB44D,EAAKD,EAAMN,WACf,IAAUO,GAANhE,EAAU,CAEZ,GADA+D,EAAM2b,YAAY1f,EAAIp3C,EAAOgb,GACzBmgC,EAAMn7C,OAASm7C,EAAMn7C,MAAMze,OAAS,GAAI;AAC1C,KAAO45D,EAAMn7C,MAAMze,OAAS,IAAI,CAC9B,GAAIy1E,GAAU7b,EAAMn7C,MAAMjd,OAAOo4D,EAAMn7C,MAAMze,OAAS,GAAI,IACtD01E,EAAU,GAAIvc,IAAUsc,EAC5B7b,GAAMngC,QAAUi8C,EAAQj8C,OACxBt5B,KAAKk5D,SAAS73D,OAAOP,EAAI,EAAG,EAAGy0E,GAC/BA,EAAQ57D,OAAS3Z,KAEnBA,KAAKw1E,aAEP,MAEF9f,GAAMgE,IAGV8b,WAAY,WACV,KAAIx1E,KAAKk5D,SAASr5D,QAAU,IAA5B,CAEA,GAAImR,GAAKhR,IACT,GAAG,CACD,GAAIs1E,GAAUtkE,EAAGkoD,SAAS73D,OAAO2P,EAAGkoD,SAASr5D,OAAS,EAAG,GACrD41E,EAAU,GAAIxc,IAAYqc,EAC9B,IAAKtkE,EAAG2I,OAKD,CACL3I,EAAGiuB,MAAQw2C,EAAQx2C,KACnBjuB,EAAGsoB,QAAUm8C,EAAQn8C,MACrB,IAAIo8C,GAAU/0E,GAAQqQ,EAAG2I,OAAOu/C,SAAUloD,EAC1CA,GAAG2I,OAAOu/C,SAAS73D,OAAOq0E,EAAU,EAAG,EAAGD,OAT5B,CACd,GAAI3gB,GAAO,GAAImE,IAAYjoD,EAAGkoD,SAC9BpE,GAAKn7C,OAAS3I,EACdA,EAAGkoD,UAAYpE,EAAM2gB,GACrBzkE,EAAK8jD,EAOP2gB,EAAQ97D,OAAS3I,EAAG2I,aACb3I,EAAGkoD,SAASr5D,OAAS,GAC9BmR,GAAG2I,OAAO67D,eAEZH,MAAO,SAAS3f,EAAIpoC,EAAG6tB,GACrB,IAAK,GAAIr6C,GAAI,EAAGA,EAAId,KAAKk5D,SAASr5D,SAAUiB,EAAG,CAC7C,GAAI24D,GAAQz5D,KAAKk5D,SAASp4D,GACtB44D,EAAKD,EAAMN,WACf,IAASO,EAALhE,EAAS,CACX,GAAIigB,GAAO58C,KAAKwF,IAAIjR,EAAGosC,EAAKhE,EAC5B,IAAI+D,EAAM4b,MAAM3f,EAAIigB,EAAMx6B,GACxB,OAAO,CACT,IAAmB,IAAd7tB,GAAKqoD,GACR,KACFjgB,GAAK,MAELA,IAAMgE,IAId,IAAIkc,IAAY,EACZjlD,GAAM/mB,EAAW+mB,IAAM,SAASzU,EAAM7C,EAAMo/C,EAAWlsB,GACzD,KAAMvsC,eAAgB2wB,KACpB,MAAO,IAAIA,IAAIzU,EAAM7C,EAAMo/C,EAAWlsB,EACvB,OAAbksB,IACFA,EAAY,GACdQ,GAAYr4D,KAAKZ,MAAO,GAAIg5D,KAAW,GAAIR,IAAK,GAAI,UACpDx4D,KAAKy1B,MAAQgjC,EACbz4D,KAAKq8B,UAAYr8B,KAAKs8B,WAAa,EACnCt8B,KAAKomC,UAAW,EAChBpmC,KAAK61E,gBAAkB,EACvB71E,KAAK+3B,SAAW0gC,CAChB,IAAInsD,GAAQu5B,GAAI4yB,EAAW,EAC3Bz4D,MAAKwmC,IAAMyG,GAAgB3gC,GAC3BtM,KAAKsuC,QAAU,GAAIwrB,IAAQ,MAC3B95D,KAAKkD,KAAO0yE,GACZ51E,KAAK03B,WAAare,EAClBrZ,KAAKusC,QAAUA,EACI,gBAARrwB,KACTA,EAAOlc,KAAK4mC,WAAW1qB,IACzBsuC,GAAUxqD,MACR46B,KAAMtuB,EACNuuB,GAAIvuB,EACJ4P,KAAMA,IAER2xB,GAAa7tC,KAAMitC,GAAgB3gC,GAAQ2iC,IAE7Cte,IAAI3sB,UAAY24D,GAAU1D,GAAYj1D,WACpCwS,YAAama,GACbiH,KAAM,SAASgD,EAAMC,EAAIsgB,GACnBA,EACFn7C,KAAKq1E,MAAMz6C,EAAO56B,KAAKy1B,MAAOoF,EAAKD,EAAMugB,GAEzCn7C,KAAKq1E,MAAMr1E,KAAKy1B,MAAOz1B,KAAKy1B,MAAQz1B,KAAKi/B,KAAMrE,IAEnDi+B,OAAQ,SAASnD,EAAIp3C,GAEnB,IAAK,GADDgb,GAAS,EACJx4B,EAAI,EAAGA,EAAIwd,EAAMze,SAAUiB,EAClCw4B,GAAUhb,EAAMxd,GAAGw4B,MACrBt5B,MAAKo1E,YAAY1f,EAAK11D,KAAKy1B,MAAOnX,EAAOgb,IAE3Cw/B,OAAQ,SAASpD,EAAIpoC,GACnBttB,KAAKm1E,YAAYzf,EAAK11D,KAAKy1B,MAAOnI,IAEpCsmD,SAAU,SAASrnC,GACjB,GAAIjuB,GAAQq7C,GAAS35D,KAAMA,KAAKy1B,MAAOz1B,KAAKy1B,MAAQz1B,KAAKi/B,KACzD,OAAIsN,MAAY,EACPjuB,EACFA,EAAMgG,KAAKioB,GAAWvsC,KAAK4wB,kBAEpC04C,SAAU7sB,GAAY,SAASl0B,GAC7B,GAAIwV,GAAM8H,GAAI7lC,KAAKy1B,MAAO,GACtBrY,EAAOpd,KAAKy1B,MAAQz1B,KAAKi/B,KAAO,CACpCqI,IAAWtnC,MACT46B,KAAMmD,EACNlD,GAAIgL,GAAIzoB,EAAM2d,GAAQ/6B,KAAMod,GAAMlB,KAAKrc,QACvCqc,KAAMlc,KAAK4mC,WAAWre,GACtBke,OAAQ,WACRkkB,MAAM,IACL,GACH9c,GAAa7tC,KAAMitC,GAAgBlP,MAErC0mB,aAAc,SAASl8B,EAAMqS,EAAMC,EAAI4L,GACrC7L,EAAOiQ,GAAQ7qC,KAAM46B,GACrBC,EAAKA,EAAKgQ,GAAQ7qC,KAAM66B,GAAMD,EAC9B6pB,GAAazkD,KAAMuoB,EAAMqS,EAAMC,EAAI4L,IAErCgC,SAAU,SAAS7N,EAAMC,EAAI0R,GAC3B,GAAIjuB,GAAQguB,GAAWtsC,KAAM6qC,GAAQ7qC,KAAM46B,GAAOiQ,GAAQ7qC,KAAM66B,GAChE,OAAI0R,MAAY,EACPjuB,EACFA,EAAMgG,KAAKioB,GAAWvsC,KAAK4wB,kBAEpCmK,QAAS,SAASxc,GAChB,GAAIxd,GAAIf,KAAK81E,cAAcv3D,EAC3B,OAAOxd,IAAKA,EAAEmb,MAEhB45D,cAAe,SAASv3D,GACtB,MAAI8uB,IAAOrtC,KAAMue,GACRwc,GAAQ/6B,KAAMue,GADvB,QAGFw3D,cAAe,SAASx3D,GACtB,MAAO4sB,IAAO5sB,IAEhBy3D,yBAA0B,SAASz3D,GAGjC,MAFmB,gBAARA,KACTA,EAAOwc,GAAQ/6B,KAAMue,IAChB6zB,GAAW7zB,IAEpB03D,UAAW,WACT,MAAOj2E,MAAKi/B,MAEdw5B,UAAW,WACT,MAAOz4D,MAAKy1B,OAEd+I,SAAU,WACR,MAAOx+B,MAAKy1B,MAAQz1B,KAAKi/B,KAAO,GAElC4L,QAAS,SAASp+B,GAChB,MAAOo+B,IAAQ7qC,KAAMyM,IAEvBggD,UAAW,SAASngD,GAClB,GACIG,GADAw6B,EAAQjnC,KAAKwmC,IAAIsH,SAUrB,OAPErhC,GADW,MAATH,GAA0B,QAATA,EACb26B,EAAMkB,KACI,UAAT77B,EACD26B,EAAMuB,OACI,OAATl8B,GAA2B,MAATA,GAAiBA,KAAU,EAC9C26B,EAAMpM,KAENoM,EAAMrM,QAGhB4pB,eAAgB,WACd,MAAOxkD,MAAKwmC,IAAIM,QAElB8zB,kBAAmB,WACjB,MAAO56D,MAAKwmC,IAAIo0B,qBAElBsb,UAAWz5B,GAAY,SAASl+B,EAAM3T,EAAImO,GACxCo1B,GAAmBnuC,KAAM6qC,GAAQ7qC,KAAqB,gBAARue,GAAmBsnB,GAAItnB,EAAM3T,GAAM,GAAK2T,GAAO,KAAMxF,KAErG80B,aAAc4O,GAAY,SAASjU,EAAQL,EAAMpvB,GAC/Co1B,GAAmBnuC,KAAM6qC,GAAQ7qC,KAAMwoC,GAASqC,GAAQ7qC,KAAMmoC,GAAQK,GAASzvB,KAEjF60B,gBAAiB6O,GAAY,SAAStU,EAAMsF,EAAO10B,GACjD60B,GAAgB5tC,KAAM6qC,GAAQ7qC,KAAMmoC,GAAOsF,GAAS5C,GAAQ7qC,KAAMytC,GAAQ10B,KAE5Eg1B,iBAAkB0O,GAAY,SAASzO,EAAOj1B,GAC5Cg1B,GAAiB/tC,KAAMstC,GAAattC,KAAMguC,EAAOj1B,MAEnDovD,mBAAoB1rB,GAAY,SAAS7wB,EAAG7S,GAC1Cg1B,GAAiB/tC,KAAMgnC,GAAIhnC,KAAKwmC,IAAIM,OAAQlb,GAAI7S,KAElD4nD,cAAelkB,GAAY,SAAS3V,EAAQgH,EAAS/0B,GACnD,GAAK+tB,EAAOjnC,OAAZ,CAEA,IAAK,GAAIiB,GAAI,EACT0a,KAAU1a,EAAIgmC,EAAOjnC,OAAQiB,IAC/B0a,EAAI1a,GAAK,GAAI8rC,IAAM/B,GAAQ7qC,KAAM8mC,EAAOhmC,GAAG0nC,QAASqC,GAAQ7qC,KAAM8mC,EAAOhmC,GAAGqnC,MAC/D,OAAX2F,IACFA,EAAU/U,KAAKwF,IAAIuI,EAAOjnC,OAAS,EAAGG,KAAKwmC,IAAImG,YACjDkB,GAAa7tC,KAAM6sC,GAAmBrxB,EAAKsyB,GAAU/0B,MAEvDo9D,aAAc15B,GAAY,SAASjU,EAAQL,EAAMpvB,GAC/C,GAAI+tB,GAAS9mC,KAAKwmC,IAAIM,OAAO31B,MAAM,EACnC21B,GAAOjmC,KAAK,GAAI+rC,IAAM/B,GAAQ7qC,KAAMwoC,GAASqC,GAAQ7qC,KAAMmoC,GAAQK,KACnEqF,GAAa7tC,KAAM6sC,GAAmB/F,EAAQA,EAAOjnC,OAAS,GAAIkZ,KAEpE6rC,aAAc,SAASrY,GAGrB,IAAK,GADDjuB,GADAwoB,EAAS9mC,KAAKwmC,IAAIM,OAEbhmC,EAAI,EAAGA,EAAIgmC,EAAOjnC,OAAQiB,IAAK,CACtC,GAAI0lC,GAAM8F,GAAWtsC,KAAM8mC,EAAOhmC,GAAG85B,OAAQkM,EAAOhmC,GAAG+5B,KACvDvc,GAAQA,EAAQA,EAAM5V,OAAO89B,GAAOA,EAEtC,MAAI+F,MAAY,EACPjuB,EAEAA,EAAMgG,KAAKioB,GAAWvsC,KAAK4wB,kBAEtC4vC,cAAe,SAASj0B,GAGtB,IAAK,GAFD4iB,MACAroB,EAAS9mC,KAAKwmC,IAAIM,OACbhmC,EAAI,EAAGA,EAAIgmC,EAAOjnC,OAAQiB,IAAK,CACtC,GAAI0lC,GAAM8F,GAAWtsC,KAAM8mC,EAAOhmC,GAAG85B,OAAQkM,EAAOhmC,GAAG+5B,KACnD0R,MAAY,IACd/F,EAAMA,EAAIliB,KAAKioB,GAAWvsC,KAAK4wB,kBACjCu+B,EAAMruD,GAAK0lC,EAEb,MAAO2oB,IAETzK,iBAAkB,SAASn8B,EAAMgiB,EAAU9D,GAEzC,IAAK,GADD2vC,MACKt1E,EAAI,EAAGA,EAAId,KAAKwmC,IAAIM,OAAOjnC,OAAQiB,IAC1Cs1E,EAAIt1E,GAAKynB,CACXvoB,MAAK4tE,kBAAkBwI,EAAK7rC,EAAU9D,GAAU,WAElDmnC,kBAAmBnxB,GAAY,SAASl0B,EAAMgiB,EAAU9D,GAGtD,IAAK,GAFDtD,MACAqD,EAAMxmC,KAAKwmC,IACN1lC,EAAI,EAAGA,EAAI0lC,EAAIM,OAAOjnC,OAAQiB,IAAK,CAC1C,GAAImmC,GAAQT,EAAIM,OAAOhmC,EACvBqiC,GAAQriC,IACN85B,KAAMqM,EAAMrM,OACZC,GAAIoM,EAAMpM,KACV3e,KAAMlc,KAAK4mC,WAAWre,EAAKznB,IAC3B2lC,OAAQA,GAIZ,IAAK,GADDwH,GAAS1D,GAAwB,OAAZA,GAAqB0d,GAAmBjoD,KAAMmjC,EAASoH,GACvEzpC,EAAIqiC,EAAQtjC,OAAS,EAAGiB,GAAK,EAAGA,IACvCwmC,GAAWtnC,KAAMmjC,EAAQriC,GACvBmtC,GACFI,GAA2BruC,KAAMiuC,GAC1BjuC,KAAKwyB,IACZgV,GAAoBxnC,KAAKwyB,MAE7Bg5C,KAAM/uB,GAAY,WAChB2M,GAAsBppD,KAAM,UAE9ByrE,KAAMhvB,GAAY,WAChB2M,GAAsBppD,KAAM,UAE9B0rE,cAAejvB,GAAY,WACzB2M,GAAsBppD,KAAM,QAAQ,KAEtC2rE,cAAelvB,GAAY,WACzB2M,GAAsBppD,KAAM,QAAQ,KAEtCq2E,aAAc,SAAS5pC,GACrBzsC,KAAK0tC,OAASjB,GAEhB6pC,aAAc,WACZ,MAAOt2E,MAAK0tC,QAEd6oC,YAAa,WAIX,IAAK,GAHDhtB,GAAOvpD,KAAKsuC,QACZ3f,EAAO,EACP66B,EAAS,EACJ1oD,EAAI,EAAGA,EAAIyoD,EAAK56B,KAAK9uB,OAAQiB,IAC/ByoD,EAAK56B,KAAK7tB,GAAGgmC,UACdnY,CACN,KAAK,GAAI7tB,GAAI,EAAGA,EAAIyoD,EAAKC,OAAO3pD,OAAQiB,IACjCyoD,EAAKC,OAAO1oD,GAAGgmC,UAChB0iB,CACN,QACEgiB,KAAM78C,EACN88C,KAAMjiB,IAGV0G,aAAc,WACZlwD,KAAKsuC,QAAU,GAAIwrB,IAAQ95D,KAAKsuC,QAAQyb,gBAE1CysB,UAAW,WACTx2E,KAAK61E,gBAAkB71E,KAAKy2E,kBAAiB,IAE/CA,iBAAkB,SAASC,GAGzB,MAFIA,KACF12E,KAAKsuC,QAAQ6rB,OAASn6D,KAAKsuC,QAAQ8rB,UAAYp6D,KAAKsuC,QAAQob,WAAa,MACpE1pD,KAAKsuC,QAAQwb,YAEtB6sB,QAAS,SAASC,GAChB,MAAO52E,MAAKsuC,QAAQwb,aAAe8sB,GAAO52E,KAAK61E,kBAEjDgB,WAAY,WACV,OACEloD,KAAMosC,GAAiB/6D,KAAKsuC,QAAQ3f,MACpC66B,OAAQuR,GAAiB/6D,KAAKsuC,QAAQkb,UAG1CstB,WAAY,SAASC,GACnB,GAAIxtB,GAAOvpD,KAAKsuC,QAAU,GAAIwrB,IAAQ95D,KAAKsuC,QAAQyb,cACnDR,GAAK56B,KAAOosC,GAAiBgc,EAASpoD,KAAKxd,MAAM,GAAI,MAAM,GAC3Do4C,EAAKC,OAASuR,GAAiBgc,EAASvtB,OAAOr4C,MAAM,GAAI,MAAM,IAEjE6lE,aAAcv6B,GAAY,SAAS8J,EAAQ0wB,EAAOlzC,GAChD,MAAOqpB,IAAWptD,KAAMumD,EAAiB,UAAT0wB,EAAoB,SAAW,QAAS,SAAS14D,GAC/E,GAAIla,GAAgB,QAAT4yE,EAAkB,YAAuB,cAATA,EAAwB,UAAqB,UAATA,EAAoB,cAAgB,WACnH,IAAK14D,EAAKla,GAEL,CAAA,GAAIm5D,GAAUz5B,GAAKh5B,KAAKwT,EAAKla,IAChC,OAAO,CAEPka,GAAKla,IAAS,IAAM0/B,MAJpBxlB,GAAKla,GAAQ0/B,CAKf,QAAO,MAGXmzC,gBAAiBz6B,GAAY,SAAS8J,EAAQ0wB,EAAOlzC,GACnD,MAAOqpB,IAAWptD,KAAMumD,EAAiB,UAAT0wB,EAAoB,SAAW,QAAS,SAAS14D,GAC/E,GAAIla,GAAgB,QAAT4yE,EAAkB,YAAuB,cAATA,EAAwB,UAAqB,UAATA,EAAoB,cAAgB,YAC/Gz8C,EAAMjc,EAAKla,EACf,KAAKm2B,EACH,OAAO,CACJ,IAAW,MAAPuJ,EACPxlB,EAAKla,GAAQ,SACV,CACH,GAAIq2B,GAAQF,EAAIpzB,MAAMo2D,GAAUz5B,GAChC,KAAKrJ,EACH,OAAO,CACT,IAAI/oB,GAAM+oB,EAAM7b,MAAQ6b,EAAM,GAAG76B,MACjC0e,GAAKla,GAAQm2B,EAAIrpB,MAAM,EAAGupB,EAAM7b,QAAW6b,EAAM7b,OAASlN,GAAO6oB,EAAI36B,OAAc,IAAL,IAAY26B,EAAIrpB,MAAMQ,IAAQ,KAE9G,OAAO,MAGXoiD,cAAetX,GAAY,SAAS8J,EAAQzpB,EAAM/jB,GAChD,MAAOg7C,IAAc/zD,KAAMumD,EAAQzpB,EAAM/jB,KAE3Co+D,iBAAkB,SAAShyC,GACzBA,EAAOxI,SAET0yB,SAAU,SAASz0B,EAAMC,EAAI9hB,GAC3B,MAAOs2C,IAASrvD,KAAM6qC,GAAQ7qC,KAAM46B,GAAOiQ,GAAQ7qC,KAAM66B,GAAK9hB,EAASA,GAAWA,EAAQvO,MAAQ,UAEpG4sE,YAAa,SAAS3qE,EAAKsM,GACzB,GAAIs+D,IACF3nB,aAAc32C,IAAgC,MAApBA,EAAQsyB,SAAmBtyB,EAAQosB,OAASpsB,GACtEw9B,WAAYx9B,GAAWA,EAAQw9B,WAC/BkZ,gBAAgB,EAChBH,OAAQv2C,GAAWA,EAAQu2C,OAC3BlqB,kBAAmBrsB,GAAWA,EAAQqsB,kBAGxC,OADA34B,GAAMo+B,GAAQ7qC,KAAMyM,GACb4iD,GAASrvD,KAAMyM,EAAKA,EAAK4qE,EAAU,aAE5CC,YAAa,SAAS7qE,GACpBA,EAAMo+B,GAAQ7qC,KAAMyM,EACpB,IAAIk4B,MACA0lB,EAAQtvB,GAAQ/6B,KAAMyM,EAAI8R,MAAMmxB,WACpC,IAAI2a,EACF,IAAK,GAAIvpD,GAAI,EAAGA,EAAIupD,EAAMxqD,SAAUiB,EAAG,CACrC,GAAIswD,GAAO/G,EAAMvpD,IACC,MAAbswD,EAAKx2B,MAAgBw2B,EAAKx2B,MAAQnuB,EAAI7B,MAAmB,MAAXwmD,EAAKv2B,IAAcu2B,EAAKv2B,IAAMpuB,EAAI7B,KACnF+5B,EAAQ9jC,KAAKuwD,EAAKplB,OAAOryB,QAAUy3C,EAAKplB,QAE9C,MAAOrH,IAET0H,UAAW,SAASzR,EAAMC,EAAImvB,GAC5BpvB,EAAOiQ,GAAQ7qC,KAAM46B,GACrBC,EAAKgQ,GAAQ7qC,KAAM66B,EACnB,IAAIH,MACAyQ,EAASvQ,EAAKrc,IAWlB,OAVAve,MAAK43B,KAAKgD,EAAKrc,KAAMsc,EAAGtc,KAAO,EAAG,SAASA,GACzC,GAAI8rC,GAAQ9rC,EAAKmxB,WACjB,IAAI2a,EACF,IAAK,GAAIvpD,GAAI,EAAGA,EAAIupD,EAAMxqD,OAAQiB,IAAK,CACrC,GAAIswD,GAAO/G,EAAMvpD,EACXqqC,IAAUvQ,EAAKrc,MAAQqc,EAAKhwB,GAAKwmD,EAAKv2B,IAAmB,MAAbu2B,EAAKx2B,MAAgBuQ,GAAUvQ,EAAKrc,MAAQ4sB,GAAUtQ,EAAGtc,MAAQ6yC,EAAKx2B,KAAOC,EAAGjwB,IAASo/C,IAAUA,EAAOoH,EAAKplB,SAC/JtR,EAAM75B,KAAKuwD,EAAKplB,OAAOryB,QAAUy3C,EAAKplB,UAE1Cb,IAEGzQ,GAET68C,YAAa,WACX,GAAI5yC,KAQJ,OAPA3kC,MAAK43B,KAAK,SAASrZ,GACjB,GAAIm1C,GAAMn1C,EAAKmxB,WACf,IAAIgkB,EACF,IAAK,GAAI5yD,GAAI,EAAGA,EAAI4yD,EAAI7zD,SAAUiB,EACb,MAAf4yD,EAAI5yD,GAAG85B,MACT+J,EAAQ9jC,KAAK6yD,EAAI5yD,GAAGkrC,UAErBrH,GAET6yC,aAAc,SAASr3B,GACrB,GAAIv1C,GACAugC,EAASnrC,KAAKy1B,KAUlB,OATAz1B,MAAK43B,KAAK,SAASrZ,GACjB,GAAIm7C,GAAKn7C,EAAKrC,KAAKrc,OAAS,CAC5B,OAAI65D,GAAKvZ,GACPv1C,EAAKu1C,GACE,IAETA,GAAOuZ,QACLvuB,KAEGN,GAAQ7qC,KAAM6lC,GAAIsF,EAAQvgC,KAEnC6sE,aAAc,SAASlmC,GACrBA,EAAS1G,GAAQ7qC,KAAMuxC,EACvB,IAAI1yB,GAAQ0yB,EAAO3mC,EACnB,OAAI2mC,GAAOhzB,KAAOve,KAAKy1B,OAAS8b,EAAO3mC,GAAK,EACnC,GACT5K,KAAK43B,KAAK53B,KAAKy1B,MAAO8b,EAAOhzB,KAAM,SAASA,GAC1CM,GAASN,EAAKrC,KAAKrc,OAAS,IAEvBgf,IAETi2C,KAAM,SAAS4iB,GACb,GAAIhnD,GAAM,GAAIC,IAAIgpC,GAAS35D,KAAMA,KAAKy1B,MAAOz1B,KAAKy1B,MAAQz1B,KAAKi/B,MAAOj/B,KAAK03B,WAAY13B,KAAKy1B,MAAOz1B,KAAKusC,QASxG,OARA7b,GAAI2L,UAAYr8B,KAAKq8B,UACrB3L,EAAI4L,WAAat8B,KAAKs8B,WACtB5L,EAAI8V,IAAMxmC,KAAKwmC,IACf9V,EAAIgd,QAAS,EACTgqC,IACFhnD,EAAI4d,QAAQ0rB,UAAYh6D,KAAKsuC,QAAQ0rB,UACrCtpC,EAAIomD,WAAW92E,KAAK62E,eAEfnmD,GAETinD,UAAW,SAAS5+D,GACbA,IACHA,KACF,IAAI6hB,GAAO56B,KAAKy1B,MACZoF,EAAK76B,KAAKy1B,MAAQz1B,KAAKi/B,IACP,OAAhBlmB,EAAQ6hB,MAAgB7hB,EAAQ6hB,KAAOA,IACzCA,EAAO7hB,EAAQ6hB,MACC,MAAd7hB,EAAQ8hB,IAAc9hB,EAAQ8hB,GAAKA,IACrCA,EAAK9hB,EAAQ8hB,GACf,IAAIi6B,GAAO,GAAInkC,IAAIgpC,GAAS35D,KAAM46B,EAAMC,GAAK9hB,EAAQM,MAAQrZ,KAAK03B,WAAYkD,EAAM56B,KAAKusC,QAazF,OAZIxzB,GAAQmwC,aACV4L,EAAKxmB,QAAUtuC,KAAKsuC,UACrBtuC,KAAKywD,SAAWzwD,KAAKywD,YAAc5vD,MAClC6vB,IAAKokC,EACL5L,WAAYnwC,EAAQmwC,aAEtB4L,EAAKrE,SACH//B,IAAK1wB,KACL0wD,UAAU,EACVxH,WAAYnwC,EAAQmwC,aAEtB2H,GAAkBiE,EAAMlE,GAAkB5wD,OACnC80D,GAET8iB,UAAW,SAASnqC,GAGlB,GAFIA,YAAiB7jC,KACnB6jC,EAAQA,EAAM/c,KACZ1wB,KAAKywD,OACP,IAAK,GAAI3vD,GAAI,EAAGA,EAAId,KAAKywD,OAAO5wD,SAAUiB,EAAG,CAC3C,GAAIS,GAAOvB,KAAKywD,OAAO3vD,EACvB,IAAIS,EAAKmvB,KAAO+c,EAAhB,CAEAztC,KAAKywD,OAAOpvD,OAAOP,EAAG,GACtB2sC,EAAMmqC,UAAU53E,MAChBixD,GAAoBL,GAAkB5wD,MACtC,QAEJ,GAAIytC,EAAMa,SAAWtuC,KAAKsuC,QAAS,CACjC,GAAIupC,IAAYpqC,EAAMvqC,GACtB+lD,IAAWxb,EAAO,SAAS/c,GACzBmnD,EAASh3E,KAAK6vB,EAAIxtB,MACjB,GACHuqC,EAAMa,QAAU,GAAIwrB,IAAQ,MAC5BrsB,EAAMa,QAAQ3f,KAAOosC,GAAiB/6D,KAAKsuC,QAAQ3f,KAAMkpD,GACzDpqC,EAAMa,QAAQkb,OAASuR,GAAiB/6D,KAAKsuC,QAAQkb,OAAQquB,KAGjEC,eAAgB,SAASlsD,GACvBq9B,GAAWjpD,KAAM4rB,IAEnB6L,QAAS,WACP,MAAOz3B,MAAKqZ,MAEd0+D,UAAW,WACT,MAAO/3E,MAAKwyB,IAEdoU,WAAY,SAASiuC,GACnB,MAAI70E,MAAKusC,QACAsoC,EAAIpvE,MAAMzF,KAAKusC,SACjByrC,GAAenD,IAExBjkD,cAAe,WACb,MAAO5wB,MAAKusC,SAAW,QAG3B5b,GAAI3sB,UAAUi0E,SAAWtnD,GAAI3sB,UAAU4zB,IACvC,IAAIsgD,IAAe,gDAAgDzyE,MAAM,IACzE,KAAK,GAAIpB,MAAQssB,IAAI3sB,UACf2sB,GAAI3sB,UAAUP,eAAeY,KAAS1D,GAAQu3E,GAAc7zE,IAAQ,IACtEuF,EAAW5F,UAAUK,IAAQ,SAAU8zE,GACrC,MAAO,YACL,MAAOA,GAAOp4E,MAAMC,KAAK0wB,IAAK9wB,aAE/B+wB,GAAI3sB,UAAUK,KACrBk4D,IAAW5rC,GAyVX,IAAI0tB,IAAmBz0C,EAAWy0C,iBAAmB,SAASl6C,GACxDA,EAAE2jC,eACJ3jC,EAAE2jC,iBAEF3jC,EAAEijD,aAAc,GAEhBgxB,GAAoBxuE,EAAWwuE,kBAAoB,SAASj0E,GAC1DA,EAAEk0E,gBACJl0E,EAAEk0E,kBAEFl0E,EAAEm0E,cAAe,GAKjBr5B,GAASr1C,EAAWq1C,OAAS,SAAS96C,GACxCk6C,GAAiBl6C,GACjBi0E,GAAkBj0E,IAmBhBi4B,GAAKxyB,EAAWwyB,GAAK,SAASy/B,EAASrxD,EAAMohB,GAC/C,GAAIiwC,EAAQ0c,iBACV1c,EAAQ0c,iBAAiB/tE,EAAMohB,GAAG,OAC/B,IAAIiwC,EAAQ2c,YACf3c,EAAQ2c,YAAY,KAAOhuE,EAAMohB,OAC9B,CACH,GAAIob,GAAM60B,EAAQC,YAAcD,EAAQC,cACpCrjD,EAAMuuB,EAAIx8B,KAAUw8B,EAAIx8B,MAC5BiO,GAAI5X,KAAK+qB,KAGTmwC,MAQA5b,GAAMv2C,EAAWu2C,IAAM,SAAS0b,EAASrxD,EAAMohB,GACjD,GAAIiwC,EAAQ4c,oBACV5c,EAAQ4c,oBAAoBjuE,EAAMohB,GAAG,OAClC,IAAIiwC,EAAQ6c,YACf7c,EAAQ6c,YAAY,KAAOluE,EAAMohB,OAGjC,KAAK,GADDtQ,GAAWsgD,GAAYC,EAASrxD,GAAM,GACjC1J,EAAI,EAAGA,EAAIwa,EAASzb,SAAUiB,EACrC,GAAIwa,EAASxa,IAAM8qB,EAAG,CACpBtQ,EAASja,OAAOP,EAAG,EACnB,SAIJygC,GAAS33B,EAAW23B,OAAS,SAASs6B,EAASrxD,GACjD,GAAI8Q,GAAWsgD,GAAYC,EAASrxD,GAAM,EAC1C,IAAK8Q,EAASzb,OAGd,IAAK,GADDwwB,GAAOtsB,MAAMC,UAAUmN,MAAMvQ,KAAKhB,UAAW,GACxCkB,EAAI,EAAGA,EAAIwa,EAASzb,SAAUiB,EACrCwa,EAASxa,GAAGf,MAAM,KAAMswB,IAExB4rC,GAAyB,KA6DzBnnC,GAAc,GACdpd,GAAO9N,EAAW8N,MAAQ/O,SAAU,WACpC,MAAO,oBAEPsmC,IAAkBhT,QAAQ,GAC1B0mB,IAAalc,OAAQ,UACrB4hC,IAAY5hC,OAAQ,QAIxBpU,IAAQruB,UAAUe,IAAM,SAAS4zE,EAAI/sD,GACnC6yB,aAAaz+C,KAAKkD,IAClBlD,KAAKkD,GAAKyvB,WAAW/G,EAAG+sD,GAE1B,IAAIpkC,IAAc3qC,EAAW2qC,YAAc,SAASloC,EAAQsF,EAAK6iC,EAASokC,EAAYC,GACzE,MAAPlnE,IACFA,EAAMtF,EAAOojC,OAAO,eACT,IAAP99B,IACFA,EAAMtF,EAAOxM,QAEjB,KAAK,GAAIiB,GAAI83E,GAAc,EACvBtrD,EAAIurD,GAAc,IAAO,CAC3B,GAAIC,GAAUzsE,EAAO1L,QAAQ,IAAMG,EACnC,IAAc,EAAVg4E,GAAeA,GAAWnnE,EAC5B,MAAO2b,IAAK3b,EAAM7Q,EACpBwsB,IAAKwrD,EAAUh4E,EACfwsB,GAAKknB,EAAWlnB,EAAIknB,EACpB1zC,EAAIg4E,EAAU,IAGdz2B,GAAaz4C,EAAWy4C,WAAa,SAASh2C,EAAQ0sE,EAAMvkC,GAC9D,IAAK,GAAI/nC,GAAM,EACX2pD,EAAM,IAAO,CACf,GAAI0iB,GAAUzsE,EAAO1L,QAAQ,IAAM8L,EACpB,KAAXqsE,IACFA,EAAUzsE,EAAOxM,OACnB,IAAIu3D,GAAU0hB,EAAUrsE,CACxB,IAAIqsE,GAAWzsE,EAAOxM,QAAUu2D,EAAMgB,GAAW2hB,EAC/C,MAAOtsE,GAAMssB,KAAKwF,IAAI64B,EAAS2hB,EAAO3iB,EAIxC,IAHAA,GAAO0iB,EAAUrsE,EACjB2pD,GAAO5hB,EAAW4hB,EAAM5hB,EACxB/nC,EAAMqsE,EAAU,EACZ1iB,GAAO2iB,EACT,MAAOtsE,KAGTgwD,IAAa,IASbgE,GAAc,SAAS3jC,GACzBA,EAAKk8C,SAEH1vC,IACFm3B,GAAc,SAAS3jC,GACrBA,EAAKklC,eAAiB,EACtBllC,EAAKolC,aAAeplC,EAAKz6B,MAAMxC,QAE1B4yB,KACPguC,GAAc,SAAS3jC,GACrB,IACEA,EAAKk8C,SACL,MAAOC,MA0Cb,IAkCIhyC,IAlCAiyC,GAA6B,4GAC7Blc,GAAkBpzD,EAAW4kD,WAAa,SAAS5jD,GACrD,MAAO,KAAKG,KAAKH,IAAOA,EAAK,MAAWA,EAAGuuE,eAAiBvuE,EAAGkqE,eAAiBoE,GAA2BnuE,KAAKH,KAe9GsyD,GAAiB,44DAmBnBj2B,IADE5D,SAAS+1C,YACH,SAASt8C,EAAMxwB,EAAOqF,EAAK0nE,GACjC,GAAI7rD,GAAI6V,SAAS+1C,aAGjB,OAFA5rD,GAAE8rD,OAAOD,GAAWv8C,EAAMnrB,GAC1B6b,EAAE+rD,SAASz8C,EAAMxwB,GACVkhB,GAGD,SAASsP,EAAMxwB,EAAOqF,GAC5B,GAAI6b,GAAI6V,SAAStzB,KAAKypE,iBACtB,KACEhsD,EAAEisD,kBAAkB38C,EAAK8F,YACzB,MAAOz+B,GACP,MAAOqpB,GAKT,MAHAA,GAAE+c,UAAS,GACX/c,EAAEksD,QAAQ,YAAa/nE,GACvB6b,EAAEmsD,UAAU,YAAartE,GAClBkhB,EAUX,IAAI4d,IAAWxhC,EAAWwhC,SAAW,SAASzxB,EAAQ8/C,GAGpD,GAFsB,GAAlBA,EAAMpuB,WACRouB,EAAQA,EAAM72B,YACZjpB,EAAOyxB,SACT,MAAOzxB,GAAOyxB,SAASquB,EACzB,GAGE,IAFsB,IAAlBA,EAAMpuB,WACRouB,EAAQA,EAAMmgB,MACZngB,GAAS9/C,EACX,OAAO,QACF8/C,EAAQA,EAAM72B,YAQrBnQ,KAAmB,GAAbC,KACRqO,GAAY,WACV,IACE,MAAOsC,UAASi6B,cAChB,MAAOn5D,GACP,MAAOk/B,UAAStzB,OAMtB,IAwDIiuD,IAYAC,GApEA5lC,GAAUzuB,EAAWyuB,QAAU,SAASyE,EAAMiH,GAChD,GAAIz4B,GAAUwxB,EAAKrtB,UACfrI,EAAQo2D,GAAUz5B,GAAKj8B,KAAKwD,EAChC,IAAIlE,EAAO,CACT,GAAImkC,GAAQjgC,EAAQ6F,MAAM/J,EAAMyX,MAAQzX,EAAM,GAAGvH,OACjDi9B,GAAKrtB,UAAYnE,EAAQ6F,MAAM,EAAG/J,EAAMyX,QAAU0sB,EAAQnkC,EAAM,GAAKmkC,EAAQ,MAG7EpT,GAAWvuB,EAAWuuB,SAAW,SAAS2E,EAAMiH,GAClD,GAAIz4B,GAAUwxB,EAAKrtB,SACd+tD,IAAUz5B,GAAKh5B,KAAKO,KACvBwxB,EAAKrtB,YAAcnE,EAAU,IAAM,IAAMy4B,IAmBzC85B,IAAoB,EAoBpBnc,GAAc,WAChB,GAAIjvB,IAAmB,EAAbC,GACR,OAAO,CACT,IAAI2W,GAAMnV,GAAI,MACd,OAAO,aAAemV,IAAO,YAAcA,MAyBzC2uC,GAAiBpuE,EAAWg9B,WAA2C,GAA9B,QAAQnhC,MAAM,MAAM5F,OAAc,SAASwM,GAItF,IAHA,GAAII,GAAM,EACNkC,KACA5N,EAAIsL,EAAOxM,OACDkB,GAAP0L,GAAU,CACf,GAAIotE,GAAKxtE,EAAO1L,QAAQ,KAAM8L,EACpB,KAANotE,IACFA,EAAKxtE,EAAOxM,OACd,IAAI0e,GAAOlS,EAAO8E,MAAM1E,EAA8B,MAAzBJ,EAAOK,OAAOmtE,EAAK,GAAaA,EAAK,EAAIA,GAClEC,EAAKv7D,EAAK5d,QAAQ,KACZ,KAANm5E,GACFnrE,EAAO9N,KAAK0d,EAAKpN,MAAM,EAAG2oE,IAC1BrtE,GAAOqtE,EAAK,IAEZnrE,EAAO9N,KAAK0d,GACZ9R,EAAMotE,EAAK,GAGf,MAAOlrE,IACL,SAAStC,GACX,MAAOA,GAAO5G,MAAM,aAElBwjC,GAAezgB,OAAOo8B,aAAe,SAASxb,GAChD,IACE,MAAOA,GAAG44B,gBAAkB54B,EAAG84B,aAC/B,MAAO/9D,GACP,OAAO,IAEP,SAASilC,GACX,IACE,GAAInC,GAAQmC,EAAG2wC,cAAcxpC,UAAU6oC,cACvC,MAAOj1E,IACT,MAAK8iC,IAASA,EAAM+yC,iBAAmB5wC,EAEe,GAA/CnC,EAAMgzC,iBAAiB,aAAchzC,IADnC,GAGPsgB,GAAe,WACjB,GAAIpjD,GAAI+vB,GAAI,MACZ,OAAI,UAAY/vB,IACP,GACTA,EAAEgwB,aAAa,SAAU,WACC,kBAAZhwB,GAAE+1E,WAEd9b,GAAiB,KASjBoV,GAAW5pE,EAAW4pE,UACxBvnD,EAAG,QACHjB,EAAG,YACHoB,EAAG,MACHE,GAAI,QACJE,GAAI,QACJpB,GAAI,OACJC,GAAI,MACJqB,GAAI,QACJC,GAAI,WACJwtD,GAAI,MACJC,GAAI,QACJC,GAAI,SACJC,GAAI,WACJC,GAAI,MACJC,GAAI,OACJC,GAAI,OACJC,GAAI,KACJC,GAAI,QACJC,GAAI,OACJC,GAAI,YACJC,GAAI,SACJC,GAAI,SACJC,GAAI,IACJC,GAAI,IACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,SACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,IACLC,IAAK,IACLC,MAAO,KACPC,MAAO,OACPC,MAAO,OACPC,MAAO,QACPC,MAAO,SACPC,MAAO,OACPC,MAAO,MACPC,MAAO,SACPC,MAAO,WACPC,MAAO,WAET,WACE,IAAK,GAAIl8E,GAAI,EAAO,GAAJA,EAAQA,IACtB0yE,GAAS1yE,EAAI,IAAM0yE,GAAS1yE,EAAI,IAAM+mB,OAAO/mB,EAC/C,KAAK,GAAIA,GAAI,GAAS,IAALA,EAASA,IACxB0yE,GAAS1yE,GAAK+mB,OAAOC,aAAahnB,EACpC,KAAK,GAAIA,GAAI,EAAQ,IAALA,EAASA,IACvB0yE,GAAS1yE,EAAI,KAAO0yE,GAAS1yE,EAAI,OAAS,IAAMA,IAuEpD,IAAI+3C,IAiEAghB,GAAe,WAGjB,QAASojB,GAAS10D,GAChB,MAAY,MAARA,EACK20D,EAASxwE,OAAO6b,GACPA,GAAT,MAAyB,MAARA,EACjB,IACSA,GAAT,MAAyB,MAARA,EACjB40D,EAAYzwE,OAAO6b,EAAO,MACjBA,GAAT,MAAyB,MAARA,EACjB,IACUA,GAAV,MAA0B,MAARA,EAClB,IACQ,MAARA,EACA,IAEA,IAQX,QAAS60D,GAASr5D,EAAO6W,EAAMC,GAC7B76B,KAAK+jB,MAAQA,EACb/jB,KAAK46B,KAAOA,EACZ56B,KAAK66B,GAAKA,EA3BZ,GAAIqiD,GAAW,2PACXC,EAAc,iPAiBdE,EAAS,4CACTC,EAAY,SACZC,EAAW,QACXC,EAAe,SACfC,EAAc,OACdC,EAAY,GAMhB,OAAO,UAAS7I,GACd,IAAKwI,EAAOtyE,KAAK8pE,GACf,OAAO,CAGT,KAAK,GACDrqE,GAHAiU,EAAMo2D,EAAIh1E,OACV89E,KACK78E,EAAI,EACC2d,EAAJ3d,IAAWA,EACnB68E,EAAM98E,KAAK2J,EAAOyyE,EAASpI,EAAI3uD,WAAWplB,IAC5C,KAAK,GAAIA,GAAI,EACTmM,EAAOywE,EAAej/D,EAAJ3d,IAAWA,EAAG,CAClC,GAAI0J,GAAOmzE,EAAM78E,EACL,MAAR0J,EACFmzE,EAAM78E,GAAKmM,EAEXA,EAAOzC,EAEX,IAAK,GAAI1J,GAAI,EACT05B,EAAMkjD,EAAej/D,EAAJ3d,IAAWA,EAAG,CACjC,GAAI0J,GAAOmzE,EAAM78E,EACL,MAAR0J,GAAsB,KAAPgwB,EACjBmjD,EAAM78E,GAAK,IACJy8E,EAASxyE,KAAKP,KACrBgwB,EAAMhwB,EACM,KAARA,IACFmzE,EAAM78E,GAAK,MAGjB,IAAK,GAAIA,GAAI,EACTmM,EAAO0wE,EAAM,GAAQl/D,EAAM,EAAV3d,IAAeA,EAAG,CACrC,GAAI0J,GAAOmzE,EAAM78E,EACL,MAAR0J,GAAuB,KAARyC,GAA+B,KAAhB0wE,EAAM78E,EAAI,GAC1C68E,EAAM78E,GAAK,IACI,KAAR0J,GAAeyC,GAAQ0wE,EAAM78E,EAAI,IAAe,KAARmM,GAAuB,KAARA,IAC9D0wE,EAAM78E,GAAKmM,GACbA,EAAOzC,EAET,IAAK,GAAI1J,GAAI,EAAO2d,EAAJ3d,IAAWA,EAAG,CAC5B,GAAI0J,GAAOmzE,EAAM78E,EACjB,IAAY,KAAR0J,EACFmzE,EAAM78E,GAAK,QACR,IAAY,KAAR0J,EAAa,CACpB,IAAK,GAAImH,GAAM7Q,EAAI,EAAS2d,EAAN9M,GAA2B,KAAdgsE,EAAMhsE,KAAeA,GAExD,IAAK,GADD1K,GAAWnG,GAAqB,KAAhB68E,EAAM78E,EAAI,IAAqB2d,EAAN9M,GAA2B,KAAdgsE,EAAMhsE,GAAe,IAAM,IAC5EhQ,EAAIb,EAAO6Q,EAAJhQ,IAAWA,EACzBg8E,EAAMh8E,GAAKsF,CACbnG,GAAI6Q,EAAM,GAGd,IAAK,GAAI7Q,GAAI,EACT05B,EAAMkjD,EAAej/D,EAAJ3d,IAAWA,EAAG,CACjC,GAAI0J,GAAOmzE,EAAM78E,EACN,MAAP05B,GAAsB,KAARhwB,EAChBmzE,EAAM78E,GAAK,IACJy8E,EAASxyE,KAAKP,KACrBgwB,EAAMhwB,GAEV,IAAK,GAAI1J,GAAI,EAAO2d,EAAJ3d,IAAWA,EACzB,GAAIw8E,EAAUvyE,KAAK4yE,EAAM78E,IAAK,CAC5B,IAAK,GAAI6Q,GAAM7Q,EAAI,EAAS2d,EAAN9M,GAAa2rE,EAAUvyE,KAAK4yE,EAAMhsE,MAASA,GAIjE,IAAK,GAHD+5B,GAA2C,MAAjC5qC,EAAI68E,EAAM78E,EAAI,GAAK48E,GAC7BnyC,EAAgD,MAAjC9sB,EAAN9M,EAAYgsE,EAAMhsE,GAAO+rE,GAClCz2E,EAAUykC,GAAUH,EAAQ,IAAM,IAC7B5pC,EAAIb,EAAO6Q,EAAJhQ,IAAWA,EACzBg8E,EAAMh8E,GAAKsF,CACbnG,GAAI6Q,EAAM,EAKd,IAAK,GADDwb,GADA8c,KAEKnpC,EAAI,EAAO2d,EAAJ3d,GACd,GAAI08E,EAAazyE,KAAK4yE,EAAM78E,IAAK,CAC/B,GAAIwL,GAAQxL,CACZ,OAAOA,EAAO2d,EAAJ3d,GAAW08E,EAAazyE,KAAK4yE,EAAM78E,MAAOA,GACpDmpC,EAAMppC,KAAK,GAAIu8E,GAAS,EAAG9wE,EAAOxL,QAC7B,CACL,GAAI2L,GAAM3L,EACN40D,EAAKzrB,EAAMpqC,MACf,OAAOiB,EAAO2d,EAAJ3d,GAAuB,KAAZ68E,EAAM78E,KAAaA,GACxC,IAAK,GAAIa,GAAI8K,EAAS3L,EAAJa,GAChB,GAAI87E,EAAY1yE,KAAK4yE,EAAMh8E,IAAK,CACpBA,EAAN8K,GACFw9B,EAAM5oC,OAAOq0D,EAAI,EAAG,GAAI0nB,GAAS,EAAG3wE,EAAK9K,GAC3C,IAAIi8E,GAASj8E,CACb,OAAOA,EAAOb,EAAJa,GAAS87E,EAAY1yE,KAAK4yE,EAAMh8E,MAAOA,GACjDsoC,EAAM5oC,OAAOq0D,EAAI,EAAG,GAAI0nB,GAAS,EAAGQ,EAAQj8E,IAC5C8K,EAAM9K,QAEJA,CAEIb,GAAN2L,GACFw9B,EAAM5oC,OAAOq0D,EAAI,EAAG,GAAI0nB,GAAS,EAAG3wE,EAAK3L,IAe/C,MAZsB,IAAlBmpC,EAAM,GAAGlmB,QAAeoJ,EAAI0nD,EAAIztE,MAAM,WACxC6iC,EAAM,GAAGrP,KAAOzN,EAAE,GAAGttB,OACrBoqC,EAAM4zC,QAAQ,GAAIT,GAAS,EAAG,EAAGjwD,EAAE,GAAGttB,UAEhB,GAApBsnC,GAAI8C,GAAOlmB,QAAeoJ,EAAI0nD,EAAIztE,MAAM,WAC1C+/B,GAAI8C,GAAOpP,IAAM1N,EAAE,GAAGttB,OACtBoqC,EAAMppC,KAAK,GAAIu8E,GAAS,EAAG3+D,EAAM0O,EAAE,GAAGttB,OAAQ4e,KAE1B,GAAlBwrB,EAAM,GAAGlmB,OACXkmB,EAAM4zC,QAAQ,GAAIT,GAAS,EAAGnzC,EAAM,GAAGpP,GAAIoP,EAAM,GAAGpP,KAClDoP,EAAM,GAAGlmB,OAASojB,GAAI8C,GAAOlmB,OAC/BkmB,EAAMppC,KAAK,GAAIu8E,GAASnzC,EAAM,GAAGlmB,MAAOtF,EAAKA,IACxCwrB,KAIX,OADArgC,GAAWk0E,QAAU,QACdl0E,IAGTF,OAEA,WACA,GAAIA,GAAgBrE,EAAUd,IAAI,iBAAiB4E,cACnD1C,QAAO,KAAM,IAAK,IAAK,IAAK,KAAM,SAASmD,EAAYif,EAAU3P,GAC/D,YACA,IAAIwX,GAAM2S,SACN06C,EAAM,WACJ,GAAIhK,GAAOrjD,EAAIstD,MAAMluD,KACjBvH,EAAOwrD,EAAKxrD,KACZ01D,EAASr0E,EAAW+pE,aAAajjD,EAAIwtD,eAAe,SAClDljD,aAAa,EACbmjD,iBAAiB,EACjBC,eAAe,GAErBrK,GAAKwE,iBAAiB,SAAU,SAAS8F,GACvCA,EAAIv2C,iBACJm2C,EAAO3U,SAASpwD,EAASL,YAAY0P,EAAKlmB,OAC1C,KACEwmB,EAASkE,MAAMxE,EAAKlmB,OACpBrC,KAAKs+E,QAAO,EAAM,cAClB,MAAOn6E,GACPnE,KAAKs+E,QAAO,EAAOn6E,OAIzBo6E,EAAKR,EAAI/5E,SAQb,OAPAu6E,GAAGD,OAAS,SAASE,EAAStiE,GAC5B,GAAIvN,GAAS+hB,EAAIwtD,eAAe,SAChCxtD,GAAIwtD,eAAe,oBAAoBO,UAAUxtC,IAAI,SACrDtiC,EAAO8vE,UAAUv+B,OAAO,UAAWs+B,GACnC7vE,EAAO8vE,UAAUv+B,OAAO,SAAUs+B,GAClC7vE,EAAO+vE,UAAYxiE,GAEdsM,OAAOm2D,IAAM,GAAIZ,KAG1Br0E,SAGC,SAASpB,GACRA","file":"app.min.js","sourcesContent":["\"format global\";\n(function(global) {\n\n  var defined = {};\n\n  // indexOf polyfill for IE8\n  var indexOf = Array.prototype.indexOf || function(item) {\n    for (var i = 0, l = this.length; i < l; i++)\n      if (this[i] === item)\n        return i;\n    return -1;\n  }\n\n  var getOwnPropertyDescriptor = true;\n  try {\n    Object.getOwnPropertyDescriptor({ a: 0 }, 'a');\n  }\n  catch(e) {\n    getOwnPropertyDescriptor = false;\n  }\n\n  var defineProperty;\n  (function () {\n    try {\n      if (!!Object.defineProperty({}, 'a', {}))\n        defineProperty = Object.defineProperty;\n    }\n    catch (e) {\n      defineProperty = function(obj, prop, opt) {\n        try {\n          obj[prop] = opt.value || opt.get.call(obj);\n        }\n        catch(e) {}\n      }\n    }\n  })();\n\n  function register(name, deps, declare) {\n    if (arguments.length === 4)\n      return registerDynamic.apply(this, arguments);\n    doRegister(name, {\n      declarative: true,\n      deps: deps,\n      declare: declare\n    });\n  }\n\n  function registerDynamic(name, deps, executingRequire, execute) {\n    doRegister(name, {\n      declarative: false,\n      deps: deps,\n      executingRequire: executingRequire,\n      execute: execute\n    });\n  }\n\n  function doRegister(name, entry) {\n    entry.name = name;\n\n    // we never overwrite an existing define\n    if (!(name in defined))\n      defined[name] = entry;\n\n    // we have to normalize dependencies\n    // (assume dependencies are normalized for now)\n    // entry.normalizedDeps = entry.deps.map(normalize);\n    entry.normalizedDeps = entry.deps;\n  }\n\n\n  function buildGroups(entry, groups) {\n    groups[entry.groupIndex] = groups[entry.groupIndex] || [];\n\n    if (indexOf.call(groups[entry.groupIndex], entry) != -1)\n      return;\n\n    groups[entry.groupIndex].push(entry);\n\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      var depEntry = defined[depName];\n\n      // not in the registry means already linked / ES6\n      if (!depEntry || depEntry.evaluated)\n        continue;\n\n      // now we know the entry is in our unlinked linkage group\n      var depGroupIndex = entry.groupIndex + (depEntry.declarative != entry.declarative);\n\n      // the group index of an entry is always the maximum\n      if (depEntry.groupIndex === undefined || depEntry.groupIndex < depGroupIndex) {\n\n        // if already in a group, remove from the old group\n        if (depEntry.groupIndex !== undefined) {\n          groups[depEntry.groupIndex].splice(indexOf.call(groups[depEntry.groupIndex], depEntry), 1);\n\n          // if the old group is empty, then we have a mixed depndency cycle\n          if (groups[depEntry.groupIndex].length == 0)\n            throw new TypeError(\"Mixed dependency cycle detected\");\n        }\n\n        depEntry.groupIndex = depGroupIndex;\n      }\n\n      buildGroups(depEntry, groups);\n    }\n  }\n\n  function link(name) {\n    var startEntry = defined[name];\n\n    startEntry.groupIndex = 0;\n\n    var groups = [];\n\n    buildGroups(startEntry, groups);\n\n    var curGroupDeclarative = !!startEntry.declarative == groups.length % 2;\n    for (var i = groups.length - 1; i >= 0; i--) {\n      var group = groups[i];\n      for (var j = 0; j < group.length; j++) {\n        var entry = group[j];\n\n        // link each group\n        if (curGroupDeclarative)\n          linkDeclarativeModule(entry);\n        else\n          linkDynamicModule(entry);\n      }\n      curGroupDeclarative = !curGroupDeclarative; \n    }\n  }\n\n  // module binding records\n  var moduleRecords = {};\n  function getOrCreateModuleRecord(name) {\n    return moduleRecords[name] || (moduleRecords[name] = {\n      name: name,\n      dependencies: [],\n      exports: {}, // start from an empty module and extend\n      importers: []\n    })\n  }\n\n  function linkDeclarativeModule(entry) {\n    // only link if already not already started linking (stops at circular)\n    if (entry.module)\n      return;\n\n    var module = entry.module = getOrCreateModuleRecord(entry.name);\n    var exports = entry.module.exports;\n\n    var declaration = entry.declare.call(global, function(name, value) {\n      module.locked = true;\n\n      if (typeof name == 'object') {\n        for (var p in name)\n          exports[p] = name[p];\n      }\n      else {\n        exports[name] = value;\n      }\n\n      for (var i = 0, l = module.importers.length; i < l; i++) {\n        var importerModule = module.importers[i];\n        if (!importerModule.locked) {\n          for (var j = 0; j < importerModule.dependencies.length; ++j) {\n            if (importerModule.dependencies[j] === module) {\n              importerModule.setters[j](exports);\n            }\n          }\n        }\n      }\n\n      module.locked = false;\n      return value;\n    });\n\n    module.setters = declaration.setters;\n    module.execute = declaration.execute;\n\n    // now link all the module dependencies\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      var depEntry = defined[depName];\n      var depModule = moduleRecords[depName];\n\n      // work out how to set depExports based on scenarios...\n      var depExports;\n\n      if (depModule) {\n        depExports = depModule.exports;\n      }\n      else if (depEntry && !depEntry.declarative) {\n        depExports = depEntry.esModule;\n      }\n      // in the module registry\n      else if (!depEntry) {\n        depExports = load(depName);\n      }\n      // we have an entry -> link\n      else {\n        linkDeclarativeModule(depEntry);\n        depModule = depEntry.module;\n        depExports = depModule.exports;\n      }\n\n      // only declarative modules have dynamic bindings\n      if (depModule && depModule.importers) {\n        depModule.importers.push(module);\n        module.dependencies.push(depModule);\n      }\n      else\n        module.dependencies.push(null);\n\n      // run the setter for this dependency\n      if (module.setters[i])\n        module.setters[i](depExports);\n    }\n  }\n\n  // An analog to loader.get covering execution of all three layers (real declarative, simulated declarative, simulated dynamic)\n  function getModule(name) {\n    var exports;\n    var entry = defined[name];\n\n    if (!entry) {\n      exports = load(name);\n      if (!exports)\n        throw new Error(\"Unable to load dependency \" + name + \".\");\n    }\n\n    else {\n      if (entry.declarative)\n        ensureEvaluated(name, []);\n\n      else if (!entry.evaluated)\n        linkDynamicModule(entry);\n\n      exports = entry.module.exports;\n    }\n\n    if ((!entry || entry.declarative) && exports && exports.__useDefault)\n      return exports['default'];\n\n    return exports;\n  }\n\n  function linkDynamicModule(entry) {\n    if (entry.module)\n      return;\n\n    var exports = {};\n\n    var module = entry.module = { exports: exports, id: entry.name };\n\n    // AMD requires execute the tree first\n    if (!entry.executingRequire) {\n      for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n        var depName = entry.normalizedDeps[i];\n        var depEntry = defined[depName];\n        if (depEntry)\n          linkDynamicModule(depEntry);\n      }\n    }\n\n    // now execute\n    entry.evaluated = true;\n    var output = entry.execute.call(global, function(name) {\n      for (var i = 0, l = entry.deps.length; i < l; i++) {\n        if (entry.deps[i] != name)\n          continue;\n        return getModule(entry.normalizedDeps[i]);\n      }\n      throw new TypeError('Module ' + name + ' not declared as a dependency.');\n    }, exports, module);\n\n    if (output)\n      module.exports = output;\n\n    // create the esModule object, which allows ES6 named imports of dynamics\n    exports = module.exports;\n \n    if (exports && exports.__esModule) {\n      entry.esModule = exports;\n    }\n    else {\n      entry.esModule = {};\n      \n      // don't trigger getters/setters in environments that support them\n      if ((typeof exports == 'object' || typeof exports == 'function') && exports !== global) {\n        if (getOwnPropertyDescriptor) {\n          var d;\n          for (var p in exports)\n            if (d = Object.getOwnPropertyDescriptor(exports, p))\n              defineProperty(entry.esModule, p, d);\n        }\n        else {\n          var hasOwnProperty = exports && exports.hasOwnProperty;\n          for (var p in exports) {\n            if (!hasOwnProperty || exports.hasOwnProperty(p))\n              entry.esModule[p] = exports[p];\n          }\n         }\n       }\n      entry.esModule['default'] = exports;\n      defineProperty(entry.esModule, '__useDefault', {\n        value: true\n      });\n    }\n  }\n\n  /*\n   * Given a module, and the list of modules for this current branch,\n   *  ensure that each of the dependencies of this module is evaluated\n   *  (unless one is a circular dependency already in the list of seen\n   *  modules, in which case we execute it)\n   *\n   * Then we evaluate the module itself depth-first left to right \n   * execution to match ES6 modules\n   */\n  function ensureEvaluated(moduleName, seen) {\n    var entry = defined[moduleName];\n\n    // if already seen, that means it's an already-evaluated non circular dependency\n    if (!entry || entry.evaluated || !entry.declarative)\n      return;\n\n    // this only applies to declarative modules which late-execute\n\n    seen.push(moduleName);\n\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      if (indexOf.call(seen, depName) == -1) {\n        if (!defined[depName])\n          load(depName);\n        else\n          ensureEvaluated(depName, seen);\n      }\n    }\n\n    if (entry.evaluated)\n      return;\n\n    entry.evaluated = true;\n    entry.module.execute.call(global);\n  }\n\n  // magical execution function\n  var modules = {};\n  function load(name) {\n    if (modules[name])\n      return modules[name];\n\n    // node core modules\n    if (name.substr(0, 6) == '@node/')\n      return require(name.substr(6));\n\n    var entry = defined[name];\n\n    // first we check if this module has already been defined in the registry\n    if (!entry)\n      throw \"Module \" + name + \" not present.\";\n\n    // recursively ensure that the module and all its \n    // dependencies are linked (with dependency group handling)\n    link(name);\n\n    // now handle dependency execution in correct order\n    ensureEvaluated(name, []);\n\n    // remove from the registry\n    defined[name] = undefined;\n\n    // exported modules get __esModule defined for interop\n    if (entry.declarative)\n      defineProperty(entry.module.exports, '__esModule', { value: true });\n\n    // return the defined module object\n    return modules[name] = entry.declarative ? entry.module.exports : entry.esModule;\n  };\n\n  return function(mains, depNames, declare) {\n    return function(formatDetect) {\n      formatDetect(function(deps) {\n        var System = {\n          _nodeRequire: typeof require != 'undefined' && require.resolve && typeof process != 'undefined' && require,\n          register: register,\n          registerDynamic: registerDynamic,\n          get: load, \n          set: function(name, module) {\n            modules[name] = module; \n          },\n          newModule: function(module) {\n            return module;\n          }\n        };\n        System.set('@empty', {});\n\n        // register external dependencies\n        for (var i = 0; i < depNames.length; i++) (function(depName, dep) {\n          if (dep && dep.__esModule)\n            System.register(depName, [], function(_export) {\n              return {\n                setters: [],\n                execute: function() {\n                  for (var p in dep)\n                    if (p != '__esModule' && !(typeof p == 'object' && p + '' == 'Module'))\n                      _export(p, dep[p]);\n                }\n              };\n            });\n          else\n            System.registerDynamic(depName, [], false, function() {\n              return dep;\n            });\n        })(depNames[i], arguments[i]);\n\n        // register modules in this bundle\n        declare(System);\n\n        // load mains\n        var firstLoad = load(mains[0]);\n        if (mains.length > 1)\n          for (var i = 1; i < mains.length; i++)\n            load(mains[i]);\n\n        if (firstLoad.__useDefault)\n          return firstLoad['default'];\n        else\n          return firstLoad;\n      });\n    };\n  };\n\n})(typeof self != 'undefined' ? self : global)\n/* (['mainModule'], ['external-dep'], function($__System) {\n  System.register(...);\n})\n(function(factory) {\n  if (typeof define && define.amd)\n    define(['external-dep'], factory);\n  // etc UMD / module pattern\n})*/\n\n(['1'], [], function($__System) {\n\n(function(__global) {\n  var loader = $__System;\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  var indexOf = Array.prototype.indexOf || function(item) {\n    for (var i = 0, l = this.length; i < l; i++)\n      if (this[i] === item)\n        return i;\n    return -1;\n  }\n\n  function readMemberExpression(p, value) {\n    var pParts = p.split('.');\n    while (pParts.length)\n      value = value[pParts.shift()];\n    return value;\n  }\n\n  // bare minimum ignores for IE8\n  var ignoredGlobalProps = ['_g', 'sessionStorage', 'localStorage', 'clipboardData', 'frames', 'external', 'mozAnimationStartTime', 'webkitStorageInfo', 'webkitIndexedDB'];\n\n  var globalSnapshot;\n\n  function forEachGlobal(callback) {\n    if (Object.keys)\n      Object.keys(__global).forEach(callback);\n    else\n      for (var g in __global) {\n        if (!hasOwnProperty.call(__global, g))\n          continue;\n        callback(g);\n      }\n  }\n\n  function forEachGlobalValue(callback) {\n    forEachGlobal(function(globalName) {\n      if (indexOf.call(ignoredGlobalProps, globalName) != -1)\n        return;\n      try {\n        var value = __global[globalName];\n      }\n      catch (e) {\n        ignoredGlobalProps.push(globalName);\n      }\n      callback(globalName, value);\n    });\n  }\n\n  loader.set('@@global-helpers', loader.newModule({\n    prepareGlobal: function(moduleName, exportName, globals) {\n      // disable module detection\n      var curDefine = __global.define;\n       \n      __global.define = undefined;\n      __global.exports = undefined;\n      if (__global.module && __global.module.exports)\n        __global.module = undefined;\n\n      // set globals\n      var oldGlobals;\n      if (globals) {\n        oldGlobals = {};\n        for (var g in globals) {\n          oldGlobals[g] = globals[g];\n          __global[g] = globals[g];\n        }\n      }\n\n      // store a complete copy of the global object in order to detect changes\n      if (!exportName) {\n        globalSnapshot = {};\n\n        forEachGlobalValue(function(name, value) {\n          globalSnapshot[name] = value;\n        });\n      }\n\n      // return function to retrieve global\n      return function() {\n        var globalValue;\n\n        if (exportName) {\n          globalValue = readMemberExpression(exportName, __global);\n        }\n        else {\n          var singleGlobal;\n          var multipleExports;\n          var exports = {};\n\n          forEachGlobalValue(function(name, value) {\n            if (globalSnapshot[name] === value)\n              return;\n            if (typeof value == 'undefined')\n              return;\n            exports[name] = value;\n\n            if (typeof singleGlobal != 'undefined') {\n              if (!multipleExports && singleGlobal !== value)\n                multipleExports = true;\n            }\n            else {\n              singleGlobal = value;\n            }\n          });\n          globalValue = multipleExports ? exports : singleGlobal;\n        }\n\n        // revert globals\n        if (oldGlobals) {\n          for (var g in oldGlobals)\n            __global[g] = oldGlobals[g];\n        }\n        __global.define = curDefine;\n\n        return globalValue;\n      };\n    }\n  }));\n\n})(typeof self != 'undefined' ? self : global);\n\n(function(__global) {\n  var loader = $__System;\n  var indexOf = Array.prototype.indexOf || function(item) {\n    for (var i = 0, l = this.length; i < l; i++)\n      if (this[i] === item)\n        return i;\n    return -1;\n  }\n\n  var commentRegEx = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\n  var cjsRequirePre = \"(?:^|[^$_a-zA-Z\\\\xA0-\\\\uFFFF.])\";\n  var cjsRequirePost = \"\\\\s*\\\\(\\\\s*(\\\"([^\\\"]+)\\\"|'([^']+)')\\\\s*\\\\)\";\n  var fnBracketRegEx = /\\(([^\\)]*)\\)/;\n  var wsRegEx = /^\\s+|\\s+$/g;\n  \n  var requireRegExs = {};\n\n  function getCJSDeps(source, requireIndex) {\n\n    // remove comments\n    source = source.replace(commentRegEx, '');\n\n    // determine the require alias\n    var params = source.match(fnBracketRegEx);\n    var requireAlias = (params[1].split(',')[requireIndex] || 'require').replace(wsRegEx, '');\n\n    // find or generate the regex for this requireAlias\n    var requireRegEx = requireRegExs[requireAlias] || (requireRegExs[requireAlias] = new RegExp(cjsRequirePre + requireAlias + cjsRequirePost, 'g'));\n\n    requireRegEx.lastIndex = 0;\n\n    var deps = [];\n\n    var match;\n    while (match = requireRegEx.exec(source))\n      deps.push(match[2] || match[3]);\n\n    return deps;\n  }\n\n  /*\n    AMD-compatible require\n    To copy RequireJS, set window.require = window.requirejs = loader.amdRequire\n  */\n  function require(names, callback, errback, referer) {\n    // in amd, first arg can be a config object... we just ignore\n    if (typeof names == 'object' && !(names instanceof Array))\n      return require.apply(null, Array.prototype.splice.call(arguments, 1, arguments.length - 1));\n\n    // amd require\n    if (typeof names == 'string' && typeof callback == 'function')\n      names = [names];\n    if (names instanceof Array) {\n      var dynamicRequires = [];\n      for (var i = 0; i < names.length; i++)\n        dynamicRequires.push(loader['import'](names[i], referer));\n      Promise.all(dynamicRequires).then(function(modules) {\n        if (callback)\n          callback.apply(null, modules);\n      }, errback);\n    }\n\n    // commonjs require\n    else if (typeof names == 'string') {\n      var module = loader.get(names);\n      return module.__useDefault ? module['default'] : module;\n    }\n\n    else\n      throw new TypeError('Invalid require');\n  }\n\n  function define(name, deps, factory) {\n    if (typeof name != 'string') {\n      factory = deps;\n      deps = name;\n      name = null;\n    }\n    if (!(deps instanceof Array)) {\n      factory = deps;\n      deps = ['require', 'exports', 'module'].splice(0, factory.length);\n    }\n\n    if (typeof factory != 'function')\n      factory = (function(factory) {\n        return function() { return factory; }\n      })(factory);\n\n    // in IE8, a trailing comma becomes a trailing undefined entry\n    if (deps[deps.length - 1] === undefined)\n      deps.pop();\n\n    // remove system dependencies\n    var requireIndex, exportsIndex, moduleIndex;\n    \n    if ((requireIndex = indexOf.call(deps, 'require')) != -1) {\n      \n      deps.splice(requireIndex, 1);\n\n      // only trace cjs requires for non-named\n      // named defines assume the trace has already been done\n      if (!name)\n        deps = deps.concat(getCJSDeps(factory.toString(), requireIndex));\n    }\n\n    if ((exportsIndex = indexOf.call(deps, 'exports')) != -1)\n      deps.splice(exportsIndex, 1);\n    \n    if ((moduleIndex = indexOf.call(deps, 'module')) != -1)\n      deps.splice(moduleIndex, 1);\n\n    var define = {\n      name: name,\n      deps: deps,\n      execute: function(req, exports, module) {\n\n        var depValues = [];\n        for (var i = 0; i < deps.length; i++)\n          depValues.push(req(deps[i]));\n\n        module.uri = module.id;\n\n        module.config = function() {};\n\n        // add back in system dependencies\n        if (moduleIndex != -1)\n          depValues.splice(moduleIndex, 0, module);\n        \n        if (exportsIndex != -1)\n          depValues.splice(exportsIndex, 0, exports);\n        \n        if (requireIndex != -1) \n          depValues.splice(requireIndex, 0, function(names, callback, errback) {\n            if (typeof names == 'string' && typeof callback != 'function')\n              return req(names);\n            return require.call(loader, names, callback, errback, module.id);\n          });\n\n        var output = factory.apply(exportsIndex == -1 ? __global : exports, depValues);\n\n        if (typeof output == 'undefined' && module)\n          output = module.exports;\n\n        if (typeof output != 'undefined')\n          return output;\n      }\n    };\n\n    // anonymous define\n    if (!name) {\n      // already defined anonymously -> throw\n      if (lastModule.anonDefine)\n        throw new TypeError('Multiple defines for anonymous module');\n      lastModule.anonDefine = define;\n    }\n    // named define\n    else {\n      // if we don't have any other defines,\n      // then let this be an anonymous define\n      // this is just to support single modules of the form:\n      // define('jquery')\n      // still loading anonymously\n      // because it is done widely enough to be useful\n      if (!lastModule.anonDefine && !lastModule.isBundle) {\n        lastModule.anonDefine = define;\n      }\n      // otherwise its a bundle only\n      else {\n        // if there is an anonDefine already (we thought it could have had a single named define)\n        // then we define it now\n        // this is to avoid defining named defines when they are actually anonymous\n        if (lastModule.anonDefine && lastModule.anonDefine.name)\n          loader.registerDynamic(lastModule.anonDefine.name, lastModule.anonDefine.deps, false, lastModule.anonDefine.execute);\n\n        lastModule.anonDefine = null;\n      }\n\n      // note this is now a bundle\n      lastModule.isBundle = true;\n\n      // define the module through the register registry\n      loader.registerDynamic(name, define.deps, false, define.execute);\n    }\n  }\n  define.amd = {};\n\n  // adds define as a global (potentially just temporarily)\n  function createDefine(loader) {\n    lastModule.anonDefine = null;\n    lastModule.isBundle = false;\n\n    // ensure no NodeJS environment detection\n    var oldModule = __global.module;\n    var oldExports = __global.exports;\n    var oldDefine = __global.define;\n\n    __global.module = undefined;\n    __global.exports = undefined;\n    __global.define = define;\n\n    return function() {\n      __global.define = oldDefine;\n      __global.module = oldModule;\n      __global.exports = oldExports;\n    };\n  }\n\n  var lastModule = {\n    isBundle: false,\n    anonDefine: null\n  };\n\n  loader.set('@@amd-helpers', loader.newModule({\n    createDefine: createDefine,\n    require: require,\n    define: define,\n    lastModule: lastModule\n  }));\n  loader.amdDefine = define;\n  loader.amdRequire = require;\n})(typeof self != 'undefined' ? self : global);\n\n\"bundle\";\n(function() {\nvar _removeDefine = $__System.get(\"@@amd-helpers\").createDefine();\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\")\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd)\n    define(\"2\", [\"3\"], mod);\n  else\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n  CodeMirror.defineMode(\"javascript\", function(config, parserConfig) {\n    var indentUnit = config.indentUnit;\n    var statementIndent = parserConfig.statementIndent;\n    var jsonldMode = parserConfig.jsonld;\n    var jsonMode = parserConfig.json || jsonldMode;\n    var isTS = parserConfig.typescript;\n    var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n    var keywords = function() {\n      function kw(type) {\n        return {\n          type: type,\n          style: \"keyword\"\n        };\n      }\n      var A = kw(\"keyword a\"),\n          B = kw(\"keyword b\"),\n          C = kw(\"keyword c\");\n      var operator = kw(\"operator\"),\n          atom = {\n            type: \"atom\",\n            style: \"atom\"\n          };\n      var jsKeywords = {\n        \"if\": kw(\"if\"),\n        \"while\": A,\n        \"with\": A,\n        \"else\": B,\n        \"do\": B,\n        \"try\": B,\n        \"finally\": B,\n        \"return\": C,\n        \"break\": C,\n        \"continue\": C,\n        \"new\": kw(\"new\"),\n        \"delete\": C,\n        \"throw\": C,\n        \"debugger\": C,\n        \"var\": kw(\"var\"),\n        \"const\": kw(\"var\"),\n        \"let\": kw(\"var\"),\n        \"async\": kw(\"async\"),\n        \"function\": kw(\"function\"),\n        \"catch\": kw(\"catch\"),\n        \"for\": kw(\"for\"),\n        \"switch\": kw(\"switch\"),\n        \"case\": kw(\"case\"),\n        \"default\": kw(\"default\"),\n        \"in\": operator,\n        \"typeof\": operator,\n        \"instanceof\": operator,\n        \"true\": atom,\n        \"false\": atom,\n        \"null\": atom,\n        \"undefined\": atom,\n        \"NaN\": atom,\n        \"Infinity\": atom,\n        \"this\": kw(\"this\"),\n        \"class\": kw(\"class\"),\n        \"super\": kw(\"atom\"),\n        \"await\": C,\n        \"yield\": C,\n        \"export\": kw(\"export\"),\n        \"import\": kw(\"import\"),\n        \"extends\": C\n      };\n      if (isTS) {\n        var type = {\n          type: \"variable\",\n          style: \"variable-3\"\n        };\n        var tsKeywords = {\n          \"interface\": kw(\"interface\"),\n          \"extends\": kw(\"extends\"),\n          \"constructor\": kw(\"constructor\"),\n          \"public\": kw(\"public\"),\n          \"private\": kw(\"private\"),\n          \"protected\": kw(\"protected\"),\n          \"static\": kw(\"static\"),\n          \"string\": type,\n          \"number\": type,\n          \"boolean\": type,\n          \"any\": type\n        };\n        for (var attr in tsKeywords) {\n          jsKeywords[attr] = tsKeywords[attr];\n        }\n      }\n      return jsKeywords;\n    }();\n    var isOperatorChar = /[+\\-*&%=<>!?|~^]/;\n    var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n    function readRegexp(stream) {\n      var escaped = false,\n          next,\n          inSet = false;\n      while ((next = stream.next()) != null) {\n        if (!escaped) {\n          if (next == \"/\" && !inSet)\n            return;\n          if (next == \"[\")\n            inSet = true;\n          else if (inSet && next == \"]\")\n            inSet = false;\n        }\n        escaped = !escaped && next == \"\\\\\";\n      }\n    }\n    var type,\n        content;\n    function ret(tp, style, cont) {\n      type = tp;\n      content = cont;\n      return style;\n    }\n    function tokenBase(stream, state) {\n      var ch = stream.next();\n      if (ch == '\"' || ch == \"'\") {\n        state.tokenize = tokenString(ch);\n        return state.tokenize(stream, state);\n      } else if (ch == \".\" && stream.match(/^\\d+(?:[eE][+\\-]?\\d+)?/)) {\n        return ret(\"number\", \"number\");\n      } else if (ch == \".\" && stream.match(\"..\")) {\n        return ret(\"spread\", \"meta\");\n      } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n        return ret(ch);\n      } else if (ch == \"=\" && stream.eat(\">\")) {\n        return ret(\"=>\", \"operator\");\n      } else if (ch == \"0\" && stream.eat(/x/i)) {\n        stream.eatWhile(/[\\da-f]/i);\n        return ret(\"number\", \"number\");\n      } else if (ch == \"0\" && stream.eat(/o/i)) {\n        stream.eatWhile(/[0-7]/i);\n        return ret(\"number\", \"number\");\n      } else if (ch == \"0\" && stream.eat(/b/i)) {\n        stream.eatWhile(/[01]/i);\n        return ret(\"number\", \"number\");\n      } else if (/\\d/.test(ch)) {\n        stream.match(/^\\d*(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/);\n        return ret(\"number\", \"number\");\n      } else if (ch == \"/\") {\n        if (stream.eat(\"*\")) {\n          state.tokenize = tokenComment;\n          return tokenComment(stream, state);\n        } else if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return ret(\"comment\", \"comment\");\n        } else if (state.lastType == \"operator\" || state.lastType == \"keyword c\" || state.lastType == \"sof\" || /^[\\[{}\\(,;:]$/.test(state.lastType)) {\n          readRegexp(stream);\n          stream.match(/^\\b(([gimyu])(?![gimyu]*\\2))+\\b/);\n          return ret(\"regexp\", \"string-2\");\n        } else {\n          stream.eatWhile(isOperatorChar);\n          return ret(\"operator\", \"operator\", stream.current());\n        }\n      } else if (ch == \"`\") {\n        state.tokenize = tokenQuasi;\n        return tokenQuasi(stream, state);\n      } else if (ch == \"#\") {\n        stream.skipToEnd();\n        return ret(\"error\", \"error\");\n      } else if (isOperatorChar.test(ch)) {\n        stream.eatWhile(isOperatorChar);\n        return ret(\"operator\", \"operator\", stream.current());\n      } else if (wordRE.test(ch)) {\n        stream.eatWhile(wordRE);\n        var word = stream.current(),\n            known = keywords.propertyIsEnumerable(word) && keywords[word];\n        return (known && state.lastType != \".\") ? ret(known.type, known.style, word) : ret(\"variable\", \"variable\", word);\n      }\n    }\n    function tokenString(quote) {\n      return function(stream, state) {\n        var escaped = false,\n            next;\n        if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)) {\n          state.tokenize = tokenBase;\n          return ret(\"jsonld-keyword\", \"meta\");\n        }\n        while ((next = stream.next()) != null) {\n          if (next == quote && !escaped)\n            break;\n          escaped = !escaped && next == \"\\\\\";\n        }\n        if (!escaped)\n          state.tokenize = tokenBase;\n        return ret(\"string\", \"string\");\n      };\n    }\n    function tokenComment(stream, state) {\n      var maybeEnd = false,\n          ch;\n      while (ch = stream.next()) {\n        if (ch == \"/\" && maybeEnd) {\n          state.tokenize = tokenBase;\n          break;\n        }\n        maybeEnd = (ch == \"*\");\n      }\n      return ret(\"comment\", \"comment\");\n    }\n    function tokenQuasi(stream, state) {\n      var escaped = false,\n          next;\n      while ((next = stream.next()) != null) {\n        if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n          state.tokenize = tokenBase;\n          break;\n        }\n        escaped = !escaped && next == \"\\\\\";\n      }\n      return ret(\"quasi\", \"string-2\", stream.current());\n    }\n    var brackets = \"([{}])\";\n    function findFatArrow(stream, state) {\n      if (state.fatArrowAt)\n        state.fatArrowAt = null;\n      var arrow = stream.string.indexOf(\"=>\", stream.start);\n      if (arrow < 0)\n        return;\n      var depth = 0,\n          sawSomething = false;\n      for (var pos = arrow - 1; pos >= 0; --pos) {\n        var ch = stream.string.charAt(pos);\n        var bracket = brackets.indexOf(ch);\n        if (bracket >= 0 && bracket < 3) {\n          if (!depth) {\n            ++pos;\n            break;\n          }\n          if (--depth == 0)\n            break;\n        } else if (bracket >= 3 && bracket < 6) {\n          ++depth;\n        } else if (wordRE.test(ch)) {\n          sawSomething = true;\n        } else if (/[\"'\\/]/.test(ch)) {\n          return;\n        } else if (sawSomething && !depth) {\n          ++pos;\n          break;\n        }\n      }\n      if (sawSomething && !depth)\n        state.fatArrowAt = pos;\n    }\n    var atomicTypes = {\n      \"atom\": true,\n      \"number\": true,\n      \"variable\": true,\n      \"string\": true,\n      \"regexp\": true,\n      \"this\": true,\n      \"jsonld-keyword\": true\n    };\n    function JSLexical(indented, column, type, align, prev, info) {\n      this.indented = indented;\n      this.column = column;\n      this.type = type;\n      this.prev = prev;\n      this.info = info;\n      if (align != null)\n        this.align = align;\n    }\n    function inScope(state, varname) {\n      for (var v = state.localVars; v; v = v.next)\n        if (v.name == varname)\n          return true;\n      for (var cx = state.context; cx; cx = cx.prev) {\n        for (var v = cx.vars; v; v = v.next)\n          if (v.name == varname)\n            return true;\n      }\n    }\n    function parseJS(state, style, type, content, stream) {\n      var cc = state.cc;\n      cx.state = state;\n      cx.stream = stream;\n      cx.marked = null, cx.cc = cc;\n      cx.style = style;\n      if (!state.lexical.hasOwnProperty(\"align\"))\n        state.lexical.align = true;\n      while (true) {\n        var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n        if (combinator(type, content)) {\n          while (cc.length && cc[cc.length - 1].lex)\n            cc.pop()();\n          if (cx.marked)\n            return cx.marked;\n          if (type == \"variable\" && inScope(state, content))\n            return \"variable-2\";\n          return style;\n        }\n      }\n    }\n    var cx = {\n      state: null,\n      column: null,\n      marked: null,\n      cc: null\n    };\n    function pass() {\n      for (var i = arguments.length - 1; i >= 0; i--)\n        cx.cc.push(arguments[i]);\n    }\n    function cont() {\n      pass.apply(null, arguments);\n      return true;\n    }\n    function register(varname) {\n      function inList(list) {\n        for (var v = list; v; v = v.next)\n          if (v.name == varname)\n            return true;\n        return false;\n      }\n      var state = cx.state;\n      cx.marked = \"def\";\n      if (state.context) {\n        if (inList(state.localVars))\n          return;\n        state.localVars = {\n          name: varname,\n          next: state.localVars\n        };\n      } else {\n        if (inList(state.globalVars))\n          return;\n        if (parserConfig.globalVars)\n          state.globalVars = {\n            name: varname,\n            next: state.globalVars\n          };\n      }\n    }\n    var defaultVars = {\n      name: \"this\",\n      next: {name: \"arguments\"}\n    };\n    function pushcontext() {\n      cx.state.context = {\n        prev: cx.state.context,\n        vars: cx.state.localVars\n      };\n      cx.state.localVars = defaultVars;\n    }\n    function popcontext() {\n      cx.state.localVars = cx.state.context.vars;\n      cx.state.context = cx.state.context.prev;\n    }\n    function pushlex(type, info) {\n      var result = function() {\n        var state = cx.state,\n            indent = state.indented;\n        if (state.lexical.type == \"stat\")\n          indent = state.lexical.indented;\n        else\n          for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev)\n            indent = outer.indented;\n        state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n      };\n      result.lex = true;\n      return result;\n    }\n    function poplex() {\n      var state = cx.state;\n      if (state.lexical.prev) {\n        if (state.lexical.type == \")\")\n          state.indented = state.lexical.indented;\n        state.lexical = state.lexical.prev;\n      }\n    }\n    poplex.lex = true;\n    function expect(wanted) {\n      function exp(type) {\n        if (type == wanted)\n          return cont();\n        else if (wanted == \";\")\n          return pass();\n        else\n          return cont(exp);\n      }\n      ;\n      return exp;\n    }\n    function statement(type, value) {\n      if (type == \"var\")\n        return cont(pushlex(\"vardef\", value.length), vardef, expect(\";\"), poplex);\n      if (type == \"keyword a\")\n        return cont(pushlex(\"form\"), expression, statement, poplex);\n      if (type == \"keyword b\")\n        return cont(pushlex(\"form\"), statement, poplex);\n      if (type == \"{\")\n        return cont(pushlex(\"}\"), block, poplex);\n      if (type == \";\")\n        return cont();\n      if (type == \"if\") {\n        if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex)\n          cx.state.cc.pop()();\n        return cont(pushlex(\"form\"), expression, statement, poplex, maybeelse);\n      }\n      if (type == \"function\")\n        return cont(functiondef);\n      if (type == \"for\")\n        return cont(pushlex(\"form\"), forspec, statement, poplex);\n      if (type == \"variable\")\n        return cont(pushlex(\"stat\"), maybelabel);\n      if (type == \"switch\")\n        return cont(pushlex(\"form\"), expression, pushlex(\"}\", \"switch\"), expect(\"{\"), block, poplex, poplex);\n      if (type == \"case\")\n        return cont(expression, expect(\":\"));\n      if (type == \"default\")\n        return cont(expect(\":\"));\n      if (type == \"catch\")\n        return cont(pushlex(\"form\"), pushcontext, expect(\"(\"), funarg, expect(\")\"), statement, poplex, popcontext);\n      if (type == \"class\")\n        return cont(pushlex(\"form\"), className, poplex);\n      if (type == \"export\")\n        return cont(pushlex(\"stat\"), afterExport, poplex);\n      if (type == \"import\")\n        return cont(pushlex(\"stat\"), afterImport, poplex);\n      return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n    }\n    function expression(type) {\n      return expressionInner(type, false);\n    }\n    function expressionNoComma(type) {\n      return expressionInner(type, true);\n    }\n    function expressionInner(type, noComma) {\n      if (cx.state.fatArrowAt == cx.stream.start) {\n        var body = noComma ? arrowBodyNoComma : arrowBody;\n        if (type == \"(\")\n          return cont(pushcontext, pushlex(\")\"), commasep(pattern, \")\"), poplex, expect(\"=>\"), body, popcontext);\n        else if (type == \"variable\")\n          return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n      }\n      var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n      if (atomicTypes.hasOwnProperty(type))\n        return cont(maybeop);\n      if (type == \"async\")\n        return cont(expression);\n      if (type == \"function\")\n        return cont(functiondef, maybeop);\n      if (type == \"keyword c\")\n        return cont(noComma ? maybeexpressionNoComma : maybeexpression);\n      if (type == \"(\")\n        return cont(pushlex(\")\"), maybeexpression, comprehension, expect(\")\"), poplex, maybeop);\n      if (type == \"operator\" || type == \"spread\")\n        return cont(noComma ? expressionNoComma : expression);\n      if (type == \"[\")\n        return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n      if (type == \"{\")\n        return contCommasep(objprop, \"}\", null, maybeop);\n      if (type == \"quasi\")\n        return pass(quasi, maybeop);\n      if (type == \"new\")\n        return cont(maybeTarget(noComma));\n      return cont();\n    }\n    function maybeexpression(type) {\n      if (type.match(/[;\\}\\)\\],]/))\n        return pass();\n      return pass(expression);\n    }\n    function maybeexpressionNoComma(type) {\n      if (type.match(/[;\\}\\)\\],]/))\n        return pass();\n      return pass(expressionNoComma);\n    }\n    function maybeoperatorComma(type, value) {\n      if (type == \",\")\n        return cont(expression);\n      return maybeoperatorNoComma(type, value, false);\n    }\n    function maybeoperatorNoComma(type, value, noComma) {\n      var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n      var expr = noComma == false ? expression : expressionNoComma;\n      if (type == \"=>\")\n        return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n      if (type == \"operator\") {\n        if (/\\+\\+|--/.test(value))\n          return cont(me);\n        if (value == \"?\")\n          return cont(expression, expect(\":\"), expr);\n        return cont(expr);\n      }\n      if (type == \"quasi\") {\n        return pass(quasi, me);\n      }\n      if (type == \";\")\n        return;\n      if (type == \"(\")\n        return contCommasep(expressionNoComma, \")\", \"call\", me);\n      if (type == \".\")\n        return cont(property, me);\n      if (type == \"[\")\n        return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n    }\n    function quasi(type, value) {\n      if (type != \"quasi\")\n        return pass();\n      if (value.slice(value.length - 2) != \"${\")\n        return cont(quasi);\n      return cont(expression, continueQuasi);\n    }\n    function continueQuasi(type) {\n      if (type == \"}\") {\n        cx.marked = \"string-2\";\n        cx.state.tokenize = tokenQuasi;\n        return cont(quasi);\n      }\n    }\n    function arrowBody(type) {\n      findFatArrow(cx.stream, cx.state);\n      return pass(type == \"{\" ? statement : expression);\n    }\n    function arrowBodyNoComma(type) {\n      findFatArrow(cx.stream, cx.state);\n      return pass(type == \"{\" ? statement : expressionNoComma);\n    }\n    function maybeTarget(noComma) {\n      return function(type) {\n        if (type == \".\")\n          return cont(noComma ? targetNoComma : target);\n        else\n          return pass(noComma ? expressionNoComma : expression);\n      };\n    }\n    function target(_, value) {\n      if (value == \"target\") {\n        cx.marked = \"keyword\";\n        return cont(maybeoperatorComma);\n      }\n    }\n    function targetNoComma(_, value) {\n      if (value == \"target\") {\n        cx.marked = \"keyword\";\n        return cont(maybeoperatorNoComma);\n      }\n    }\n    function maybelabel(type) {\n      if (type == \":\")\n        return cont(poplex, statement);\n      return pass(maybeoperatorComma, expect(\";\"), poplex);\n    }\n    function property(type) {\n      if (type == \"variable\") {\n        cx.marked = \"property\";\n        return cont();\n      }\n    }\n    function objprop(type, value) {\n      if (type == \"async\") {\n        return cont(objprop);\n      } else if (type == \"variable\" || cx.style == \"keyword\") {\n        cx.marked = \"property\";\n        if (value == \"get\" || value == \"set\")\n          return cont(getterSetter);\n        return cont(afterprop);\n      } else if (type == \"number\" || type == \"string\") {\n        cx.marked = jsonldMode ? \"property\" : (cx.style + \" property\");\n        return cont(afterprop);\n      } else if (type == \"jsonld-keyword\") {\n        return cont(afterprop);\n      } else if (type == \"[\") {\n        return cont(expression, expect(\"]\"), afterprop);\n      }\n    }\n    function getterSetter(type) {\n      if (type != \"variable\")\n        return pass(afterprop);\n      cx.marked = \"property\";\n      return cont(functiondef);\n    }\n    function afterprop(type) {\n      if (type == \":\")\n        return cont(expressionNoComma);\n      if (type == \"(\")\n        return pass(functiondef);\n    }\n    function commasep(what, end) {\n      function proceed(type) {\n        if (type == \",\") {\n          var lex = cx.state.lexical;\n          if (lex.info == \"call\")\n            lex.pos = (lex.pos || 0) + 1;\n          return cont(what, proceed);\n        }\n        if (type == end)\n          return cont();\n        return cont(expect(end));\n      }\n      return function(type) {\n        if (type == end)\n          return cont();\n        return pass(what, proceed);\n      };\n    }\n    function contCommasep(what, end, info) {\n      for (var i = 3; i < arguments.length; i++)\n        cx.cc.push(arguments[i]);\n      return cont(pushlex(end, info), commasep(what, end), poplex);\n    }\n    function block(type) {\n      if (type == \"}\")\n        return cont();\n      return pass(statement, block);\n    }\n    function maybetype(type) {\n      if (isTS && type == \":\")\n        return cont(typedef);\n    }\n    function maybedefault(_, value) {\n      if (value == \"=\")\n        return cont(expressionNoComma);\n    }\n    function typedef(type) {\n      if (type == \"variable\") {\n        cx.marked = \"variable-3\";\n        return cont();\n      }\n    }\n    function vardef() {\n      return pass(pattern, maybetype, maybeAssign, vardefCont);\n    }\n    function pattern(type, value) {\n      if (type == \"variable\") {\n        register(value);\n        return cont();\n      }\n      if (type == \"spread\")\n        return cont(pattern);\n      if (type == \"[\")\n        return contCommasep(pattern, \"]\");\n      if (type == \"{\")\n        return contCommasep(proppattern, \"}\");\n    }\n    function proppattern(type, value) {\n      if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n        register(value);\n        return cont(maybeAssign);\n      }\n      if (type == \"variable\")\n        cx.marked = \"property\";\n      if (type == \"spread\")\n        return cont(pattern);\n      return cont(expect(\":\"), pattern, maybeAssign);\n    }\n    function maybeAssign(_type, value) {\n      if (value == \"=\")\n        return cont(expressionNoComma);\n    }\n    function vardefCont(type) {\n      if (type == \",\")\n        return cont(vardef);\n    }\n    function maybeelse(type, value) {\n      if (type == \"keyword b\" && value == \"else\")\n        return cont(pushlex(\"form\", \"else\"), statement, poplex);\n    }\n    function forspec(type) {\n      if (type == \"(\")\n        return cont(pushlex(\")\"), forspec1, expect(\")\"), poplex);\n    }\n    function forspec1(type) {\n      if (type == \"var\")\n        return cont(vardef, expect(\";\"), forspec2);\n      if (type == \";\")\n        return cont(forspec2);\n      if (type == \"variable\")\n        return cont(formaybeinof);\n      return pass(expression, expect(\";\"), forspec2);\n    }\n    function formaybeinof(_type, value) {\n      if (value == \"in\" || value == \"of\") {\n        cx.marked = \"keyword\";\n        return cont(expression);\n      }\n      return cont(maybeoperatorComma, forspec2);\n    }\n    function forspec2(type, value) {\n      if (type == \";\")\n        return cont(forspec3);\n      if (value == \"in\" || value == \"of\") {\n        cx.marked = \"keyword\";\n        return cont(expression);\n      }\n      return pass(expression, expect(\";\"), forspec3);\n    }\n    function forspec3(type) {\n      if (type != \")\")\n        cont(expression);\n    }\n    function functiondef(type, value) {\n      if (value == \"*\") {\n        cx.marked = \"keyword\";\n        return cont(functiondef);\n      }\n      if (type == \"variable\") {\n        register(value);\n        return cont(functiondef);\n      }\n      if (type == \"(\")\n        return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, statement, popcontext);\n    }\n    function funarg(type) {\n      if (type == \"spread\")\n        return cont(funarg);\n      return pass(pattern, maybetype, maybedefault);\n    }\n    function className(type, value) {\n      if (type == \"variable\") {\n        register(value);\n        return cont(classNameAfter);\n      }\n    }\n    function classNameAfter(type, value) {\n      if (value == \"extends\")\n        return cont(expression, classNameAfter);\n      if (type == \"{\")\n        return cont(pushlex(\"}\"), classBody, poplex);\n    }\n    function classBody(type, value) {\n      if (type == \"variable\" || cx.style == \"keyword\") {\n        if (value == \"static\") {\n          cx.marked = \"keyword\";\n          return cont(classBody);\n        }\n        cx.marked = \"property\";\n        if (value == \"get\" || value == \"set\")\n          return cont(classGetterSetter, functiondef, classBody);\n        return cont(functiondef, classBody);\n      }\n      if (value == \"*\") {\n        cx.marked = \"keyword\";\n        return cont(classBody);\n      }\n      if (type == \";\")\n        return cont(classBody);\n      if (type == \"}\")\n        return cont();\n    }\n    function classGetterSetter(type) {\n      if (type != \"variable\")\n        return pass();\n      cx.marked = \"property\";\n      return cont();\n    }\n    function afterExport(_type, value) {\n      if (value == \"*\") {\n        cx.marked = \"keyword\";\n        return cont(maybeFrom, expect(\";\"));\n      }\n      if (value == \"default\") {\n        cx.marked = \"keyword\";\n        return cont(expression, expect(\";\"));\n      }\n      return pass(statement);\n    }\n    function afterImport(type) {\n      if (type == \"string\")\n        return cont();\n      return pass(importSpec, maybeFrom);\n    }\n    function importSpec(type, value) {\n      if (type == \"{\")\n        return contCommasep(importSpec, \"}\");\n      if (type == \"variable\")\n        register(value);\n      if (value == \"*\")\n        cx.marked = \"keyword\";\n      return cont(maybeAs);\n    }\n    function maybeAs(_type, value) {\n      if (value == \"as\") {\n        cx.marked = \"keyword\";\n        return cont(importSpec);\n      }\n    }\n    function maybeFrom(_type, value) {\n      if (value == \"from\") {\n        cx.marked = \"keyword\";\n        return cont(expression);\n      }\n    }\n    function arrayLiteral(type) {\n      if (type == \"]\")\n        return cont();\n      return pass(expressionNoComma, maybeArrayComprehension);\n    }\n    function maybeArrayComprehension(type) {\n      if (type == \"for\")\n        return pass(comprehension, expect(\"]\"));\n      if (type == \",\")\n        return cont(commasep(maybeexpressionNoComma, \"]\"));\n      return pass(commasep(expressionNoComma, \"]\"));\n    }\n    function comprehension(type) {\n      if (type == \"for\")\n        return cont(forspec, comprehension);\n      if (type == \"if\")\n        return cont(expression, comprehension);\n    }\n    function isContinuedStatement(state, textAfter) {\n      return state.lastType == \"operator\" || state.lastType == \",\" || isOperatorChar.test(textAfter.charAt(0)) || /[,.]/.test(textAfter.charAt(0));\n    }\n    return {\n      startState: function(basecolumn) {\n        var state = {\n          tokenize: tokenBase,\n          lastType: \"sof\",\n          cc: [],\n          lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n          localVars: parserConfig.localVars,\n          context: parserConfig.localVars && {vars: parserConfig.localVars},\n          indented: 0\n        };\n        if (parserConfig.globalVars && typeof parserConfig.globalVars == \"object\")\n          state.globalVars = parserConfig.globalVars;\n        return state;\n      },\n      token: function(stream, state) {\n        if (stream.sol()) {\n          if (!state.lexical.hasOwnProperty(\"align\"))\n            state.lexical.align = false;\n          state.indented = stream.indentation();\n          findFatArrow(stream, state);\n        }\n        if (state.tokenize != tokenComment && stream.eatSpace())\n          return null;\n        var style = state.tokenize(stream, state);\n        if (type == \"comment\")\n          return style;\n        state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n        return parseJS(state, style, type, content, stream);\n      },\n      indent: function(state, textAfter) {\n        if (state.tokenize == tokenComment)\n          return CodeMirror.Pass;\n        if (state.tokenize != tokenBase)\n          return 0;\n        var firstChar = textAfter && textAfter.charAt(0),\n            lexical = state.lexical;\n        if (!/^\\s*else\\b/.test(textAfter))\n          for (var i = state.cc.length - 1; i >= 0; --i) {\n            var c = state.cc[i];\n            if (c == poplex)\n              lexical = lexical.prev;\n            else if (c != maybeelse)\n              break;\n          }\n        if (lexical.type == \"stat\" && firstChar == \"}\")\n          lexical = lexical.prev;\n        if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\")\n          lexical = lexical.prev;\n        var type = lexical.type,\n            closing = firstChar == type;\n        if (type == \"vardef\")\n          return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info + 1 : 0);\n        else if (type == \"form\" && firstChar == \"{\")\n          return lexical.indented;\n        else if (type == \"form\")\n          return lexical.indented + indentUnit;\n        else if (type == \"stat\")\n          return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);\n        else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false)\n          return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);\n        else if (lexical.align)\n          return lexical.column + (closing ? 0 : 1);\n        else\n          return lexical.indented + (closing ? 0 : indentUnit);\n      },\n      electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n      blockCommentStart: jsonMode ? null : \"/*\",\n      blockCommentEnd: jsonMode ? null : \"*/\",\n      lineComment: jsonMode ? null : \"//\",\n      fold: \"brace\",\n      closeBrackets: \"()[]{}''\\\"\\\"``\",\n      helperType: jsonMode ? \"json\" : \"javascript\",\n      jsonldMode: jsonldMode,\n      jsonMode: jsonMode\n    };\n  });\n  CodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n  CodeMirror.defineMIME(\"text/javascript\", \"javascript\");\n  CodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\n  CodeMirror.defineMIME(\"application/javascript\", \"javascript\");\n  CodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\n  CodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\n  CodeMirror.defineMIME(\"application/json\", {\n    name: \"javascript\",\n    json: true\n  });\n  CodeMirror.defineMIME(\"application/x-json\", {\n    name: \"javascript\",\n    json: true\n  });\n  CodeMirror.defineMIME(\"application/ld+json\", {\n    name: \"javascript\",\n    jsonld: true\n  });\n  CodeMirror.defineMIME(\"text/typescript\", {\n    name: \"javascript\",\n    typescript: true\n  });\n  CodeMirror.defineMIME(\"application/typescript\", {\n    name: \"javascript\",\n    typescript: true\n  });\n});\n\n_removeDefine();\n})();\n(function() {\nvar _removeDefine = $__System.get(\"@@amd-helpers\").createDefine();\n(function() {\n  var acorn = {};\n  (function(exports) {\n    var nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n    var nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\n    var nonASCIIidentifierChars = \"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n    var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n    var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n    var newline = exports.newline = /[\\n\\r\\u2028\\u2029]/;\n    var lineBreak = exports.lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n    var isIdentifierStart = exports.isIdentifierStart = function(code) {\n      if (code < 65)\n        return code === 36;\n      if (code < 91)\n        return true;\n      if (code < 97)\n        return code === 95;\n      if (code < 123)\n        return true;\n      return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code));\n    };\n    var isIdentifierChar = exports.isIdentifierChar = function(code) {\n      if (code < 48)\n        return code === 36;\n      if (code < 58)\n        return true;\n      if (code < 65)\n        return false;\n      if (code < 91)\n        return true;\n      if (code < 97)\n        return code === 95;\n      if (code < 123)\n        return true;\n      return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code));\n    };\n  })(acorn);\n  function in_array(what, arr) {\n    for (var i = 0; i < arr.length; i += 1) {\n      if (arr[i] === what) {\n        return true;\n      }\n    }\n    return false;\n  }\n  function trim(s) {\n    return s.replace(/^\\s+|\\s+$/g, '');\n  }\n  function ltrim(s) {\n    return s.replace(/^\\s+/g, '');\n  }\n  function rtrim(s) {\n    return s.replace(/\\s+$/g, '');\n  }\n  function js_beautify(js_source_text, options) {\n    \"use strict\";\n    var beautifier = new Beautifier(js_source_text, options);\n    return beautifier.beautify();\n  }\n  var MODE = {\n    BlockStatement: 'BlockStatement',\n    Statement: 'Statement',\n    ObjectLiteral: 'ObjectLiteral',\n    ArrayLiteral: 'ArrayLiteral',\n    ForInitializer: 'ForInitializer',\n    Conditional: 'Conditional',\n    Expression: 'Expression'\n  };\n  function Beautifier(js_source_text, options) {\n    \"use strict\";\n    var output;\n    var tokens = [],\n        token_pos;\n    var Tokenizer;\n    var current_token;\n    var last_type,\n        last_last_text,\n        indent_string;\n    var flags,\n        previous_flags,\n        flag_store;\n    var prefix;\n    var handlers,\n        opt;\n    var baseIndentString = '';\n    handlers = {\n      'TK_START_EXPR': handle_start_expr,\n      'TK_END_EXPR': handle_end_expr,\n      'TK_START_BLOCK': handle_start_block,\n      'TK_END_BLOCK': handle_end_block,\n      'TK_WORD': handle_word,\n      'TK_RESERVED': handle_word,\n      'TK_SEMICOLON': handle_semicolon,\n      'TK_STRING': handle_string,\n      'TK_EQUALS': handle_equals,\n      'TK_OPERATOR': handle_operator,\n      'TK_COMMA': handle_comma,\n      'TK_BLOCK_COMMENT': handle_block_comment,\n      'TK_COMMENT': handle_comment,\n      'TK_DOT': handle_dot,\n      'TK_UNKNOWN': handle_unknown,\n      'TK_EOF': handle_eof\n    };\n    function create_flags(flags_base, mode) {\n      var next_indent_level = 0;\n      if (flags_base) {\n        next_indent_level = flags_base.indentation_level;\n        if (!output.just_added_newline() && flags_base.line_indent_level > next_indent_level) {\n          next_indent_level = flags_base.line_indent_level;\n        }\n      }\n      var next_flags = {\n        mode: mode,\n        parent: flags_base,\n        last_text: flags_base ? flags_base.last_text : '',\n        last_word: flags_base ? flags_base.last_word : '',\n        declaration_statement: false,\n        declaration_assignment: false,\n        multiline_frame: false,\n        if_block: false,\n        else_block: false,\n        do_block: false,\n        do_while: false,\n        in_case_statement: false,\n        in_case: false,\n        case_body: false,\n        indentation_level: next_indent_level,\n        line_indent_level: flags_base ? flags_base.line_indent_level : next_indent_level,\n        start_line_index: output.get_line_number(),\n        ternary_depth: 0\n      };\n      return next_flags;\n    }\n    options = options ? options : {};\n    opt = {};\n    if (options.braces_on_own_line !== undefined) {\n      opt.brace_style = options.braces_on_own_line ? \"expand\" : \"collapse\";\n    }\n    opt.brace_style = options.brace_style ? options.brace_style : (opt.brace_style ? opt.brace_style : \"collapse\");\n    if (opt.brace_style === \"expand-strict\") {\n      opt.brace_style = \"expand\";\n    }\n    opt.indent_size = options.indent_size ? parseInt(options.indent_size, 10) : 4;\n    opt.indent_char = options.indent_char ? options.indent_char : ' ';\n    opt.eol = options.eol ? options.eol : '\\n';\n    opt.preserve_newlines = (options.preserve_newlines === undefined) ? true : options.preserve_newlines;\n    opt.break_chained_methods = (options.break_chained_methods === undefined) ? false : options.break_chained_methods;\n    opt.max_preserve_newlines = (options.max_preserve_newlines === undefined) ? 0 : parseInt(options.max_preserve_newlines, 10);\n    opt.space_in_paren = (options.space_in_paren === undefined) ? false : options.space_in_paren;\n    opt.space_in_empty_paren = (options.space_in_empty_paren === undefined) ? false : options.space_in_empty_paren;\n    opt.jslint_happy = (options.jslint_happy === undefined) ? false : options.jslint_happy;\n    opt.space_after_anon_function = (options.space_after_anon_function === undefined) ? false : options.space_after_anon_function;\n    opt.keep_array_indentation = (options.keep_array_indentation === undefined) ? false : options.keep_array_indentation;\n    opt.space_before_conditional = (options.space_before_conditional === undefined) ? true : options.space_before_conditional;\n    opt.unescape_strings = (options.unescape_strings === undefined) ? false : options.unescape_strings;\n    opt.wrap_line_length = (options.wrap_line_length === undefined) ? 0 : parseInt(options.wrap_line_length, 10);\n    opt.e4x = (options.e4x === undefined) ? false : options.e4x;\n    opt.end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline;\n    opt.comma_first = (options.comma_first === undefined) ? false : options.comma_first;\n    opt.test_output_raw = (options.test_output_raw === undefined) ? false : options.test_output_raw;\n    if (opt.jslint_happy) {\n      opt.space_after_anon_function = true;\n    }\n    if (options.indent_with_tabs) {\n      opt.indent_char = '\\t';\n      opt.indent_size = 1;\n    }\n    opt.eol = opt.eol.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n');\n    indent_string = '';\n    while (opt.indent_size > 0) {\n      indent_string += opt.indent_char;\n      opt.indent_size -= 1;\n    }\n    var preindent_index = 0;\n    if (js_source_text && js_source_text.length) {\n      while ((js_source_text.charAt(preindent_index) === ' ' || js_source_text.charAt(preindent_index) === '\\t')) {\n        baseIndentString += js_source_text.charAt(preindent_index);\n        preindent_index += 1;\n      }\n      js_source_text = js_source_text.substring(preindent_index);\n    }\n    last_type = 'TK_START_BLOCK';\n    last_last_text = '';\n    output = new Output(indent_string, baseIndentString);\n    output.raw = opt.test_output_raw;\n    flag_store = [];\n    set_mode(MODE.BlockStatement);\n    this.beautify = function() {\n      var local_token,\n          sweet_code;\n      Tokenizer = new tokenizer(js_source_text, opt, indent_string);\n      tokens = Tokenizer.tokenize();\n      token_pos = 0;\n      while (local_token = get_token()) {\n        for (var i = 0; i < local_token.comments_before.length; i++) {\n          handle_token(local_token.comments_before[i]);\n        }\n        handle_token(local_token);\n        last_last_text = flags.last_text;\n        last_type = local_token.type;\n        flags.last_text = local_token.text;\n        token_pos += 1;\n      }\n      sweet_code = output.get_code();\n      if (opt.end_with_newline) {\n        sweet_code += '\\n';\n      }\n      if (opt.eol != '\\n') {\n        sweet_code = sweet_code.replace(/[\\n]/g, opt.eol);\n      }\n      return sweet_code;\n    };\n    function handle_token(local_token) {\n      var newlines = local_token.newlines;\n      var keep_whitespace = opt.keep_array_indentation && is_array(flags.mode);\n      if (keep_whitespace) {\n        for (i = 0; i < newlines; i += 1) {\n          print_newline(i > 0);\n        }\n      } else {\n        if (opt.max_preserve_newlines && newlines > opt.max_preserve_newlines) {\n          newlines = opt.max_preserve_newlines;\n        }\n        if (opt.preserve_newlines) {\n          if (local_token.newlines > 1) {\n            print_newline();\n            for (var i = 1; i < newlines; i += 1) {\n              print_newline(true);\n            }\n          }\n        }\n      }\n      current_token = local_token;\n      handlers[current_token.type]();\n    }\n    function split_newlines(s) {\n      s = s.replace(/\\x0d/g, '');\n      var out = [],\n          idx = s.indexOf(\"\\n\");\n      while (idx !== -1) {\n        out.push(s.substring(0, idx));\n        s = s.substring(idx + 1);\n        idx = s.indexOf(\"\\n\");\n      }\n      if (s.length) {\n        out.push(s);\n      }\n      return out;\n    }\n    function allow_wrap_or_preserved_newline(force_linewrap) {\n      force_linewrap = (force_linewrap === undefined) ? false : force_linewrap;\n      if (output.just_added_newline()) {\n        return;\n      }\n      if ((opt.preserve_newlines && current_token.wanted_newline) || force_linewrap) {\n        print_newline(false, true);\n      } else if (opt.wrap_line_length) {\n        var proposed_line_length = output.current_line.get_character_count() + current_token.text.length + (output.space_before_token ? 1 : 0);\n        if (proposed_line_length >= opt.wrap_line_length) {\n          print_newline(false, true);\n        }\n      }\n    }\n    function print_newline(force_newline, preserve_statement_flags) {\n      if (!preserve_statement_flags) {\n        if (flags.last_text !== ';' && flags.last_text !== ',' && flags.last_text !== '=' && last_type !== 'TK_OPERATOR') {\n          while (flags.mode === MODE.Statement && !flags.if_block && !flags.do_block) {\n            restore_mode();\n          }\n        }\n      }\n      if (output.add_new_line(force_newline)) {\n        flags.multiline_frame = true;\n      }\n    }\n    function print_token_line_indentation() {\n      if (output.just_added_newline()) {\n        if (opt.keep_array_indentation && is_array(flags.mode) && current_token.wanted_newline) {\n          output.current_line.push(current_token.whitespace_before);\n          output.space_before_token = false;\n        } else if (output.set_indent(flags.indentation_level)) {\n          flags.line_indent_level = flags.indentation_level;\n        }\n      }\n    }\n    function print_token(printable_token) {\n      if (output.raw) {\n        output.add_raw_token(current_token);\n        return;\n      }\n      if (opt.comma_first && last_type === 'TK_COMMA' && output.just_added_newline()) {\n        if (output.previous_line.last() === ',') {\n          output.previous_line.pop();\n          print_token_line_indentation();\n          output.add_token(',');\n          output.space_before_token = true;\n        }\n      }\n      printable_token = printable_token || current_token.text;\n      print_token_line_indentation();\n      output.add_token(printable_token);\n    }\n    function indent() {\n      flags.indentation_level += 1;\n    }\n    function deindent() {\n      if (flags.indentation_level > 0 && ((!flags.parent) || flags.indentation_level > flags.parent.indentation_level))\n        flags.indentation_level -= 1;\n    }\n    function set_mode(mode) {\n      if (flags) {\n        flag_store.push(flags);\n        previous_flags = flags;\n      } else {\n        previous_flags = create_flags(null, mode);\n      }\n      flags = create_flags(previous_flags, mode);\n    }\n    function is_array(mode) {\n      return mode === MODE.ArrayLiteral;\n    }\n    function is_expression(mode) {\n      return in_array(mode, [MODE.Expression, MODE.ForInitializer, MODE.Conditional]);\n    }\n    function restore_mode() {\n      if (flag_store.length > 0) {\n        previous_flags = flags;\n        flags = flag_store.pop();\n        if (previous_flags.mode === MODE.Statement) {\n          output.remove_redundant_indentation(previous_flags);\n        }\n      }\n    }\n    function start_of_object_property() {\n      return flags.parent.mode === MODE.ObjectLiteral && flags.mode === MODE.Statement && ((flags.last_text === ':' && flags.ternary_depth === 0) || (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set'])));\n    }\n    function start_of_statement() {\n      if ((last_type === 'TK_RESERVED' && in_array(flags.last_text, ['var', 'let', 'const']) && current_token.type === 'TK_WORD') || (last_type === 'TK_RESERVED' && flags.last_text === 'do') || (last_type === 'TK_RESERVED' && flags.last_text === 'return' && !current_token.wanted_newline) || (last_type === 'TK_RESERVED' && flags.last_text === 'else' && !(current_token.type === 'TK_RESERVED' && current_token.text === 'if')) || (last_type === 'TK_END_EXPR' && (previous_flags.mode === MODE.ForInitializer || previous_flags.mode === MODE.Conditional)) || (last_type === 'TK_WORD' && flags.mode === MODE.BlockStatement && !flags.in_case && !(current_token.text === '--' || current_token.text === '++') && last_last_text !== 'function' && current_token.type !== 'TK_WORD' && current_token.type !== 'TK_RESERVED') || (flags.mode === MODE.ObjectLiteral && ((flags.last_text === ':' && flags.ternary_depth === 0) || (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set']))))) {\n        set_mode(MODE.Statement);\n        indent();\n        if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['var', 'let', 'const']) && current_token.type === 'TK_WORD') {\n          flags.declaration_statement = true;\n        }\n        if (!start_of_object_property()) {\n          allow_wrap_or_preserved_newline(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['do', 'for', 'if', 'while']));\n        }\n        return true;\n      }\n      return false;\n    }\n    function all_lines_start_with(lines, c) {\n      for (var i = 0; i < lines.length; i++) {\n        var line = trim(lines[i]);\n        if (line.charAt(0) !== c) {\n          return false;\n        }\n      }\n      return true;\n    }\n    function each_line_matches_indent(lines, indent) {\n      var i = 0,\n          len = lines.length,\n          line;\n      for (; i < len; i++) {\n        line = lines[i];\n        if (line && line.indexOf(indent) !== 0) {\n          return false;\n        }\n      }\n      return true;\n    }\n    function is_special_word(word) {\n      return in_array(word, ['case', 'return', 'do', 'if', 'throw', 'else']);\n    }\n    function get_token(offset) {\n      var index = token_pos + (offset || 0);\n      return (index < 0 || index >= tokens.length) ? null : tokens[index];\n    }\n    function handle_start_expr() {\n      if (start_of_statement()) {}\n      var next_mode = MODE.Expression;\n      if (current_token.text === '[') {\n        if (last_type === 'TK_WORD' || flags.last_text === ')') {\n          if (last_type === 'TK_RESERVED' && in_array(flags.last_text, Tokenizer.line_starters)) {\n            output.space_before_token = true;\n          }\n          set_mode(next_mode);\n          print_token();\n          indent();\n          if (opt.space_in_paren) {\n            output.space_before_token = true;\n          }\n          return;\n        }\n        next_mode = MODE.ArrayLiteral;\n        if (is_array(flags.mode)) {\n          if (flags.last_text === '[' || (flags.last_text === ',' && (last_last_text === ']' || last_last_text === '}'))) {\n            if (!opt.keep_array_indentation) {\n              print_newline();\n            }\n          }\n        }\n      } else {\n        if (last_type === 'TK_RESERVED' && flags.last_text === 'for') {\n          next_mode = MODE.ForInitializer;\n        } else if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['if', 'while'])) {\n          next_mode = MODE.Conditional;\n        } else {}\n      }\n      if (flags.last_text === ';' || last_type === 'TK_START_BLOCK') {\n        print_newline();\n      } else if (last_type === 'TK_END_EXPR' || last_type === 'TK_START_EXPR' || last_type === 'TK_END_BLOCK' || flags.last_text === '.') {\n        allow_wrap_or_preserved_newline(current_token.wanted_newline);\n      } else if (!(last_type === 'TK_RESERVED' && current_token.text === '(') && last_type !== 'TK_WORD' && last_type !== 'TK_OPERATOR') {\n        output.space_before_token = true;\n      } else if ((last_type === 'TK_RESERVED' && (flags.last_word === 'function' || flags.last_word === 'typeof')) || (flags.last_text === '*' && last_last_text === 'function')) {\n        if (opt.space_after_anon_function) {\n          output.space_before_token = true;\n        }\n      } else if (last_type === 'TK_RESERVED' && (in_array(flags.last_text, Tokenizer.line_starters) || flags.last_text === 'catch')) {\n        if (opt.space_before_conditional) {\n          output.space_before_token = true;\n        }\n      }\n      if (current_token.text === '(' && last_type === 'TK_RESERVED' && flags.last_word === 'await') {\n        output.space_before_token = true;\n      }\n      if (current_token.text === '(') {\n        if (last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\n          if (!start_of_object_property()) {\n            allow_wrap_or_preserved_newline();\n          }\n        }\n      }\n      set_mode(next_mode);\n      print_token();\n      if (opt.space_in_paren) {\n        output.space_before_token = true;\n      }\n      indent();\n    }\n    function handle_end_expr() {\n      while (flags.mode === MODE.Statement) {\n        restore_mode();\n      }\n      if (flags.multiline_frame) {\n        allow_wrap_or_preserved_newline(current_token.text === ']' && is_array(flags.mode) && !opt.keep_array_indentation);\n      }\n      if (opt.space_in_paren) {\n        if (last_type === 'TK_START_EXPR' && !opt.space_in_empty_paren) {\n          output.trim();\n          output.space_before_token = false;\n        } else {\n          output.space_before_token = true;\n        }\n      }\n      if (current_token.text === ']' && opt.keep_array_indentation) {\n        print_token();\n        restore_mode();\n      } else {\n        restore_mode();\n        print_token();\n      }\n      output.remove_redundant_indentation(previous_flags);\n      if (flags.do_while && previous_flags.mode === MODE.Conditional) {\n        previous_flags.mode = MODE.Expression;\n        flags.do_block = false;\n        flags.do_while = false;\n      }\n    }\n    function handle_start_block() {\n      var next_token = get_token(1);\n      var second_token = get_token(2);\n      if (second_token && ((second_token.text === ':' && in_array(next_token.type, ['TK_STRING', 'TK_WORD', 'TK_RESERVED'])) || (in_array(next_token.text, ['get', 'set']) && in_array(second_token.type, ['TK_WORD', 'TK_RESERVED'])))) {\n        if (!in_array(last_last_text, ['class', 'interface'])) {\n          set_mode(MODE.ObjectLiteral);\n        } else {\n          set_mode(MODE.BlockStatement);\n        }\n      } else {\n        set_mode(MODE.BlockStatement);\n      }\n      var empty_braces = !next_token.comments_before.length && next_token.text === '}';\n      var empty_anonymous_function = empty_braces && flags.last_word === 'function' && last_type === 'TK_END_EXPR';\n      if (opt.brace_style === \"expand\" || (opt.brace_style === \"none\" && current_token.wanted_newline)) {\n        if (last_type !== 'TK_OPERATOR' && (empty_anonymous_function || last_type === 'TK_EQUALS' || (last_type === 'TK_RESERVED' && is_special_word(flags.last_text) && flags.last_text !== 'else'))) {\n          output.space_before_token = true;\n        } else {\n          print_newline(false, true);\n        }\n      } else {\n        if (last_type !== 'TK_OPERATOR' && last_type !== 'TK_START_EXPR') {\n          if (last_type === 'TK_START_BLOCK') {\n            print_newline();\n          } else {\n            output.space_before_token = true;\n          }\n        } else {\n          if (is_array(previous_flags.mode) && flags.last_text === ',') {\n            if (last_last_text === '}') {\n              output.space_before_token = true;\n            } else {\n              print_newline();\n            }\n          }\n        }\n      }\n      print_token();\n      indent();\n    }\n    function handle_end_block() {\n      while (flags.mode === MODE.Statement) {\n        restore_mode();\n      }\n      var empty_braces = last_type === 'TK_START_BLOCK';\n      if (opt.brace_style === \"expand\") {\n        if (!empty_braces) {\n          print_newline();\n        }\n      } else {\n        if (!empty_braces) {\n          if (is_array(flags.mode) && opt.keep_array_indentation) {\n            opt.keep_array_indentation = false;\n            print_newline();\n            opt.keep_array_indentation = true;\n          } else {\n            print_newline();\n          }\n        }\n      }\n      restore_mode();\n      print_token();\n    }\n    function handle_word() {\n      if (current_token.type === 'TK_RESERVED' && flags.mode !== MODE.ObjectLiteral && in_array(current_token.text, ['set', 'get'])) {\n        current_token.type = 'TK_WORD';\n      }\n      if (current_token.type === 'TK_RESERVED' && flags.mode === MODE.ObjectLiteral) {\n        var next_token = get_token(1);\n        if (next_token.text == ':') {\n          current_token.type = 'TK_WORD';\n        }\n      }\n      if (start_of_statement()) {} else if (current_token.wanted_newline && !is_expression(flags.mode) && (last_type !== 'TK_OPERATOR' || (flags.last_text === '--' || flags.last_text === '++')) && last_type !== 'TK_EQUALS' && (opt.preserve_newlines || !(last_type === 'TK_RESERVED' && in_array(flags.last_text, ['var', 'let', 'const', 'set', 'get'])))) {\n        print_newline();\n      }\n      if (flags.do_block && !flags.do_while) {\n        if (current_token.type === 'TK_RESERVED' && current_token.text === 'while') {\n          output.space_before_token = true;\n          print_token();\n          output.space_before_token = true;\n          flags.do_while = true;\n          return;\n        } else {\n          print_newline();\n          flags.do_block = false;\n        }\n      }\n      if (flags.if_block) {\n        if (!flags.else_block && (current_token.type === 'TK_RESERVED' && current_token.text === 'else')) {\n          flags.else_block = true;\n        } else {\n          while (flags.mode === MODE.Statement) {\n            restore_mode();\n          }\n          flags.if_block = false;\n          flags.else_block = false;\n        }\n      }\n      if (current_token.type === 'TK_RESERVED' && (current_token.text === 'case' || (current_token.text === 'default' && flags.in_case_statement))) {\n        print_newline();\n        if (flags.case_body || opt.jslint_happy) {\n          deindent();\n          flags.case_body = false;\n        }\n        print_token();\n        flags.in_case = true;\n        flags.in_case_statement = true;\n        return;\n      }\n      if (current_token.type === 'TK_RESERVED' && current_token.text === 'function') {\n        if (in_array(flags.last_text, ['}', ';']) || (output.just_added_newline() && !in_array(flags.last_text, ['[', '{', ':', '=', ',']))) {\n          if (!output.just_added_blankline() && !current_token.comments_before.length) {\n            print_newline();\n            print_newline(true);\n          }\n        }\n        if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD') {\n          if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set', 'new', 'return', 'export', 'async'])) {\n            output.space_before_token = true;\n          } else if (last_type === 'TK_RESERVED' && flags.last_text === 'default' && last_last_text === 'export') {\n            output.space_before_token = true;\n          } else {\n            print_newline();\n          }\n        } else if (last_type === 'TK_OPERATOR' || flags.last_text === '=') {\n          output.space_before_token = true;\n        } else if (!flags.multiline_frame && (is_expression(flags.mode) || is_array(flags.mode))) {} else {\n          print_newline();\n        }\n      }\n      if (last_type === 'TK_COMMA' || last_type === 'TK_START_EXPR' || last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\n        if (!start_of_object_property()) {\n          allow_wrap_or_preserved_newline();\n        }\n      }\n      if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['function', 'get', 'set'])) {\n        print_token();\n        flags.last_word = current_token.text;\n        return;\n      }\n      prefix = 'NONE';\n      if (last_type === 'TK_END_BLOCK') {\n        if (!(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['else', 'catch', 'finally']))) {\n          prefix = 'NEWLINE';\n        } else {\n          if (opt.brace_style === \"expand\" || opt.brace_style === \"end-expand\" || (opt.brace_style === \"none\" && current_token.wanted_newline)) {\n            prefix = 'NEWLINE';\n          } else {\n            prefix = 'SPACE';\n            output.space_before_token = true;\n          }\n        }\n      } else if (last_type === 'TK_SEMICOLON' && flags.mode === MODE.BlockStatement) {\n        prefix = 'NEWLINE';\n      } else if (last_type === 'TK_SEMICOLON' && is_expression(flags.mode)) {\n        prefix = 'SPACE';\n      } else if (last_type === 'TK_STRING') {\n        prefix = 'NEWLINE';\n      } else if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD' || (flags.last_text === '*' && last_last_text === 'function')) {\n        prefix = 'SPACE';\n      } else if (last_type === 'TK_START_BLOCK') {\n        prefix = 'NEWLINE';\n      } else if (last_type === 'TK_END_EXPR') {\n        output.space_before_token = true;\n        prefix = 'NEWLINE';\n      }\n      if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, Tokenizer.line_starters) && flags.last_text !== ')') {\n        if (flags.last_text === 'else' || flags.last_text === 'export') {\n          prefix = 'SPACE';\n        } else {\n          prefix = 'NEWLINE';\n        }\n      }\n      if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['else', 'catch', 'finally'])) {\n        if (last_type !== 'TK_END_BLOCK' || opt.brace_style === \"expand\" || opt.brace_style === \"end-expand\" || (opt.brace_style === \"none\" && current_token.wanted_newline)) {\n          print_newline();\n        } else {\n          output.trim(true);\n          var line = output.current_line;\n          if (line.last() !== '}') {\n            print_newline();\n          }\n          output.space_before_token = true;\n        }\n      } else if (prefix === 'NEWLINE') {\n        if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\n          output.space_before_token = true;\n        } else if (last_type !== 'TK_END_EXPR') {\n          if ((last_type !== 'TK_START_EXPR' || !(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['var', 'let', 'const']))) && flags.last_text !== ':') {\n            if (current_token.type === 'TK_RESERVED' && current_token.text === 'if' && flags.last_text === 'else') {\n              output.space_before_token = true;\n            } else {\n              print_newline();\n            }\n          }\n        } else if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, Tokenizer.line_starters) && flags.last_text !== ')') {\n          print_newline();\n        }\n      } else if (flags.multiline_frame && is_array(flags.mode) && flags.last_text === ',' && last_last_text === '}') {\n        print_newline();\n      } else if (prefix === 'SPACE') {\n        output.space_before_token = true;\n      }\n      print_token();\n      flags.last_word = current_token.text;\n      if (current_token.type === 'TK_RESERVED' && current_token.text === 'do') {\n        flags.do_block = true;\n      }\n      if (current_token.type === 'TK_RESERVED' && current_token.text === 'if') {\n        flags.if_block = true;\n      }\n    }\n    function handle_semicolon() {\n      if (start_of_statement()) {\n        output.space_before_token = false;\n      }\n      while (flags.mode === MODE.Statement && !flags.if_block && !flags.do_block) {\n        restore_mode();\n      }\n      print_token();\n    }\n    function handle_string() {\n      if (start_of_statement()) {\n        output.space_before_token = true;\n      } else if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD') {\n        output.space_before_token = true;\n      } else if (last_type === 'TK_COMMA' || last_type === 'TK_START_EXPR' || last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\n        if (!start_of_object_property()) {\n          allow_wrap_or_preserved_newline();\n        }\n      } else {\n        print_newline();\n      }\n      print_token();\n    }\n    function handle_equals() {\n      if (start_of_statement()) {}\n      if (flags.declaration_statement) {\n        flags.declaration_assignment = true;\n      }\n      output.space_before_token = true;\n      print_token();\n      output.space_before_token = true;\n    }\n    function handle_comma() {\n      if (flags.declaration_statement) {\n        if (is_expression(flags.parent.mode)) {\n          flags.declaration_assignment = false;\n        }\n        print_token();\n        if (flags.declaration_assignment) {\n          flags.declaration_assignment = false;\n          print_newline(false, true);\n        } else {\n          output.space_before_token = true;\n          if (opt.comma_first) {\n            allow_wrap_or_preserved_newline();\n          }\n        }\n        return;\n      }\n      print_token();\n      if (flags.mode === MODE.ObjectLiteral || (flags.mode === MODE.Statement && flags.parent.mode === MODE.ObjectLiteral)) {\n        if (flags.mode === MODE.Statement) {\n          restore_mode();\n        }\n        print_newline();\n      } else {\n        output.space_before_token = true;\n        if (opt.comma_first) {\n          allow_wrap_or_preserved_newline();\n        }\n      }\n    }\n    function handle_operator() {\n      if (start_of_statement()) {}\n      if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\n        output.space_before_token = true;\n        print_token();\n        return;\n      }\n      if (current_token.text === '*' && last_type === 'TK_DOT') {\n        print_token();\n        return;\n      }\n      if (current_token.text === ':' && flags.in_case) {\n        flags.case_body = true;\n        indent();\n        print_token();\n        print_newline();\n        flags.in_case = false;\n        return;\n      }\n      if (current_token.text === '::') {\n        print_token();\n        return;\n      }\n      if (last_type === 'TK_OPERATOR') {\n        allow_wrap_or_preserved_newline();\n      }\n      var space_before = true;\n      var space_after = true;\n      if (in_array(current_token.text, ['--', '++', '!', '~']) || (in_array(current_token.text, ['-', '+']) && (in_array(last_type, ['TK_START_BLOCK', 'TK_START_EXPR', 'TK_EQUALS', 'TK_OPERATOR']) || in_array(flags.last_text, Tokenizer.line_starters) || flags.last_text === ','))) {\n        space_before = false;\n        space_after = false;\n        if (current_token.wanted_newline && (current_token.text === '--' || current_token.text === '++')) {\n          print_newline(false, true);\n        }\n        if (flags.last_text === ';' && is_expression(flags.mode)) {\n          space_before = true;\n        }\n        if (last_type === 'TK_RESERVED') {\n          space_before = true;\n        } else if (last_type === 'TK_END_EXPR') {\n          space_before = !(flags.last_text === ']' && (current_token.text === '--' || current_token.text === '++'));\n        } else if (last_type === 'TK_OPERATOR') {\n          space_before = in_array(current_token.text, ['--', '-', '++', '+']) && in_array(flags.last_text, ['--', '-', '++', '+']);\n          if (in_array(current_token.text, ['+', '-']) && in_array(flags.last_text, ['--', '++'])) {\n            space_after = true;\n          }\n        }\n        if ((flags.mode === MODE.BlockStatement || flags.mode === MODE.Statement) && (flags.last_text === '{' || flags.last_text === ';')) {\n          print_newline();\n        }\n      } else if (current_token.text === ':') {\n        if (flags.ternary_depth === 0) {\n          space_before = false;\n        } else {\n          flags.ternary_depth -= 1;\n        }\n      } else if (current_token.text === '?') {\n        flags.ternary_depth += 1;\n      } else if (current_token.text === '*' && last_type === 'TK_RESERVED' && flags.last_text === 'function') {\n        space_before = false;\n        space_after = false;\n      }\n      output.space_before_token = output.space_before_token || space_before;\n      print_token();\n      output.space_before_token = space_after;\n    }\n    function handle_block_comment() {\n      if (output.raw) {\n        output.add_raw_token(current_token);\n        if (current_token.directives && current_token.directives['preserve'] === 'end') {\n          if (!opt.test_output_raw) {\n            output.raw = false;\n          }\n        }\n        return;\n      }\n      if (current_token.directives) {\n        print_newline(false, true);\n        print_token();\n        if (current_token.directives['preserve'] === 'start') {\n          output.raw = true;\n        }\n        print_newline(false, true);\n        return;\n      }\n      if (!acorn.newline.test(current_token.text) && !current_token.wanted_newline) {\n        output.space_before_token = true;\n        print_token();\n        output.space_before_token = true;\n        return;\n      }\n      var lines = split_newlines(current_token.text);\n      var j;\n      var javadoc = false;\n      var starless = false;\n      var lastIndent = current_token.whitespace_before;\n      var lastIndentLength = lastIndent.length;\n      print_newline(false, true);\n      if (lines.length > 1) {\n        if (all_lines_start_with(lines.slice(1), '*')) {\n          javadoc = true;\n        } else if (each_line_matches_indent(lines.slice(1), lastIndent)) {\n          starless = true;\n        }\n      }\n      print_token(lines[0]);\n      for (j = 1; j < lines.length; j++) {\n        print_newline(false, true);\n        if (javadoc) {\n          print_token(' ' + ltrim(lines[j]));\n        } else if (starless && lines[j].length > lastIndentLength) {\n          print_token(lines[j].substring(lastIndentLength));\n        } else {\n          output.add_token(lines[j]);\n        }\n      }\n      print_newline(false, true);\n    }\n    function handle_comment() {\n      if (current_token.wanted_newline) {\n        print_newline(false, true);\n      } else {\n        output.trim(true);\n      }\n      output.space_before_token = true;\n      print_token();\n      print_newline(false, true);\n    }\n    function handle_dot() {\n      if (start_of_statement()) {}\n      if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\n        output.space_before_token = true;\n      } else {\n        allow_wrap_or_preserved_newline(flags.last_text === ')' && opt.break_chained_methods);\n      }\n      print_token();\n    }\n    function handle_unknown() {\n      print_token();\n      if (current_token.text[current_token.text.length - 1] === '\\n') {\n        print_newline();\n      }\n    }\n    function handle_eof() {\n      while (flags.mode === MODE.Statement) {\n        restore_mode();\n      }\n    }\n  }\n  function OutputLine(parent) {\n    var _character_count = 0;\n    var _indent_count = -1;\n    var _items = [];\n    var _empty = true;\n    this.set_indent = function(level) {\n      _character_count = parent.baseIndentLength + level * parent.indent_length;\n      _indent_count = level;\n    };\n    this.get_character_count = function() {\n      return _character_count;\n    };\n    this.is_empty = function() {\n      return _empty;\n    };\n    this.last = function() {\n      if (!this._empty) {\n        return _items[_items.length - 1];\n      } else {\n        return null;\n      }\n    };\n    this.push = function(input) {\n      _items.push(input);\n      _character_count += input.length;\n      _empty = false;\n    };\n    this.pop = function() {\n      var item = null;\n      if (!_empty) {\n        item = _items.pop();\n        _character_count -= item.length;\n        _empty = _items.length === 0;\n      }\n      return item;\n    };\n    this.remove_indent = function() {\n      if (_indent_count > 0) {\n        _indent_count -= 1;\n        _character_count -= parent.indent_length;\n      }\n    };\n    this.trim = function() {\n      while (this.last() === ' ') {\n        var item = _items.pop();\n        _character_count -= 1;\n      }\n      _empty = _items.length === 0;\n    };\n    this.toString = function() {\n      var result = '';\n      if (!this._empty) {\n        if (_indent_count >= 0) {\n          result = parent.indent_cache[_indent_count];\n        }\n        result += _items.join('');\n      }\n      return result;\n    };\n  }\n  function Output(indent_string, baseIndentString) {\n    baseIndentString = baseIndentString || '';\n    this.indent_cache = [baseIndentString];\n    this.baseIndentLength = baseIndentString.length;\n    this.indent_length = indent_string.length;\n    this.raw = false;\n    var lines = [];\n    this.baseIndentString = baseIndentString;\n    this.indent_string = indent_string;\n    this.previous_line = null;\n    this.current_line = null;\n    this.space_before_token = false;\n    this.add_outputline = function() {\n      this.previous_line = this.current_line;\n      this.current_line = new OutputLine(this);\n      lines.push(this.current_line);\n    };\n    this.add_outputline();\n    this.get_line_number = function() {\n      return lines.length;\n    };\n    this.add_new_line = function(force_newline) {\n      if (this.get_line_number() === 1 && this.just_added_newline()) {\n        return false;\n      }\n      if (force_newline || !this.just_added_newline()) {\n        if (!this.raw) {\n          this.add_outputline();\n        }\n        return true;\n      }\n      return false;\n    };\n    this.get_code = function() {\n      var sweet_code = lines.join('\\n').replace(/[\\r\\n\\t ]+$/, '');\n      return sweet_code;\n    };\n    this.set_indent = function(level) {\n      if (lines.length > 1) {\n        while (level >= this.indent_cache.length) {\n          this.indent_cache.push(this.indent_cache[this.indent_cache.length - 1] + this.indent_string);\n        }\n        this.current_line.set_indent(level);\n        return true;\n      }\n      this.current_line.set_indent(0);\n      return false;\n    };\n    this.add_raw_token = function(token) {\n      for (var x = 0; x < token.newlines; x++) {\n        this.add_outputline();\n      }\n      this.current_line.push(token.whitespace_before);\n      this.current_line.push(token.text);\n      this.space_before_token = false;\n    };\n    this.add_token = function(printable_token) {\n      this.add_space_before_token();\n      this.current_line.push(printable_token);\n    };\n    this.add_space_before_token = function() {\n      if (this.space_before_token && !this.just_added_newline()) {\n        this.current_line.push(' ');\n      }\n      this.space_before_token = false;\n    };\n    this.remove_redundant_indentation = function(frame) {\n      if (frame.multiline_frame || frame.mode === MODE.ForInitializer || frame.mode === MODE.Conditional) {\n        return;\n      }\n      var index = frame.start_line_index;\n      var line;\n      var output_length = lines.length;\n      while (index < output_length) {\n        lines[index].remove_indent();\n        index++;\n      }\n    };\n    this.trim = function(eat_newlines) {\n      eat_newlines = (eat_newlines === undefined) ? false : eat_newlines;\n      this.current_line.trim(indent_string, baseIndentString);\n      while (eat_newlines && lines.length > 1 && this.current_line.is_empty()) {\n        lines.pop();\n        this.current_line = lines[lines.length - 1];\n        this.current_line.trim();\n      }\n      this.previous_line = lines.length > 1 ? lines[lines.length - 2] : null;\n    };\n    this.just_added_newline = function() {\n      return this.current_line.is_empty();\n    };\n    this.just_added_blankline = function() {\n      if (this.just_added_newline()) {\n        if (lines.length === 1) {\n          return true;\n        }\n        var line = lines[lines.length - 2];\n        return line.is_empty();\n      }\n      return false;\n    };\n  }\n  var Token = function(type, text, newlines, whitespace_before, mode, parent) {\n    this.type = type;\n    this.text = text;\n    this.comments_before = [];\n    this.newlines = newlines || 0;\n    this.wanted_newline = newlines > 0;\n    this.whitespace_before = whitespace_before || '';\n    this.parent = null;\n    this.directives = null;\n  };\n  function tokenizer(input, opts, indent_string) {\n    var whitespace = \"\\n\\r\\t \".split('');\n    var digit = /[0-9]/;\n    var digit_hex = /[0123456789abcdefABCDEF]/;\n    var punct = ('+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>' + ' <%= <% %> <?= <? ?>').split(' ');\n    this.line_starters = 'continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export'.split(',');\n    var reserved_words = this.line_starters.concat(['do', 'in', 'else', 'get', 'set', 'new', 'catch', 'finally', 'typeof', 'yield', 'async', 'await']);\n    var block_comment_pattern = /([\\s\\S]*?)((?:\\*\\/)|$)/g;\n    var comment_pattern = /([^\\n\\r\\u2028\\u2029]*)/g;\n    var directives_block_pattern = /\\/\\* beautify( \\w+[:]\\w+)+ \\*\\//g;\n    var directive_pattern = / (\\w+)[:](\\w+)/g;\n    var directives_end_ignore_pattern = /([\\s\\S]*?)((?:\\/\\*\\sbeautify\\signore:end\\s\\*\\/)|$)/g;\n    var template_pattern = /((<\\?php|<\\?=)[\\s\\S]*?\\?>)|(<%[\\s\\S]*?%>)/g;\n    var n_newlines,\n        whitespace_before_token,\n        in_html_comment,\n        tokens,\n        parser_pos;\n    var input_length;\n    this.tokenize = function() {\n      input_length = input.length;\n      parser_pos = 0;\n      in_html_comment = false;\n      tokens = [];\n      var next,\n          last;\n      var token_values;\n      var open = null;\n      var open_stack = [];\n      var comments = [];\n      while (!(last && last.type === 'TK_EOF')) {\n        token_values = tokenize_next();\n        next = new Token(token_values[1], token_values[0], n_newlines, whitespace_before_token);\n        while (next.type === 'TK_COMMENT' || next.type === 'TK_BLOCK_COMMENT' || next.type === 'TK_UNKNOWN') {\n          if (next.type === 'TK_BLOCK_COMMENT') {\n            next.directives = token_values[2];\n          }\n          comments.push(next);\n          token_values = tokenize_next();\n          next = new Token(token_values[1], token_values[0], n_newlines, whitespace_before_token);\n        }\n        if (comments.length) {\n          next.comments_before = comments;\n          comments = [];\n        }\n        if (next.type === 'TK_START_BLOCK' || next.type === 'TK_START_EXPR') {\n          next.parent = last;\n          open_stack.push(open);\n          open = next;\n        } else if ((next.type === 'TK_END_BLOCK' || next.type === 'TK_END_EXPR') && (open && ((next.text === ']' && open.text === '[') || (next.text === ')' && open.text === '(') || (next.text === '}' && open.text === '{')))) {\n          next.parent = open.parent;\n          open = open_stack.pop();\n        }\n        tokens.push(next);\n        last = next;\n      }\n      return tokens;\n    };\n    function get_directives(text) {\n      if (!text.match(directives_block_pattern)) {\n        return null;\n      }\n      var directives = {};\n      directive_pattern.lastIndex = 0;\n      var directive_match = directive_pattern.exec(text);\n      while (directive_match) {\n        directives[directive_match[1]] = directive_match[2];\n        directive_match = directive_pattern.exec(text);\n      }\n      return directives;\n    }\n    function tokenize_next() {\n      var i,\n          resulting_string;\n      var whitespace_on_this_line = [];\n      n_newlines = 0;\n      whitespace_before_token = '';\n      if (parser_pos >= input_length) {\n        return ['', 'TK_EOF'];\n      }\n      var last_token;\n      if (tokens.length) {\n        last_token = tokens[tokens.length - 1];\n      } else {\n        last_token = new Token('TK_START_BLOCK', '{');\n      }\n      var c = input.charAt(parser_pos);\n      parser_pos += 1;\n      while (in_array(c, whitespace)) {\n        if (acorn.newline.test(c)) {\n          if (!(c === '\\n' && input.charAt(parser_pos - 2) === '\\r')) {\n            n_newlines += 1;\n            whitespace_on_this_line = [];\n          }\n        } else {\n          whitespace_on_this_line.push(c);\n        }\n        if (parser_pos >= input_length) {\n          return ['', 'TK_EOF'];\n        }\n        c = input.charAt(parser_pos);\n        parser_pos += 1;\n      }\n      if (whitespace_on_this_line.length) {\n        whitespace_before_token = whitespace_on_this_line.join('');\n      }\n      if (digit.test(c)) {\n        var allow_decimal = true;\n        var allow_e = true;\n        var local_digit = digit;\n        if (c === '0' && parser_pos < input_length && /[Xx]/.test(input.charAt(parser_pos))) {\n          allow_decimal = false;\n          allow_e = false;\n          c += input.charAt(parser_pos);\n          parser_pos += 1;\n          local_digit = digit_hex;\n        } else {\n          c = '';\n          parser_pos -= 1;\n        }\n        while (parser_pos < input_length && local_digit.test(input.charAt(parser_pos))) {\n          c += input.charAt(parser_pos);\n          parser_pos += 1;\n          if (allow_decimal && parser_pos < input_length && input.charAt(parser_pos) === '.') {\n            c += input.charAt(parser_pos);\n            parser_pos += 1;\n            allow_decimal = false;\n          }\n          if (allow_e && parser_pos < input_length && /[Ee]/.test(input.charAt(parser_pos))) {\n            c += input.charAt(parser_pos);\n            parser_pos += 1;\n            if (parser_pos < input_length && /[+-]/.test(input.charAt(parser_pos))) {\n              c += input.charAt(parser_pos);\n              parser_pos += 1;\n            }\n            allow_e = false;\n            allow_decimal = false;\n          }\n        }\n        return [c, 'TK_WORD'];\n      }\n      if (acorn.isIdentifierStart(input.charCodeAt(parser_pos - 1))) {\n        if (parser_pos < input_length) {\n          while (acorn.isIdentifierChar(input.charCodeAt(parser_pos))) {\n            c += input.charAt(parser_pos);\n            parser_pos += 1;\n            if (parser_pos === input_length) {\n              break;\n            }\n          }\n        }\n        if (!(last_token.type === 'TK_DOT' || (last_token.type === 'TK_RESERVED' && in_array(last_token.text, ['set', 'get']))) && in_array(c, reserved_words)) {\n          if (c === 'in') {\n            return [c, 'TK_OPERATOR'];\n          }\n          return [c, 'TK_RESERVED'];\n        }\n        return [c, 'TK_WORD'];\n      }\n      if (c === '(' || c === '[') {\n        return [c, 'TK_START_EXPR'];\n      }\n      if (c === ')' || c === ']') {\n        return [c, 'TK_END_EXPR'];\n      }\n      if (c === '{') {\n        return [c, 'TK_START_BLOCK'];\n      }\n      if (c === '}') {\n        return [c, 'TK_END_BLOCK'];\n      }\n      if (c === ';') {\n        return [c, 'TK_SEMICOLON'];\n      }\n      if (c === '/') {\n        var comment = '';\n        if (input.charAt(parser_pos) === '*') {\n          parser_pos += 1;\n          block_comment_pattern.lastIndex = parser_pos;\n          var comment_match = block_comment_pattern.exec(input);\n          comment = '/*' + comment_match[0];\n          parser_pos += comment_match[0].length;\n          var directives = get_directives(comment);\n          if (directives && directives['ignore'] === 'start') {\n            directives_end_ignore_pattern.lastIndex = parser_pos;\n            comment_match = directives_end_ignore_pattern.exec(input);\n            comment += comment_match[0];\n            parser_pos += comment_match[0].length;\n          }\n          comment = comment.replace(acorn.lineBreak, '\\n');\n          return [comment, 'TK_BLOCK_COMMENT', directives];\n        }\n        if (input.charAt(parser_pos) === '/') {\n          parser_pos += 1;\n          comment_pattern.lastIndex = parser_pos;\n          var comment_match = comment_pattern.exec(input);\n          comment = '//' + comment_match[0];\n          parser_pos += comment_match[0].length;\n          return [comment, 'TK_COMMENT'];\n        }\n      }\n      if (c === '`' || c === \"'\" || c === '\"' || ((c === '/') || (opts.e4x && c === \"<\" && input.slice(parser_pos - 1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\\[CDATA\\[[\\s\\S]*?\\]\\])(\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{.*?}))*\\s*(\\/?)\\s*>/))) && ((last_token.type === 'TK_RESERVED' && in_array(last_token.text, ['return', 'case', 'throw', 'else', 'do', 'typeof', 'yield'])) || (last_token.type === 'TK_END_EXPR' && last_token.text === ')' && last_token.parent && last_token.parent.type === 'TK_RESERVED' && in_array(last_token.parent.text, ['if', 'while', 'for'])) || (in_array(last_token.type, ['TK_COMMENT', 'TK_START_EXPR', 'TK_START_BLOCK', 'TK_END_BLOCK', 'TK_OPERATOR', 'TK_EQUALS', 'TK_EOF', 'TK_SEMICOLON', 'TK_COMMA'])))) {\n        var sep = c,\n            esc = false,\n            has_char_escapes = false;\n        resulting_string = c;\n        if (sep === '/') {\n          var in_char_class = false;\n          while (parser_pos < input_length && ((esc || in_char_class || input.charAt(parser_pos) !== sep) && !acorn.newline.test(input.charAt(parser_pos)))) {\n            resulting_string += input.charAt(parser_pos);\n            if (!esc) {\n              esc = input.charAt(parser_pos) === '\\\\';\n              if (input.charAt(parser_pos) === '[') {\n                in_char_class = true;\n              } else if (input.charAt(parser_pos) === ']') {\n                in_char_class = false;\n              }\n            } else {\n              esc = false;\n            }\n            parser_pos += 1;\n          }\n        } else if (opts.e4x && sep === '<') {\n          var xmlRegExp = /<(\\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\\[CDATA\\[[\\s\\S]*?\\]\\])(\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{.*?}))*\\s*(\\/?)\\s*>/g;\n          var xmlStr = input.slice(parser_pos - 1);\n          var match = xmlRegExp.exec(xmlStr);\n          if (match && match.index === 0) {\n            var rootTag = match[2];\n            var depth = 0;\n            while (match) {\n              var isEndTag = !!match[1];\n              var tagName = match[2];\n              var isSingletonTag = (!!match[match.length - 1]) || (tagName.slice(0, 8) === \"![CDATA[\");\n              if (tagName === rootTag && !isSingletonTag) {\n                if (isEndTag) {\n                  --depth;\n                } else {\n                  ++depth;\n                }\n              }\n              if (depth <= 0) {\n                break;\n              }\n              match = xmlRegExp.exec(xmlStr);\n            }\n            var xmlLength = match ? match.index + match[0].length : xmlStr.length;\n            xmlStr = xmlStr.slice(0, xmlLength);\n            parser_pos += xmlLength - 1;\n            xmlStr = xmlStr.replace(acorn.lineBreak, '\\n');\n            return [xmlStr, \"TK_STRING\"];\n          }\n        } else {\n          while (parser_pos < input_length && (esc || (input.charAt(parser_pos) !== sep && (sep === '`' || !acorn.newline.test(input.charAt(parser_pos)))))) {\n            if ((esc || sep === '`') && acorn.newline.test(input.charAt(parser_pos))) {\n              if (input.charAt(parser_pos) === '\\r' && input.charAt(parser_pos + 1) === '\\n') {\n                parser_pos += 1;\n              }\n              resulting_string += '\\n';\n            } else {\n              resulting_string += input.charAt(parser_pos);\n            }\n            if (esc) {\n              if (input.charAt(parser_pos) === 'x' || input.charAt(parser_pos) === 'u') {\n                has_char_escapes = true;\n              }\n              esc = false;\n            } else {\n              esc = input.charAt(parser_pos) === '\\\\';\n            }\n            parser_pos += 1;\n          }\n        }\n        if (has_char_escapes && opts.unescape_strings) {\n          resulting_string = unescape_string(resulting_string);\n        }\n        if (parser_pos < input_length && input.charAt(parser_pos) === sep) {\n          resulting_string += sep;\n          parser_pos += 1;\n          if (sep === '/') {\n            while (parser_pos < input_length && acorn.isIdentifierStart(input.charCodeAt(parser_pos))) {\n              resulting_string += input.charAt(parser_pos);\n              parser_pos += 1;\n            }\n          }\n        }\n        return [resulting_string, 'TK_STRING'];\n      }\n      if (c === '#') {\n        if (tokens.length === 0 && input.charAt(parser_pos) === '!') {\n          resulting_string = c;\n          while (parser_pos < input_length && c !== '\\n') {\n            c = input.charAt(parser_pos);\n            resulting_string += c;\n            parser_pos += 1;\n          }\n          return [trim(resulting_string) + '\\n', 'TK_UNKNOWN'];\n        }\n        var sharp = '#';\n        if (parser_pos < input_length && digit.test(input.charAt(parser_pos))) {\n          do {\n            c = input.charAt(parser_pos);\n            sharp += c;\n            parser_pos += 1;\n          } while (parser_pos < input_length && c !== '#' && c !== '=');\n          if (c === '#') {} else if (input.charAt(parser_pos) === '[' && input.charAt(parser_pos + 1) === ']') {\n            sharp += '[]';\n            parser_pos += 2;\n          } else if (input.charAt(parser_pos) === '{' && input.charAt(parser_pos + 1) === '}') {\n            sharp += '{}';\n            parser_pos += 2;\n          }\n          return [sharp, 'TK_WORD'];\n        }\n      }\n      if (c === '<' && (input.charAt(parser_pos) === '?' || input.charAt(parser_pos) === '%')) {\n        template_pattern.lastIndex = parser_pos - 1;\n        var template_match = template_pattern.exec(input);\n        if (template_match) {\n          c = template_match[0];\n          parser_pos += c.length - 1;\n          c = c.replace(acorn.lineBreak, '\\n');\n          return [c, 'TK_STRING'];\n        }\n      }\n      if (c === '<' && input.substring(parser_pos - 1, parser_pos + 3) === '<!--') {\n        parser_pos += 3;\n        c = '<!--';\n        while (!acorn.newline.test(input.charAt(parser_pos)) && parser_pos < input_length) {\n          c += input.charAt(parser_pos);\n          parser_pos++;\n        }\n        in_html_comment = true;\n        return [c, 'TK_COMMENT'];\n      }\n      if (c === '-' && in_html_comment && input.substring(parser_pos - 1, parser_pos + 2) === '-->') {\n        in_html_comment = false;\n        parser_pos += 2;\n        return ['-->', 'TK_COMMENT'];\n      }\n      if (c === '.') {\n        return [c, 'TK_DOT'];\n      }\n      if (in_array(c, punct)) {\n        while (parser_pos < input_length && in_array(c + input.charAt(parser_pos), punct)) {\n          c += input.charAt(parser_pos);\n          parser_pos += 1;\n          if (parser_pos >= input_length) {\n            break;\n          }\n        }\n        if (c === ',') {\n          return [c, 'TK_COMMA'];\n        } else if (c === '=') {\n          return [c, 'TK_EQUALS'];\n        } else {\n          return [c, 'TK_OPERATOR'];\n        }\n      }\n      return [c, 'TK_UNKNOWN'];\n    }\n    function unescape_string(s) {\n      var esc = false,\n          out = '',\n          pos = 0,\n          s_hex = '',\n          escaped = 0,\n          c;\n      while (esc || pos < s.length) {\n        c = s.charAt(pos);\n        pos++;\n        if (esc) {\n          esc = false;\n          if (c === 'x') {\n            s_hex = s.substr(pos, 2);\n            pos += 2;\n          } else if (c === 'u') {\n            s_hex = s.substr(pos, 4);\n            pos += 4;\n          } else {\n            out += '\\\\' + c;\n            continue;\n          }\n          if (!s_hex.match(/^[0123456789abcdefABCDEF]+$/)) {\n            return s;\n          }\n          escaped = parseInt(s_hex, 16);\n          if (escaped >= 0x00 && escaped < 0x20) {\n            if (c === 'x') {\n              out += '\\\\x' + s_hex;\n            } else {\n              out += '\\\\u' + s_hex;\n            }\n            continue;\n          } else if (escaped === 0x22 || escaped === 0x27 || escaped === 0x5c) {\n            out += '\\\\' + String.fromCharCode(escaped);\n          } else if (c === 'x' && escaped > 0x7e && escaped <= 0xff) {\n            return s;\n          } else {\n            out += String.fromCharCode(escaped);\n          }\n        } else if (c === '\\\\') {\n          esc = true;\n        } else {\n          out += c;\n        }\n      }\n      return out;\n    }\n  }\n  if (typeof define === \"function\" && define.amd) {\n    define(\"4\", [], function() {\n      return {js_beautify: js_beautify};\n    });\n  } else if (typeof exports !== \"undefined\") {\n    exports.js_beautify = js_beautify;\n  } else if (typeof window !== \"undefined\") {\n    window.js_beautify = js_beautify;\n  } else if (typeof global !== \"undefined\") {\n    global.js_beautify = js_beautify;\n  }\n}());\n\n_removeDefine();\n})();\n$__System.registerDynamic(\"5\", [], false, function(__require, __exports, __module) {\n  var _retrieveGlobal = $__System.get(\"@@global-helpers\").prepareGlobal(__module.id, null, null);\n  (function() {\n    var jsonlint = this[\"jsonlint\"];\n    var jsonlint = function() {\n      var a = !0,\n          b = !1,\n          c = {},\n          d = function() {\n            var a = {\n              trace: function() {},\n              yy: {},\n              symbols_: {\n                error: 2,\n                JSONString: 3,\n                STRING: 4,\n                JSONNumber: 5,\n                NUMBER: 6,\n                JSONNullLiteral: 7,\n                NULL: 8,\n                JSONBooleanLiteral: 9,\n                TRUE: 10,\n                FALSE: 11,\n                JSONText: 12,\n                JSONValue: 13,\n                EOF: 14,\n                JSONObject: 15,\n                JSONArray: 16,\n                \"{\": 17,\n                \"}\": 18,\n                JSONMemberList: 19,\n                JSONMember: 20,\n                \":\": 21,\n                \",\": 22,\n                \"[\": 23,\n                \"]\": 24,\n                JSONElementList: 25,\n                $accept: 0,\n                $end: 1\n              },\n              terminals_: {\n                2: \"error\",\n                4: \"STRING\",\n                6: \"NUMBER\",\n                8: \"NULL\",\n                10: \"TRUE\",\n                11: \"FALSE\",\n                14: \"EOF\",\n                17: \"{\",\n                18: \"}\",\n                21: \":\",\n                22: \",\",\n                23: \"[\",\n                24: \"]\"\n              },\n              productions_: [0, [3, 1], [5, 1], [7, 1], [9, 1], [9, 1], [12, 2], [13, 1], [13, 1], [13, 1], [13, 1], [13, 1], [13, 1], [15, 2], [15, 3], [20, 3], [19, 1], [19, 3], [16, 2], [16, 3], [25, 1], [25, 3]],\n              performAction: function(b, c, d, e, f, g, h) {\n                var i = g.length - 1;\n                switch (f) {\n                  case 1:\n                    this.$ = b.replace(/\\\\(\\\\|\")/g, \"$1\").replace(/\\\\n/g, \"\\n\").replace(/\\\\r/g, \"\\r\").replace(/\\\\t/g, \"\t\").replace(/\\\\v/g, \"\u000b\").replace(/\\\\f/g, \"\\f\").replace(/\\\\b/g, \"\\b\");\n                    break;\n                  case 2:\n                    this.$ = Number(b);\n                    break;\n                  case 3:\n                    this.$ = null;\n                    break;\n                  case 4:\n                    this.$ = !0;\n                    break;\n                  case 5:\n                    this.$ = !1;\n                    break;\n                  case 6:\n                    return this.$ = g[i - 1];\n                  case 13:\n                    this.$ = {};\n                    break;\n                  case 14:\n                    this.$ = g[i - 1];\n                    break;\n                  case 15:\n                    this.$ = [g[i - 2], g[i]];\n                    break;\n                  case 16:\n                    this.$ = {}, this.$[g[i][0]] = g[i][1];\n                    break;\n                  case 17:\n                    this.$ = g[i - 2], g[i - 2][g[i][0]] = g[i][1];\n                    break;\n                  case 18:\n                    this.$ = [];\n                    break;\n                  case 19:\n                    this.$ = g[i - 1];\n                    break;\n                  case 20:\n                    this.$ = [g[i]];\n                    break;\n                  case 21:\n                    this.$ = g[i - 2], g[i - 2].push(g[i]);\n                }\n              },\n              table: [{\n                3: 5,\n                4: [1, 12],\n                5: 6,\n                6: [1, 13],\n                7: 3,\n                8: [1, 9],\n                9: 4,\n                10: [1, 10],\n                11: [1, 11],\n                12: 1,\n                13: 2,\n                15: 7,\n                16: 8,\n                17: [1, 14],\n                23: [1, 15]\n              }, {1: [3]}, {14: [1, 16]}, {\n                14: [2, 7],\n                18: [2, 7],\n                22: [2, 7],\n                24: [2, 7]\n              }, {\n                14: [2, 8],\n                18: [2, 8],\n                22: [2, 8],\n                24: [2, 8]\n              }, {\n                14: [2, 9],\n                18: [2, 9],\n                22: [2, 9],\n                24: [2, 9]\n              }, {\n                14: [2, 10],\n                18: [2, 10],\n                22: [2, 10],\n                24: [2, 10]\n              }, {\n                14: [2, 11],\n                18: [2, 11],\n                22: [2, 11],\n                24: [2, 11]\n              }, {\n                14: [2, 12],\n                18: [2, 12],\n                22: [2, 12],\n                24: [2, 12]\n              }, {\n                14: [2, 3],\n                18: [2, 3],\n                22: [2, 3],\n                24: [2, 3]\n              }, {\n                14: [2, 4],\n                18: [2, 4],\n                22: [2, 4],\n                24: [2, 4]\n              }, {\n                14: [2, 5],\n                18: [2, 5],\n                22: [2, 5],\n                24: [2, 5]\n              }, {\n                14: [2, 1],\n                18: [2, 1],\n                21: [2, 1],\n                22: [2, 1],\n                24: [2, 1]\n              }, {\n                14: [2, 2],\n                18: [2, 2],\n                22: [2, 2],\n                24: [2, 2]\n              }, {\n                3: 20,\n                4: [1, 12],\n                18: [1, 17],\n                19: 18,\n                20: 19\n              }, {\n                3: 5,\n                4: [1, 12],\n                5: 6,\n                6: [1, 13],\n                7: 3,\n                8: [1, 9],\n                9: 4,\n                10: [1, 10],\n                11: [1, 11],\n                13: 23,\n                15: 7,\n                16: 8,\n                17: [1, 14],\n                23: [1, 15],\n                24: [1, 21],\n                25: 22\n              }, {1: [2, 6]}, {\n                14: [2, 13],\n                18: [2, 13],\n                22: [2, 13],\n                24: [2, 13]\n              }, {\n                18: [1, 24],\n                22: [1, 25]\n              }, {\n                18: [2, 16],\n                22: [2, 16]\n              }, {21: [1, 26]}, {\n                14: [2, 18],\n                18: [2, 18],\n                22: [2, 18],\n                24: [2, 18]\n              }, {\n                22: [1, 28],\n                24: [1, 27]\n              }, {\n                22: [2, 20],\n                24: [2, 20]\n              }, {\n                14: [2, 14],\n                18: [2, 14],\n                22: [2, 14],\n                24: [2, 14]\n              }, {\n                3: 20,\n                4: [1, 12],\n                20: 29\n              }, {\n                3: 5,\n                4: [1, 12],\n                5: 6,\n                6: [1, 13],\n                7: 3,\n                8: [1, 9],\n                9: 4,\n                10: [1, 10],\n                11: [1, 11],\n                13: 30,\n                15: 7,\n                16: 8,\n                17: [1, 14],\n                23: [1, 15]\n              }, {\n                14: [2, 19],\n                18: [2, 19],\n                22: [2, 19],\n                24: [2, 19]\n              }, {\n                3: 5,\n                4: [1, 12],\n                5: 6,\n                6: [1, 13],\n                7: 3,\n                8: [1, 9],\n                9: 4,\n                10: [1, 10],\n                11: [1, 11],\n                13: 31,\n                15: 7,\n                16: 8,\n                17: [1, 14],\n                23: [1, 15]\n              }, {\n                18: [2, 17],\n                22: [2, 17]\n              }, {\n                18: [2, 15],\n                22: [2, 15]\n              }, {\n                22: [2, 21],\n                24: [2, 21]\n              }],\n              defaultActions: {16: [2, 6]},\n              parseError: function(b, c) {\n                throw new Error(b);\n              },\n              parse: function(b) {\n                function o(a) {\n                  d.length = d.length - 2 * a, e.length = e.length - a, f.length = f.length - a;\n                }\n                function p() {\n                  var a;\n                  return a = c.lexer.lex() || 1, typeof a != \"number\" && (a = c.symbols_[a] || a), a;\n                }\n                var c = this,\n                    d = [0],\n                    e = [null],\n                    f = [],\n                    g = this.table,\n                    h = \"\",\n                    i = 0,\n                    j = 0,\n                    k = 0,\n                    l = 2,\n                    m = 1;\n                this.lexer.setInput(b), this.lexer.yy = this.yy, this.yy.lexer = this.lexer, typeof this.lexer.yylloc == \"undefined\" && (this.lexer.yylloc = {});\n                var n = this.lexer.yylloc;\n                f.push(n), typeof this.yy.parseError == \"function\" && (this.parseError = this.yy.parseError);\n                var q,\n                    r,\n                    s,\n                    t,\n                    u,\n                    v,\n                    w = {},\n                    x,\n                    y,\n                    z,\n                    A;\n                for (; ; ) {\n                  s = d[d.length - 1], this.defaultActions[s] ? t = this.defaultActions[s] : (q == null && (q = p()), t = g[s] && g[s][q]);\n                  if (typeof t == \"undefined\" || !t.length || !t[0]) {\n                    if (!k) {\n                      A = [];\n                      for (x in g[s])\n                        this.terminals_[x] && x > 2 && A.push(\"'\" + this.terminals_[x] + \"'\");\n                      var B = \"\";\n                      this.lexer.showPosition ? B = \"Parse error on line \" + (i + 1) + \":\\n\" + this.lexer.showPosition() + \"\\nExpecting \" + A.join(\", \") + \", got '\" + this.terminals_[q] + \"'\" : B = \"Parse error on line \" + (i + 1) + \": Unexpected \" + (q == 1 ? \"end of input\" : \"'\" + (this.terminals_[q] || q) + \"'\"), this.parseError(B, {\n                        text: this.lexer.match,\n                        token: this.terminals_[q] || q,\n                        line: this.lexer.yylineno,\n                        loc: n,\n                        expected: A\n                      });\n                    }\n                    if (k == 3) {\n                      if (q == m)\n                        throw new Error(B || \"Parsing halted.\");\n                      j = this.lexer.yyleng, h = this.lexer.yytext, i = this.lexer.yylineno, n = this.lexer.yylloc, q = p();\n                    }\n                    for (; ; ) {\n                      if (l.toString() in g[s])\n                        break;\n                      if (s == 0)\n                        throw new Error(B || \"Parsing halted.\");\n                      o(1), s = d[d.length - 1];\n                    }\n                    r = q, q = l, s = d[d.length - 1], t = g[s] && g[s][l], k = 3;\n                  }\n                  if (t[0] instanceof Array && t.length > 1)\n                    throw new Error(\"Parse Error: multiple actions possible at state: \" + s + \", token: \" + q);\n                  switch (t[0]) {\n                    case 1:\n                      d.push(q), e.push(this.lexer.yytext), f.push(this.lexer.yylloc), d.push(t[1]), q = null, r ? (q = r, r = null) : (j = this.lexer.yyleng, h = this.lexer.yytext, i = this.lexer.yylineno, n = this.lexer.yylloc, k > 0 && k--);\n                      break;\n                    case 2:\n                      y = this.productions_[t[1]][1], w.$ = e[e.length - y], w._$ = {\n                        first_line: f[f.length - (y || 1)].first_line,\n                        last_line: f[f.length - 1].last_line,\n                        first_column: f[f.length - (y || 1)].first_column,\n                        last_column: f[f.length - 1].last_column\n                      }, v = this.performAction.call(w, h, j, i, this.yy, t[1], e, f);\n                      if (typeof v != \"undefined\")\n                        return v;\n                      y && (d = d.slice(0, -1 * y * 2), e = e.slice(0, -1 * y), f = f.slice(0, -1 * y)), d.push(this.productions_[t[1]][0]), e.push(w.$), f.push(w._$), z = g[d[d.length - 2]][d[d.length - 1]], d.push(z);\n                      break;\n                    case 3:\n                      return !0;\n                  }\n                }\n                return !0;\n              }\n            },\n                b = function() {\n                  var a = {\n                    EOF: 1,\n                    parseError: function(b, c) {\n                      if (!this.yy.parseError)\n                        throw new Error(b);\n                      this.yy.parseError(b, c);\n                    },\n                    setInput: function(a) {\n                      return this._input = a, this._more = this._less = this.done = !1, this.yylineno = this.yyleng = 0, this.yytext = this.matched = this.match = \"\", this.conditionStack = [\"INITIAL\"], this.yylloc = {\n                        first_line: 1,\n                        first_column: 0,\n                        last_line: 1,\n                        last_column: 0\n                      }, this;\n                    },\n                    input: function() {\n                      var a = this._input[0];\n                      this.yytext += a, this.yyleng++, this.match += a, this.matched += a;\n                      var b = a.match(/\\n/);\n                      return b && this.yylineno++, this._input = this._input.slice(1), a;\n                    },\n                    unput: function(a) {\n                      return this._input = a + this._input, this;\n                    },\n                    more: function() {\n                      return this._more = !0, this;\n                    },\n                    less: function(a) {\n                      this._input = this.match.slice(a) + this._input;\n                    },\n                    pastInput: function() {\n                      var a = this.matched.substr(0, this.matched.length - this.match.length);\n                      return (a.length > 20 ? \"...\" : \"\") + a.substr(-20).replace(/\\n/g, \"\");\n                    },\n                    upcomingInput: function() {\n                      var a = this.match;\n                      return a.length < 20 && (a += this._input.substr(0, 20 - a.length)), (a.substr(0, 20) + (a.length > 20 ? \"...\" : \"\")).replace(/\\n/g, \"\");\n                    },\n                    showPosition: function() {\n                      var a = this.pastInput(),\n                          b = (new Array(a.length + 1)).join(\"-\");\n                      return a + this.upcomingInput() + \"\\n\" + b + \"^\";\n                    },\n                    next: function() {\n                      if (this.done)\n                        return this.EOF;\n                      this._input || (this.done = !0);\n                      var a,\n                          b,\n                          c,\n                          d,\n                          e,\n                          f;\n                      this._more || (this.yytext = \"\", this.match = \"\");\n                      var g = this._currentRules();\n                      for (var h = 0; h < g.length; h++) {\n                        c = this._input.match(this.rules[g[h]]);\n                        if (c && (!b || c[0].length > b[0].length)) {\n                          b = c, d = h;\n                          if (!this.options.flex)\n                            break;\n                        }\n                      }\n                      if (b) {\n                        f = b[0].match(/\\n.*/g), f && (this.yylineno += f.length), this.yylloc = {\n                          first_line: this.yylloc.last_line,\n                          last_line: this.yylineno + 1,\n                          first_column: this.yylloc.last_column,\n                          last_column: f ? f[f.length - 1].length - 1 : this.yylloc.last_column + b[0].length\n                        }, this.yytext += b[0], this.match += b[0], this.yyleng = this.yytext.length, this._more = !1, this._input = this._input.slice(b[0].length), this.matched += b[0], a = this.performAction.call(this, this.yy, this, g[d], this.conditionStack[this.conditionStack.length - 1]), this.done && this._input && (this.done = !1);\n                        if (a)\n                          return a;\n                        return;\n                      }\n                      if (this._input === \"\")\n                        return this.EOF;\n                      this.parseError(\"Lexical error on line \" + (this.yylineno + 1) + \". Unrecognized text.\\n\" + this.showPosition(), {\n                        text: \"\",\n                        token: null,\n                        line: this.yylineno\n                      });\n                    },\n                    lex: function() {\n                      var b = this.next();\n                      return typeof b != \"undefined\" ? b : this.lex();\n                    },\n                    begin: function(b) {\n                      this.conditionStack.push(b);\n                    },\n                    popState: function() {\n                      return this.conditionStack.pop();\n                    },\n                    _currentRules: function() {\n                      return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n                    },\n                    topState: function() {\n                      return this.conditionStack[this.conditionStack.length - 2];\n                    },\n                    pushState: function(b) {\n                      this.begin(b);\n                    }\n                  };\n                  return a.options = {}, a.performAction = function(b, c, d, e) {\n                    var f = e;\n                    switch (d) {\n                      case 0:\n                        break;\n                      case 1:\n                        return 6;\n                      case 2:\n                        return c.yytext = c.yytext.substr(1, c.yyleng - 2), 4;\n                      case 3:\n                        return 17;\n                      case 4:\n                        return 18;\n                      case 5:\n                        return 23;\n                      case 6:\n                        return 24;\n                      case 7:\n                        return 22;\n                      case 8:\n                        return 21;\n                      case 9:\n                        return 10;\n                      case 10:\n                        return 11;\n                      case 11:\n                        return 8;\n                      case 12:\n                        return 14;\n                      case 13:\n                        return \"INVALID\";\n                    }\n                  }, a.rules = [/^(?:\\s+)/, /^(?:(-?([0-9]|[1-9][0-9]+))(\\.[0-9]+)?([eE][-+]?[0-9]+)?\\b)/, /^(?:\"(?:\\\\[\\\\\"bfnrt/]|\\\\u[a-fA-F0-9]{4}|[^\\\\\\0-\\x09\\x0a-\\x1f\"])*\")/, /^(?:\\{)/, /^(?:\\})/, /^(?:\\[)/, /^(?:\\])/, /^(?:,)/, /^(?::)/, /^(?:true\\b)/, /^(?:false\\b)/, /^(?:null\\b)/, /^(?:$)/, /^(?:.)/], a.conditions = {INITIAL: {\n                      rules: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\n                      inclusive: !0\n                    }}, a;\n                }();\n            return a.lexer = b, a;\n          }();\n      return typeof a != \"undefined\" && typeof c != \"undefined\" && (c.parser = d, c.parse = function() {\n        return d.parse.apply(d, arguments);\n      }, c.main = function(d) {\n        if (!d[1])\n          throw new Error(\"Usage: \" + d[0] + \" FILE\");\n        if (typeof process != \"undefined\")\n          var e = a(\"fs\").readFileSync(a(\"path\").join(process.cwd(), d[1]), \"utf8\");\n        else\n          var f = a(\"file\").path(a(\"file\").cwd()),\n              e = f.join(d[1]).read({charset: \"utf-8\"});\n        return c.parser.parse(e);\n      }, typeof b != \"undefined\" && a.main === b && c.main(typeof process != \"undefined\" ? process.argv.slice(1) : a(\"system\").args)), c;\n    }();\n    this[\"jsonlint\"] = jsonlint;\n  })();\n  return _retrieveGlobal();\n});\n\n(function() {\nvar _removeDefine = $__System.get(\"@@amd-helpers\").createDefine();\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\")\n    module.exports = mod();\n  else if (typeof define == \"function\" && define.amd)\n    return define(\"3\", [], mod);\n  else\n    this.CodeMirror = mod();\n})(function() {\n  \"use strict\";\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : ie_11up[1]);\n  var webkit = /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n  var ios = /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n  var mobile = ios || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var windows = /win/i.test(platform);\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version)\n    presto_version = Number(presto_version[1]);\n  if (presto_version && presto_version >= 15) {\n    presto = false;\n    webkit = true;\n  }\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n  var sawReadOnlySpans = false,\n      sawCollapsedSpans = false;\n  function CodeMirror(place, options) {\n    if (!(this instanceof CodeMirror))\n      return new CodeMirror(place, options);\n    this.options = options = options ? copyObj(options) : {};\n    copyObj(defaults, options, false);\n    setGuttersForLineNumbers(options);\n    var doc = options.value;\n    if (typeof doc == \"string\")\n      doc = new Doc(doc, options.mode, null, options.lineSeparator);\n    this.doc = doc;\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input);\n    display.wrapper.CodeMirror = this;\n    updateGutters(this);\n    themeChanged(this);\n    if (options.lineWrapping)\n      this.display.wrapper.className += \" CodeMirror-wrap\";\n    if (options.autofocus && !mobile)\n      display.input.focus();\n    initScrollbars(this);\n    this.state = {\n      keyMaps: [],\n      overlays: [],\n      modeGen: 0,\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false,\n      pasteIncoming: false,\n      cutIncoming: false,\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(),\n      keySeq: null,\n      specialChars: null\n    };\n    var cm = this;\n    if (ie && ie_version < 11)\n      setTimeout(function() {\n        cm.display.input.reset(true);\n      }, 20);\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n    if ((options.autofocus && !mobile) || cm.hasFocus())\n      setTimeout(bind(onFocus, this), 20);\n    else\n      onBlur(this);\n    for (var opt in optionHandlers)\n      if (optionHandlers.hasOwnProperty(opt))\n        optionHandlers[opt](this, options[opt], Init);\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit)\n      options.finishInit(this);\n    for (var i = 0; i < initHooks.length; ++i)\n      initHooks[i](this);\n    endOperation(this);\n    if (webkit && options.lineWrapping && getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      display.lineDiv.style.textRendering = \"auto\";\n  }\n  function Display(place, doc, input) {\n    var d = this;\n    this.input = input;\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    d.lineDiv = elt(\"div\", null, \"CodeMirror-code\");\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    d.lineSpace = elt(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv], null, \"position: relative; outline: none\");\n    d.mover = elt(\"div\", [elt(\"div\", [d.lineSpace], \"CodeMirror-lines\")], null, \"position: relative\");\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n    if (ie && ie_version < 8) {\n      d.gutters.style.zIndex = -1;\n      d.scroller.style.paddingRight = 0;\n    }\n    if (!webkit && !(gecko && mobile))\n      d.scroller.draggable = true;\n    if (place) {\n      if (place.appendChild)\n        place.appendChild(d.wrapper);\n      else\n        place(d.wrapper);\n    }\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    d.view = [];\n    d.renderedView = null;\n    d.externalMeasured = null;\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    d.alignWidgets = false;\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n    d.shift = false;\n    d.selForContextMenu = null;\n    d.activeTouch = null;\n    input.init(d);\n  }\n  function loadMode(cm) {\n    cm.doc.mode = CodeMirror.getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n  function resetModeState(cm) {\n    cm.doc.iter(function(line) {\n      if (line.stateAfter)\n        line.stateAfter = null;\n      if (line.styles)\n        line.styles = null;\n    });\n    cm.doc.frontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp)\n      regChange(cm);\n  }\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function() {\n      updateScrollbars(cm);\n    }, 100);\n  }\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display),\n        wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function(line) {\n      if (lineIsHidden(cm.doc, line))\n        return 0;\n      var widgetsHeight = 0;\n      if (line.widgets)\n        for (var i = 0; i < line.widgets.length; i++) {\n          if (line.widgets[i].height)\n            widgetsHeight += line.widgets[i].height;\n        }\n      if (wrapping)\n        return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;\n      else\n        return widgetsHeight + th;\n    };\n  }\n  function estimateLineHeights(cm) {\n    var doc = cm.doc,\n        est = estimateHeight(cm);\n    doc.iter(function(line) {\n      var estHeight = est(line);\n      if (estHeight != line.height)\n        updateLineHeight(line, estHeight);\n    });\n  }\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") + cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n  function guttersChanged(cm) {\n    updateGutters(cm);\n    regChange(cm);\n    setTimeout(function() {\n      alignHorizontally(cm);\n    }, 20);\n  }\n  function updateGutters(cm) {\n    var gutters = cm.display.gutters,\n        specs = cm.options.gutters;\n    removeChildren(gutters);\n    for (var i = 0; i < specs.length; ++i) {\n      var gutterClass = specs[i];\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + gutterClass));\n      if (gutterClass == \"CodeMirror-linenumbers\") {\n        cm.display.lineGutter = gElt;\n        gElt.style.width = (cm.display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = i ? \"\" : \"none\";\n    updateGutterSpace(cm);\n  }\n  function updateGutterSpace(cm) {\n    var width = cm.display.gutters.offsetWidth;\n    cm.display.sizer.style.marginLeft = width + \"px\";\n  }\n  function lineLength(line) {\n    if (line.height == 0)\n      return 0;\n    var len = line.text.length,\n        merged,\n        cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found = merged.find(0, true);\n      len -= cur.text.length - found.from.ch;\n      cur = found.to.line;\n      len += cur.text.length - found.to.ch;\n    }\n    return len;\n  }\n  function findMaxLine(cm) {\n    var d = cm.display,\n        doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function(line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n  function setGuttersForLineNumbers(options) {\n    var found = indexOf(options.gutters, \"CodeMirror-linenumbers\");\n    if (found == -1 && options.lineNumbers) {\n      options.gutters = options.gutters.concat([\"CodeMirror-linenumbers\"]);\n    } else if (found > -1 && !options.lineNumbers) {\n      options.gutters = options.gutters.slice(0);\n      options.gutters.splice(found, 1);\n    }\n  }\n  function measureForScrollbars(cm) {\n    var d = cm.display,\n        gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth,\n      clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    };\n  }\n  function NativeScrollbars(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    place(vert);\n    place(horiz);\n    on(vert, \"scroll\", function() {\n      if (vert.clientHeight)\n        scroll(vert.scrollTop, \"vertical\");\n    });\n    on(horiz, \"scroll\", function() {\n      if (horiz.clientWidth)\n        scroll(horiz.scrollLeft, \"horizontal\");\n    });\n    this.checkedOverlay = false;\n    if (ie && ie_version < 8)\n      this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\";\n  }\n  NativeScrollbars.prototype = copyObj({\n    update: function(measure) {\n      var needsH = measure.scrollWidth > measure.clientWidth + 1;\n      var needsV = measure.scrollHeight > measure.clientHeight + 1;\n      var sWidth = measure.nativeBarWidth;\n      if (needsV) {\n        this.vert.style.display = \"block\";\n        this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n        var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n        this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n      } else {\n        this.vert.style.display = \"\";\n        this.vert.firstChild.style.height = \"0\";\n      }\n      if (needsH) {\n        this.horiz.style.display = \"block\";\n        this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n        this.horiz.style.left = measure.barLeft + \"px\";\n        var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n        this.horiz.firstChild.style.width = (measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n      } else {\n        this.horiz.style.display = \"\";\n        this.horiz.firstChild.style.width = \"0\";\n      }\n      if (!this.checkedOverlay && measure.clientHeight > 0) {\n        if (sWidth == 0)\n          this.overlayHack();\n        this.checkedOverlay = true;\n      }\n      return {\n        right: needsV ? sWidth : 0,\n        bottom: needsH ? sWidth : 0\n      };\n    },\n    setScrollLeft: function(pos) {\n      if (this.horiz.scrollLeft != pos)\n        this.horiz.scrollLeft = pos;\n    },\n    setScrollTop: function(pos) {\n      if (this.vert.scrollTop != pos)\n        this.vert.scrollTop = pos;\n    },\n    overlayHack: function() {\n      var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n      this.horiz.style.minHeight = this.vert.style.minWidth = w;\n      var self = this;\n      var barMouseDown = function(e) {\n        if (e_target(e) != self.vert && e_target(e) != self.horiz)\n          operation(self.cm, onMouseDown)(e);\n      };\n      on(this.vert, \"mousedown\", barMouseDown);\n      on(this.horiz, \"mousedown\", barMouseDown);\n    },\n    clear: function() {\n      var parent = this.horiz.parentNode;\n      parent.removeChild(this.horiz);\n      parent.removeChild(this.vert);\n    }\n  }, NativeScrollbars.prototype);\n  function NullScrollbars() {}\n  NullScrollbars.prototype = copyObj({\n    update: function() {\n      return {\n        bottom: 0,\n        right: 0\n      };\n    },\n    setScrollLeft: function() {},\n    setScrollTop: function() {},\n    clear: function() {}\n  }, NullScrollbars.prototype);\n  CodeMirror.scrollbarModel = {\n    \"native\": NativeScrollbars,\n    \"null\": NullScrollbars\n  };\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n    }\n    cm.display.scrollbars = new CodeMirror.scrollbarModel[cm.options.scrollbarStyle](function(node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      on(node, \"mousedown\", function() {\n        if (cm.state.focused)\n          setTimeout(function() {\n            cm.display.input.focus();\n          }, 0);\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function(pos, axis) {\n      if (axis == \"horizontal\")\n        setScrollLeft(cm, pos);\n      else\n        setScrollTop(cm, pos);\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      addClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n  }\n  function updateScrollbars(cm, measure) {\n    if (!measure)\n      measure = measureForScrollbars(cm);\n    var startWidth = cm.display.barWidth,\n        startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        updateHeightsInViewport(cm);\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth;\n      startHeight = cm.display.barHeight;\n    }\n  }\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else\n      d.scrollbarFiller.style.display = \"\";\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else\n      d.gutterFiller.style.display = \"\";\n  }\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n    var from = lineAtHeight(doc, top),\n        to = lineAtHeight(doc, bottom);\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line,\n          ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {\n      from: from,\n      to: Math.max(to, from + 1)\n    };\n  }\n  function alignHorizontally(cm) {\n    var display = cm.display,\n        view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter))\n      return;\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth,\n        left = comp + \"px\";\n    for (var i = 0; i < view.length; i++)\n      if (!view[i].hidden) {\n        if (cm.options.fixedGutter && view[i].gutter)\n          view[i].gutter.style.left = left;\n        var align = view[i].alignable;\n        if (align)\n          for (var j = 0; j < align.length; j++)\n            align[j].style.left = left;\n      }\n    if (cm.options.fixedGutter)\n      display.gutters.style.left = (comp + gutterW) + \"px\";\n  }\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers)\n      return false;\n    var doc = cm.doc,\n        last = lineNumberFor(cm.options, doc.first + doc.size - 1),\n        display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)], \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth,\n          padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm);\n      return true;\n    }\n    return false;\n  }\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber));\n  }\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;\n  }\n  function DisplayUpdate(cm, viewport, force) {\n    var display = cm.display;\n    this.viewport = viewport;\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  }\n  DisplayUpdate.prototype.signal = function(emitter, type) {\n    if (hasHandler(emitter, type))\n      this.events.push(arguments);\n  };\n  DisplayUpdate.prototype.finish = function() {\n    for (var i = 0; i < this.events.length; i++)\n      signal.apply(null, this.events[i]);\n  };\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display,\n        doc = cm.doc;\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false;\n    }\n    if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && countDirtyView(cm) == 0)\n      return false;\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20)\n      from = Math.max(doc.first, display.viewFrom);\n    if (display.viewTo > to && display.viewTo - to < 20)\n      to = Math.min(end, display.viewTo);\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n    var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      return false;\n    var focused = activeElt();\n    if (toUpdate > 4)\n      display.lineDiv.style.display = \"none\";\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4)\n      display.lineDiv.style.display = \"\";\n    display.renderedView = display.view;\n    if (focused && activeElt() != focused && focused.offsetHeight)\n      focused.focus();\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n    display.updateLineNumbers = null;\n    return true;\n  }\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n    for (var first = true; ; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        if (viewport && viewport.top != null)\n          viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)};\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          break;\n      }\n      if (!updateDisplayIfNeeded(cm, update))\n        break;\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      setDocumentHeight(cm, barMeasure);\n      updateScrollbars(cm, barMeasure);\n    }\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom;\n      cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      setDocumentHeight(cm, barMeasure);\n      updateScrollbars(cm, barMeasure);\n      update.finish();\n    }\n  }\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    var total = measure.docHeight + cm.display.barHeight;\n    cm.display.heightForcer.style.top = total + \"px\";\n    cm.display.gutters.style.height = Math.max(total + scrollGap(cm), measure.clientHeight) + \"px\";\n  }\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i],\n          height;\n      if (cur.hidden)\n        continue;\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n      }\n      var diff = cur.line.height - height;\n      if (height < 2)\n        height = textHeight(display);\n      if (diff > .001 || diff < -.001) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest)\n          for (var j = 0; j < cur.rest.length; j++)\n            updateWidgetHeight(cur.rest[j]);\n      }\n    }\n  }\n  function updateWidgetHeight(line) {\n    if (line.widgets)\n      for (var i = 0; i < line.widgets.length; ++i)\n        line.widgets[i].height = line.widgets[i].node.offsetHeight;\n  }\n  function getDimensions(cm) {\n    var d = cm.display,\n        left = {},\n        width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild,\n        i = 0; n; n = n.nextSibling, ++i) {\n      left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[cm.options.gutters[i]] = n.clientWidth;\n    }\n    return {\n      fixedPos: compensateForHScroll(d),\n      gutterTotalWidth: d.gutters.offsetWidth,\n      gutterLeft: left,\n      gutterWidth: width,\n      wrapperWidth: d.wrapper.clientWidth\n    };\n  }\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display,\n        lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv,\n        cur = container.firstChild;\n    function rm(node) {\n      var next = node.nextSibling;\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        node.style.display = \"none\";\n      else\n        node.parentNode.removeChild(node);\n      return next;\n    }\n    var view = display.view,\n        lineN = display.viewFrom;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) {} else if (!lineView.node || lineView.node.parentNode != container) {\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else {\n        while (cur != lineView.node)\n          cur = rm(cur);\n        var updateNumber = lineNumbers && updateNumbersFrom != null && updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1)\n            updateNumber = false;\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur)\n      cur = rm(cur);\n  }\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\")\n        updateLineText(cm, lineView);\n      else if (type == \"gutter\")\n        updateLineGutter(cm, lineView, lineN, dims);\n      else if (type == \"class\")\n        updateLineClasses(lineView);\n      else if (type == \"widget\")\n        updateLineWidgets(cm, lineView, dims);\n    }\n    lineView.changes = null;\n  }\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        lineView.text.parentNode.replaceChild(lineView.node, lineView.text);\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8)\n        lineView.node.style.zIndex = 2;\n    }\n    return lineView.node;\n  }\n  function updateLineBackground(lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls)\n      cls += \" CodeMirror-linebackground\";\n    if (lineView.background) {\n      if (cls)\n        lineView.background.className = cls;\n      else {\n        lineView.background.parentNode.removeChild(lineView.background);\n        lineView.background = null;\n      }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n    }\n  }\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built;\n    }\n    return buildLineContent(cm, lineView);\n  }\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node)\n      lineView.node = built.pre;\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n  function updateLineClasses(lineView) {\n    updateLineBackground(lineView);\n    if (lineView.line.wrapClass)\n      ensureLineWrapped(lineView).className = lineView.line.wrapClass;\n    else if (lineView.node != lineView.text)\n      lineView.node.className = \"\";\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass, \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + dims.gutterTotalWidth + \"px\");\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\");\n      cm.display.input.setUneditable(gutterWrap);\n      wrap.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        gutterWrap.className += \" \" + lineView.line.gutterClass;\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        lineView.lineNumber = gutterWrap.appendChild(elt(\"div\", lineNumberFor(cm.options, lineN), \"CodeMirror-linenumber CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \" + cm.display.lineNumInnerWidth + \"px\"));\n      if (markers)\n        for (var k = 0; k < cm.options.gutters.length; ++k) {\n          var id = cm.options.gutters[k],\n              found = markers.hasOwnProperty(id) && markers[id];\n          if (found)\n            gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[id] + \"px; width: \" + dims.gutterWidth[id] + \"px\"));\n        }\n    }\n  }\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable)\n      lineView.alignable = null;\n    for (var node = lineView.node.firstChild,\n        next; node; node = next) {\n      var next = node.nextSibling;\n      if (node.className == \"CodeMirror-linewidget\")\n        lineView.node.removeChild(node);\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass)\n      lineView.bgClass = built.bgClass;\n    if (built.textClass)\n      lineView.textClass = built.textClass;\n    updateLineClasses(lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node;\n  }\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest)\n      for (var i = 0; i < lineView.rest.length; i++)\n        insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);\n  }\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets)\n      return;\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0,\n        ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i],\n          node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\");\n      if (!widget.handleMouseEvents)\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        wrap.insertBefore(node, lineView.gutter || lineView.text);\n      else\n        wrap.appendChild(node);\n      signalLater(widget, \"redraw\");\n    }\n  }\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n      (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll)\n        node.style.marginLeft = -dims.gutterTotalWidth + \"px\";\n    }\n  }\n  var Pos = CodeMirror.Pos = function(line, ch) {\n    if (!(this instanceof Pos))\n      return new Pos(line, ch);\n    this.line = line;\n    this.ch = ch;\n  };\n  var cmp = CodeMirror.cmpPos = function(a, b) {\n    return a.line - b.line || a.ch - b.ch;\n  };\n  function copyPos(x) {\n    return Pos(x.line, x.ch);\n  }\n  function maxPos(a, b) {\n    return cmp(a, b) < 0 ? b : a;\n  }\n  function minPos(a, b) {\n    return cmp(a, b) < 0 ? a : b;\n  }\n  function ensureFocus(cm) {\n    if (!cm.state.focused) {\n      cm.display.input.focus();\n      onFocus(cm);\n    }\n  }\n  function isReadOnly(cm) {\n    return cm.options.readOnly || cm.doc.cantEdit;\n  }\n  var lastCopied = null;\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel)\n      sel = doc.sel;\n    var paste = cm.state.pasteIncoming || origin == \"paste\";\n    var textLines = doc.splitLines(inserted),\n        multiPaste = null;\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.length; i++)\n            multiPaste.push(doc.splitLines(lastCopied[i]));\n        }\n      } else if (textLines.length == sel.ranges.length) {\n        multiPaste = map(textLines, function(l) {\n          return [l];\n        });\n      }\n    }\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      var from = range.from(),\n          to = range.to();\n      if (range.empty()) {\n        if (deleted && deleted > 0)\n          from = Pos(from.line, from.ch - deleted);\n        else if (cm.state.overwrite && !paste)\n          to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));\n      }\n      var updateInput = cm.curOp.updateInput;\n      var changeEvent = {\n        from: from,\n        to: to,\n        text: multiPaste ? multiPaste[i % multiPaste.length] : textLines,\n        origin: origin || (paste ? \"paste\" : cm.state.cutIncoming ? \"cut\" : \"+input\")\n      };\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      triggerElectric(cm, inserted);\n    ensureCursorVisible(cm);\n    cm.curOp.updateInput = updateInput;\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = false;\n  }\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"text/plain\");\n    if (pasted) {\n      e.preventDefault();\n      if (!isReadOnly(cm) && !cm.options.disableInput)\n        runInOp(cm, function() {\n          applyTextInput(cm, pasted, 0, null, \"paste\");\n        });\n      return true;\n    }\n  }\n  function triggerElectric(cm, inserted) {\n    if (!cm.options.electricChars || !cm.options.smartIndent)\n      return;\n    var sel = cm.doc.sel;\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line))\n        continue;\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break;\n          }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n          indented = indentLine(cm, range.head.line, \"smart\");\n      }\n      if (indented)\n        signalLater(cm, \"electricInput\", cm, range.head.line);\n    }\n  }\n  function copyableRanges(cm) {\n    var text = [],\n        ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {\n        anchor: Pos(line, 0),\n        head: Pos(line + 1, 0)\n      };\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {\n      text: text,\n      ranges: ranges\n    };\n  }\n  function disableBrowserMagic(field) {\n    field.setAttribute(\"autocorrect\", \"off\");\n    field.setAttribute(\"autocapitalize\", \"off\");\n    field.setAttribute(\"spellcheck\", \"false\");\n  }\n  function TextareaInput(cm) {\n    this.cm = cm;\n    this.prevInput = \"\";\n    this.pollingFast = false;\n    this.polling = new Delayed();\n    this.inaccurateSelection = false;\n    this.hasSelection = false;\n    this.composing = null;\n  }\n  ;\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    if (webkit)\n      te.style.width = \"1000px\";\n    else\n      te.setAttribute(\"wrap\", \"off\");\n    if (ios)\n      te.style.border = \"1px solid black\";\n    disableBrowserMagic(te);\n    return div;\n  }\n  TextareaInput.prototype = copyObj({\n    init: function(display) {\n      var input = this,\n          cm = this.cm;\n      var div = this.wrapper = hiddenTextarea();\n      var te = this.textarea = div.firstChild;\n      display.wrapper.insertBefore(div, display.wrapper.firstChild);\n      if (ios)\n        te.style.width = \"0px\";\n      on(te, \"input\", function() {\n        if (ie && ie_version >= 9 && input.hasSelection)\n          input.hasSelection = null;\n        input.poll();\n      });\n      on(te, \"paste\", function(e) {\n        if (handlePaste(e, cm))\n          return true;\n        cm.state.pasteIncoming = true;\n        input.fastPoll();\n      });\n      function prepareCopyCut(e) {\n        if (cm.somethingSelected()) {\n          lastCopied = cm.getSelections();\n          if (input.inaccurateSelection) {\n            input.prevInput = \"\";\n            input.inaccurateSelection = false;\n            te.value = lastCopied.join(\"\\n\");\n            selectInput(te);\n          }\n        } else if (!cm.options.lineWiseCopyCut) {\n          return;\n        } else {\n          var ranges = copyableRanges(cm);\n          lastCopied = ranges.text;\n          if (e.type == \"cut\") {\n            cm.setSelections(ranges.ranges, null, sel_dontScroll);\n          } else {\n            input.prevInput = \"\";\n            te.value = ranges.text.join(\"\\n\");\n            selectInput(te);\n          }\n        }\n        if (e.type == \"cut\")\n          cm.state.cutIncoming = true;\n      }\n      on(te, \"cut\", prepareCopyCut);\n      on(te, \"copy\", prepareCopyCut);\n      on(display.scroller, \"paste\", function(e) {\n        if (eventInWidget(display, e))\n          return;\n        cm.state.pasteIncoming = true;\n        input.focus();\n      });\n      on(display.lineSpace, \"selectstart\", function(e) {\n        if (!eventInWidget(display, e))\n          e_preventDefault(e);\n      });\n      on(te, \"compositionstart\", function() {\n        var start = cm.getCursor(\"from\");\n        if (input.composing)\n          input.composing.range.clear();\n        input.composing = {\n          start: start,\n          range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n        };\n      });\n      on(te, \"compositionend\", function() {\n        if (input.composing) {\n          input.poll();\n          input.composing.range.clear();\n          input.composing = null;\n        }\n      });\n    },\n    prepareSelection: function() {\n      var cm = this.cm,\n          display = cm.display,\n          doc = cm.doc;\n      var result = prepareSelection(cm);\n      if (cm.options.moveInputWithCursor) {\n        var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n        var wrapOff = display.wrapper.getBoundingClientRect(),\n            lineOff = display.lineDiv.getBoundingClientRect();\n        result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10, headPos.top + lineOff.top - wrapOff.top));\n        result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10, headPos.left + lineOff.left - wrapOff.left));\n      }\n      return result;\n    },\n    showSelection: function(drawn) {\n      var cm = this.cm,\n          display = cm.display;\n      removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n      removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n      if (drawn.teTop != null) {\n        this.wrapper.style.top = drawn.teTop + \"px\";\n        this.wrapper.style.left = drawn.teLeft + \"px\";\n      }\n    },\n    reset: function(typing) {\n      if (this.contextMenuPending)\n        return;\n      var minimal,\n          selected,\n          cm = this.cm,\n          doc = cm.doc;\n      if (cm.somethingSelected()) {\n        this.prevInput = \"\";\n        var range = doc.sel.primary();\n        minimal = hasCopyEvent && (range.to().line - range.from().line > 100 || (selected = cm.getSelection()).length > 1000);\n        var content = minimal ? \"-\" : selected || cm.getSelection();\n        this.textarea.value = content;\n        if (cm.state.focused)\n          selectInput(this.textarea);\n        if (ie && ie_version >= 9)\n          this.hasSelection = content;\n      } else if (!typing) {\n        this.prevInput = this.textarea.value = \"\";\n        if (ie && ie_version >= 9)\n          this.hasSelection = null;\n      }\n      this.inaccurateSelection = minimal;\n    },\n    getField: function() {\n      return this.textarea;\n    },\n    supportsTouch: function() {\n      return false;\n    },\n    focus: function() {\n      if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n        try {\n          this.textarea.focus();\n        } catch (e) {}\n      }\n    },\n    blur: function() {\n      this.textarea.blur();\n    },\n    resetPosition: function() {\n      this.wrapper.style.top = this.wrapper.style.left = 0;\n    },\n    receivedFocus: function() {\n      this.slowPoll();\n    },\n    slowPoll: function() {\n      var input = this;\n      if (input.pollingFast)\n        return;\n      input.polling.set(this.cm.options.pollInterval, function() {\n        input.poll();\n        if (input.cm.state.focused)\n          input.slowPoll();\n      });\n    },\n    fastPoll: function() {\n      var missed = false,\n          input = this;\n      input.pollingFast = true;\n      function p() {\n        var changed = input.poll();\n        if (!changed && !missed) {\n          missed = true;\n          input.polling.set(60, p);\n        } else {\n          input.pollingFast = false;\n          input.slowPoll();\n        }\n      }\n      input.polling.set(20, p);\n    },\n    poll: function() {\n      var cm = this.cm,\n          input = this.textarea,\n          prevInput = this.prevInput;\n      if (this.contextMenuPending || !cm.state.focused || (hasSelection(input) && !prevInput && !this.composing) || isReadOnly(cm) || cm.options.disableInput || cm.state.keySeq)\n        return false;\n      var text = input.value;\n      if (text == prevInput && !cm.somethingSelected())\n        return false;\n      if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\\uf700-\\uf7ff]/.test(text)) {\n        cm.display.input.reset();\n        return false;\n      }\n      if (cm.doc.sel == cm.display.selForContextMenu) {\n        var first = text.charCodeAt(0);\n        if (first == 0x200b && !prevInput)\n          prevInput = \"\\u200b\";\n        if (first == 0x21da) {\n          this.reset();\n          return this.cm.execCommand(\"undo\");\n        }\n      }\n      var same = 0,\n          l = Math.min(prevInput.length, text.length);\n      while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same))\n        ++same;\n      var self = this;\n      runInOp(cm, function() {\n        applyTextInput(cm, text.slice(same), prevInput.length - same, null, self.composing ? \"*compose\" : null);\n        if (text.length > 1000 || text.indexOf(\"\\n\") > -1)\n          input.value = self.prevInput = \"\";\n        else\n          self.prevInput = text;\n        if (self.composing) {\n          self.composing.range.clear();\n          self.composing.range = cm.markText(self.composing.start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"});\n        }\n      });\n      return true;\n    },\n    ensurePolled: function() {\n      if (this.pollingFast && this.poll())\n        this.pollingFast = false;\n    },\n    onKeyPress: function() {\n      if (ie && ie_version >= 9)\n        this.hasSelection = null;\n      this.fastPoll();\n    },\n    onContextMenu: function(e) {\n      var input = this,\n          cm = input.cm,\n          display = cm.display,\n          te = input.textarea;\n      var pos = posFromMouse(cm, e),\n          scrollPos = display.scroller.scrollTop;\n      if (!pos || presto)\n        return;\n      var reset = cm.options.resetSelectionOnContextMenu;\n      if (reset && cm.doc.sel.contains(pos) == -1)\n        operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);\n      var oldCSS = te.style.cssText;\n      input.wrapper.style.position = \"absolute\";\n      te.style.cssText = \"position: fixed; width: 30px; height: 30px; top: \" + (e.clientY - 5) + \"px; left: \" + (e.clientX - 5) + \"px; z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n      if (webkit)\n        var oldScrollY = window.scrollY;\n      display.input.focus();\n      if (webkit)\n        window.scrollTo(null, oldScrollY);\n      display.input.reset();\n      if (!cm.somethingSelected())\n        te.value = input.prevInput = \" \";\n      input.contextMenuPending = true;\n      display.selForContextMenu = cm.doc.sel;\n      clearTimeout(display.detectingSelectAll);\n      function prepareSelectAllHack() {\n        if (te.selectionStart != null) {\n          var selected = cm.somethingSelected();\n          var extval = \"\\u200b\" + (selected ? te.value : \"\");\n          te.value = \"\\u21da\";\n          te.value = extval;\n          input.prevInput = selected ? \"\" : \"\\u200b\";\n          te.selectionStart = 1;\n          te.selectionEnd = extval.length;\n          display.selForContextMenu = cm.doc.sel;\n        }\n      }\n      function rehide() {\n        input.contextMenuPending = false;\n        input.wrapper.style.position = \"relative\";\n        te.style.cssText = oldCSS;\n        if (ie && ie_version < 9)\n          display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);\n        if (te.selectionStart != null) {\n          if (!ie || (ie && ie_version < 9))\n            prepareSelectAllHack();\n          var i = 0,\n              poll = function() {\n                if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 && te.selectionEnd > 0 && input.prevInput == \"\\u200b\")\n                  operation(cm, commands.selectAll)(cm);\n                else if (i++ < 10)\n                  display.detectingSelectAll = setTimeout(poll, 500);\n                else\n                  display.input.reset();\n              };\n          display.detectingSelectAll = setTimeout(poll, 200);\n        }\n      }\n      if (ie && ie_version >= 9)\n        prepareSelectAllHack();\n      if (captureRightClick) {\n        e_stop(e);\n        var mouseup = function() {\n          off(window, \"mouseup\", mouseup);\n          setTimeout(rehide, 20);\n        };\n        on(window, \"mouseup\", mouseup);\n      } else {\n        setTimeout(rehide, 50);\n      }\n    },\n    readOnlyChanged: function(val) {\n      if (!val)\n        this.reset();\n    },\n    setUneditable: nothing,\n    needsContentAttribute: false\n  }, TextareaInput.prototype);\n  function ContentEditableInput(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.gracePeriod = false;\n  }\n  ContentEditableInput.prototype = copyObj({\n    init: function(display) {\n      var input = this,\n          cm = input.cm;\n      var div = input.div = display.lineDiv;\n      disableBrowserMagic(div);\n      on(div, \"paste\", function(e) {\n        handlePaste(e, cm);\n      });\n      on(div, \"compositionstart\", function(e) {\n        var data = e.data;\n        input.composing = {\n          sel: cm.doc.sel,\n          data: data,\n          startData: data\n        };\n        if (!data)\n          return;\n        var prim = cm.doc.sel.primary();\n        var line = cm.getLine(prim.head.line);\n        var found = line.indexOf(data, Math.max(0, prim.head.ch - data.length));\n        if (found > -1 && found <= prim.head.ch)\n          input.composing.sel = simpleSelection(Pos(prim.head.line, found), Pos(prim.head.line, found + data.length));\n      });\n      on(div, \"compositionupdate\", function(e) {\n        input.composing.data = e.data;\n      });\n      on(div, \"compositionend\", function(e) {\n        var ours = input.composing;\n        if (!ours)\n          return;\n        if (e.data != ours.startData && !/\\u200b/.test(e.data))\n          ours.data = e.data;\n        setTimeout(function() {\n          if (!ours.handled)\n            input.applyComposition(ours);\n          if (input.composing == ours)\n            input.composing = null;\n        }, 50);\n      });\n      on(div, \"touchstart\", function() {\n        input.forceCompositionEnd();\n      });\n      on(div, \"input\", function() {\n        if (input.composing)\n          return;\n        if (isReadOnly(cm) || !input.pollContent())\n          runInOp(input.cm, function() {\n            regChange(cm);\n          });\n      });\n      function onCopyCut(e) {\n        if (cm.somethingSelected()) {\n          lastCopied = cm.getSelections();\n          if (e.type == \"cut\")\n            cm.replaceSelection(\"\", null, \"cut\");\n        } else if (!cm.options.lineWiseCopyCut) {\n          return;\n        } else {\n          var ranges = copyableRanges(cm);\n          lastCopied = ranges.text;\n          if (e.type == \"cut\") {\n            cm.operation(function() {\n              cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n              cm.replaceSelection(\"\", null, \"cut\");\n            });\n          }\n        }\n        if (e.clipboardData && !ios) {\n          e.preventDefault();\n          e.clipboardData.clearData();\n          e.clipboardData.setData(\"text/plain\", lastCopied.join(\"\\n\"));\n        } else {\n          var kludge = hiddenTextarea(),\n              te = kludge.firstChild;\n          cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n          te.value = lastCopied.join(\"\\n\");\n          var hadFocus = document.activeElement;\n          selectInput(te);\n          setTimeout(function() {\n            cm.display.lineSpace.removeChild(kludge);\n            hadFocus.focus();\n          }, 50);\n        }\n      }\n      on(div, \"copy\", onCopyCut);\n      on(div, \"cut\", onCopyCut);\n    },\n    prepareSelection: function() {\n      var result = prepareSelection(this.cm, false);\n      result.focus = this.cm.state.focused;\n      return result;\n    },\n    showSelection: function(info) {\n      if (!info || !this.cm.display.view.length)\n        return;\n      if (info.focus)\n        this.showPrimarySelection();\n      this.showMultipleSelections(info);\n    },\n    showPrimarySelection: function() {\n      var sel = window.getSelection(),\n          prim = this.cm.doc.sel.primary();\n      var curAnchor = domToPos(this.cm, sel.anchorNode, sel.anchorOffset);\n      var curFocus = domToPos(this.cm, sel.focusNode, sel.focusOffset);\n      if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad && cmp(minPos(curAnchor, curFocus), prim.from()) == 0 && cmp(maxPos(curAnchor, curFocus), prim.to()) == 0)\n        return;\n      var start = posToDOM(this.cm, prim.from());\n      var end = posToDOM(this.cm, prim.to());\n      if (!start && !end)\n        return;\n      var view = this.cm.display.view;\n      var old = sel.rangeCount && sel.getRangeAt(0);\n      if (!start) {\n        start = {\n          node: view[0].measure.map[2],\n          offset: 0\n        };\n      } else if (!end) {\n        var measure = view[view.length - 1].measure;\n        var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n        end = {\n          node: map[map.length - 1],\n          offset: map[map.length - 2] - map[map.length - 3]\n        };\n      }\n      try {\n        var rng = range(start.node, start.offset, end.offset, end.node);\n      } catch (e) {}\n      if (rng) {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n        if (old && sel.anchorNode == null)\n          sel.addRange(old);\n        else if (gecko)\n          this.startGracePeriod();\n      }\n      this.rememberSelection();\n    },\n    startGracePeriod: function() {\n      var input = this;\n      clearTimeout(this.gracePeriod);\n      this.gracePeriod = setTimeout(function() {\n        input.gracePeriod = false;\n        if (input.selectionChanged())\n          input.cm.operation(function() {\n            input.cm.curOp.selectionChanged = true;\n          });\n      }, 20);\n    },\n    showMultipleSelections: function(info) {\n      removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n      removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n    },\n    rememberSelection: function() {\n      var sel = window.getSelection();\n      this.lastAnchorNode = sel.anchorNode;\n      this.lastAnchorOffset = sel.anchorOffset;\n      this.lastFocusNode = sel.focusNode;\n      this.lastFocusOffset = sel.focusOffset;\n    },\n    selectionInEditor: function() {\n      var sel = window.getSelection();\n      if (!sel.rangeCount)\n        return false;\n      var node = sel.getRangeAt(0).commonAncestorContainer;\n      return contains(this.div, node);\n    },\n    focus: function() {\n      if (this.cm.options.readOnly != \"nocursor\")\n        this.div.focus();\n    },\n    blur: function() {\n      this.div.blur();\n    },\n    getField: function() {\n      return this.div;\n    },\n    supportsTouch: function() {\n      return true;\n    },\n    receivedFocus: function() {\n      var input = this;\n      if (this.selectionInEditor())\n        this.pollSelection();\n      else\n        runInOp(this.cm, function() {\n          input.cm.curOp.selectionChanged = true;\n        });\n      function poll() {\n        if (input.cm.state.focused) {\n          input.pollSelection();\n          input.polling.set(input.cm.options.pollInterval, poll);\n        }\n      }\n      this.polling.set(this.cm.options.pollInterval, poll);\n    },\n    selectionChanged: function() {\n      var sel = window.getSelection();\n      return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;\n    },\n    pollSelection: function() {\n      if (!this.composing && !this.gracePeriod && this.selectionChanged()) {\n        var sel = window.getSelection(),\n            cm = this.cm;\n        this.rememberSelection();\n        var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n        var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n        if (anchor && head)\n          runInOp(cm, function() {\n            setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n            if (anchor.bad || head.bad)\n              cm.curOp.selectionChanged = true;\n          });\n      }\n    },\n    pollContent: function() {\n      var cm = this.cm,\n          display = cm.display,\n          sel = cm.doc.sel.primary();\n      var from = sel.from(),\n          to = sel.to();\n      if (from.line < display.viewFrom || to.line > display.viewTo - 1)\n        return false;\n      var fromIndex;\n      if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n        var fromLine = lineNo(display.view[0].line);\n        var fromNode = display.view[0].node;\n      } else {\n        var fromLine = lineNo(display.view[fromIndex].line);\n        var fromNode = display.view[fromIndex - 1].node.nextSibling;\n      }\n      var toIndex = findViewIndex(cm, to.line);\n      if (toIndex == display.view.length - 1) {\n        var toLine = display.viewTo - 1;\n        var toNode = display.lineDiv.lastChild;\n      } else {\n        var toLine = lineNo(display.view[toIndex + 1].line) - 1;\n        var toNode = display.view[toIndex + 1].node.previousSibling;\n      }\n      var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n      var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n      while (newText.length > 1 && oldText.length > 1) {\n        if (lst(newText) == lst(oldText)) {\n          newText.pop();\n          oldText.pop();\n          toLine--;\n        } else if (newText[0] == oldText[0]) {\n          newText.shift();\n          oldText.shift();\n          fromLine++;\n        } else\n          break;\n      }\n      var cutFront = 0,\n          cutEnd = 0;\n      var newTop = newText[0],\n          oldTop = oldText[0],\n          maxCutFront = Math.min(newTop.length, oldTop.length);\n      while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n        ++cutFront;\n      var newBot = lst(newText),\n          oldBot = lst(oldText);\n      var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0), oldBot.length - (oldText.length == 1 ? cutFront : 0));\n      while (cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n        ++cutEnd;\n      newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd);\n      newText[0] = newText[0].slice(cutFront);\n      var chFrom = Pos(fromLine, cutFront);\n      var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n      if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n        replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n        return true;\n      }\n    },\n    ensurePolled: function() {\n      this.forceCompositionEnd();\n    },\n    reset: function() {\n      this.forceCompositionEnd();\n    },\n    forceCompositionEnd: function() {\n      if (!this.composing || this.composing.handled)\n        return;\n      this.applyComposition(this.composing);\n      this.composing.handled = true;\n      this.div.blur();\n      this.div.focus();\n    },\n    applyComposition: function(composing) {\n      if (isReadOnly(this.cm))\n        operation(this.cm, regChange)(this.cm);\n      else if (composing.data && composing.data != composing.startData)\n        operation(this.cm, applyTextInput)(this.cm, composing.data, 0, composing.sel);\n    },\n    setUneditable: function(node) {\n      node.contentEditable = \"false\";\n    },\n    onKeyPress: function(e) {\n      e.preventDefault();\n      if (!isReadOnly(this.cm))\n        operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);\n    },\n    readOnlyChanged: function(val) {\n      this.div.contentEditable = String(val != \"nocursor\");\n    },\n    onContextMenu: nothing,\n    resetPosition: nothing,\n    needsContentAttribute: true\n  }, ContentEditableInput.prototype);\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden)\n      return null;\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n    var order = getOrder(line),\n        side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result;\n  }\n  function badPos(pos, bad) {\n    if (bad)\n      pos.bad = true;\n    return pos;\n  }\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode)\n        return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);\n      node = null;\n      offset = 0;\n    } else {\n      for (lineNode = node; ; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv)\n          return null;\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv)\n          break;\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        return locateNodeInLineView(lineView, node, offset);\n    }\n  }\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild,\n        bad = false;\n    if (!node || !contains(wrapper, node))\n      return badPos(Pos(lineNo(lineView.line), 0), true);\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad);\n      }\n    }\n    var textNode = node.nodeType == 3 ? node : null,\n        topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset)\n        offset = textNode.nodeValue.length;\n    }\n    while (topNode.parentNode != wrapper)\n      topNode = topNode.parentNode;\n    var measure = lineView.measure,\n        maps = measure.maps;\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n            if (offset < 0 || curNode != textNode)\n              ch = map[j + (offset ? 1 : 0)];\n            return Pos(line, ch);\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found)\n      return badPos(found, bad);\n    for (var after = topNode.nextSibling,\n        dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        return badPos(Pos(found.line, found.ch - dist), bad);\n      else\n        dist += after.textContent.length;\n    }\n    for (var before = topNode.previousSibling,\n        dist = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        return badPos(Pos(found.line, found.ch + dist), bad);\n      else\n        dist += after.textContent.length;\n    }\n  }\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\",\n        closing = false,\n        lineSep = cm.doc.lineSeparator();\n    function recognizeMarker(id) {\n      return function(marker) {\n        return marker.id == id;\n      };\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText != null) {\n          if (cmText == \"\")\n            cmText = node.textContent.replace(/\\u200b/g, \"\");\n          text += cmText;\n          return;\n        }\n        var markerID = node.getAttribute(\"cm-marker\"),\n            range;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range = found[0].find()))\n            text += getBetween(cm.doc, range.from, range.to).join(lineSep);\n          return;\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\")\n          return;\n        for (var i = 0; i < node.childNodes.length; i++)\n          walk(node.childNodes[i]);\n        if (/^(pre|div|p)$/i.test(node.nodeName))\n          closing = true;\n      } else if (node.nodeType == 3) {\n        var val = node.nodeValue;\n        if (!val)\n          return;\n        if (closing) {\n          text += lineSep;\n          closing = false;\n        }\n        text += val;\n      }\n    }\n    for (; ; ) {\n      walk(from);\n      if (from == to)\n        break;\n      from = from.nextSibling;\n    }\n    return text;\n  }\n  CodeMirror.inputStyles = {\n    \"textarea\": TextareaInput,\n    \"contenteditable\": ContentEditableInput\n  };\n  function Selection(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  }\n  Selection.prototype = {\n    primary: function() {\n      return this.ranges[this.primIndex];\n    },\n    equals: function(other) {\n      if (other == this)\n        return true;\n      if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length)\n        return false;\n      for (var i = 0; i < this.ranges.length; i++) {\n        var here = this.ranges[i],\n            there = other.ranges[i];\n        if (cmp(here.anchor, there.anchor) != 0 || cmp(here.head, there.head) != 0)\n          return false;\n      }\n      return true;\n    },\n    deepCopy: function() {\n      for (var out = [],\n          i = 0; i < this.ranges.length; i++)\n        out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));\n      return new Selection(out, this.primIndex);\n    },\n    somethingSelected: function() {\n      for (var i = 0; i < this.ranges.length; i++)\n        if (!this.ranges[i].empty())\n          return true;\n      return false;\n    },\n    contains: function(pos, end) {\n      if (!end)\n        end = pos;\n      for (var i = 0; i < this.ranges.length; i++) {\n        var range = this.ranges[i];\n        if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n          return i;\n      }\n      return -1;\n    }\n  };\n  function Range(anchor, head) {\n    this.anchor = anchor;\n    this.head = head;\n  }\n  Range.prototype = {\n    from: function() {\n      return minPos(this.anchor, this.head);\n    },\n    to: function() {\n      return maxPos(this.anchor, this.head);\n    },\n    empty: function() {\n      return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;\n    }\n  };\n  function normalizeSelection(ranges, primIndex) {\n    var prim = ranges[primIndex];\n    ranges.sort(function(a, b) {\n      return cmp(a.from(), b.from());\n    });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i],\n          prev = ranges[i - 1];\n      if (cmp(prev.to(), cur.from()) >= 0) {\n        var from = minPos(prev.from(), cur.from()),\n            to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex)\n          --primIndex;\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex);\n  }\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0);\n  }\n  function clipLine(doc, n) {\n    return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));\n  }\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first)\n      return Pos(doc.first, 0);\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last)\n      return Pos(last, getLine(doc, last).text.length);\n    return clipToLen(pos, getLine(doc, pos.line).text.length);\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen)\n      return Pos(pos.line, linelen);\n    else if (ch < 0)\n      return Pos(pos.line, 0);\n    else\n      return pos;\n  }\n  function isLine(doc, l) {\n    return l >= doc.first && l < doc.first + doc.size;\n  }\n  function clipPosArray(doc, array) {\n    for (var out = [],\n        i = 0; i < array.length; i++)\n      out[i] = clipPos(doc, array[i]);\n    return out;\n  }\n  function extendRange(doc, range, head, other) {\n    if (doc.cm && doc.cm.display.shift || doc.extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head);\n    } else {\n      return new Range(other || head, head);\n    }\n  }\n  function extendSelection(doc, head, other, options) {\n    setSelection(doc, new Selection([extendRange(doc, doc.sel.primary(), head, other)], 0), options);\n  }\n  function extendSelections(doc, heads, options) {\n    for (var out = [],\n        i = 0; i < doc.sel.ranges.length; i++)\n      out[i] = extendRange(doc, doc.sel.ranges[i], heads[i], null);\n    var newSel = normalizeSelection(out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);\n  }\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n  function filterSelectionChange(doc, sel) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor), clipPos(doc, ranges[i].head));\n      }\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm)\n      signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj);\n    if (obj.ranges != sel.ranges)\n      return normalizeSelection(obj.ranges, obj.ranges.length - 1);\n    else\n      return sel;\n  }\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done,\n        last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      sel = filterSelectionChange(doc, sel);\n    var bias = options && options.bias || (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n    if (!(options && options.scroll === false) && doc.cm)\n      ensureCursorVisible(doc.cm);\n  }\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel))\n      return;\n    doc.sel = sel;\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false), sel_dontScroll);\n  }\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out)\n          out = sel.ranges.slice(0, i);\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(out, sel.primIndex) : sel;\n  }\n  function skipAtomic(doc, pos, bias, mayClear) {\n    var flipped = false,\n        curPos = pos;\n    var dir = bias || 1;\n    doc.cantEdit = false;\n    search: for (; ; ) {\n      var line = getLine(doc, curPos.line);\n      if (line.markedSpans) {\n        for (var i = 0; i < line.markedSpans.length; ++i) {\n          var sp = line.markedSpans[i],\n              m = sp.marker;\n          if ((sp.from == null || (m.inclusiveLeft ? sp.from <= curPos.ch : sp.from < curPos.ch)) && (sp.to == null || (m.inclusiveRight ? sp.to >= curPos.ch : sp.to > curPos.ch))) {\n            if (mayClear) {\n              signal(m, \"beforeCursorEnter\");\n              if (m.explicitlyCleared) {\n                if (!line.markedSpans)\n                  break;\n                else {\n                  --i;\n                  continue;\n                }\n              }\n            }\n            if (!m.atomic)\n              continue;\n            var newPos = m.find(dir < 0 ? -1 : 1);\n            if (cmp(newPos, curPos) == 0) {\n              newPos.ch += dir;\n              if (newPos.ch < 0) {\n                if (newPos.line > doc.first)\n                  newPos = clipPos(doc, Pos(newPos.line - 1));\n                else\n                  newPos = null;\n              } else if (newPos.ch > line.text.length) {\n                if (newPos.line < doc.first + doc.size - 1)\n                  newPos = Pos(newPos.line + 1, 0);\n                else\n                  newPos = null;\n              }\n              if (!newPos) {\n                if (flipped) {\n                  if (!mayClear)\n                    return skipAtomic(doc, pos, bias, true);\n                  doc.cantEdit = true;\n                  return Pos(doc.first, 0);\n                }\n                flipped = true;\n                newPos = pos;\n                dir = -dir;\n              }\n            }\n            curPos = newPos;\n            continue search;\n          }\n        }\n      }\n      return curPos;\n    }\n  }\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n  function prepareSelection(cm, primary) {\n    var doc = cm.doc,\n        result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (primary === false && i == doc.sel.primIndex)\n        continue;\n      var range = doc.sel.ranges[i];\n      var collapsed = range.empty();\n      if (collapsed || cm.options.showCursorWhenSelecting)\n        drawSelectionCursor(cm, range.head, curFragment);\n      if (!collapsed)\n        drawSelectionRange(cm, range, selFragment);\n    }\n    return result;\n  }\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n    if (pos.other) {\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display,\n        doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display),\n        leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    function add(left, top, width, bottom) {\n      if (top < 0)\n        top = 0;\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + left + \"px; top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px; height: \" + (bottom - top) + \"px\"));\n    }\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start,\n          end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias);\n      }\n      iterateBidiSections(getOrder(lineObj), fromArg || 0, toArg == null ? lineLen : toArg, function(from, to, dir) {\n        var leftPos = coords(from, \"left\"),\n            rightPos,\n            left,\n            right;\n        if (from == to) {\n          rightPos = leftPos;\n          left = right = leftPos.left;\n        } else {\n          rightPos = coords(to - 1, \"right\");\n          if (dir == \"rtl\") {\n            var tmp = leftPos;\n            leftPos = rightPos;\n            rightPos = tmp;\n          }\n          left = leftPos.left;\n          right = rightPos.right;\n        }\n        if (fromArg == null && from == 0)\n          left = leftSide;\n        if (rightPos.top - leftPos.top > 3) {\n          add(left, leftPos.top, null, leftPos.bottom);\n          left = leftSide;\n          if (leftPos.bottom < rightPos.top)\n            add(left, leftPos.bottom, null, rightPos.top);\n        }\n        if (toArg == null && to == lineLen)\n          right = rightSide;\n        if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left)\n          start = leftPos;\n        if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right)\n          end = rightPos;\n        if (left < leftSide + 1)\n          left = leftSide;\n        add(left, rightPos.top, right - left, rightPos.bottom);\n      });\n      return {\n        start: start,\n        end: end\n      };\n    }\n    var sFrom = range.from(),\n        sTo = range.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line),\n          toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        add(leftSide, leftEnd.bottom, null, rightStart.top);\n    }\n    output.appendChild(fragment);\n  }\n  function restartBlink(cm) {\n    if (!cm.state.focused)\n      return;\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      display.blinker = setInterval(function() {\n        display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate);\n    else if (cm.options.cursorBlinkRate < 0)\n      display.cursorDiv.style.visibility = \"hidden\";\n  }\n  function startWorker(cm, time) {\n    if (cm.doc.mode.startState && cm.doc.frontier < cm.display.viewTo)\n      cm.state.highlight.set(time, bind(highlightWorker, cm));\n  }\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.frontier < doc.first)\n      doc.frontier = doc.first;\n    if (doc.frontier >= cm.display.viewTo)\n      return;\n    var end = +new Date + cm.options.workTime;\n    var state = copyState(doc.mode, getStateBefore(cm, doc.frontier));\n    var changedLines = [];\n    doc.iter(doc.frontier, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function(line) {\n      if (doc.frontier >= cm.display.viewFrom) {\n        var oldStyles = line.styles,\n            tooLong = line.text.length > cm.options.maxHighlightLength;\n        var highlighted = highlightLine(cm, line, tooLong ? copyState(doc.mode, state) : state, true);\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses,\n            newCls = highlighted.classes;\n        if (newCls)\n          line.styleClasses = newCls;\n        else if (oldCls)\n          line.styleClasses = null;\n        var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i)\n          ischange = oldStyles[i] != line.styles[i];\n        if (ischange)\n          changedLines.push(doc.frontier);\n        line.stateAfter = tooLong ? state : copyState(doc.mode, state);\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          processLine(cm, line.text, state);\n        line.stateAfter = doc.frontier % 5 == 0 ? copyState(doc.mode, state) : null;\n      }\n      ++doc.frontier;\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true;\n      }\n    });\n    if (changedLines.length)\n      runInOp(cm, function() {\n        for (var i = 0; i < changedLines.length; i++)\n          regLineChange(cm, changedLines[i], \"text\");\n      });\n  }\n  function findStartLine(cm, n, precise) {\n    var minindent,\n        minline,\n        doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first)\n        return doc.first;\n      var line = getLine(doc, search - 1);\n      if (line.stateAfter && (!precise || search <= doc.frontier))\n        return search;\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline;\n  }\n  function getStateBefore(cm, n, precise) {\n    var doc = cm.doc,\n        display = cm.display;\n    if (!doc.mode.startState)\n      return true;\n    var pos = findStartLine(cm, n, precise),\n        state = pos > doc.first && getLine(doc, pos - 1).stateAfter;\n    if (!state)\n      state = startState(doc.mode);\n    else\n      state = copyState(doc.mode, state);\n    doc.iter(pos, n, function(line) {\n      processLine(cm, line.text, state);\n      var save = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo;\n      line.stateAfter = save ? copyState(doc.mode, state) : null;\n      ++pos;\n    });\n    if (precise)\n      doc.frontier = pos;\n    return state;\n  }\n  function paddingTop(display) {\n    return display.lineSpace.offsetTop;\n  }\n  function paddingVert(display) {\n    return display.mover.offsetHeight - display.lineSpace.offsetHeight;\n  }\n  function paddingH(display) {\n    if (display.cachedPaddingH)\n      return display.cachedPaddingH;\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {\n      left: parseInt(style.paddingLeft),\n      right: parseInt(style.paddingRight)\n    };\n    if (!isNaN(data.left) && !isNaN(data.right))\n      display.cachedPaddingH = data;\n    return data;\n  }\n  function scrollGap(cm) {\n    return scrollerGap - cm.display.nativeBarWidth;\n  }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;\n  }\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i],\n              next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            heights.push((cur.bottom + next.top) / 2 - rect.top);\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      return {\n        map: lineView.measure.map,\n        cache: lineView.measure.cache\n      };\n    for (var i = 0; i < lineView.rest.length; i++)\n      if (lineView.rest[i] == line)\n        return {\n          map: lineView.measure.maps[i],\n          cache: lineView.measure.caches[i]\n        };\n    for (var i = 0; i < lineView.rest.length; i++)\n      if (lineNo(lineView.rest[i]) > lineN)\n        return {\n          map: lineView.measure.maps[i],\n          cache: lineView.measure.caches[i],\n          before: true\n        };\n  }\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view;\n  }\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);\n  }\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      return cm.display.view[findViewIndex(cm, lineN)];\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      return ext;\n  }\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      view = updateExternalMeasurement(cm, line);\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line,\n      view: view,\n      rect: null,\n      map: info.map,\n      cache: info.cache,\n      before: info.before,\n      hasHeights: false\n    };\n  }\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before)\n      ch = -1;\n    var key = ch + (bias || \"\"),\n        found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        prepared.rect = prepared.view.text.getBoundingClientRect();\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus)\n        prepared.cache[key] = found;\n    }\n    return {\n      left: found.left,\n      right: found.right,\n      top: varHeight ? found.rtop : found.top,\n      bottom: varHeight ? found.rbottom : found.bottom\n    };\n  }\n  var nullRect = {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  };\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node,\n        start,\n        end,\n        collapse;\n    for (var i = 0; i < map.length; i += 3) {\n      var mStart = map[i],\n          mEnd = map[i + 1];\n      if (ch < mStart) {\n        start = 0;\n        end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd)\n          collapse = \"right\";\n      }\n      if (start != null) {\n        node = map[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          collapse = bias;\n        if (bias == \"left\" && start == 0)\n          while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          }\n        if (bias == \"right\" && start == mEnd - mStart)\n          while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          }\n        break;\n      }\n    }\n    return {\n      node: node,\n      start: start,\n      end: end,\n      collapse: collapse,\n      coverStart: mStart,\n      coverEnd: mEnd\n    };\n  }\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node,\n        start = place.start,\n        end = place.end,\n        collapse = place.collapse;\n    var rect;\n    if (node.nodeType == 3) {\n      for (var i = 0; i < 4; i++) {\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start)))\n          --start;\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end)))\n          ++end;\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {\n          rect = node.parentNode.getBoundingClientRect();\n        } else if (ie && cm.options.lineWrapping) {\n          var rects = range(node, start, end).getClientRects();\n          if (rects.length)\n            rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n          else\n            rect = nullRect;\n        } else {\n          rect = range(node, start, end).getBoundingClientRect() || nullRect;\n        }\n        if (rect.left || rect.right || start == 0)\n          break;\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11)\n        rect = maybeUpdateRectForZooming(cm.display.measure, rect);\n    } else {\n      if (start > 0)\n        collapse = bias = \"right\";\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n      else\n        rect = node.getBoundingClientRect();\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        rect = {\n          left: rSpan.left,\n          right: rSpan.left + charWidth(cm.display),\n          top: rSpan.top,\n          bottom: rSpan.bottom\n        };\n      else\n        rect = nullRect;\n    }\n    var rtop = rect.top - prepared.rect.top,\n        rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    for (var i = 0; i < heights.length - 1; i++)\n      if (mid < heights[i])\n        break;\n    var top = i ? heights[i - 1] : 0,\n        bot = heights[i];\n    var result = {\n      left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n      right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n      top: top,\n      bottom: bot\n    };\n    if (!rect.left && !rect.right)\n      result.bogus = true;\n    if (!cm.options.singleCursorHeightPerLine) {\n      result.rtop = rtop;\n      result.rbottom = rbot;\n    }\n    return result;\n  }\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      return rect;\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {\n      left: rect.left * scaleX,\n      right: rect.right * scaleX,\n      top: rect.top * scaleY,\n      bottom: rect.bottom * scaleY\n    };\n  }\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest)\n        for (var i = 0; i < lineView.rest.length; i++)\n          lineView.measure.caches[i] = {};\n    }\n  }\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      clearLineMeasurementCacheFor(cm.display.view[i]);\n  }\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping)\n      cm.display.maxLineChanged = true;\n    cm.display.lineNumChars = null;\n  }\n  function pageScrollX() {\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft;\n  }\n  function pageScrollY() {\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop;\n  }\n  function intoCoordSystem(cm, lineObj, rect, context) {\n    if (lineObj.widgets)\n      for (var i = 0; i < lineObj.widgets.length; ++i)\n        if (lineObj.widgets[i].above) {\n          var size = widgetHeight(lineObj.widgets[i]);\n          rect.top += size;\n          rect.bottom += size;\n        }\n    if (context == \"line\")\n      return rect;\n    if (!context)\n      context = \"local\";\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\")\n      yOff += paddingTop(cm.display);\n    else\n      yOff -= cm.display.viewOffset;\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff;\n      rect.right += xOff;\n    }\n    rect.top += yOff;\n    rect.bottom += yOff;\n    return rect;\n  }\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\")\n      return coords;\n    var left = coords.left,\n        top = coords.top;\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {\n      left: left - lineSpaceBox.left,\n      top: top - lineSpaceBox.top\n    };\n  }\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj)\n      lineObj = getLine(cm.doc, pos.line);\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);\n  }\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure)\n      preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right)\n        m.left = m.right;\n      else\n        m.right = m.left;\n      return intoCoordSystem(cm, lineObj, m, context);\n    }\n    function getBidi(ch, partPos) {\n      var part = order[partPos],\n          right = part.level % 2;\n      if (ch == bidiLeft(part) && partPos && part.level < order[partPos - 1].level) {\n        part = order[--partPos];\n        ch = bidiRight(part) - (part.level % 2 ? 0 : 1);\n        right = true;\n      } else if (ch == bidiRight(part) && partPos < order.length - 1 && part.level < order[partPos + 1].level) {\n        part = order[++partPos];\n        ch = bidiLeft(part) - part.level % 2;\n        right = false;\n      }\n      if (right && ch == part.to && ch > part.from)\n        return get(ch - 1);\n      return get(ch, right);\n    }\n    var order = getOrder(lineObj),\n        ch = pos.ch;\n    if (!order)\n      return get(ch);\n    var partPos = getBidiPartAt(order, ch);\n    var val = getBidi(ch, partPos);\n    if (bidiOther != null)\n      val.other = getBidi(ch, bidiOther);\n    return val;\n  }\n  function estimateCoords(cm, pos) {\n    var left = 0,\n        pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping)\n      left = charWidth(cm.display) * pos.ch;\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {\n      left: left,\n      right: left,\n      top: top,\n      bottom: top + lineObj.height\n    };\n  }\n  function PosWithInfo(line, ch, outside, xRel) {\n    var pos = Pos(line, ch);\n    pos.xRel = xRel;\n    if (outside)\n      pos.outside = true;\n    return pos;\n  }\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0)\n      return PosWithInfo(doc.first, 0, true, -1);\n    var lineN = lineAtHeight(doc, y),\n        last = doc.first + doc.size - 1;\n    if (lineN > last)\n      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, true, 1);\n    if (x < 0)\n      x = 0;\n    var lineObj = getLine(doc, lineN);\n    for (; ; ) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var merged = collapsedSpanAtEnd(lineObj);\n      var mergedPos = merged && merged.find(0, true);\n      if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0))\n        lineN = lineNo(lineObj = mergedPos.to.line);\n      else\n        return found;\n    }\n  }\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    var innerOff = y - heightAtLine(lineObj);\n    var wrongLine = false,\n        adjust = 2 * cm.display.wrapper.clientWidth;\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    function getX(ch) {\n      var sp = cursorCoords(cm, Pos(lineNo, ch), \"line\", lineObj, preparedMeasure);\n      wrongLine = true;\n      if (innerOff > sp.bottom)\n        return sp.left - adjust;\n      else if (innerOff < sp.top)\n        return sp.left + adjust;\n      else\n        wrongLine = false;\n      return sp.left;\n    }\n    var bidi = getOrder(lineObj),\n        dist = lineObj.text.length;\n    var from = lineLeft(lineObj),\n        to = lineRight(lineObj);\n    var fromX = getX(from),\n        fromOutside = wrongLine,\n        toX = getX(to),\n        toOutside = wrongLine;\n    if (x > toX)\n      return PosWithInfo(lineNo, to, toOutside, 1);\n    for (; ; ) {\n      if (bidi ? to == from || to == moveVisually(lineObj, from, 1) : to - from <= 1) {\n        var ch = x < fromX || x - fromX <= toX - x ? from : to;\n        var xDiff = x - (ch == from ? fromX : toX);\n        while (isExtendingChar(lineObj.text.charAt(ch)))\n          ++ch;\n        var pos = PosWithInfo(lineNo, ch, ch == from ? fromOutside : toOutside, xDiff < -1 ? -1 : xDiff > 1 ? 1 : 0);\n        return pos;\n      }\n      var step = Math.ceil(dist / 2),\n          middle = from + step;\n      if (bidi) {\n        middle = from;\n        for (var i = 0; i < step; ++i)\n          middle = moveVisually(lineObj, middle, 1);\n      }\n      var middleX = getX(middle);\n      if (middleX > x) {\n        to = middle;\n        toX = middleX;\n        if (toOutside = wrongLine)\n          toX += 1000;\n        dist = step;\n      } else {\n        from = middle;\n        fromX = middleX;\n        fromOutside = wrongLine;\n        dist -= step;\n      }\n    }\n  }\n  var measureText;\n  function textHeight(display) {\n    if (display.cachedTextHeight != null)\n      return display.cachedTextHeight;\n    if (measureText == null) {\n      measureText = elt(\"pre\");\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3)\n      display.cachedTextHeight = height;\n    removeChildren(display.measure);\n    return height || 1;\n  }\n  function charWidth(display) {\n    if (display.cachedCharWidth != null)\n      return display.cachedCharWidth;\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor]);\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(),\n        width = (rect.right - rect.left) / 10;\n    if (width > 2)\n      display.cachedCharWidth = width;\n    return width || 10;\n  }\n  var operationGroup = null;\n  var nextOpId = 0;\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,\n      startHeight: cm.doc.height,\n      forceUpdate: false,\n      updateInput: null,\n      typing: false,\n      changeObjs: null,\n      cursorActivityHandlers: null,\n      cursorActivityCalled: 0,\n      selectionChanged: false,\n      updateMaxLine: false,\n      scrollLeft: null,\n      scrollTop: null,\n      scrollToPos: null,\n      focus: false,\n      id: ++nextOpId\n    };\n    if (operationGroup) {\n      operationGroup.ops.push(cm.curOp);\n    } else {\n      cm.curOp.ownsGroup = operationGroup = {\n        ops: [cm.curOp],\n        delayedCallbacks: []\n      };\n    }\n  }\n  function fireCallbacksForOps(group) {\n    var callbacks = group.delayedCallbacks,\n        i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        callbacks[i].call(null);\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);\n      }\n    } while (i < callbacks.length);\n  }\n  function endOperation(cm) {\n    var op = cm.curOp,\n        group = op.ownsGroup;\n    if (!group)\n      return;\n    try {\n      fireCallbacksForOps(group);\n    } finally {\n      operationGroup = null;\n      for (var i = 0; i < group.ops.length; i++)\n        group.ops[i].cm.curOp = null;\n      endOperations(group);\n    }\n  }\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++)\n      endOperation_R1(ops[i]);\n    for (var i = 0; i < ops.length; i++)\n      endOperation_W1(ops[i]);\n    for (var i = 0; i < ops.length; i++)\n      endOperation_R2(ops[i]);\n    for (var i = 0; i < ops.length; i++)\n      endOperation_W2(ops[i]);\n    for (var i = 0; i < ops.length; i++)\n      endOperation_finish(ops[i]);\n  }\n  function endOperation_R1(op) {\n    var cm = op.cm,\n        display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine)\n      findMaxLine(cm);\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && {\n      top: op.scrollTop,\n      ensure: op.scrollToPos\n    }, op.forceUpdate);\n  }\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n  function endOperation_R2(op) {\n    var cm = op.cm,\n        display = cm.display;\n    if (op.updatedDisplay)\n      updateHeightsInViewport(cm);\n    op.barMeasure = measureForScrollbars(cm);\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n    if (op.updatedDisplay || op.selectionChanged)\n      op.preparedSelection = display.input.prepareSelection();\n  }\n  function endOperation_W2(op) {\n    var cm = op.cm;\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);\n      cm.display.maxLineChanged = false;\n    }\n    if (op.preparedSelection)\n      cm.display.input.showSelection(op.preparedSelection);\n    if (op.updatedDisplay)\n      setDocumentHeight(cm, op.barMeasure);\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      updateScrollbars(cm, op.barMeasure);\n    if (op.selectionChanged)\n      restartBlink(cm);\n    if (cm.state.focused && op.updateInput)\n      cm.display.input.reset(op.typing);\n    if (op.focus && op.focus == activeElt())\n      ensureFocus(op.cm);\n  }\n  function endOperation_finish(op) {\n    var cm = op.cm,\n        display = cm.display,\n        doc = cm.doc;\n    if (op.updatedDisplay)\n      postUpdateDisplay(cm, op.update);\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      display.wheelStartX = display.wheelStartY = null;\n    if (op.scrollTop != null && (display.scroller.scrollTop != op.scrollTop || op.forceScroll)) {\n      doc.scrollTop = Math.max(0, Math.min(display.scroller.scrollHeight - display.scroller.clientHeight, op.scrollTop));\n      display.scrollbars.setScrollTop(doc.scrollTop);\n      display.scroller.scrollTop = doc.scrollTop;\n    }\n    if (op.scrollLeft != null && (display.scroller.scrollLeft != op.scrollLeft || op.forceScroll)) {\n      doc.scrollLeft = Math.max(0, Math.min(display.scroller.scrollWidth - displayWidth(cm), op.scrollLeft));\n      display.scrollbars.setScrollLeft(doc.scrollLeft);\n      display.scroller.scrollLeft = doc.scrollLeft;\n      alignHorizontally(cm);\n    }\n    if (op.scrollToPos) {\n      var coords = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from), clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      if (op.scrollToPos.isCursor && cm.state.focused)\n        maybeScrollWindow(cm, coords);\n    }\n    var hidden = op.maybeHiddenMarkers,\n        unhidden = op.maybeUnhiddenMarkers;\n    if (hidden)\n      for (var i = 0; i < hidden.length; ++i)\n        if (!hidden[i].lines.length)\n          signal(hidden[i], \"hide\");\n    if (unhidden)\n      for (var i = 0; i < unhidden.length; ++i)\n        if (unhidden[i].lines.length)\n          signal(unhidden[i], \"unhide\");\n    if (display.wrapper.offsetHeight)\n      doc.scrollTop = cm.display.scroller.scrollTop;\n    if (op.changeObjs)\n      signal(cm, \"changes\", cm, op.changeObjs);\n    if (op.update)\n      op.update.finish();\n  }\n  function runInOp(cm, f) {\n    if (cm.curOp)\n      return f();\n    startOperation(cm);\n    try {\n      return f();\n    } finally {\n      endOperation(cm);\n    }\n  }\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp)\n        return f.apply(cm, arguments);\n      startOperation(cm);\n      try {\n        return f.apply(cm, arguments);\n      } finally {\n        endOperation(cm);\n      }\n    };\n  }\n  function methodOp(f) {\n    return function() {\n      if (this.curOp)\n        return f.apply(this, arguments);\n      startOperation(this);\n      try {\n        return f.apply(this, arguments);\n      } finally {\n        endOperation(this);\n      }\n    };\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp)\n        return f.apply(this, arguments);\n      startOperation(cm);\n      try {\n        return f.apply(this, arguments);\n      } finally {\n        endOperation(cm);\n      }\n    };\n  }\n  function LineView(doc, line, lineN) {\n    this.line = line;\n    this.rest = visualLineContinued(line);\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n  function buildViewArray(cm, from, to) {\n    var array = [],\n        nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array;\n  }\n  function regChange(cm, from, to, lendiff) {\n    if (from == null)\n      from = cm.doc.first;\n    if (to == null)\n      to = cm.doc.first + cm.doc.size;\n    if (!lendiff)\n      lendiff = 0;\n    var display = cm.display;\n    if (lendiff && to < display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      display.updateLineNumbers = from;\n    cm.curOp.viewChanged = true;\n    if (from >= display.viewTo) {\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        resetView(cm);\n    } else if (to <= display.viewFrom) {\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) {\n      resetView(cm);\n    } else if (from <= display.viewFrom) {\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) {\n      var cut = viewCuttingPoint(cm, from, from, -1);\n      if (cut) {\n        display.view = display.view.slice(0, cut.index);\n        display.viewTo = cut.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else {\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        ext.lineN += lendiff;\n      else if (from < ext.lineN + ext.size)\n        display.externalMeasured = null;\n    }\n  }\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display,\n        ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      display.externalMeasured = null;\n    if (line < display.viewFrom || line >= display.viewTo)\n      return;\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null)\n      return;\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1)\n      arr.push(type);\n  }\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo)\n      return null;\n    n -= cm.display.viewFrom;\n    if (n < 0)\n      return null;\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0)\n        return i;\n    }\n  }\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN),\n        diff,\n        view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      return {\n        index: index,\n        lineN: newN\n      };\n    for (var i = 0,\n        n = cm.display.viewFrom; i < index; i++)\n      n += view[i].size;\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1)\n          return null;\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff;\n      newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1))\n        return null;\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {\n      index: index,\n      lineN: newN\n    };\n  }\n  function adjustView(cm, from, to) {\n    var display = cm.display,\n        view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);\n      else if (display.viewFrom < from)\n        display.view = display.view.slice(findViewIndex(cm, from));\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));\n      else if (display.viewTo > to)\n        display.view = display.view.slice(0, findViewIndex(cm, to));\n    }\n    display.viewTo = to;\n  }\n  function countDirtyView(cm) {\n    var view = cm.display.view,\n        dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes))\n        ++dirty;\n    }\n    return dirty;\n  }\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    if (ie && ie_version < 11)\n      on(d.scroller, \"dblclick\", operation(cm, function(e) {\n        if (signalDOMEvent(cm, e))\n          return;\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e))\n          return;\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      }));\n    else\n      on(d.scroller, \"dblclick\", function(e) {\n        signalDOMEvent(cm, e) || e_preventDefault(e);\n      });\n    if (!captureRightClick)\n      on(d.scroller, \"contextmenu\", function(e) {\n        onContextMenu(cm, e);\n      });\n    var touchFinished,\n        prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function() {\n          d.activeTouch = null;\n        }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    ;\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1)\n        return false;\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1;\n    }\n    function farAway(touch, other) {\n      if (other.left == null)\n        return true;\n      var dx = other.left - touch.left,\n          dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20;\n    }\n    on(d.scroller, \"touchstart\", function(e) {\n      if (!isMouseLikeTouchEvent(e)) {\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {\n          start: now,\n          moved: false,\n          prev: now - prevTouch.end <= 300 ? prevTouch : null\n        };\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function() {\n      if (d.activeTouch)\n        d.activeTouch.moved = true;\n    });\n    on(d.scroller, \"touchend\", function(e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null && !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"),\n            range;\n        if (!touch.prev || farAway(touch, touch.prev))\n          range = new Range(pos, pos);\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev))\n          range = cm.findWordAt(pos);\n        else\n          range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)));\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n    on(d.scroller, \"scroll\", function() {\n      if (d.scroller.clientHeight) {\n        setScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n    on(d.scroller, \"mousewheel\", function(e) {\n      onScrollWheel(cm, e);\n    });\n    on(d.scroller, \"DOMMouseScroll\", function(e) {\n      onScrollWheel(cm, e);\n    });\n    on(d.wrapper, \"scroll\", function() {\n      d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;\n    });\n    d.dragFunctions = {\n      enter: function(e) {\n        if (!signalDOMEvent(cm, e))\n          e_stop(e);\n      },\n      over: function(e) {\n        if (!signalDOMEvent(cm, e)) {\n          onDragOver(cm, e);\n          e_stop(e);\n        }\n      },\n      start: function(e) {\n        onDragStart(cm, e);\n      },\n      drop: operation(cm, onDrop),\n      leave: function() {\n        clearDragCursor(cm);\n      }\n    };\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function(e) {\n      onKeyUp.call(cm, e);\n    });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", bind(onFocus, cm));\n    on(inp, \"blur\", bind(onBlur, cm));\n  }\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != CodeMirror.Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n  function onResize(cm) {\n    var d = cm.display;\n    if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth)\n      return;\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") || (n.parentNode == display.sizer && n != display.mover))\n        return true;\n    }\n  }\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\")\n      return null;\n    var x,\n        y,\n        space = display.lineSpace.getBoundingClientRect();\n    try {\n      x = e.clientX - space.left;\n      y = e.clientY - space.top;\n    } catch (e) {\n      return null;\n    }\n    var coords = coordsChar(cm, x, y),\n        line;\n    if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords;\n  }\n  function onMouseDown(e) {\n    var cm = this,\n        display = cm.display;\n    if (display.activeTouch && display.input.supportsTouch() || signalDOMEvent(cm, e))\n      return;\n    display.shift = e.shiftKey;\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        display.scroller.draggable = false;\n        setTimeout(function() {\n          display.scroller.draggable = true;\n        }, 100);\n      }\n      return;\n    }\n    if (clickInGutter(cm, e))\n      return;\n    var start = posFromMouse(cm, e);\n    window.focus();\n    switch (e_button(e)) {\n      case 1:\n        if (cm.state.selectingText)\n          cm.state.selectingText(e);\n        else if (start)\n          leftButtonDown(cm, e, start);\n        else if (e_target(e) == display.scroller)\n          e_preventDefault(e);\n        break;\n      case 2:\n        if (webkit)\n          cm.state.lastMiddleDown = +new Date;\n        if (start)\n          extendSelection(cm.doc, start);\n        setTimeout(function() {\n          display.input.focus();\n        }, 20);\n        e_preventDefault(e);\n        break;\n      case 3:\n        if (captureRightClick)\n          onContextMenu(cm, e);\n        else\n          delayBlurEvent(cm);\n        break;\n    }\n  }\n  var lastClick,\n      lastDoubleClick;\n  function leftButtonDown(cm, e, start) {\n    if (ie)\n      setTimeout(bind(ensureFocus, cm), 0);\n    else\n      cm.curOp.focus = activeElt();\n    var now = +new Date,\n        type;\n    if (lastDoubleClick && lastDoubleClick.time > now - 400 && cmp(lastDoubleClick.pos, start) == 0) {\n      type = \"triple\";\n    } else if (lastClick && lastClick.time > now - 400 && cmp(lastClick.pos, start) == 0) {\n      type = \"double\";\n      lastDoubleClick = {\n        time: now,\n        pos: start\n      };\n    } else {\n      type = \"single\";\n      lastClick = {\n        time: now,\n        pos: start\n      };\n    }\n    var sel = cm.doc.sel,\n        modifier = mac ? e.metaKey : e.ctrlKey,\n        contained;\n    if (cm.options.dragDrop && dragAndDrop && !isReadOnly(cm) && type == \"single\" && (contained = sel.contains(start)) > -1 && (cmp((contained = sel.ranges[contained]).from(), start) < 0 || start.xRel > 0) && (cmp(contained.to(), start) > 0 || start.xRel < 0))\n      leftButtonStartDrag(cm, e, start, modifier);\n    else\n      leftButtonSelect(cm, e, start, type, modifier);\n  }\n  function leftButtonStartDrag(cm, e, start, modifier) {\n    var display = cm.display,\n        startTime = +new Date;\n    var dragEnd = operation(cm, function(e2) {\n      if (webkit)\n        display.scroller.draggable = false;\n      cm.state.draggingText = false;\n      off(document, \"mouseup\", dragEnd);\n      off(display.scroller, \"drop\", dragEnd);\n      if (Math.abs(e.clientX - e2.clientX) + Math.abs(e.clientY - e2.clientY) < 10) {\n        e_preventDefault(e2);\n        if (!modifier && +new Date - 200 < startTime)\n          extendSelection(cm.doc, start);\n        if (webkit || ie && ie_version == 9)\n          setTimeout(function() {\n            document.body.focus();\n            display.input.focus();\n          }, 20);\n        else\n          display.input.focus();\n      }\n    });\n    if (webkit)\n      display.scroller.draggable = true;\n    cm.state.draggingText = dragEnd;\n    if (display.scroller.dragDrop)\n      display.scroller.dragDrop();\n    on(document, \"mouseup\", dragEnd);\n    on(display.scroller, \"drop\", dragEnd);\n  }\n  function leftButtonSelect(cm, e, start, type, addNew) {\n    var display = cm.display,\n        doc = cm.doc;\n    e_preventDefault(e);\n    var ourRange,\n        ourIndex,\n        startSel = doc.sel,\n        ranges = startSel.ranges;\n    if (addNew && !e.shiftKey) {\n      ourIndex = doc.sel.contains(start);\n      if (ourIndex > -1)\n        ourRange = ranges[ourIndex];\n      else\n        ourRange = new Range(start, start);\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n    if (e.altKey) {\n      type = \"rect\";\n      if (!addNew)\n        ourRange = new Range(start, start);\n      start = posFromMouse(cm, e, true, true);\n      ourIndex = -1;\n    } else if (type == \"double\") {\n      var word = cm.findWordAt(start);\n      if (cm.display.shift || doc.extend)\n        ourRange = extendRange(doc, ourRange, word.anchor, word.head);\n      else\n        ourRange = word;\n    } else if (type == \"triple\") {\n      var line = new Range(Pos(start.line, 0), clipPos(doc, Pos(start.line + 1, 0)));\n      if (cm.display.shift || doc.extend)\n        ourRange = extendRange(doc, ourRange, line.anchor, line.head);\n      else\n        ourRange = line;\n    } else {\n      ourRange = extendRange(doc, ourRange, start);\n    }\n    if (!addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex), {\n        scroll: false,\n        origin: \"*mouse\"\n      });\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && type == \"single\" && !e.shiftKey) {\n      setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0), {\n        scroll: false,\n        origin: \"*mouse\"\n      });\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0)\n        return;\n      lastPos = pos;\n      if (type == \"rect\") {\n        var ranges = [],\n            tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol),\n            right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line),\n            end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {\n          var text = getLine(doc, line).text,\n              leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));\n          else if (text.length > leftPos)\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));\n        }\n        if (!ranges.length)\n          ranges.push(new Range(start, start));\n        setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex), {\n          origin: \"*mouse\",\n          scroll: false\n        });\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var anchor = oldRange.anchor,\n            head = pos;\n        if (type != \"single\") {\n          if (type == \"double\")\n            var range = cm.findWordAt(pos);\n          else\n            var range = new Range(Pos(pos.line, 0), clipPos(doc, Pos(pos.line + 1, 0)));\n          if (cmp(range.anchor, anchor) > 0) {\n            head = range.head;\n            anchor = minPos(oldRange.from(), range.anchor);\n          } else {\n            head = range.anchor;\n            anchor = maxPos(oldRange.to(), range.head);\n          }\n        }\n        var ranges = startSel.ranges.slice(0);\n        ranges[ourIndex] = new Range(clipPos(doc, anchor), head);\n        setSelection(doc, normalizeSelection(ranges, ourIndex), sel_mouse);\n      }\n    }\n    var editorSize = display.wrapper.getBoundingClientRect();\n    var counter = 0;\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, type == \"rect\");\n      if (!cur)\n        return;\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          setTimeout(operation(cm, function() {\n            if (counter == curCount)\n              extend(e);\n          }), 150);\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside)\n          setTimeout(operation(cm, function() {\n            if (counter != curCount)\n              return;\n            display.scroller.scrollTop += outside;\n            extend(e);\n          }), 50);\n      }\n    }\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      e_preventDefault(e);\n      display.input.focus();\n      off(document, \"mousemove\", move);\n      off(document, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n    var move = operation(cm, function(e) {\n      if (!e_button(e))\n        done(e);\n      else\n        extend(e);\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(document, \"mousemove\", move);\n    on(document, \"mouseup\", up);\n  }\n  function gutterEvent(cm, e, type, prevent, signalfn) {\n    try {\n      var mX = e.clientX,\n          mY = e.clientY;\n    } catch (e) {\n      return false;\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right))\n      return false;\n    if (prevent)\n      e_preventDefault(e);\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n    if (mY > lineBox.bottom || !hasHandler(cm, type))\n      return e_defaultPrevented(e);\n    mY -= lineBox.top - display.viewOffset;\n    for (var i = 0; i < cm.options.gutters.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.options.gutters[i];\n        signalfn(cm, type, cm, line, gutter, e);\n        return e_defaultPrevented(e);\n      }\n    }\n  }\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true, signalLater);\n  }\n  var lastDrop = 0;\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      return;\n    e_preventDefault(e);\n    if (ie)\n      lastDrop = +new Date;\n    var pos = posFromMouse(cm, e, true),\n        files = e.dataTransfer.files;\n    if (!pos || isReadOnly(cm))\n      return;\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length,\n          text = Array(n),\n          read = 0;\n      var loadFile = function(file, i) {\n        if (cm.options.allowDropFileTypes && indexOf(cm.options.allowDropFileTypes, file.type) == -1)\n          return;\n        var reader = new FileReader;\n        reader.onload = operation(cm, function() {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content))\n            content = \"\";\n          text[i] = content;\n          if (++read == n) {\n            pos = clipPos(cm.doc, pos);\n            var change = {\n              from: pos,\n              to: pos,\n              text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n              origin: \"paste\"\n            };\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n          }\n        });\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < n; ++i)\n        loadFile(files[i], i);\n    } else {\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        setTimeout(function() {\n          cm.display.input.focus();\n        }, 20);\n        return;\n      }\n      try {\n        var text = e.dataTransfer.getData(\"Text\");\n        if (text) {\n          if (cm.state.draggingText && !(mac ? e.altKey : e.ctrlKey))\n            var selected = cm.listSelections();\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected)\n            for (var i = 0; i < selected.length; ++i)\n              replaceRange(cm.doc, \"\", selected[i].anchor, selected[i].head, \"drag\");\n          cm.replaceSelection(text, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      } catch (e) {}\n    }\n  }\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) {\n      e_stop(e);\n      return;\n    }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      return;\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto)\n        img.parentNode.removeChild(img);\n    }\n  }\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos)\n      return;\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n  function setScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2)\n      return;\n    cm.doc.scrollTop = val;\n    if (!gecko)\n      updateDisplaySimple(cm, {top: val});\n    if (cm.display.scroller.scrollTop != val)\n      cm.display.scroller.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (gecko)\n      updateDisplaySimple(cm);\n    startWorker(cm, 100);\n  }\n  function setScrollLeft(cm, val, isScroller) {\n    if (isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2)\n      return;\n    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val)\n      cm.display.scroller.scrollLeft = val;\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n  var wheelSamples = 0,\n      wheelPixelsPerUnit = null;\n  if (ie)\n    wheelPixelsPerUnit = -.53;\n  else if (gecko)\n    wheelPixelsPerUnit = 15;\n  else if (chrome)\n    wheelPixelsPerUnit = -.7;\n  else if (safari)\n    wheelPixelsPerUnit = -1 / 3;\n  var wheelEventDelta = function(e) {\n    var dx = e.wheelDeltaX,\n        dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS)\n      dx = e.detail;\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS)\n      dy = e.detail;\n    else if (dy == null)\n      dy = e.wheelDelta;\n    return {\n      x: dx,\n      y: dy\n    };\n  };\n  CodeMirror.wheelEventPixels = function(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta;\n  };\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e),\n        dx = delta.x,\n        dy = delta.y;\n    var display = cm.display,\n        scroll = display.scroller;\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY))\n      return;\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target,\n          view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer;\n          }\n        }\n      }\n    }\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY)\n        setScrollTop(cm, Math.max(0, Math.min(scroll.scrollTop + dy * wheelPixelsPerUnit, scroll.scrollHeight - scroll.clientHeight)));\n      setScrollLeft(cm, Math.max(0, Math.min(scroll.scrollLeft + dx * wheelPixelsPerUnit, scroll.scrollWidth - scroll.clientWidth)));\n      if (!dy || (dy && canScrollY))\n        e_preventDefault(e);\n      display.wheelStartX = null;\n      return;\n    }\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop,\n          bot = top + display.wrapper.clientHeight;\n      if (pixels < 0)\n        top = Math.max(0, top + pixels - 50);\n      else\n        bot = Math.min(cm.doc.height, bot + pixels + 50);\n      updateDisplaySimple(cm, {\n        top: top,\n        bottom: bot\n      });\n    }\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft;\n        display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx;\n        display.wheelDY = dy;\n        setTimeout(function() {\n          if (display.wheelStartX == null)\n            return;\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) || (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample)\n            return;\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx;\n        display.wheelDY += dy;\n      }\n    }\n  }\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound)\n        return false;\n    }\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift,\n        done = false;\n    try {\n      if (isReadOnly(cm))\n        cm.state.suppressEdits = true;\n      if (dropShift)\n        cm.display.shift = false;\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done;\n  }\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result)\n        return result;\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm)) || lookupKey(name, cm.options.keyMap, handle, cm);\n  }\n  var stopSeq = new Delayed;\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name))\n        return \"handled\";\n      stopSeq.set(50, function() {\n        if (cm.state.keySeq == seq) {\n          cm.state.keySeq = null;\n          cm.display.input.reset();\n        }\n      });\n      name = seq + \" \" + name;\n    }\n    var result = lookupKeyForEditor(cm, name, handle);\n    if (result == \"multi\")\n      cm.state.keySeq = name;\n    if (result == \"handled\")\n      signalLater(cm, \"keyHandled\", cm, name, e);\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n    if (seq && !result && /\\'$/.test(name)) {\n      e_preventDefault(e);\n      return true;\n    }\n    return !!result;\n  }\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name)\n      return false;\n    if (e.shiftKey && !cm.state.keySeq) {\n      return dispatchKey(cm, \"Shift-\" + name, e, function(b) {\n        return doHandleBinding(cm, b, true);\n      }) || dispatchKey(cm, name, e, function(b) {\n        if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n          return doHandleBinding(cm, b);\n      });\n    } else {\n      return dispatchKey(cm, name, e, function(b) {\n        return doHandleBinding(cm, b);\n      });\n    }\n  }\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function(b) {\n      return doHandleBinding(cm, b, true);\n    });\n  }\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    cm.curOp.focus = activeElt();\n    if (signalDOMEvent(cm, e))\n      return;\n    if (ie && ie_version < 11 && e.keyCode == 27)\n      e.returnValue = false;\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        cm.replaceSelection(\"\", null, \"cut\");\n    }\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      showCrossHair(cm);\n  }\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n  function onKeyUp(e) {\n    if (e.keyCode == 16)\n      this.doc.sel.shift = false;\n    signalDOMEvent(this, e);\n  }\n  function onKeyPress(e) {\n    var cm = this;\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey)\n      return;\n    var keyCode = e.keyCode,\n        charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {\n      lastStoppedKey = null;\n      e_preventDefault(e);\n      return;\n    }\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e))\n      return;\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    if (handleCharBinding(cm, e, ch))\n      return;\n    cm.display.input.onKeyPress(e);\n  }\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function() {\n      if (cm.state.delayingBlurEvent) {\n        cm.state.delayingBlurEvent = false;\n        onBlur(cm);\n      }\n    }, 100);\n  }\n  function onFocus(cm) {\n    if (cm.state.delayingBlurEvent)\n      cm.state.delayingBlurEvent = false;\n    if (cm.options.readOnly == \"nocursor\")\n      return;\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit)\n          setTimeout(function() {\n            cm.display.input.reset(true);\n          }, 20);\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm) {\n    if (cm.state.delayingBlurEvent)\n      return;\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function() {\n      if (!cm.state.focused)\n        cm.display.shift = false;\n    }, 150);\n  }\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e))\n      return;\n    if (signalDOMEvent(cm, e, \"contextmenu\"))\n      return;\n    cm.display.input.onContextMenu(e);\n  }\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\"))\n      return false;\n    return gutterEvent(cm, e, \"gutterContextMenu\", false, signal);\n  }\n  var changeEnd = CodeMirror.changeEnd = function(change) {\n    if (!change.text)\n      return change.to;\n    return Pos(change.from.line + change.text.length - 1, lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));\n  };\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0)\n      return pos;\n    if (cmp(pos, change.to) <= 0)\n      return changeEnd(change);\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1,\n        ch = pos.ch;\n    if (pos.line == change.to.line)\n      ch += changeEnd(change).ch - change.to.ch;\n    return Pos(line, ch);\n  }\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change), adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(out, doc.sel.primIndex);\n  }\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      return Pos(nw.line, pos.ch - old.ch + nw.ch);\n    else\n      return Pos(nw.line + (pos.line - old.line), pos.ch);\n  }\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0),\n        newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i],\n            inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex);\n  }\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function() {\n        this.canceled = true;\n      }\n    };\n    if (update)\n      obj.update = function(from, to, text, origin) {\n        if (from)\n          this.from = clipPos(doc, from);\n        if (to)\n          this.to = clipPos(doc, to);\n        if (text)\n          this.text = text;\n        if (origin !== undefined)\n          this.origin = origin;\n      };\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm)\n      signal(doc.cm, \"beforeChange\", doc.cm, obj);\n    if (obj.canceled)\n      return null;\n    return {\n      from: obj.from,\n      to: obj.to,\n      text: obj.text,\n      origin: obj.origin\n    };\n  }\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp)\n        return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);\n      if (doc.cm.state.suppressEdits)\n        return;\n    }\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change)\n        return;\n    }\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        makeChangeInner(doc, {\n          from: split[i].from,\n          to: split[i].to,\n          text: i ? [\"\"] : change.text\n        });\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0)\n      return;\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n    linkedDocs(doc, function(doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    if (doc.cm && doc.cm.state.suppressEdits)\n      return;\n    var hist = doc.history,\n        event,\n        selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone,\n        dest = type == \"undo\" ? hist.undone : hist.done;\n    for (var i = 0; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        break;\n    }\n    if (i == source.length)\n      return;\n    hist.lastOrigin = hist.lastSelOrigin = null;\n    for (; ; ) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return;\n        }\n        selAfter = event;\n      } else\n        break;\n    }\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({\n      changes: antiChanges,\n      generation: hist.generation\n    });\n    hist.generation = event.generation || ++hist.maxGeneration;\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n    for (var i = event.changes.length - 1; i >= 0; --i) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return;\n      }\n      antiChanges.push(historyChangeFromChange(doc, change));\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm)\n        doc.cm.scrollIntoView({\n          from: change.from,\n          to: changeEnd(change)\n        });\n      var rebased = [];\n      linkedDocs(doc, function(doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    }\n  }\n  function shiftDoc(doc, distance) {\n    if (distance == 0)\n      return;\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function(range) {\n      return new Range(Pos(range.anchor.line + distance, range.anchor.ch), Pos(range.head.line + distance, range.head.ch));\n    }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display,\n          l = d.viewFrom; l < d.viewTo; l++)\n        regLineChange(doc.cm, l, \"gutter\");\n    }\n  }\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return;\n    }\n    if (change.from.line > doc.lastLine())\n      return;\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {\n        from: Pos(doc.first, 0),\n        to: Pos(change.to.line + shift, change.to.ch),\n        text: [lst(change.text)],\n        origin: change.origin\n      };\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {\n        from: change.from,\n        to: Pos(last, getLine(doc, last).text.length),\n        text: [change.text[0]],\n        origin: change.origin\n      };\n    }\n    change.removed = getBetween(doc, change.from, change.to);\n    if (!selAfter)\n      selAfter = computeSelAfterChange(doc, change);\n    if (doc.cm)\n      makeChangeSingleDocInEditor(doc.cm, change, spans);\n    else\n      updateDoc(doc, change, spans);\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n  }\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc,\n        display = cm.display,\n        from = change.from,\n        to = change.to;\n    var recomputeMaxLength = false,\n        checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function(line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true;\n        }\n      });\n    }\n    if (doc.sel.contains(change.from, change.to) > -1)\n      signalCursorActivity(cm);\n    updateDoc(doc, change, spans, estimateHeight(cm));\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function(line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength)\n        cm.curOp.updateMaxLine = true;\n    }\n    doc.frontier = Math.min(doc.frontier, from.line);\n    startWorker(cm, 400);\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    if (change.full)\n      regChange(cm);\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      regLineChange(cm, from.line, \"text\");\n    else\n      regChange(cm, from.line, to.line + 1, lendiff);\n    var changesHandler = hasHandler(cm, \"changes\"),\n        changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from,\n        to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler)\n        signalLater(cm, \"change\", cm, obj);\n      if (changesHandler)\n        (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);\n    }\n    cm.display.selForContextMenu = null;\n  }\n  function replaceRange(doc, code, from, to, origin) {\n    if (!to)\n      to = from;\n    if (cmp(to, from) < 0) {\n      var tmp = to;\n      to = from;\n      from = tmp;\n    }\n    if (typeof code == \"string\")\n      code = doc.splitLines(code);\n    makeChange(doc, {\n      from: from,\n      to: to,\n      text: code,\n      origin: origin\n    });\n  }\n  function maybeScrollWindow(cm, coords) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\"))\n      return;\n    var display = cm.display,\n        box = display.sizer.getBoundingClientRect(),\n        doScroll = null;\n    if (coords.top + box.top < 0)\n      doScroll = true;\n    else if (coords.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight))\n      doScroll = false;\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, \"position: absolute; top: \" + (coords.top - display.viewOffset - paddingTop(cm.display)) + \"px; height: \" + (coords.bottom - coords.top + scrollGap(cm) + display.barHeight) + \"px; left: \" + coords.left + \"px; width: 2px;\");\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null)\n      margin = 0;\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false,\n          coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      var scrollPos = calculateScrollPos(cm, Math.min(coords.left, endCoords.left), Math.min(coords.top, endCoords.top) - margin, Math.max(coords.left, endCoords.left), Math.max(coords.bottom, endCoords.bottom) + margin);\n      var startTop = cm.doc.scrollTop,\n          startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        setScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1)\n          changed = true;\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1)\n          changed = true;\n      }\n      if (!changed)\n        break;\n    }\n    return coords;\n  }\n  function scrollIntoView(cm, x1, y1, x2, y2) {\n    var scrollPos = calculateScrollPos(cm, x1, y1, x2, y2);\n    if (scrollPos.scrollTop != null)\n      setScrollTop(cm, scrollPos.scrollTop);\n    if (scrollPos.scrollLeft != null)\n      setScrollLeft(cm, scrollPos.scrollLeft);\n  }\n  function calculateScrollPos(cm, x1, y1, x2, y2) {\n    var display = cm.display,\n        snapMargin = textHeight(cm.display);\n    if (y1 < 0)\n      y1 = 0;\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm),\n        result = {};\n    if (y2 - y1 > screen)\n      y2 = y1 + screen;\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = y1 < snapMargin,\n        atBottom = y2 > docBottom - snapMargin;\n    if (y1 < screentop) {\n      result.scrollTop = atTop ? 0 : y1;\n    } else if (y2 > screentop + screen) {\n      var newTop = Math.min(y1, (atBottom ? docBottom : y2) - screen);\n      if (newTop != screentop)\n        result.scrollTop = newTop;\n    }\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n    var tooWide = x2 - x1 > screenw;\n    if (tooWide)\n      x2 = x1 + screenw;\n    if (x1 < 10)\n      result.scrollLeft = 0;\n    else if (x1 < screenleft)\n      result.scrollLeft = Math.max(0, x1 - (tooWide ? 0 : 10));\n    else if (x2 > screenw + screenleft - 3)\n      result.scrollLeft = x2 + (tooWide ? 0 : 10) - screenw;\n    return result;\n  }\n  function addToScrollPos(cm, left, top) {\n    if (left != null || top != null)\n      resolveScrollToPos(cm);\n    if (left != null)\n      cm.curOp.scrollLeft = (cm.curOp.scrollLeft == null ? cm.doc.scrollLeft : cm.curOp.scrollLeft) + left;\n    if (top != null)\n      cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor(),\n        from = cur,\n        to = cur;\n    if (!cm.options.lineWrapping) {\n      from = cur.ch ? Pos(cur.line, cur.ch - 1) : cur;\n      to = Pos(cur.line, cur.ch + 1);\n    }\n    cm.curOp.scrollToPos = {\n      from: from,\n      to: to,\n      margin: cm.options.cursorScrollMargin,\n      isCursor: true\n    };\n  }\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from),\n          to = estimateCoords(cm, range.to);\n      var sPos = calculateScrollPos(cm, Math.min(from.left, to.left), Math.min(from.top, to.top) - range.margin, Math.max(from.right, to.right), Math.max(from.bottom, to.bottom) + range.margin);\n      cm.scrollTo(sPos.scrollLeft, sPos.scrollTop);\n    }\n  }\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc,\n        state;\n    if (how == null)\n      how = \"add\";\n    if (how == \"smart\") {\n      if (!doc.mode.indent)\n        how = \"prev\";\n      else\n        state = getStateBefore(cm, n);\n    }\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n),\n        curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter)\n      line.stateAfter = null;\n    var curSpaceString = line.text.match(/^\\s*/)[0],\n        indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive)\n          return;\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first)\n        indentation = countColumn(getLine(doc, n - 1).text, null, tabSize);\n      else\n        indentation = 0;\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n    var indentString = \"\",\n        pos = 0;\n    if (cm.options.indentWithTabs)\n      for (var i = Math.floor(indentation / tabSize); i; --i) {\n        pos += tabSize;\n        indentString += \"\\t\";\n      }\n    if (pos < indentation)\n      indentString += spaceStr(indentation - pos);\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true;\n    } else {\n      for (var i = 0; i < doc.sel.ranges.length; i++) {\n        var range = doc.sel.ranges[i];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i, new Range(pos, pos));\n          break;\n        }\n      }\n    }\n  }\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle,\n        line = handle;\n    if (typeof handle == \"number\")\n      line = getLine(doc, clipLine(doc, handle));\n    else\n      no = lineNo(handle);\n    if (no == null)\n      return null;\n    if (op(line, no) && doc.cm)\n      regLineChange(doc.cm, no, changeType);\n    return line;\n  }\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges,\n        kill = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break;\n        }\n      }\n      kill.push(toKill);\n    }\n    runInOp(cm, function() {\n      for (var i = kill.length - 1; i >= 0; i--)\n        replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\");\n      ensureCursorVisible(cm);\n    });\n  }\n  function findPosH(doc, pos, dir, unit, visually) {\n    var line = pos.line,\n        ch = pos.ch,\n        origDir = dir;\n    var lineObj = getLine(doc, line);\n    var possible = true;\n    function findNextLine() {\n      var l = line + dir;\n      if (l < doc.first || l >= doc.first + doc.size)\n        return (possible = false);\n      line = l;\n      return lineObj = getLine(doc, l);\n    }\n    function moveOnce(boundToLine) {\n      var next = (visually ? moveVisually : moveLogically)(lineObj, ch, dir, true);\n      if (next == null) {\n        if (!boundToLine && findNextLine()) {\n          if (visually)\n            ch = (dir < 0 ? lineRight : lineLeft)(lineObj);\n          else\n            ch = dir < 0 ? lineObj.text.length : 0;\n        } else\n          return (possible = false);\n      } else\n        ch = next;\n      return true;\n    }\n    if (unit == \"char\")\n      moveOnce();\n    else if (unit == \"column\")\n      moveOnce(true);\n    else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null,\n          group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true; ; first = false) {\n        if (dir < 0 && !moveOnce(!first))\n          break;\n        var cur = lineObj.text.charAt(ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\" : group && cur == \"\\n\" ? \"n\" : !group || /\\s/.test(cur) ? null : \"p\";\n        if (group && !first && !type)\n          type = \"s\";\n        if (sawType && sawType != type) {\n          if (dir < 0) {\n            dir = 1;\n            moveOnce();\n          }\n          break;\n        }\n        if (type)\n          sawType = type;\n        if (dir > 0 && !moveOnce(!first))\n          break;\n      }\n    }\n    var result = skipAtomic(doc, Pos(line, ch), origDir, true);\n    if (!possible)\n      result.hitSide = true;\n    return result;\n  }\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc,\n        x = pos.left,\n        y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      y = pos.top + dir * (pageSize - (dir < 0 ? 1.5 : .5) * textHeight(cm.display));\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    for (; ; ) {\n      var target = coordsChar(cm, x, y);\n      if (!target.outside)\n        break;\n      if (dir < 0 ? y <= 0 : y >= doc.height) {\n        target.hitSide = true;\n        break;\n      }\n      y += dir * 5;\n    }\n    return target;\n  }\n  CodeMirror.prototype = {\n    constructor: CodeMirror,\n    focus: function() {\n      window.focus();\n      this.display.input.focus();\n    },\n    setOption: function(option, value) {\n      var options = this.options,\n          old = options[option];\n      if (options[option] == value && option != \"mode\")\n        return;\n      options[option] = value;\n      if (optionHandlers.hasOwnProperty(option))\n        operation(this, optionHandlers[option])(this, value, old);\n    },\n    getOption: function(option) {\n      return this.options[option];\n    },\n    getDoc: function() {\n      return this.doc;\n    },\n    addKeyMap: function(map, bottom) {\n      this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n    },\n    removeKeyMap: function(map) {\n      var maps = this.state.keyMaps;\n      for (var i = 0; i < maps.length; ++i)\n        if (maps[i] == map || maps[i].name == map) {\n          maps.splice(i, 1);\n          return true;\n        }\n    },\n    addOverlay: methodOp(function(spec, options) {\n      var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n      if (mode.startState)\n        throw new Error(\"Overlays may not be stateful.\");\n      this.state.overlays.push({\n        mode: mode,\n        modeSpec: spec,\n        opaque: options && options.opaque\n      });\n      this.state.modeGen++;\n      regChange(this);\n    }),\n    removeOverlay: methodOp(function(spec) {\n      var overlays = this.state.overlays;\n      for (var i = 0; i < overlays.length; ++i) {\n        var cur = overlays[i].modeSpec;\n        if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n          overlays.splice(i, 1);\n          this.state.modeGen++;\n          regChange(this);\n          return;\n        }\n      }\n    }),\n    indentLine: methodOp(function(n, dir, aggressive) {\n      if (typeof dir != \"string\" && typeof dir != \"number\") {\n        if (dir == null)\n          dir = this.options.smartIndent ? \"smart\" : \"prev\";\n        else\n          dir = dir ? \"add\" : \"subtract\";\n      }\n      if (isLine(this.doc, n))\n        indentLine(this, n, dir, aggressive);\n    }),\n    indentSelection: methodOp(function(how) {\n      var ranges = this.doc.sel.ranges,\n          end = -1;\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (!range.empty()) {\n          var from = range.from(),\n              to = range.to();\n          var start = Math.max(end, from.line);\n          end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n          for (var j = start; j < end; ++j)\n            indentLine(this, j, how);\n          var newRanges = this.doc.sel.ranges;\n          if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n            replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);\n        } else if (range.head.line > end) {\n          indentLine(this, range.head.line, how, true);\n          end = range.head.line;\n          if (i == this.doc.sel.primIndex)\n            ensureCursorVisible(this);\n        }\n      }\n    }),\n    getTokenAt: function(pos, precise) {\n      return takeToken(this, pos, precise);\n    },\n    getLineTokens: function(line, precise) {\n      return takeToken(this, Pos(line), precise, true);\n    },\n    getTokenTypeAt: function(pos) {\n      pos = clipPos(this.doc, pos);\n      var styles = getLineStyles(this, getLine(this.doc, pos.line));\n      var before = 0,\n          after = (styles.length - 1) / 2,\n          ch = pos.ch;\n      var type;\n      if (ch == 0)\n        type = styles[2];\n      else\n        for (; ; ) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch)\n            after = mid;\n          else if (styles[mid * 2 + 1] < ch)\n            before = mid + 1;\n          else {\n            type = styles[mid * 2 + 2];\n            break;\n          }\n        }\n      var cut = type ? type.indexOf(\"cm-overlay \") : -1;\n      return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);\n    },\n    getModeAt: function(pos) {\n      var mode = this.doc.mode;\n      if (!mode.innerMode)\n        return mode;\n      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;\n    },\n    getHelper: function(pos, type) {\n      return this.getHelpers(pos, type)[0];\n    },\n    getHelpers: function(pos, type) {\n      var found = [];\n      if (!helpers.hasOwnProperty(type))\n        return found;\n      var help = helpers[type],\n          mode = this.getModeAt(pos);\n      if (typeof mode[type] == \"string\") {\n        if (help[mode[type]])\n          found.push(help[mode[type]]);\n      } else if (mode[type]) {\n        for (var i = 0; i < mode[type].length; i++) {\n          var val = help[mode[type][i]];\n          if (val)\n            found.push(val);\n        }\n      } else if (mode.helperType && help[mode.helperType]) {\n        found.push(help[mode.helperType]);\n      } else if (help[mode.name]) {\n        found.push(help[mode.name]);\n      }\n      for (var i = 0; i < help._global.length; i++) {\n        var cur = help._global[i];\n        if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n          found.push(cur.val);\n      }\n      return found;\n    },\n    getStateAfter: function(line, precise) {\n      var doc = this.doc;\n      line = clipLine(doc, line == null ? doc.first + doc.size - 1 : line);\n      return getStateBefore(this, line + 1, precise);\n    },\n    cursorCoords: function(start, mode) {\n      var pos,\n          range = this.doc.sel.primary();\n      if (start == null)\n        pos = range.head;\n      else if (typeof start == \"object\")\n        pos = clipPos(this.doc, start);\n      else\n        pos = start ? range.from() : range.to();\n      return cursorCoords(this, pos, mode || \"page\");\n    },\n    charCoords: function(pos, mode) {\n      return charCoords(this, clipPos(this.doc, pos), mode || \"page\");\n    },\n    coordsChar: function(coords, mode) {\n      coords = fromCoordSystem(this, coords, mode || \"page\");\n      return coordsChar(this, coords.left, coords.top);\n    },\n    lineAtHeight: function(height, mode) {\n      height = fromCoordSystem(this, {\n        top: height,\n        left: 0\n      }, mode || \"page\").top;\n      return lineAtHeight(this.doc, height + this.display.viewOffset);\n    },\n    heightAtLine: function(line, mode) {\n      var end = false,\n          lineObj;\n      if (typeof line == \"number\") {\n        var last = this.doc.first + this.doc.size - 1;\n        if (line < this.doc.first)\n          line = this.doc.first;\n        else if (line > last) {\n          line = last;\n          end = true;\n        }\n        lineObj = getLine(this.doc, line);\n      } else {\n        lineObj = line;\n      }\n      return intoCoordSystem(this, lineObj, {\n        top: 0,\n        left: 0\n      }, mode || \"page\").top + (end ? this.doc.height - heightAtLine(lineObj) : 0);\n    },\n    defaultTextHeight: function() {\n      return textHeight(this.display);\n    },\n    defaultCharWidth: function() {\n      return charWidth(this.display);\n    },\n    setGutterMarker: methodOp(function(line, gutterID, value) {\n      return changeLine(this.doc, line, \"gutter\", function(line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers))\n          line.gutterMarkers = null;\n        return true;\n      });\n    }),\n    clearGutter: methodOp(function(gutterID) {\n      var cm = this,\n          doc = cm.doc,\n          i = doc.first;\n      doc.iter(function(line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          line.gutterMarkers[gutterID] = null;\n          regLineChange(cm, i, \"gutter\");\n          if (isEmpty(line.gutterMarkers))\n            line.gutterMarkers = null;\n        }\n        ++i;\n      });\n    }),\n    lineInfo: function(line) {\n      if (typeof line == \"number\") {\n        if (!isLine(this.doc, line))\n          return null;\n        var n = line;\n        line = getLine(this.doc, line);\n        if (!line)\n          return null;\n      } else {\n        var n = lineNo(line);\n        if (n == null)\n          return null;\n      }\n      return {\n        line: n,\n        handle: line,\n        text: line.text,\n        gutterMarkers: line.gutterMarkers,\n        textClass: line.textClass,\n        bgClass: line.bgClass,\n        wrapClass: line.wrapClass,\n        widgets: line.widgets\n      };\n    },\n    getViewport: function() {\n      return {\n        from: this.display.viewFrom,\n        to: this.display.viewTo\n      };\n    },\n    addWidget: function(pos, node, scroll, vert, horiz) {\n      var display = this.display;\n      pos = cursorCoords(this, clipPos(this.doc, pos));\n      var top = pos.bottom,\n          left = pos.left;\n      node.style.position = \"absolute\";\n      node.setAttribute(\"cm-ignore-events\", \"true\");\n      this.display.input.setUneditable(node);\n      display.sizer.appendChild(node);\n      if (vert == \"over\") {\n        top = pos.top;\n      } else if (vert == \"above\" || vert == \"near\") {\n        var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n            hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n          top = pos.top - node.offsetHeight;\n        else if (pos.bottom + node.offsetHeight <= vspace)\n          top = pos.bottom;\n        if (left + node.offsetWidth > hspace)\n          left = hspace - node.offsetWidth;\n      }\n      node.style.top = top + \"px\";\n      node.style.left = node.style.right = \"\";\n      if (horiz == \"right\") {\n        left = display.sizer.clientWidth - node.offsetWidth;\n        node.style.right = \"0px\";\n      } else {\n        if (horiz == \"left\")\n          left = 0;\n        else if (horiz == \"middle\")\n          left = (display.sizer.clientWidth - node.offsetWidth) / 2;\n        node.style.left = left + \"px\";\n      }\n      if (scroll)\n        scrollIntoView(this, left, top, left + node.offsetWidth, top + node.offsetHeight);\n    },\n    triggerOnKeyDown: methodOp(onKeyDown),\n    triggerOnKeyPress: methodOp(onKeyPress),\n    triggerOnKeyUp: onKeyUp,\n    execCommand: function(cmd) {\n      if (commands.hasOwnProperty(cmd))\n        return commands[cmd].call(null, this);\n    },\n    triggerElectric: methodOp(function(text) {\n      triggerElectric(this, text);\n    }),\n    findPosH: function(from, amount, unit, visually) {\n      var dir = 1;\n      if (amount < 0) {\n        dir = -1;\n        amount = -amount;\n      }\n      for (var i = 0,\n          cur = clipPos(this.doc, from); i < amount; ++i) {\n        cur = findPosH(this.doc, cur, dir, unit, visually);\n        if (cur.hitSide)\n          break;\n      }\n      return cur;\n    },\n    moveH: methodOp(function(dir, unit) {\n      var cm = this;\n      cm.extendSelectionsBy(function(range) {\n        if (cm.display.shift || cm.doc.extend || range.empty())\n          return findPosH(cm.doc, range.head, dir, unit, cm.options.rtlMoveVisually);\n        else\n          return dir < 0 ? range.from() : range.to();\n      }, sel_move);\n    }),\n    deleteH: methodOp(function(dir, unit) {\n      var sel = this.doc.sel,\n          doc = this.doc;\n      if (sel.somethingSelected())\n        doc.replaceSelection(\"\", null, \"+delete\");\n      else\n        deleteNearSelection(this, function(range) {\n          var other = findPosH(doc, range.head, dir, unit, false);\n          return dir < 0 ? {\n            from: other,\n            to: range.head\n          } : {\n            from: range.head,\n            to: other\n          };\n        });\n    }),\n    findPosV: function(from, amount, unit, goalColumn) {\n      var dir = 1,\n          x = goalColumn;\n      if (amount < 0) {\n        dir = -1;\n        amount = -amount;\n      }\n      for (var i = 0,\n          cur = clipPos(this.doc, from); i < amount; ++i) {\n        var coords = cursorCoords(this, cur, \"div\");\n        if (x == null)\n          x = coords.left;\n        else\n          coords.left = x;\n        cur = findPosV(this, coords, dir, unit);\n        if (cur.hitSide)\n          break;\n      }\n      return cur;\n    },\n    moveV: methodOp(function(dir, unit) {\n      var cm = this,\n          doc = this.doc,\n          goals = [];\n      var collapse = !cm.display.shift && !doc.extend && doc.sel.somethingSelected();\n      doc.extendSelectionsBy(function(range) {\n        if (collapse)\n          return dir < 0 ? range.from() : range.to();\n        var headPos = cursorCoords(cm, range.head, \"div\");\n        if (range.goalColumn != null)\n          headPos.left = range.goalColumn;\n        goals.push(headPos.left);\n        var pos = findPosV(cm, headPos, dir, unit);\n        if (unit == \"page\" && range == doc.sel.primary())\n          addToScrollPos(cm, null, charCoords(cm, pos, \"div\").top - headPos.top);\n        return pos;\n      }, sel_move);\n      if (goals.length)\n        for (var i = 0; i < doc.sel.ranges.length; i++)\n          doc.sel.ranges[i].goalColumn = goals[i];\n    }),\n    findWordAt: function(pos) {\n      var doc = this.doc,\n          line = getLine(doc, pos.line).text;\n      var start = pos.ch,\n          end = pos.ch;\n      if (line) {\n        var helper = this.getHelper(pos, \"wordChars\");\n        if ((pos.xRel < 0 || end == line.length) && start)\n          --start;\n        else\n          ++end;\n        var startChar = line.charAt(start);\n        var check = isWordChar(startChar, helper) ? function(ch) {\n          return isWordChar(ch, helper);\n        } : /\\s/.test(startChar) ? function(ch) {\n          return /\\s/.test(ch);\n        } : function(ch) {\n          return !/\\s/.test(ch) && !isWordChar(ch);\n        };\n        while (start > 0 && check(line.charAt(start - 1)))\n          --start;\n        while (end < line.length && check(line.charAt(end)))\n          ++end;\n      }\n      return new Range(Pos(pos.line, start), Pos(pos.line, end));\n    },\n    toggleOverwrite: function(value) {\n      if (value != null && value == this.state.overwrite)\n        return;\n      if (this.state.overwrite = !this.state.overwrite)\n        addClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n      else\n        rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n      signal(this, \"overwriteToggle\", this, this.state.overwrite);\n    },\n    hasFocus: function() {\n      return this.display.input.getField() == activeElt();\n    },\n    scrollTo: methodOp(function(x, y) {\n      if (x != null || y != null)\n        resolveScrollToPos(this);\n      if (x != null)\n        this.curOp.scrollLeft = x;\n      if (y != null)\n        this.curOp.scrollTop = y;\n    }),\n    getScrollInfo: function() {\n      var scroller = this.display.scroller;\n      return {\n        left: scroller.scrollLeft,\n        top: scroller.scrollTop,\n        height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n        width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n        clientHeight: displayHeight(this),\n        clientWidth: displayWidth(this)\n      };\n    },\n    scrollIntoView: methodOp(function(range, margin) {\n      if (range == null) {\n        range = {\n          from: this.doc.sel.primary().head,\n          to: null\n        };\n        if (margin == null)\n          margin = this.options.cursorScrollMargin;\n      } else if (typeof range == \"number\") {\n        range = {\n          from: Pos(range, 0),\n          to: null\n        };\n      } else if (range.from == null) {\n        range = {\n          from: range,\n          to: null\n        };\n      }\n      if (!range.to)\n        range.to = range.from;\n      range.margin = margin || 0;\n      if (range.from.line != null) {\n        resolveScrollToPos(this);\n        this.curOp.scrollToPos = range;\n      } else {\n        var sPos = calculateScrollPos(this, Math.min(range.from.left, range.to.left), Math.min(range.from.top, range.to.top) - range.margin, Math.max(range.from.right, range.to.right), Math.max(range.from.bottom, range.to.bottom) + range.margin);\n        this.scrollTo(sPos.scrollLeft, sPos.scrollTop);\n      }\n    }),\n    setSize: methodOp(function(width, height) {\n      var cm = this;\n      function interpret(val) {\n        return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val;\n      }\n      if (width != null)\n        cm.display.wrapper.style.width = interpret(width);\n      if (height != null)\n        cm.display.wrapper.style.height = interpret(height);\n      if (cm.options.lineWrapping)\n        clearLineMeasurementCache(this);\n      var lineNo = cm.display.viewFrom;\n      cm.doc.iter(lineNo, cm.display.viewTo, function(line) {\n        if (line.widgets)\n          for (var i = 0; i < line.widgets.length; i++)\n            if (line.widgets[i].noHScroll) {\n              regLineChange(cm, lineNo, \"widget\");\n              break;\n            }\n        ++lineNo;\n      });\n      cm.curOp.forceUpdate = true;\n      signal(cm, \"refresh\", this);\n    }),\n    operation: function(f) {\n      return runInOp(this, f);\n    },\n    refresh: methodOp(function() {\n      var oldHeight = this.display.cachedTextHeight;\n      regChange(this);\n      this.curOp.forceUpdate = true;\n      clearCaches(this);\n      this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop);\n      updateGutterSpace(this);\n      if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)\n        estimateLineHeights(this);\n      signal(this, \"refresh\", this);\n    }),\n    swapDoc: methodOp(function(doc) {\n      var old = this.doc;\n      old.cm = null;\n      attachDoc(this, doc);\n      clearCaches(this);\n      this.display.input.reset();\n      this.scrollTo(doc.scrollLeft, doc.scrollTop);\n      this.curOp.forceScroll = true;\n      signalLater(this, \"swapDoc\", this, old);\n      return old;\n    }),\n    getInputField: function() {\n      return this.display.input.getField();\n    },\n    getWrapperElement: function() {\n      return this.display.wrapper;\n    },\n    getScrollerElement: function() {\n      return this.display.scroller;\n    },\n    getGutterElement: function() {\n      return this.display.gutters;\n    }\n  };\n  eventMixin(CodeMirror);\n  var defaults = CodeMirror.defaults = {};\n  var optionHandlers = CodeMirror.optionHandlers = {};\n  function option(name, deflt, handle, notOnInit) {\n    CodeMirror.defaults[name] = deflt;\n    if (handle)\n      optionHandlers[name] = notOnInit ? function(cm, val, old) {\n        if (old != Init)\n          handle(cm, val, old);\n      } : handle;\n  }\n  var Init = CodeMirror.Init = {toString: function() {\n      return \"CodeMirror.Init\";\n    }};\n  option(\"value\", \"\", function(cm, val) {\n    cm.setValue(val);\n  }, true);\n  option(\"mode\", null, function(cm, val) {\n    cm.doc.modeOption = val;\n    loadMode(cm);\n  }, true);\n  option(\"indentUnit\", 2, loadMode, true);\n  option(\"indentWithTabs\", false);\n  option(\"smartIndent\", true);\n  option(\"tabSize\", 4, function(cm) {\n    resetModeState(cm);\n    clearCaches(cm);\n    regChange(cm);\n  }, true);\n  option(\"lineSeparator\", null, function(cm, val) {\n    cm.doc.lineSep = val;\n    if (!val)\n      return;\n    var newBreaks = [],\n        lineNo = cm.doc.first;\n    cm.doc.iter(function(line) {\n      for (var pos = 0; ; ) {\n        var found = line.text.indexOf(val, pos);\n        if (found == -1)\n          break;\n        pos = found + val.length;\n        newBreaks.push(Pos(lineNo, found));\n      }\n      lineNo++;\n    });\n    for (var i = newBreaks.length - 1; i >= 0; i--)\n      replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length));\n  });\n  option(\"specialChars\", /[\\t\\u0000-\\u0019\\u00ad\\u200b-\\u200f\\u2028\\u2029\\ufeff]/g, function(cm, val, old) {\n    cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n    if (old != CodeMirror.Init)\n      cm.refresh();\n  });\n  option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function(cm) {\n    cm.refresh();\n  }, true);\n  option(\"electricChars\", true);\n  option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function() {\n    throw new Error(\"inputStyle can not (yet) be changed in a running editor\");\n  }, true);\n  option(\"rtlMoveVisually\", !windows);\n  option(\"wholeLineUpdateBefore\", true);\n  option(\"theme\", \"default\", function(cm) {\n    themeChanged(cm);\n    guttersChanged(cm);\n  }, true);\n  option(\"keyMap\", \"default\", function(cm, val, old) {\n    var next = getKeyMap(val);\n    var prev = old != CodeMirror.Init && getKeyMap(old);\n    if (prev && prev.detach)\n      prev.detach(cm, next);\n    if (next.attach)\n      next.attach(cm, prev || null);\n  });\n  option(\"extraKeys\", null);\n  option(\"lineWrapping\", false, wrappingChanged, true);\n  option(\"gutters\", [], function(cm) {\n    setGuttersForLineNumbers(cm.options);\n    guttersChanged(cm);\n  }, true);\n  option(\"fixedGutter\", true, function(cm, val) {\n    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n    cm.refresh();\n  }, true);\n  option(\"coverGutterNextToScrollbar\", false, function(cm) {\n    updateScrollbars(cm);\n  }, true);\n  option(\"scrollbarStyle\", \"native\", function(cm) {\n    initScrollbars(cm);\n    updateScrollbars(cm);\n    cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n    cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n  }, true);\n  option(\"lineNumbers\", false, function(cm) {\n    setGuttersForLineNumbers(cm.options);\n    guttersChanged(cm);\n  }, true);\n  option(\"firstLineNumber\", 1, guttersChanged, true);\n  option(\"lineNumberFormatter\", function(integer) {\n    return integer;\n  }, guttersChanged, true);\n  option(\"showCursorWhenSelecting\", false, updateSelection, true);\n  option(\"resetSelectionOnContextMenu\", true);\n  option(\"lineWiseCopyCut\", true);\n  option(\"readOnly\", false, function(cm, val) {\n    if (val == \"nocursor\") {\n      onBlur(cm);\n      cm.display.input.blur();\n      cm.display.disabled = true;\n    } else {\n      cm.display.disabled = false;\n    }\n    cm.display.input.readOnlyChanged(val);\n  });\n  option(\"disableInput\", false, function(cm, val) {\n    if (!val)\n      cm.display.input.reset();\n  }, true);\n  option(\"dragDrop\", true, dragDropChanged);\n  option(\"allowDropFileTypes\", null);\n  option(\"cursorBlinkRate\", 530);\n  option(\"cursorScrollMargin\", 0);\n  option(\"cursorHeight\", 1, updateSelection, true);\n  option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n  option(\"workTime\", 100);\n  option(\"workDelay\", 100);\n  option(\"flattenSpans\", true, resetModeState, true);\n  option(\"addModeClass\", false, resetModeState, true);\n  option(\"pollInterval\", 100);\n  option(\"undoDepth\", 200, function(cm, val) {\n    cm.doc.history.undoDepth = val;\n  });\n  option(\"historyEventDelay\", 1250);\n  option(\"viewportMargin\", 10, function(cm) {\n    cm.refresh();\n  }, true);\n  option(\"maxHighlightLength\", 10000, resetModeState, true);\n  option(\"moveInputWithCursor\", true, function(cm, val) {\n    if (!val)\n      cm.display.input.resetPosition();\n  });\n  option(\"tabindex\", null, function(cm, val) {\n    cm.display.input.getField().tabIndex = val || \"\";\n  });\n  option(\"autofocus\", null);\n  var modes = CodeMirror.modes = {},\n      mimeModes = CodeMirror.mimeModes = {};\n  CodeMirror.defineMode = function(name, mode) {\n    if (!CodeMirror.defaults.mode && name != \"null\")\n      CodeMirror.defaults.mode = name;\n    if (arguments.length > 2)\n      mode.dependencies = Array.prototype.slice.call(arguments, 2);\n    modes[name] = mode;\n  };\n  CodeMirror.defineMIME = function(mime, spec) {\n    mimeModes[mime] = spec;\n  };\n  CodeMirror.resolveMode = function(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\")\n        found = {name: found};\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return CodeMirror.resolveMode(\"application/xml\");\n    }\n    if (typeof spec == \"string\")\n      return {name: spec};\n    else\n      return spec || {name: \"null\"};\n  };\n  CodeMirror.getMode = function(options, spec) {\n    var spec = CodeMirror.resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory)\n      return CodeMirror.getMode(options, \"text/plain\");\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop))\n          continue;\n        if (modeObj.hasOwnProperty(prop))\n          modeObj[\"_\" + prop] = modeObj[prop];\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType)\n      modeObj.helperType = spec.helperType;\n    if (spec.modeProps)\n      for (var prop in spec.modeProps)\n        modeObj[prop] = spec.modeProps[prop];\n    return modeObj;\n  };\n  CodeMirror.defineMode(\"null\", function() {\n    return {token: function(stream) {\n        stream.skipToEnd();\n      }};\n  });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n  var modeExtensions = CodeMirror.modeExtensions = {};\n  CodeMirror.extendMode = function(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  };\n  CodeMirror.defineExtension = function(name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function(name, func) {\n    Doc.prototype[name] = func;\n  };\n  CodeMirror.defineOption = option;\n  var initHooks = [];\n  CodeMirror.defineInitHook = function(f) {\n    initHooks.push(f);\n  };\n  var helpers = CodeMirror.helpers = {};\n  CodeMirror.registerHelper = function(type, name, value) {\n    if (!helpers.hasOwnProperty(type))\n      helpers[type] = CodeMirror[type] = {_global: []};\n    helpers[type][name] = value;\n  };\n  CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n    CodeMirror.registerHelper(type, name, value);\n    helpers[type]._global.push({\n      pred: predicate,\n      val: value\n    });\n  };\n  var copyState = CodeMirror.copyState = function(mode, state) {\n    if (state === true)\n      return state;\n    if (mode.copyState)\n      return mode.copyState(state);\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array)\n        val = val.concat([]);\n      nstate[n] = val;\n    }\n    return nstate;\n  };\n  var startState = CodeMirror.startState = function(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true;\n  };\n  CodeMirror.innerMode = function(mode, state) {\n    while (mode.innerMode) {\n      var info = mode.innerMode(state);\n      if (!info || info.mode == mode)\n        break;\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {\n      mode: mode,\n      state: state\n    };\n  };\n  var commands = CodeMirror.commands = {\n    selectAll: function(cm) {\n      cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n    },\n    singleSelection: function(cm) {\n      cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll);\n    },\n    killLine: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        if (range.empty()) {\n          var len = getLine(cm.doc, range.head.line).text.length;\n          if (range.head.ch == len && range.head.line < cm.lastLine())\n            return {\n              from: range.head,\n              to: Pos(range.head.line + 1, 0)\n            };\n          else\n            return {\n              from: range.head,\n              to: Pos(range.head.line, len)\n            };\n        } else {\n          return {\n            from: range.from(),\n            to: range.to()\n          };\n        }\n      });\n    },\n    deleteLine: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        return {\n          from: Pos(range.from().line, 0),\n          to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n        };\n      });\n    },\n    delLineLeft: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        return {\n          from: Pos(range.from().line, 0),\n          to: range.from()\n        };\n      });\n    },\n    delWrappedLineLeft: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var leftPos = cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n        return {\n          from: leftPos,\n          to: range.from()\n        };\n      });\n    },\n    delWrappedLineRight: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var rightPos = cm.coordsChar({\n          left: cm.display.lineDiv.offsetWidth + 100,\n          top: top\n        }, \"div\");\n        return {\n          from: range.from(),\n          to: rightPos\n        };\n      });\n    },\n    undo: function(cm) {\n      cm.undo();\n    },\n    redo: function(cm) {\n      cm.redo();\n    },\n    undoSelection: function(cm) {\n      cm.undoSelection();\n    },\n    redoSelection: function(cm) {\n      cm.redoSelection();\n    },\n    goDocStart: function(cm) {\n      cm.extendSelection(Pos(cm.firstLine(), 0));\n    },\n    goDocEnd: function(cm) {\n      cm.extendSelection(Pos(cm.lastLine()));\n    },\n    goLineStart: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        return lineStart(cm, range.head.line);\n      }, {\n        origin: \"+move\",\n        bias: 1\n      });\n    },\n    goLineStartSmart: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        return lineStartSmart(cm, range.head);\n      }, {\n        origin: \"+move\",\n        bias: 1\n      });\n    },\n    goLineEnd: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        return lineEnd(cm, range.head.line);\n      }, {\n        origin: \"+move\",\n        bias: -1\n      });\n    },\n    goLineRight: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({\n          left: cm.display.lineDiv.offsetWidth + 100,\n          top: top\n        }, \"div\");\n      }, sel_move);\n    },\n    goLineLeft: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n      }, sel_move);\n    },\n    goLineLeftSmart: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var pos = cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n        if (pos.ch < cm.getLine(pos.line).search(/\\S/))\n          return lineStartSmart(cm, range.head);\n        return pos;\n      }, sel_move);\n    },\n    goLineUp: function(cm) {\n      cm.moveV(-1, \"line\");\n    },\n    goLineDown: function(cm) {\n      cm.moveV(1, \"line\");\n    },\n    goPageUp: function(cm) {\n      cm.moveV(-1, \"page\");\n    },\n    goPageDown: function(cm) {\n      cm.moveV(1, \"page\");\n    },\n    goCharLeft: function(cm) {\n      cm.moveH(-1, \"char\");\n    },\n    goCharRight: function(cm) {\n      cm.moveH(1, \"char\");\n    },\n    goColumnLeft: function(cm) {\n      cm.moveH(-1, \"column\");\n    },\n    goColumnRight: function(cm) {\n      cm.moveH(1, \"column\");\n    },\n    goWordLeft: function(cm) {\n      cm.moveH(-1, \"word\");\n    },\n    goGroupRight: function(cm) {\n      cm.moveH(1, \"group\");\n    },\n    goGroupLeft: function(cm) {\n      cm.moveH(-1, \"group\");\n    },\n    goWordRight: function(cm) {\n      cm.moveH(1, \"word\");\n    },\n    delCharBefore: function(cm) {\n      cm.deleteH(-1, \"char\");\n    },\n    delCharAfter: function(cm) {\n      cm.deleteH(1, \"char\");\n    },\n    delWordBefore: function(cm) {\n      cm.deleteH(-1, \"word\");\n    },\n    delWordAfter: function(cm) {\n      cm.deleteH(1, \"word\");\n    },\n    delGroupBefore: function(cm) {\n      cm.deleteH(-1, \"group\");\n    },\n    delGroupAfter: function(cm) {\n      cm.deleteH(1, \"group\");\n    },\n    indentAuto: function(cm) {\n      cm.indentSelection(\"smart\");\n    },\n    indentMore: function(cm) {\n      cm.indentSelection(\"add\");\n    },\n    indentLess: function(cm) {\n      cm.indentSelection(\"subtract\");\n    },\n    insertTab: function(cm) {\n      cm.replaceSelection(\"\\t\");\n    },\n    insertSoftTab: function(cm) {\n      var spaces = [],\n          ranges = cm.listSelections(),\n          tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(new Array(tabSize - col % tabSize + 1).join(\" \"));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function(cm) {\n      if (cm.somethingSelected())\n        cm.indentSelection(\"add\");\n      else\n        cm.execCommand(\"insertTab\");\n    },\n    transposeChars: function(cm) {\n      runInOp(cm, function() {\n        var ranges = cm.listSelections(),\n            newSel = [];\n        for (var i = 0; i < ranges.length; i++) {\n          var cur = ranges[i].head,\n              line = getLine(cm.doc, cur.line).text;\n          if (line) {\n            if (cur.ch == line.length)\n              cur = new Pos(cur.line, cur.ch - 1);\n            if (cur.ch > 0) {\n              cur = new Pos(cur.line, cur.ch + 1);\n              cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2), Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n            } else if (cur.line > cm.doc.first) {\n              var prev = getLine(cm.doc, cur.line - 1).text;\n              if (prev)\n                cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1), Pos(cur.line - 1, prev.length - 1), Pos(cur.line, 1), \"+transpose\");\n            }\n          }\n          newSel.push(new Range(cur, cur));\n        }\n        cm.setSelections(newSel);\n      });\n    },\n    newlineAndIndent: function(cm) {\n      runInOp(cm, function() {\n        var len = cm.listSelections().length;\n        for (var i = 0; i < len; i++) {\n          var range = cm.listSelections()[i];\n          cm.replaceRange(cm.doc.lineSeparator(), range.anchor, range.head, \"+input\");\n          cm.indentLine(range.from().line + 1, null, true);\n        }\n        ensureCursorVisible(cm);\n      });\n    },\n    toggleOverwrite: function(cm) {\n      cm.toggleOverwrite();\n    }\n  };\n  var keyMap = CodeMirror.keyMap = {};\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\",\n    \"Right\": \"goCharRight\",\n    \"Up\": \"goLineUp\",\n    \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\",\n    \"Home\": \"goLineStartSmart\",\n    \"PageUp\": \"goPageUp\",\n    \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\",\n    \"Backspace\": \"delCharBefore\",\n    \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\",\n    \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\",\n    \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\",\n    \"Ctrl-D\": \"deleteLine\",\n    \"Ctrl-Z\": \"undo\",\n    \"Shift-Ctrl-Z\": \"redo\",\n    \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\",\n    \"Ctrl-End\": \"goDocEnd\",\n    \"Ctrl-Up\": \"goLineUp\",\n    \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\",\n    \"Ctrl-Right\": \"goGroupRight\",\n    \"Alt-Left\": \"goLineStart\",\n    \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Delete\": \"delGroupAfter\",\n    \"Ctrl-S\": \"save\",\n    \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\",\n    \"Shift-Ctrl-G\": \"findPrev\",\n    \"Shift-Ctrl-F\": \"replace\",\n    \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\",\n    \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\",\n    \"Shift-Ctrl-U\": \"redoSelection\",\n    \"Alt-U\": \"redoSelection\",\n    fallthrough: \"basic\"\n  };\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\",\n    \"Ctrl-B\": \"goCharLeft\",\n    \"Ctrl-P\": \"goLineUp\",\n    \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\",\n    \"Alt-B\": \"goWordLeft\",\n    \"Ctrl-A\": \"goLineStart\",\n    \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\",\n    \"Shift-Ctrl-V\": \"goPageUp\",\n    \"Ctrl-D\": \"delCharAfter\",\n    \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\",\n    \"Alt-Backspace\": \"delWordBefore\",\n    \"Ctrl-K\": \"killLine\",\n    \"Ctrl-T\": \"transposeChars\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\",\n    \"Cmd-D\": \"deleteLine\",\n    \"Cmd-Z\": \"undo\",\n    \"Shift-Cmd-Z\": \"redo\",\n    \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\",\n    \"Cmd-Up\": \"goDocStart\",\n    \"Cmd-End\": \"goDocEnd\",\n    \"Cmd-Down\": \"goDocEnd\",\n    \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\",\n    \"Cmd-Left\": \"goLineLeft\",\n    \"Cmd-Right\": \"goLineRight\",\n    \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\",\n    \"Alt-Delete\": \"delGroupAfter\",\n    \"Cmd-S\": \"save\",\n    \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\",\n    \"Shift-Cmd-G\": \"findPrev\",\n    \"Cmd-Alt-F\": \"replace\",\n    \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\",\n    \"Cmd-]\": \"indentMore\",\n    \"Cmd-Backspace\": \"delWrappedLineLeft\",\n    \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\",\n    \"Shift-Cmd-U\": \"redoSelection\",\n    \"Ctrl-Up\": \"goDocStart\",\n    \"Ctrl-Down\": \"goDocEnd\",\n    fallthrough: [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/),\n        name = parts[parts.length - 1];\n    var alt,\n        ctrl,\n        shift,\n        cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod))\n        cmd = true;\n      else if (/^a(lt)?$/i.test(mod))\n        alt = true;\n      else if (/^(c|ctrl|control)$/i.test(mod))\n        ctrl = true;\n      else if (/^s(hift)$/i.test(mod))\n        shift = true;\n      else\n        throw new Error(\"Unrecognized modifier name: \" + mod);\n    }\n    if (alt)\n      name = \"Alt-\" + name;\n    if (ctrl)\n      name = \"Ctrl-\" + name;\n    if (cmd)\n      name = \"Cmd-\" + name;\n    if (shift)\n      name = \"Shift-\" + name;\n    return name;\n  }\n  CodeMirror.normalizeKeyMap = function(keymap) {\n    var copy = {};\n    for (var keyname in keymap)\n      if (keymap.hasOwnProperty(keyname)) {\n        var value = keymap[keyname];\n        if (/^(name|fallthrough|(de|at)tach)$/.test(keyname))\n          continue;\n        if (value == \"...\") {\n          delete keymap[keyname];\n          continue;\n        }\n        var keys = map(keyname.split(\" \"), normalizeKeyName);\n        for (var i = 0; i < keys.length; i++) {\n          var val,\n              name;\n          if (i == keys.length - 1) {\n            name = keys.join(\" \");\n            val = value;\n          } else {\n            name = keys.slice(0, i + 1).join(\" \");\n            val = \"...\";\n          }\n          var prev = copy[name];\n          if (!prev)\n            copy[name] = val;\n          else if (prev != val)\n            throw new Error(\"Inconsistent bindings for \" + name);\n        }\n        delete keymap[keyname];\n      }\n    for (var prop in copy)\n      keymap[prop] = copy[prop];\n    return keymap;\n  };\n  var lookupKey = CodeMirror.lookupKey = function(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n    if (found === false)\n      return \"nothing\";\n    if (found === \"...\")\n      return \"multi\";\n    if (found != null && handle(found))\n      return \"handled\";\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n        return lookupKey(key, map.fallthrough, handle, context);\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n        if (result)\n          return result;\n      }\n    }\n  };\n  var isModifierKey = CodeMirror.isModifierKey = function(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\";\n  };\n  var keyName = CodeMirror.keyName = function(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"])\n      return false;\n    var base = keyNames[event.keyCode],\n        name = base;\n    if (name == null || event.altGraphKey)\n      return false;\n    if (event.altKey && base != \"Alt\")\n      name = \"Alt-\" + name;\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\")\n      name = \"Ctrl-\" + name;\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\")\n      name = \"Cmd-\" + name;\n    if (!noShift && event.shiftKey && base != \"Shift\")\n      name = \"Shift-\" + name;\n    return name;\n  };\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val;\n  }\n  CodeMirror.fromTextArea = function(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      options.tabindex = textarea.tabIndex;\n    if (!options.placeholder && textarea.placeholder)\n      options.placeholder = textarea.placeholder;\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea || textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n    function save() {\n      textarea.value = cm.getValue();\n    }\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form,\n            realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function() {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch (e) {}\n      }\n    }\n    options.finishInit = function(cm) {\n      cm.save = save;\n      cm.getTextArea = function() {\n        return textarea;\n      };\n      cm.toTextArea = function() {\n        cm.toTextArea = isNaN;\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (typeof textarea.form.submit == \"function\")\n            textarea.form.submit = realSubmit;\n        }\n      };\n    };\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function(node) {\n      textarea.parentNode.insertBefore(node, textarea.nextSibling);\n    }, options);\n    return cm;\n  };\n  var StringStream = CodeMirror.StringStream = function(string, tabSize) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n  };\n  StringStream.prototype = {\n    eol: function() {\n      return this.pos >= this.string.length;\n    },\n    sol: function() {\n      return this.pos == this.lineStart;\n    },\n    peek: function() {\n      return this.string.charAt(this.pos) || undefined;\n    },\n    next: function() {\n      if (this.pos < this.string.length)\n        return this.string.charAt(this.pos++);\n    },\n    eat: function(match) {\n      var ch = this.string.charAt(this.pos);\n      if (typeof match == \"string\")\n        var ok = ch == match;\n      else\n        var ok = ch && (match.test ? match.test(ch) : match(ch));\n      if (ok) {\n        ++this.pos;\n        return ch;\n      }\n    },\n    eatWhile: function(match) {\n      var start = this.pos;\n      while (this.eat(match)) {}\n      return this.pos > start;\n    },\n    eatSpace: function() {\n      var start = this.pos;\n      while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos)))\n        ++this.pos;\n      return this.pos > start;\n    },\n    skipToEnd: function() {\n      this.pos = this.string.length;\n    },\n    skipTo: function(ch) {\n      var found = this.string.indexOf(ch, this.pos);\n      if (found > -1) {\n        this.pos = found;\n        return true;\n      }\n    },\n    backUp: function(n) {\n      this.pos -= n;\n    },\n    column: function() {\n      if (this.lastColumnPos < this.start) {\n        this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n        this.lastColumnPos = this.start;\n      }\n      return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n    },\n    indentation: function() {\n      return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n    },\n    match: function(pattern, consume, caseInsensitive) {\n      if (typeof pattern == \"string\") {\n        var cased = function(str) {\n          return caseInsensitive ? str.toLowerCase() : str;\n        };\n        var substr = this.string.substr(this.pos, pattern.length);\n        if (cased(substr) == cased(pattern)) {\n          if (consume !== false)\n            this.pos += pattern.length;\n          return true;\n        }\n      } else {\n        var match = this.string.slice(this.pos).match(pattern);\n        if (match && match.index > 0)\n          return null;\n        if (match && consume !== false)\n          this.pos += match[0].length;\n        return match;\n      }\n    },\n    current: function() {\n      return this.string.slice(this.start, this.pos);\n    },\n    hideFirstChars: function(n, inner) {\n      this.lineStart += n;\n      try {\n        return inner();\n      } finally {\n        this.lineStart -= n;\n      }\n    }\n  };\n  var nextMarkerId = 0;\n  var TextMarker = CodeMirror.TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n  eventMixin(TextMarker);\n  TextMarker.prototype.clear = function() {\n    if (this.explicitlyCleared)\n      return;\n    var cm = this.doc.cm,\n        withOp = cm && !cm.curOp;\n    if (withOp)\n      startOperation(cm);\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found)\n        signalLater(this, \"clear\", found.from, found.to);\n    }\n    var min = null,\n        max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed)\n        regLineChange(cm, lineNo(line), \"text\");\n      else if (cm) {\n        if (span.to != null)\n          max = lineNo(line);\n        if (span.from != null)\n          min = lineNo(line);\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        updateLineHeight(line, textHeight(cm.display));\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping)\n      for (var i = 0; i < this.lines.length; ++i) {\n        var visual = visualLine(this.lines[i]),\n            len = lineLength(visual);\n        if (len > cm.display.maxLineLength) {\n          cm.display.maxLine = visual;\n          cm.display.maxLineLength = len;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    if (min != null && cm && this.collapsed)\n      regChange(cm, min, max + 1);\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm)\n        reCheckSelection(cm.doc);\n    }\n    if (cm)\n      signalLater(cm, \"markerCleared\", cm, this);\n    if (withOp)\n      endOperation(cm);\n    if (this.parent)\n      this.parent.clear();\n  };\n  TextMarker.prototype.find = function(side, lineObj) {\n    if (side == null && this.type == \"bookmark\")\n      side = 1;\n    var from,\n        to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1)\n          return from;\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1)\n          return to;\n      }\n    }\n    return from && {\n      from: from,\n      to: to\n    };\n  };\n  TextMarker.prototype.changed = function() {\n    var pos = this.find(-1, true),\n        widget = this,\n        cm = this.doc.cm;\n    if (!pos || !cm)\n      return;\n    runInOp(cm, function() {\n      var line = pos.line,\n          lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          updateLineHeight(line, line.height + dHeight);\n      }\n    });\n  };\n  TextMarker.prototype.attachLine = function(line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);\n    }\n    this.lines.push(line);\n  };\n  TextMarker.prototype.detachLine = function(line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  var nextMarkerId = 0;\n  function markText(doc, from, to, options, type) {\n    if (options && options.shared)\n      return markTextShared(doc, from, to, options, type);\n    if (doc.cm && !doc.cm.curOp)\n      return operation(doc.cm, markText)(doc, from, to, options, type);\n    var marker = new TextMarker(doc, type),\n        diff = cmp(from, to);\n    if (options)\n      copyObj(options, marker, false);\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      return marker;\n    if (marker.replacedWith) {\n      marker.collapsed = true;\n      marker.widgetNode = elt(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents)\n        marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\");\n      if (options.insertLeft)\n        marker.widgetNode.insertLeft = true;\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");\n      sawCollapsedSpans = true;\n    }\n    if (marker.addToHistory)\n      addChangeToHistory(doc, {\n        from: from,\n        to: to,\n        origin: \"markText\"\n      }, doc.sel, NaN);\n    var curLine = from.line,\n        cm = doc.cm,\n        updateMaxLine;\n    doc.iter(curLine, to.line + 1, function(line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        updateMaxLine = true;\n      if (marker.collapsed && curLine != from.line)\n        updateLineHeight(line, 0);\n      addMarkedSpan(line, new MarkedSpan(marker, curLine == from.line ? from.ch : null, curLine == to.line ? to.ch : null));\n      ++curLine;\n    });\n    if (marker.collapsed)\n      doc.iter(from.line, to.line + 1, function(line) {\n        if (lineIsHidden(doc, line))\n          updateLineHeight(line, 0);\n      });\n    if (marker.clearOnEnter)\n      on(marker, \"beforeCursorEnter\", function() {\n        marker.clear();\n      });\n    if (marker.readOnly) {\n      sawReadOnlySpans = true;\n      if (doc.history.done.length || doc.history.undone.length)\n        doc.clearHistory();\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      if (updateMaxLine)\n        cm.curOp.updateMaxLine = true;\n      if (marker.collapsed)\n        regChange(cm, from.line, to.line + 1);\n      else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css)\n        for (var i = from.line; i <= to.line; i++)\n          regLineChange(cm, i, \"text\");\n      if (marker.atomic)\n        reCheckSelection(cm.doc);\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker;\n  }\n  var SharedTextMarker = CodeMirror.SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      markers[i].parent = this;\n  };\n  eventMixin(SharedTextMarker);\n  SharedTextMarker.prototype.clear = function() {\n    if (this.explicitlyCleared)\n      return;\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      this.markers[i].clear();\n    signalLater(this, \"clear\");\n  };\n  SharedTextMarker.prototype.find = function(side, lineObj) {\n    return this.primary.find(side, lineObj);\n  };\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)],\n        primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function(doc) {\n      if (widget)\n        options.widgetNode = widget.cloneNode(true);\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        if (doc.linked[i].isParent)\n          return;\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary);\n  }\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function(m) {\n      return m.parent;\n    });\n  }\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i],\n          pos = marker.find();\n      var mFrom = doc.clipPos(pos.from),\n          mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n  function detachSharedMarkers(markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i],\n          linked = [marker.primary.doc];\n      ;\n      linkedDocs(marker.primary.doc, function(d) {\n        linked.push(d);\n      });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    }\n  }\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from;\n    this.to = to;\n  }\n  function getMarkedSpanFor(spans, marker) {\n    if (spans)\n      for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if (span.marker == marker)\n          return span;\n      }\n  }\n  function removeMarkedSpan(spans, span) {\n    for (var r,\n        i = 0; i < spans.length; ++i)\n      if (spans[i] != span)\n        (r || (r = [])).push(spans[i]);\n    return r;\n  }\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  }\n  function markedSpansBefore(old, startCh, isInsert) {\n    if (old)\n      for (var i = 0,\n          nw; i < old.length; ++i) {\n        var span = old[i],\n            marker = span.marker;\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n        if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n          var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);\n          (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n        }\n      }\n    return nw;\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    if (old)\n      for (var i = 0,\n          nw; i < old.length; ++i) {\n        var span = old[i],\n            marker = span.marker;\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n        if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n          var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);\n          (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh, span.to == null ? null : span.to - endCh));\n        }\n      }\n    return nw;\n  }\n  function stretchSpansOverChange(doc, change) {\n    if (change.full)\n      return null;\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast)\n      return null;\n    var startCh = change.from.ch,\n        endCh = change.to.ch,\n        isInsert = cmp(change.from, change.to) == 0;\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n    var sameLine = change.text.length == 1,\n        offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found)\n            span.to = startCh;\n          else if (sameLine)\n            span.to = found.to == null ? null : found.to + offset;\n        }\n      }\n    }\n    if (last) {\n      for (var i = 0; i < last.length; ++i) {\n        var span = last[i];\n        if (span.to != null)\n          span.to += offset;\n        if (span.from == null) {\n          var found = getMarkedSpanFor(first, span.marker);\n          if (!found) {\n            span.from = offset;\n            if (sameLine)\n              (first || (first = [])).push(span);\n          }\n        } else {\n          span.from += offset;\n          if (sameLine)\n            (first || (first = [])).push(span);\n        }\n      }\n    }\n    if (first)\n      first = clearEmptySpans(first);\n    if (last && last != first)\n      last = clearEmptySpans(last);\n    var newMarkers = [first];\n    if (!sameLine) {\n      var gap = change.text.length - 2,\n          gapMarkers;\n      if (gap > 0 && first)\n        for (var i = 0; i < first.length; ++i)\n          if (first[i].to == null)\n            (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i].marker, null, null));\n      for (var i = 0; i < gap; ++i)\n        newMarkers.push(gapMarkers);\n      newMarkers.push(last);\n    }\n    return newMarkers;\n  }\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        spans.splice(i--, 1);\n    }\n    if (!spans.length)\n      return null;\n    return spans;\n  }\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old)\n      return stretched;\n    if (!stretched)\n      return old;\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i],\n          stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            if (oldCur[k].marker == span.marker)\n              continue spans;\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old;\n  }\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function(line) {\n      if (line.markedSpans)\n        for (var i = 0; i < line.markedSpans.length; ++i) {\n          var mark = line.markedSpans[i].marker;\n          if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n            (markers || (markers = [])).push(mark);\n        }\n    });\n    if (!markers)\n      return null;\n    var parts = [{\n      from: from,\n      to: to\n    }];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i],\n          m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0)\n          continue;\n        var newParts = [j, 1],\n            dfrom = cmp(p.from, m.from),\n            dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          newParts.push({\n            from: p.from,\n            to: m.from\n          });\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          newParts.push({\n            from: m.to,\n            to: p.to\n          });\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 1;\n      }\n    }\n    return parts;\n  }\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans)\n      return;\n    for (var i = 0; i < spans.length; ++i)\n      spans[i].marker.detachLine(line);\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans)\n      return;\n    for (var i = 0; i < spans.length; ++i)\n      spans[i].marker.attachLine(line);\n    line.markedSpans = spans;\n  }\n  function extraLeft(marker) {\n    return marker.inclusiveLeft ? -1 : 0;\n  }\n  function extraRight(marker) {\n    return marker.inclusiveRight ? 1 : 0;\n  }\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0)\n      return lenDiff;\n    var aPos = a.find(),\n        bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp)\n      return -fromCmp;\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp)\n      return toCmp;\n    return b.id - a.id;\n  }\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans,\n        found;\n    if (sps)\n      for (var sp,\n          i = 0; i < sps.length; ++i) {\n        sp = sps[i];\n        if (sp.marker.collapsed && (start ? sp.from : sp.to) == null && (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n          found = sp.marker;\n      }\n    return found;\n  }\n  function collapsedSpanAtStart(line) {\n    return collapsedSpanAtSide(line, true);\n  }\n  function collapsedSpanAtEnd(line) {\n    return collapsedSpanAtSide(line, false);\n  }\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps)\n      for (var i = 0; i < sps.length; ++i) {\n        var sp = sps[i];\n        if (!sp.marker.collapsed)\n          continue;\n        var found = sp.marker.find(0);\n        var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n        var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n        if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0)\n          continue;\n        if (fromCmp <= 0 && (cmp(found.to, from) > 0 || (sp.marker.inclusiveRight && marker.inclusiveLeft)) || fromCmp >= 0 && (cmp(found.from, to) < 0 || (sp.marker.inclusiveLeft && marker.inclusiveRight)))\n          return true;\n      }\n  }\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      line = merged.find(-1, true).line;\n    return line;\n  }\n  function visualLineContinued(line) {\n    var merged,\n        lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n      (lines || (lines = [])).push(line);\n    }\n    return lines;\n  }\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN),\n        vis = visualLine(line);\n    if (line == vis)\n      return lineN;\n    return lineNo(vis);\n  }\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine())\n      return lineN;\n    var line = getLine(doc, lineN),\n        merged;\n    if (!lineIsHidden(doc, line))\n      return lineN;\n    while (merged = collapsedSpanAtEnd(line))\n      line = merged.find(1, true).line;\n    return lineNo(line) + 1;\n  }\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps)\n      for (var sp,\n          i = 0; i < sps.length; ++i) {\n        sp = sps[i];\n        if (!sp.marker.collapsed)\n          continue;\n        if (sp.from == null)\n          return true;\n        if (sp.marker.widgetNode)\n          continue;\n        if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n          return true;\n      }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      return true;\n    for (var sp,\n        i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (sp.to == null || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc, line, sp))\n        return true;\n    }\n  }\n  var LineWidget = CodeMirror.LineWidget = function(doc, node, options) {\n    if (options)\n      for (var opt in options)\n        if (options.hasOwnProperty(opt))\n          this[opt] = options[opt];\n    this.doc = doc;\n    this.node = node;\n  };\n  eventMixin(LineWidget);\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      addToScrollPos(cm, null, diff);\n  }\n  LineWidget.prototype.clear = function() {\n    var cm = this.doc.cm,\n        ws = this.line.widgets,\n        line = this.line,\n        no = lineNo(line);\n    if (no == null || !ws)\n      return;\n    for (var i = 0; i < ws.length; ++i)\n      if (ws[i] == this)\n        ws.splice(i--, 1);\n    if (!ws.length)\n      line.widgets = null;\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm)\n      runInOp(cm, function() {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n  };\n  LineWidget.prototype.changed = function() {\n    var oldH = this.height,\n        cm = this.doc.cm,\n        line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff)\n      return;\n    updateLineHeight(line, line.height + diff);\n    if (cm)\n      runInOp(cm, function() {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n      });\n  };\n  function widgetHeight(widget) {\n    if (widget.height != null)\n      return widget.height;\n    var cm = widget.doc.cm;\n    if (!cm)\n      return 0;\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\";\n      if (widget.noHScroll)\n        parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\";\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.offsetHeight;\n  }\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll)\n      cm.display.alignWidgets = true;\n    changeLine(doc, handle, \"widget\", function(line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null)\n        widgets.push(widget);\n      else\n        widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible)\n          addToScrollPos(cm, null, widget.height);\n        cm.curOp.forceUpdate = true;\n      }\n      return true;\n    });\n    return widget;\n  }\n  var Line = CodeMirror.Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n  eventMixin(Line);\n  Line.prototype.lineNo = function() {\n    return lineNo(this);\n  };\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter)\n      line.stateAfter = null;\n    if (line.styles)\n      line.styles = null;\n    if (line.order != null)\n      line.order = null;\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height)\n      updateLineHeight(line, estHeight);\n  }\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n  function extractLineClasses(type, output) {\n    if (type)\n      for (; ; ) {\n        var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n        if (!lineClass)\n          break;\n        type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n        var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n        if (output[prop] == null)\n          output[prop] = lineClass[2];\n        else if (!(new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\")).test(output[prop]))\n          output[prop] += \" \" + lineClass[2];\n      }\n    return type;\n  }\n  function callBlankLine(mode, state) {\n    if (mode.blankLine)\n      return mode.blankLine(state);\n    if (!mode.innerMode)\n      return;\n    var inner = CodeMirror.innerMode(mode, state);\n    if (inner.mode.blankLine)\n      return inner.mode.blankLine(inner.state);\n  }\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner)\n        inner[0] = CodeMirror.innerMode(mode, state).mode;\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start)\n        return style;\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\");\n  }\n  function takeToken(cm, pos, precise, asArray) {\n    function getObj(copy) {\n      return {\n        start: stream.start,\n        end: stream.pos,\n        string: stream.current(),\n        type: style || null,\n        state: copy ? copyState(doc.mode, state) : state\n      };\n    }\n    var doc = cm.doc,\n        mode = doc.mode,\n        style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line),\n        state = getStateBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize),\n        tokens;\n    if (asArray)\n      tokens = [];\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, state);\n      if (asArray)\n        tokens.push(getObj(true));\n    }\n    return asArray ? tokens : getObj();\n  }\n  function runMode(cm, text, mode, state, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null)\n      flattenSpans = cm.options.flattenSpans;\n    var curStart = 0,\n        curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize),\n        style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\")\n      extractLineClasses(callBlankLine(mode, state), lineClasses);\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd)\n          processLine(cm, text, state, stream.pos);\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName)\n          style = \"m-\" + (style ? mName + \" \" + style : mName);\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 50000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      var pos = Math.min(stream.pos, curStart + 50000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n  function highlightLine(cm, line, state, forceToEnd) {\n    var st = [cm.state.modeGen],\n        lineClasses = {};\n    runMode(cm, line.text, cm.doc.mode, state, function(end, style) {\n      st.push(end, style);\n    }, lineClasses, forceToEnd);\n    for (var o = 0; o < cm.state.overlays.length; ++o) {\n      var overlay = cm.state.overlays[o],\n          i = 1,\n          at = 0;\n      runMode(cm, line.text, overlay.mode, true, function(end, style) {\n        var start = i;\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            st.splice(i, 1, end, st[i + 1], i_end);\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style)\n          return;\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"cm-overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start + 1];\n            st[start + 1] = (cur ? cur + \" \" : \"\") + \"cm-overlay \" + style;\n          }\n        }\n      }, lineClasses);\n    }\n    return {\n      styles: st,\n      classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null\n    };\n  }\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var state = getStateBefore(cm, lineNo(line));\n      var result = highlightLine(cm, line, line.text.length > cm.options.maxHighlightLength ? copyState(cm.doc.mode, state) : state);\n      line.stateAfter = state;\n      line.styles = result.styles;\n      if (result.classes)\n        line.styleClasses = result.classes;\n      else if (line.styleClasses)\n        line.styleClasses = null;\n      if (updateFrontier === cm.doc.frontier)\n        cm.doc.frontier++;\n    }\n    return line.styles;\n  }\n  function processLine(cm, text, state, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\")\n      callBlankLine(mode, state);\n    while (!stream.eol()) {\n      readToken(mode, stream, state);\n      stream.start = stream.pos;\n    }\n  }\n  var styleToClassCache = {},\n      styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style))\n      return null;\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] || (cache[style] = style.replace(/\\S+/g, \"cm-$&\"));\n  }\n  function buildLineContent(cm, lineView) {\n    var content = elt(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {\n      pre: elt(\"pre\", [content], \"CodeMirror-line\"),\n      content: content,\n      col: 0,\n      pos: 0,\n      cm: cm,\n      splitSpaces: (ie || webkit) && cm.getOption(\"lineWrapping\")\n    };\n    lineView.measure = {};\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line,\n          order;\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line)))\n        builder.addToken = buildTokenBadBidi(builder.addToken, order);\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\");\n        if (line.styleClasses.textClass)\n          builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\");\n      }\n      if (builder.map.length == 0)\n        builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n        (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);\n        (lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n    if (webkit && /\\bcm-tab\\b/.test(builder.content.lastChild.className))\n      builder.content.className = \"cm-tab-wrap-hack\";\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\");\n    return builder;\n  }\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token;\n  }\n  function buildToken(builder, text, style, startStyle, endStyle, title, css) {\n    if (!text)\n      return;\n    var displayText = builder.splitSpaces ? text.replace(/ {3,}/g, splitSpaces) : text;\n    var special = builder.cm.state.specialChars,\n        mustWrap = false;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      var content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9)\n        mustWrap = true;\n      builder.pos += text.length;\n    } else {\n      var content = document.createDocumentFragment(),\n          pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9)\n            content.appendChild(elt(\"span\", [txt]));\n          else\n            content.appendChild(txt);\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m)\n          break;\n        pos += skipped + 1;\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize,\n              tabWidth = tabSize - builder.col % tabSize;\n          var txt = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt.setAttribute(\"role\", \"presentation\");\n          txt.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          var txt = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          var txt = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9)\n            content.appendChild(elt(\"span\", [txt]));\n          else\n            content.appendChild(txt);\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt);\n        builder.pos++;\n      }\n    }\n    if (style || startStyle || endStyle || mustWrap || css) {\n      var fullStyle = style || \"\";\n      if (startStyle)\n        fullStyle += startStyle;\n      if (endStyle)\n        fullStyle += endStyle;\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (title)\n        token.title = title;\n      return builder.content.appendChild(token);\n    }\n    builder.content.appendChild(content);\n  }\n  function splitSpaces(old) {\n    var out = \" \";\n    for (var i = 0; i < old.length - 2; ++i)\n      out += i % 2 ? \" \" : \"\\u00a0\";\n    out += \" \";\n    return out;\n  }\n  function buildTokenBadBidi(inner, order) {\n    return function(builder, text, style, startStyle, endStyle, title, css) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos,\n          end = start + text.length;\n      for (; ; ) {\n        for (var i = 0; i < order.length; i++) {\n          var part = order[i];\n          if (part.to > start && part.from <= start)\n            break;\n        }\n        if (part.to >= end)\n          return inner(builder, text, style, startStyle, endStyle, title, css);\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    };\n  }\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget)\n      builder.map.push(builder.pos, builder.pos + size, widget);\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        widget = builder.content.appendChild(document.createElement(\"span\"));\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n  }\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans,\n        allText = line.text,\n        at = 0;\n    if (!spans) {\n      for (var i = 1; i < styles.length; i += 2)\n        builder.addToken(builder, allText.slice(at, at = styles[i]), interpretTokenStyle(styles[i + 1], builder.cm.options));\n      return;\n    }\n    var len = allText.length,\n        pos = 0,\n        i = 1,\n        text = \"\",\n        style,\n        css;\n    var nextChange = 0,\n        spanStyle,\n        spanEndStyle,\n        spanStartStyle,\n        title,\n        collapsed;\n    for (; ; ) {\n      if (nextChange == pos) {\n        spanStyle = spanEndStyle = spanStartStyle = title = css = \"\";\n        collapsed = null;\n        nextChange = Infinity;\n        var foundBookmarks = [];\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j],\n              m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className)\n              spanStyle += \" \" + m.className;\n            if (m.css)\n              css = m.css;\n            if (m.startStyle && sp.from == pos)\n              spanStartStyle += \" \" + m.startStyle;\n            if (m.endStyle && sp.to == nextChange)\n              spanEndStyle += \" \" + m.endStyle;\n            if (m.title && !title)\n              title = m.title;\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              collapsed = sp;\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos, collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null)\n            return;\n          if (collapsed.to == pos)\n            collapsed = false;\n        }\n        if (!collapsed && foundBookmarks.length)\n          for (var j = 0; j < foundBookmarks.length; ++j)\n            buildCollapsedSpan(builder, 0, foundBookmarks[j]);\n      }\n      if (pos >= len)\n        break;\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle, spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", title, css);\n          }\n          if (end >= upto) {\n            text = text.slice(upto - pos);\n            pos = upto;\n            break;\n          }\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" && (!doc.cm || doc.cm.options.wholeLineUpdateBefore);\n  }\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {\n      return markedSpans ? markedSpans[n] : null;\n    }\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      for (var i = start,\n          result = []; i < end; ++i)\n        result.push(new Line(text[i], spansFor(i), estimateHeight));\n      return result;\n    }\n    var from = change.from,\n        to = change.to,\n        text = change.text;\n    var firstLine = getLine(doc, from.line),\n        lastLine = getLine(doc, to.line);\n    var lastText = lst(text),\n        lastSpans = spansFor(text.length - 1),\n        nlines = to.line - from.line;\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines)\n        doc.remove(from.line, nlines);\n      if (added.length)\n        doc.insert(from.line, added);\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added = linesFor(1, text.length - 1);\n        added.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added = linesFor(1, text.length - 1);\n      if (nlines > 1)\n        doc.remove(from.line + 1, nlines - 1);\n      doc.insert(from.line + 1, added);\n    }\n    signalLater(doc, \"change\", doc, change);\n  }\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    for (var i = 0,\n        height = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n  LeafChunk.prototype = {\n    chunkSize: function() {\n      return this.lines.length;\n    },\n    removeInner: function(at, n) {\n      for (var i = at,\n          e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i)\n        lines[i].parent = this;\n    },\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        if (op(this.lines[at]))\n          return true;\n    }\n  };\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0,\n        height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize();\n      height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n  BranchChunk.prototype = {\n    chunkSize: function() {\n      return this.size;\n    },\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at),\n              oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) {\n            this.children.splice(i--, 1);\n            child.parent = null;\n          }\n          if ((n -= rm) == 0)\n            break;\n          at = 0;\n        } else\n          at -= sz;\n      }\n      if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i)\n        this.children[i].collapse(lines);\n    },\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            while (child.lines.length > 50) {\n              var spilled = child.lines.splice(child.lines.length - 25, 25);\n              var newleaf = new LeafChunk(spilled);\n              child.height -= newleaf.height;\n              this.children.splice(i + 1, 0, newleaf);\n              newleaf.parent = this;\n            }\n            this.maybeSpill();\n          }\n          break;\n        }\n        at -= sz;\n      }\n    },\n    maybeSpill: function() {\n      if (this.children.length <= 10)\n        return;\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) {\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n        } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10);\n      me.parent.maybeSpill();\n    },\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op))\n            return true;\n          if ((n -= used) == 0)\n            break;\n          at = 0;\n        } else\n          at -= sz;\n      }\n    }\n  };\n  var nextDocId = 0;\n  var Doc = CodeMirror.Doc = function(text, mode, firstLine, lineSep) {\n    if (!(this instanceof Doc))\n      return new Doc(text, mode, firstLine, lineSep);\n    if (firstLine == null)\n      firstLine = 0;\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.frontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    if (typeof text == \"string\")\n      text = this.splitLines(text);\n    updateDoc(this, {\n      from: start,\n      to: start,\n      text: text\n    });\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    iter: function(from, to, op) {\n      if (op)\n        this.iterN(from - this.first, to - from, op);\n      else\n        this.iterN(this.first, this.first + this.size, from);\n    },\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i)\n        height += lines[i].height;\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) {\n      this.removeInner(at - this.first, n);\n    },\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false)\n        return lines;\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0),\n          last = this.first + this.size - 1;\n      makeChange(this, {\n        from: top,\n        to: Pos(last, getLine(this, last).text.length),\n        text: this.splitLines(code),\n        origin: \"setValue\",\n        full: true\n      }, true);\n      setSelection(this, simpleSelection(top));\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false)\n        return lines;\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    getLine: function(line) {\n      var l = this.getLineHandle(line);\n      return l && l.text;\n    },\n    getLineHandle: function(line) {\n      if (isLine(this, line))\n        return getLine(this, line);\n    },\n    getLineNumber: function(line) {\n      return lineNo(line);\n    },\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\")\n        line = getLine(this, line);\n      return visualLine(line);\n    },\n    lineCount: function() {\n      return this.size;\n    },\n    firstLine: function() {\n      return this.first;\n    },\n    lastLine: function() {\n      return this.first + this.size - 1;\n    },\n    clipPos: function(pos) {\n      return clipPos(this, pos);\n    },\n    getCursor: function(start) {\n      var range = this.sel.primary(),\n          pos;\n      if (start == null || start == \"head\")\n        pos = range.head;\n      else if (start == \"anchor\")\n        pos = range.anchor;\n      else if (start == \"end\" || start == \"to\" || start === false)\n        pos = range.to();\n      else\n        pos = range.from();\n      return pos;\n    },\n    listSelections: function() {\n      return this.sel.ranges;\n    },\n    somethingSelected: function() {\n      return this.sel.somethingSelected();\n    },\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads, options));\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      extendSelections(this, map(this.sel.ranges, f), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length)\n        return;\n      for (var i = 0,\n          out = []; i < ranges.length; i++)\n        out[i] = new Range(clipPos(this, ranges[i].anchor), clipPos(this, ranges[i].head));\n      if (primary == null)\n        primary = Math.min(ranges.length - 1, this.sel.primIndex);\n      setSelection(this, normalizeSelection(out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);\n    }),\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges,\n          lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false)\n        return lines;\n      else\n        return lines.join(lineSep || this.lineSeparator());\n    },\n    getSelections: function(lineSep) {\n      var parts = [],\n          ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false)\n          sel = sel.join(lineSep || this.lineSeparator());\n        parts[i] = sel;\n      }\n      return parts;\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        dup[i] = code;\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [],\n          sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {\n          from: range.from(),\n          to: range.to(),\n          text: this.splitLines(code[i]),\n          origin: origin\n        };\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i = changes.length - 1; i >= 0; i--)\n        makeChange(this, changes[i]);\n      if (newSel)\n        setSelectionReplaceHistory(this, newSel);\n      else if (this.cm)\n        ensureCursorVisible(this.cm);\n    }),\n    undo: docMethodOp(function() {\n      makeChangeFromHistory(this, \"undo\");\n    }),\n    redo: docMethodOp(function() {\n      makeChangeFromHistory(this, \"redo\");\n    }),\n    undoSelection: docMethodOp(function() {\n      makeChangeFromHistory(this, \"undo\", true);\n    }),\n    redoSelection: docMethodOp(function() {\n      makeChangeFromHistory(this, \"redo\", true);\n    }),\n    setExtending: function(val) {\n      this.extend = val;\n    },\n    getExtending: function() {\n      return this.extend;\n    },\n    historySize: function() {\n      var hist = this.history,\n          done = 0,\n          undone = 0;\n      for (var i = 0; i < hist.done.length; i++)\n        if (!hist.done[i].ranges)\n          ++done;\n      for (var i = 0; i < hist.undone.length; i++)\n        if (!hist.undone[i].ranges)\n          ++undone;\n      return {\n        undo: done,\n        redo: undone\n      };\n    },\n    clearHistory: function() {\n      this.history = new History(this.history.maxGeneration);\n    },\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;\n      return this.history.generation;\n    },\n    isClean: function(gen) {\n      return this.history.generation == (gen || this.cleanGeneration);\n    },\n    getHistory: function() {\n      return {\n        done: copyHistoryArray(this.history.done),\n        undone: copyHistoryArray(this.history.undone)\n      };\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history.maxGeneration);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function(line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop])\n          line[prop] = cls;\n        else if (classTest(cls).test(line[prop]))\n          return false;\n        else\n          line[prop] += \" \" + cls;\n        return true;\n      });\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function(line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur)\n          return false;\n        else if (cls == null)\n          line[prop] = null;\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found)\n            return false;\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true;\n      });\n    }),\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options);\n    }),\n    removeLineWidget: function(widget) {\n      widget.clear();\n    },\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\");\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {\n        replacedWith: options && (options.nodeType == null ? options.widget : options),\n        insertLeft: options && options.insertLeft,\n        clearWhenEmpty: false,\n        shared: options && options.shared,\n        handleMouseEvents: options && options.handleMouseEvents\n      };\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\");\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [],\n          spans = getLine(this, pos.line).markedSpans;\n      if (spans)\n        for (var i = 0; i < spans.length; ++i) {\n          var span = spans[i];\n          if ((span.from == null || span.from <= pos.ch) && (span.to == null || span.to >= pos.ch))\n            markers.push(span.marker.parent || span.marker);\n        }\n      return markers;\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from);\n      to = clipPos(this, to);\n      var found = [],\n          lineNo = from.line;\n      this.iter(from.line, to.line + 1, function(line) {\n        var spans = line.markedSpans;\n        if (spans)\n          for (var i = 0; i < spans.length; i++) {\n            var span = spans[i];\n            if (!(lineNo == from.line && from.ch > span.to || span.from == null && lineNo != from.line || lineNo == to.line && span.from > to.ch) && (!filter || filter(span.marker)))\n              found.push(span.marker.parent || span.marker);\n          }\n        ++lineNo;\n      });\n      return found;\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function(line) {\n        var sps = line.markedSpans;\n        if (sps)\n          for (var i = 0; i < sps.length; ++i)\n            if (sps[i].from != null)\n              markers.push(sps[i].marker);\n      });\n      return markers;\n    },\n    posFromIndex: function(off) {\n      var ch,\n          lineNo = this.first;\n      this.iter(function(line) {\n        var sz = line.text.length + 1;\n        if (sz > off) {\n          ch = off;\n          return true;\n        }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch));\n    },\n    indexFromPos: function(coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0)\n        return 0;\n      this.iter(this.first, coords.line, function(line) {\n        index += line.text.length + 1;\n      });\n      return index;\n    },\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep);\n      doc.scrollTop = this.scrollTop;\n      doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc;\n    },\n    linkedDoc: function(options) {\n      if (!options)\n        options = {};\n      var from = this.first,\n          to = this.first + this.size;\n      if (options.from != null && options.from > from)\n        from = options.from;\n      if (options.to != null && options.to < to)\n        to = options.to;\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep);\n      if (options.sharedHist)\n        copy.history = this.history;\n      (this.linked || (this.linked = [])).push({\n        doc: copy,\n        sharedHist: options.sharedHist\n      });\n      copy.linked = [{\n        doc: this,\n        isParent: true,\n        sharedHist: options.sharedHist\n      }];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy;\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror)\n        other = other.doc;\n      if (this.linked)\n        for (var i = 0; i < this.linked.length; ++i) {\n          var link = this.linked[i];\n          if (link.doc != other)\n            continue;\n          this.linked.splice(i, 1);\n          other.unlinkDoc(this);\n          detachSharedMarkers(findSharedMarkers(this));\n          break;\n        }\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function(doc) {\n          splitIds.push(doc.id);\n        }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {\n      linkedDocs(this, f);\n    },\n    getMode: function() {\n      return this.mode;\n    },\n    getEditor: function() {\n      return this.cm;\n    },\n    splitLines: function(str) {\n      if (this.lineSep)\n        return str.split(this.lineSep);\n      return splitLinesAuto(str);\n    },\n    lineSeparator: function() {\n      return this.lineSep || \"\\n\";\n    }\n  });\n  Doc.prototype.eachLine = Doc.prototype.iter;\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype)\n    if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n      CodeMirror.prototype[prop] = (function(method) {\n        return function() {\n          return method.apply(this.doc, arguments);\n        };\n      })(Doc.prototype[prop]);\n  eventMixin(Doc);\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked)\n        for (var i = 0; i < doc.linked.length; ++i) {\n          var rel = doc.linked[i];\n          if (rel.doc == skip)\n            continue;\n          var shared = sharedHist && rel.sharedHist;\n          if (sharedHistOnly && !shared)\n            continue;\n          f(rel.doc, shared);\n          propagate(rel.doc, doc, shared);\n        }\n    }\n    propagate(doc, null, true);\n  }\n  function attachDoc(cm, doc) {\n    if (doc.cm)\n      throw new Error(\"This document is already in use.\");\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    if (!cm.options.lineWrapping)\n      findMaxLine(cm);\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size)\n      throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\");\n    for (var chunk = doc; !chunk.lines; ) {\n      for (var i = 0; ; ++i) {\n        var child = chunk.children[i],\n            sz = child.chunkSize();\n        if (n < sz) {\n          chunk = child;\n          break;\n        }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n];\n  }\n  function getBetween(doc, start, end) {\n    var out = [],\n        n = start.line;\n    doc.iter(start.line, end.line + 1, function(line) {\n      var text = line.text;\n      if (n == end.line)\n        text = text.slice(0, end.ch);\n      if (n == start.line)\n        text = text.slice(start.ch);\n      out.push(text);\n      ++n;\n    });\n    return out;\n  }\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function(line) {\n      out.push(line.text);\n    });\n    return out;\n  }\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff)\n      for (var n = line; n; n = n.parent)\n        n.height += diff;\n  }\n  function lineNo(line) {\n    if (line.parent == null)\n      return null;\n    var cur = line.parent,\n        no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0; ; ++i) {\n        if (chunk.children[i] == cur)\n          break;\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first;\n  }\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i = 0; i < chunk.children.length; ++i) {\n        var child = chunk.children[i],\n            ch = child.height;\n        if (h < ch) {\n          chunk = child;\n          continue outer;\n        }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n;\n    } while (!chunk.lines);\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i],\n          lh = line.height;\n      if (h < lh)\n        break;\n      h -= lh;\n    }\n    return n + i;\n  }\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n    var h = 0,\n        chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj)\n        break;\n      else\n        h += line.height;\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i = 0; i < p.children.length; ++i) {\n        var cur = p.children[i];\n        if (cur == chunk)\n          break;\n        else\n          h += cur.height;\n      }\n    }\n    return h;\n  }\n  function getOrder(line) {\n    var order = line.order;\n    if (order == null)\n      order = line.order = bidiOrdering(line.text);\n    return order;\n  }\n  function History(startGen) {\n    this.done = [];\n    this.undone = [];\n    this.undoDepth = Infinity;\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    this.generation = this.maxGeneration = startGen || 1;\n  }\n  function historyChangeFromChange(doc, change) {\n    var histChange = {\n      from: copyPos(change.from),\n      to: changeEnd(change),\n      text: getBetween(doc, change.from, change.to)\n    };\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function(doc) {\n      attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    }, true);\n    return histChange;\n  }\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges)\n        array.pop();\n      else\n        break;\n    }\n  }\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done);\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done);\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done);\n    }\n  }\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date,\n        cur;\n    if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && ((change.origin.charAt(0) == \"+\" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay) || change.origin.charAt(0) == \"*\")) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      var last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        last.to = changeEnd(change);\n      } else {\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        pushSelectionToHistory(doc.sel, hist.done);\n      cur = {\n        changes: [historyChangeFromChange(doc, change)],\n        generation: hist.generation\n      };\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges)\n          hist.done.shift();\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n    if (!last)\n      signal(doc, \"historyAdded\");\n  }\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" || ch == \"+\" && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);\n  }\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history,\n        origin = options && options.origin;\n    if (opId == hist.lastSelOp || (origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      hist.done[hist.done.length - 1] = sel;\n    else\n      pushSelectionToHistory(sel, hist.done);\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      clearSelectionEvents(hist.undone);\n  }\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      dest.push(sel);\n  }\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id],\n        n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function(line) {\n      if (line.markedSpans)\n        (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans;\n      ++n;\n    });\n  }\n  function removeClearedSpans(spans) {\n    if (!spans)\n      return null;\n    for (var i = 0,\n        out; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) {\n        if (!out)\n          out = spans.slice(0, i);\n      } else if (out)\n        out.push(spans[i]);\n    }\n    return !out ? spans : out.length ? out : null;\n  }\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found)\n      return null;\n    for (var i = 0,\n        nw = []; i < change.text.length; ++i)\n      nw.push(removeClearedSpans(found[i]));\n    return nw;\n  }\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    for (var i = 0,\n        copy = []; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue;\n      }\n      var changes = event.changes,\n          newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j],\n            m;\n        newChanges.push({\n          from: change.from,\n          to: change.to,\n          text: change.text\n        });\n        if (newGroup)\n          for (var prop in change)\n            if (m = prop.match(/^spans_(\\d+)$/)) {\n              if (indexOf(newGroup, Number(m[1])) > -1) {\n                lst(newChanges)[prop] = change[prop];\n                delete change[prop];\n              }\n            }\n      }\n    }\n    return copy;\n  }\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i],\n          ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) {\n          sub = array[i] = sub.deepCopy();\n          sub.copied = true;\n        }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue;\n      }\n      for (var j = 0; j < sub.changes.length; ++j) {\n        var cur = sub.changes[j];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break;\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n  function rebaseHist(hist, change) {\n    var from = change.from.line,\n        to = change.to.line,\n        diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n  var e_preventDefault = CodeMirror.e_preventDefault = function(e) {\n    if (e.preventDefault)\n      e.preventDefault();\n    else\n      e.returnValue = false;\n  };\n  var e_stopPropagation = CodeMirror.e_stopPropagation = function(e) {\n    if (e.stopPropagation)\n      e.stopPropagation();\n    else\n      e.cancelBubble = true;\n  };\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;\n  }\n  var e_stop = CodeMirror.e_stop = function(e) {\n    e_preventDefault(e);\n    e_stopPropagation(e);\n  };\n  function e_target(e) {\n    return e.target || e.srcElement;\n  }\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1)\n        b = 1;\n      else if (e.button & 2)\n        b = 3;\n      else if (e.button & 4)\n        b = 2;\n    }\n    if (mac && e.ctrlKey && b == 1)\n      b = 3;\n    return b;\n  }\n  var on = CodeMirror.on = function(emitter, type, f) {\n    if (emitter.addEventListener)\n      emitter.addEventListener(type, f, false);\n    else if (emitter.attachEvent)\n      emitter.attachEvent(\"on\" + type, f);\n    else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      var arr = map[type] || (map[type] = []);\n      arr.push(f);\n    }\n  };\n  var noHandlers = [];\n  function getHandlers(emitter, type, copy) {\n    var arr = emitter._handlers && emitter._handlers[type];\n    if (copy)\n      return arr && arr.length > 0 ? arr.slice() : noHandlers;\n    else\n      return arr || noHandlers;\n  }\n  var off = CodeMirror.off = function(emitter, type, f) {\n    if (emitter.removeEventListener)\n      emitter.removeEventListener(type, f, false);\n    else if (emitter.detachEvent)\n      emitter.detachEvent(\"on\" + type, f);\n    else {\n      var handlers = getHandlers(emitter, type, false);\n      for (var i = 0; i < handlers.length; ++i)\n        if (handlers[i] == f) {\n          handlers.splice(i, 1);\n          break;\n        }\n    }\n  };\n  var signal = CodeMirror.signal = function(emitter, type) {\n    var handlers = getHandlers(emitter, type, true);\n    if (!handlers.length)\n      return;\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i)\n      handlers[i].apply(null, args);\n  };\n  var orphanDelayedCallbacks = null;\n  function signalLater(emitter, type) {\n    var arr = getHandlers(emitter, type, false);\n    if (!arr.length)\n      return;\n    var args = Array.prototype.slice.call(arguments, 2),\n        list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    function bnd(f) {\n      return function() {\n        f.apply(null, args);\n      };\n    }\n    ;\n    for (var i = 0; i < arr.length; ++i)\n      list.push(bnd(arr[i]));\n  }\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i)\n      delayed[i]();\n  }\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      e = {\n        type: e,\n        preventDefault: function() {\n          this.defaultPrevented = true;\n        }\n      };\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore;\n  }\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr)\n      return;\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i)\n      if (indexOf(set, arr[i]) == -1)\n        set.push(arr[i]);\n  }\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0;\n  }\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {\n      on(this, type, f);\n    };\n    ctor.prototype.off = function(type, f) {\n      off(this, type, f);\n    };\n  }\n  var scrollerGap = 30;\n  var Pass = CodeMirror.Pass = {toString: function() {\n      return \"CodeMirror.Pass\";\n    }};\n  var sel_dontScroll = {scroll: false},\n      sel_mouse = {origin: \"*mouse\"},\n      sel_move = {origin: \"+move\"};\n  function Delayed() {\n    this.id = null;\n  }\n  Delayed.prototype.set = function(ms, f) {\n    clearTimeout(this.id);\n    this.id = setTimeout(f, ms);\n  };\n  var countColumn = CodeMirror.countColumn = function(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1)\n        end = string.length;\n    }\n    for (var i = startIndex || 0,\n        n = startValue || 0; ; ) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        return n + (end - i);\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  };\n  var findColumn = CodeMirror.findColumn = function(string, goal, tabSize) {\n    for (var pos = 0,\n        col = 0; ; ) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1)\n        nextTab = string.length;\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        return pos + Math.min(skipped, goal - col);\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal)\n        return pos;\n    }\n  };\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      spaceStrs.push(lst(spaceStrs) + \" \");\n    return spaceStrs[n];\n  }\n  function lst(arr) {\n    return arr[arr.length - 1];\n  }\n  var selectInput = function(node) {\n    node.select();\n  };\n  if (ios)\n    selectInput = function(node) {\n      node.selectionStart = 0;\n      node.selectionEnd = node.value.length;\n    };\n  else if (ie)\n    selectInput = function(node) {\n      try {\n        node.select();\n      } catch (_e) {}\n    };\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      if (array[i] == elt)\n        return i;\n    return -1;\n  }\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++)\n      out[i] = f(array[i], i);\n    return out;\n  }\n  function nothing() {}\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props)\n      copyObj(props, inst);\n    return inst;\n  }\n  ;\n  function copyObj(obj, target, overwrite) {\n    if (!target)\n      target = {};\n    for (var prop in obj)\n      if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        target[prop] = obj[prop];\n    return target;\n  }\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function() {\n      return f.apply(null, args);\n    };\n  }\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  var isWordCharBasic = CodeMirror.isWordChar = function(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));\n  };\n  function isWordChar(ch, helper) {\n    if (!helper)\n      return isWordCharBasic(ch);\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch))\n      return true;\n    return helper.test(ch);\n  }\n  function isEmpty(obj) {\n    for (var n in obj)\n      if (obj.hasOwnProperty(n) && obj[n])\n        return false;\n    return true;\n  }\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) {\n    return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n  }\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className)\n      e.className = className;\n    if (style)\n      e.style.cssText = style;\n    if (typeof content == \"string\")\n      e.appendChild(document.createTextNode(content));\n    else if (content)\n      for (var i = 0; i < content.length; ++i)\n        e.appendChild(content[i]);\n    return e;\n  }\n  var range;\n  if (document.createRange)\n    range = function(node, start, end, endNode) {\n      var r = document.createRange();\n      r.setEnd(endNode || node, end);\n      r.setStart(node, start);\n      return r;\n    };\n  else\n    range = function(node, start, end) {\n      var r = document.body.createTextRange();\n      try {\n        r.moveToElementText(node.parentNode);\n      } catch (e) {\n        return r;\n      }\n      r.collapse(true);\n      r.moveEnd(\"character\", end);\n      r.moveStart(\"character\", start);\n      return r;\n    };\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      e.removeChild(e.firstChild);\n    return e;\n  }\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e);\n  }\n  var contains = CodeMirror.contains = function(parent, child) {\n    if (child.nodeType == 3)\n      child = child.parentNode;\n    if (parent.contains)\n      return parent.contains(child);\n    do {\n      if (child.nodeType == 11)\n        child = child.host;\n      if (child == parent)\n        return true;\n    } while (child = child.parentNode);\n  };\n  function activeElt() {\n    var activeElement = document.activeElement;\n    while (activeElement && activeElement.root && activeElement.root.activeElement)\n      activeElement = activeElement.root.activeElement;\n    return activeElement;\n  }\n  if (ie && ie_version < 11)\n    activeElt = function() {\n      try {\n        return document.activeElement;\n      } catch (e) {\n        return document.body;\n      }\n    };\n  function classTest(cls) {\n    return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\");\n  }\n  var rmClass = CodeMirror.rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n  var addClass = CodeMirror.addClass = function(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current))\n      node.className += (current ? \" \" : \"\") + cls;\n  };\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      if (as[i] && !classTest(as[i]).test(b))\n        b += \" \" + as[i];\n    return b;\n  }\n  function forEachCodeMirror(f) {\n    if (!document.body.getElementsByClassName)\n      return;\n    var byClass = document.body.getElementsByClassName(\"CodeMirror\");\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm)\n        f(cm);\n    }\n  }\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered)\n      return;\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    var resizeTimer;\n    on(window, \"resize\", function() {\n      if (resizeTimer == null)\n        resizeTimer = setTimeout(function() {\n          resizeTimer = null;\n          forEachCodeMirror(onResize);\n        }, 100);\n    });\n    on(window, \"blur\", function() {\n      forEachCodeMirror(onBlur);\n    });\n  }\n  var dragAndDrop = function() {\n    if (ie && ie_version < 9)\n      return false;\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div;\n  }();\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") : elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node;\n  }\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null)\n      return badBidiRects;\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    if (!r0 || r0.left == r0.right)\n      return false;\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    return badBidiRects = (r1.right - r0.right < 3);\n  }\n  var splitLinesAuto = CodeMirror.splitLines = \"\\n\\nb\".split(/\\n/).length != 3 ? function(string) {\n    var pos = 0,\n        result = [],\n        l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1)\n        nl = string.length;\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result;\n  } : function(string) {\n    return string.split(/\\r\\n?|\\n/);\n  };\n  var hasSelection = window.getSelection ? function(te) {\n    try {\n      return te.selectionStart != te.selectionEnd;\n    } catch (e) {\n      return false;\n    }\n  } : function(te) {\n    try {\n      var range = te.ownerDocument.selection.createRange();\n    } catch (e) {}\n    if (!range || range.parentElement() != te)\n      return false;\n    return range.compareEndPoints(\"StartToEnd\", range) != 0;\n  };\n  var hasCopyEvent = (function() {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e)\n      return true;\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\";\n  })();\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null)\n      return badZoomedRects;\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;\n  }\n  var keyNames = CodeMirror.keyNames = {\n    3: \"Enter\",\n    8: \"Backspace\",\n    9: \"Tab\",\n    13: \"Enter\",\n    16: \"Shift\",\n    17: \"Ctrl\",\n    18: \"Alt\",\n    19: \"Pause\",\n    20: \"CapsLock\",\n    27: \"Esc\",\n    32: \"Space\",\n    33: \"PageUp\",\n    34: \"PageDown\",\n    35: \"End\",\n    36: \"Home\",\n    37: \"Left\",\n    38: \"Up\",\n    39: \"Right\",\n    40: \"Down\",\n    44: \"PrintScrn\",\n    45: \"Insert\",\n    46: \"Delete\",\n    59: \";\",\n    61: \"=\",\n    91: \"Mod\",\n    92: \"Mod\",\n    93: \"Mod\",\n    106: \"*\",\n    107: \"=\",\n    109: \"-\",\n    110: \".\",\n    111: \"/\",\n    127: \"Delete\",\n    173: \"-\",\n    186: \";\",\n    187: \"=\",\n    188: \",\",\n    189: \"-\",\n    190: \".\",\n    191: \"/\",\n    192: \"`\",\n    219: \"[\",\n    220: \"\\\\\",\n    221: \"]\",\n    222: \"'\",\n    63232: \"Up\",\n    63233: \"Down\",\n    63234: \"Left\",\n    63235: \"Right\",\n    63272: \"Delete\",\n    63273: \"Home\",\n    63275: \"End\",\n    63276: \"PageUp\",\n    63277: \"PageDown\",\n    63302: \"Insert\"\n  };\n  (function() {\n    for (var i = 0; i < 10; i++)\n      keyNames[i + 48] = keyNames[i + 96] = String(i);\n    for (var i = 65; i <= 90; i++)\n      keyNames[i] = String.fromCharCode(i);\n    for (var i = 1; i <= 12; i++)\n      keyNames[i + 111] = keyNames[i + 63235] = \"F\" + i;\n  })();\n  function iterateBidiSections(order, from, to, f) {\n    if (!order)\n      return f(from, to, \"ltr\");\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\");\n        found = true;\n      }\n    }\n    if (!found)\n      f(from, to, \"ltr\");\n  }\n  function bidiLeft(part) {\n    return part.level % 2 ? part.to : part.from;\n  }\n  function bidiRight(part) {\n    return part.level % 2 ? part.from : part.to;\n  }\n  function lineLeft(line) {\n    var order = getOrder(line);\n    return order ? bidiLeft(order[0]) : 0;\n  }\n  function lineRight(line) {\n    var order = getOrder(line);\n    if (!order)\n      return line.text.length;\n    return bidiRight(lst(order));\n  }\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line)\n      lineN = lineNo(visual);\n    var order = getOrder(visual);\n    var ch = !order ? 0 : order[0].level % 2 ? lineRight(visual) : lineLeft(visual);\n    return Pos(lineN, ch);\n  }\n  function lineEnd(cm, lineN) {\n    var merged,\n        line = getLine(cm.doc, lineN);\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n      lineN = null;\n    }\n    var order = getOrder(line);\n    var ch = !order ? line.text.length : order[0].level % 2 ? lineLeft(line) : lineRight(line);\n    return Pos(lineN == null ? lineNo(line) : lineN, ch);\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(0, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS);\n    }\n    return start;\n  }\n  function compareBidiLevel(order, a, b) {\n    var linedir = order[0].level;\n    if (a == linedir)\n      return true;\n    if (b == linedir)\n      return false;\n    return a < b;\n  }\n  var bidiOther;\n  function getBidiPartAt(order, pos) {\n    bidiOther = null;\n    for (var i = 0,\n        found; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < pos && cur.to > pos)\n        return i;\n      if ((cur.from == pos || cur.to == pos)) {\n        if (found == null) {\n          found = i;\n        } else if (compareBidiLevel(order, cur.level, order[found].level)) {\n          if (cur.from != cur.to)\n            bidiOther = found;\n          return i;\n        } else {\n          if (cur.from != cur.to)\n            bidiOther = i;\n          return found;\n        }\n      }\n    }\n    return found;\n  }\n  function moveInLine(line, pos, dir, byUnit) {\n    if (!byUnit)\n      return pos + dir;\n    do\n      pos += dir;\n while (pos > 0 && isExtendingChar(line.text.charAt(pos)));\n    return pos;\n  }\n  function moveVisually(line, start, dir, byUnit) {\n    var bidi = getOrder(line);\n    if (!bidi)\n      return moveLogically(line, start, dir, byUnit);\n    var pos = getBidiPartAt(bidi, start),\n        part = bidi[pos];\n    var target = moveInLine(line, start, part.level % 2 ? -dir : dir, byUnit);\n    for (; ; ) {\n      if (target > part.from && target < part.to)\n        return target;\n      if (target == part.from || target == part.to) {\n        if (getBidiPartAt(bidi, target) == pos)\n          return target;\n        part = bidi[pos += dir];\n        return (dir > 0) == part.level % 2 ? part.to : part.from;\n      } else {\n        part = bidi[pos += dir];\n        if (!part)\n          return null;\n        if ((dir > 0) == part.level % 2)\n          target = moveInLine(line, part.to, -1, byUnit);\n        else\n          target = moveInLine(line, part.from, 1, byUnit);\n      }\n    }\n  }\n  function moveLogically(line, start, dir, byUnit) {\n    var target = start + dir;\n    if (byUnit)\n      while (target > 0 && isExtendingChar(line.text.charAt(target)))\n        target += dir;\n    return target < 0 || target > line.text.length ? null : target;\n  }\n  var bidiOrdering = (function() {\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    var arabicTypes = \"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm\";\n    function charType(code) {\n      if (code <= 0xf7)\n        return lowTypes.charAt(code);\n      else if (0x590 <= code && code <= 0x5f4)\n        return \"R\";\n      else if (0x600 <= code && code <= 0x6ed)\n        return arabicTypes.charAt(code - 0x600);\n      else if (0x6ee <= code && code <= 0x8ac)\n        return \"r\";\n      else if (0x2000 <= code && code <= 0x200b)\n        return \"w\";\n      else if (code == 0x200c)\n        return \"b\";\n      else\n        return \"L\";\n    }\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/,\n        isStrong = /[LRr]/,\n        countsAsLeft = /[Lb1n]/,\n        countsAsNum = /[1n]/;\n    var outerType = \"L\";\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from;\n      this.to = to;\n    }\n    return function(str) {\n      if (!bidiRE.test(str))\n        return false;\n      var len = str.length,\n          types = [];\n      for (var i = 0,\n          type; i < len; ++i)\n        types.push(type = charType(str.charCodeAt(i)));\n      for (var i = 0,\n          prev = outerType; i < len; ++i) {\n        var type = types[i];\n        if (type == \"m\")\n          types[i] = prev;\n        else\n          prev = type;\n      }\n      for (var i = 0,\n          cur = outerType; i < len; ++i) {\n        var type = types[i];\n        if (type == \"1\" && cur == \"r\")\n          types[i] = \"n\";\n        else if (isStrong.test(type)) {\n          cur = type;\n          if (type == \"r\")\n            types[i] = \"R\";\n        }\n      }\n      for (var i = 1,\n          prev = types[0]; i < len - 1; ++i) {\n        var type = types[i];\n        if (type == \"+\" && prev == \"1\" && types[i + 1] == \"1\")\n          types[i] = \"1\";\n        else if (type == \",\" && prev == types[i + 1] && (prev == \"1\" || prev == \"n\"))\n          types[i] = prev;\n        prev = type;\n      }\n      for (var i = 0; i < len; ++i) {\n        var type = types[i];\n        if (type == \",\")\n          types[i] = \"N\";\n        else if (type == \"%\") {\n          for (var end = i + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i && types[i - 1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i; j < end; ++j)\n            types[j] = replace;\n          i = end - 1;\n        }\n      }\n      for (var i = 0,\n          cur = outerType; i < len; ++i) {\n        var type = types[i];\n        if (cur == \"L\" && type == \"1\")\n          types[i] = \"L\";\n        else if (isStrong.test(type))\n          cur = type;\n      }\n      for (var i = 0; i < len; ++i) {\n        if (isNeutral.test(types[i])) {\n          for (var end = i + 1; end < len && isNeutral.test(types[end]); ++end) {}\n          var before = (i ? types[i - 1] : outerType) == \"L\";\n          var after = (end < len ? types[end] : outerType) == \"L\";\n          var replace = before || after ? \"L\" : \"R\";\n          for (var j = i; j < end; ++j)\n            types[j] = replace;\n          i = end - 1;\n        }\n      }\n      var order = [],\n          m;\n      for (var i = 0; i < len; ) {\n        if (countsAsLeft.test(types[i])) {\n          var start = i;\n          for (++i; i < len && countsAsLeft.test(types[i]); ++i) {}\n          order.push(new BidiSpan(0, start, i));\n        } else {\n          var pos = i,\n              at = order.length;\n          for (++i; i < len && types[i] != \"L\"; ++i) {}\n          for (var j = pos; j < i; ) {\n            if (countsAsNum.test(types[j])) {\n              if (pos < j)\n                order.splice(at, 0, new BidiSpan(1, pos, j));\n              var nstart = j;\n              for (++j; j < i && countsAsNum.test(types[j]); ++j) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j));\n              pos = j;\n            } else\n              ++j;\n          }\n          if (pos < i)\n            order.splice(at, 0, new BidiSpan(1, pos, i));\n        }\n      }\n      if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n        order[0].from = m[0].length;\n        order.unshift(new BidiSpan(0, 0, m[0].length));\n      }\n      if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n        lst(order).to -= m[0].length;\n        order.push(new BidiSpan(0, len - m[0].length, len));\n      }\n      if (order[0].level == 2)\n        order.unshift(new BidiSpan(1, order[0].to, order[0].to));\n      if (order[0].level != lst(order).level)\n        order.push(new BidiSpan(order[0].level, len, len));\n      return order;\n    };\n  })();\n  CodeMirror.version = \"5.8.0\";\n  return CodeMirror;\n});\n\n_removeDefine();\n})();\n(function() {\nvar _removeDefine = $__System.get(\"@@amd-helpers\").createDefine();\ndefine(\"1\", [\"3\", \"5\", \"4\", \"2\"], function(CodeMirror, jsonlint, beautify) {\n  'use strict';\n  var doc = document,\n      App = function App() {\n        var form = doc.forms.main,\n            code = form.code,\n            editor = CodeMirror.fromTextArea(doc.getElementById(\"code\"), {\n              lineNumbers: true,\n              styleActiveLine: true,\n              matchBrackets: true\n            });\n        form.addEventListener('submit', function(evt) {\n          evt.preventDefault();\n          editor.setValue(beautify.js_beautify(code.value));\n          try {\n            jsonlint.parse(code.value);\n            this.notify(true, 'Valid JSON');\n          } catch (e) {\n            this.notify(false, e);\n          }\n        });\n      },\n      fn = App.prototype;\n  fn.notify = function(success, text) {\n    var result = doc.getElementById('result');\n    doc.getElementById('result-container').classList.add('shown');\n    result.classList.toggle('success', success);\n    result.classList.toggle('error', !success);\n    result.innerHTML = text;\n  };\n  return window.app = new App();\n});\n\n_removeDefine();\n})();\n})\n(function(factory) {\n  factory();\n});"],"sourceRoot":"/source/"}