{"version":3,"sources":["app.js"],"names":["global","register","name","deps","declare","arguments","length","registerDynamic","apply","this","doRegister","declarative","executingRequire","execute","entry","defined","normalizedDeps","buildGroups","groups","groupIndex","indexOf","call","push","i","l","depName","depEntry","evaluated","depGroupIndex","undefined","splice","TypeError","link","startEntry","curGroupDeclarative","group","j","linkDeclarativeModule","linkDynamicModule","getOrCreateModuleRecord","moduleRecords","dependencies","exports","importers","module","declaration","value","locked","p","importerModule","setters","depExports","depModule","esModule","load","getModule","ensureEvaluated","Error","__useDefault","id","output","__esModule","getOwnPropertyDescriptor","d","Object","defineProperty","hasOwnProperty","moduleName","seen","modules","substr","require","Array","prototype","item","a","e","obj","prop","opt","get","mains","depNames","formatDetect","System","_nodeRequire","resolve","process","set","newModule","dep","_export","firstLoad","self","$__System","__global","readMemberExpression","pParts","split","shift","forEachGlobal","callback","keys","forEach","g","forEachGlobalValue","globalName","ignoredGlobalProps","globalSnapshot","loader","prepareGlobal","exportName","globals","curDefine","define","oldGlobals","globalValue","singleGlobal","multipleExports","getCJSDeps","source","requireIndex","replace","commentRegEx","params","match","fnBracketRegEx","requireAlias","wsRegEx","requireRegEx","requireRegExs","RegExp","cjsRequirePre","cjsRequirePost","lastIndex","exec","names","errback","referer","dynamicRequires","Promise","all","then","factory","pop","exportsIndex","moduleIndex","concat","toString","req","depValues","uri","config","lastModule","anonDefine","isBundle","createDefine","oldModule","oldExports","oldDefine","amd","amdDefine","amdRequire","_removeDefine","mod","CodeMirror","defineMode","parserConfig","readRegexp","stream","next","escaped","inSet","ret","tp","style","cont","type","content","tokenBase","state","ch","tokenize","tokenString","test","eat","eatWhile","tokenComment","skipToEnd","lastType","isOperatorChar","current","tokenQuasi","wordRE","word","known","keywords","propertyIsEnumerable","quote","jsonldMode","peek","isJsonldKeyword","maybeEnd","findFatArrow","fatArrowAt","arrow","string","start","depth","sawSomething","pos","charAt","bracket","brackets","JSLexical","indented","column","align","prev","info","inScope","varname","v","localVars","cx","context","vars","parseJS","cc","marked","lexical","combinator","jsonMode","expression","statement","lex","pass","inList","list","globalVars","pushcontext","defaultVars","popcontext","pushlex","result","indent","outer","poplex","expect","wanted","exp","vardef","block","maybeelse","functiondef","forspec","maybelabel","funarg","className","afterExport","afterImport","expressionInner","expressionNoComma","noComma","body","arrowBodyNoComma","arrowBody","commasep","pattern","maybeop","maybeoperatorNoComma","maybeoperatorComma","atomicTypes","maybeexpressionNoComma","maybeexpression","comprehension","arrayLiteral","contCommasep","objprop","quasi","maybeTarget","me","expr","property","slice","continueQuasi","targetNoComma","target","_","getterSetter","afterprop","what","end","proceed","maybetype","isTS","typedef","maybedefault","maybeAssign","vardefCont","proppattern","_type","forspec1","forspec2","formaybeinof","forspec3","classNameAfter","classBody","classGetterSetter","maybeFrom","importSpec","maybeAs","maybeArrayComprehension","isContinuedStatement","textAfter","indentUnit","statementIndent","jsonld","json","typescript","wordCharacters","kw","A","B","C","operator","atom","jsKeywords","if","while","with","else","do","try","finally","return","break","continue","new","delete","throw","debugger","var","const","let","async","function","catch","for","switch","case","default","in","typeof","instanceof","true","false","null","NaN","Infinity","class","super","await","yield","export","import","extends","tsKeywords","interface","constructor","public","private","protected","static","number","boolean","any","attr","variable","regexp","jsonld-keyword","startState","basecolumn","token","sol","indentation","eatSpace","Pass","firstChar","c","closing","doubleIndentSwitch","electricInput","blockCommentStart","blockCommentEnd","lineComment","fold","closeBrackets","helperType","registerHelper","defineMIME","tmp","tmp2","lc","rc","tokenizer","in_string","in_multiline_comment","in_singleline_comment","new_str","ns","from","leftContext","rightContext","substring","join","in_array","arr","trim","s","ltrim","js_beautify","js_source_text","options","beautifier","Beautifier","beautify","create_flags","flags_base","mode","next_indent_level","indentation_level","just_added_newline","line_indent_level","next_flags","parent","last_text","last_word","declaration_statement","declaration_assignment","multiline_frame","if_block","else_block","do_block","do_while","in_case_statement","in_case","case_body","start_line_index","get_line_number","ternary_depth","handle_token","local_token","newlines","keep_whitespace","keep_array_indentation","is_array","flags","print_newline","max_preserve_newlines","preserve_newlines","current_token","handlers","split_newlines","out","idx","allow_wrap_or_preserved_newline","force_linewrap","wanted_newline","wrap_line_length","proposed_line_length","current_line","get_character_count","text","space_before_token","force_newline","preserve_statement_flags","last_type","MODE","Statement","restore_mode","add_new_line","print_token_line_indentation","whitespace_before","set_indent","print_token","printable_token","raw","add_raw_token","comma_first","previous_line","last","add_token","deindent","set_mode","flag_store","previous_flags","ArrayLiteral","is_expression","Expression","ForInitializer","Conditional","remove_redundant_indentation","start_of_object_property","ObjectLiteral","start_of_statement","BlockStatement","last_last_text","all_lines_start_with","lines","line","each_line_matches_indent","len","is_special_word","get_token","offset","index","token_pos","tokens","handle_start_expr","next_mode","Tokenizer","line_starters","space_in_paren","space_after_anon_function","space_before_conditional","handle_end_expr","space_in_empty_paren","handle_start_block","next_token","second_token","empty_braces","comments_before","empty_anonymous_function","brace_style","handle_end_block","handle_word","jslint_happy","just_added_blankline","prefix","handle_semicolon","handle_string","handle_equals","handle_comma","handle_operator","space_before","space_after","handle_block_comment","directives","test_output_raw","acorn","newline","javadoc","starless","lastIndent","lastIndentLength","handle_comment","handle_dot","break_chained_methods","handle_unknown","handle_eof","indent_string","baseIndentString","TK_START_EXPR","TK_END_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_WORD","TK_RESERVED","TK_SEMICOLON","TK_STRING","TK_EQUALS","TK_OPERATOR","TK_COMMA","TK_BLOCK_COMMENT","TK_COMMENT","TK_DOT","TK_UNKNOWN","TK_EOF","braces_on_own_line","indent_size","parseInt","indent_char","eol","unescape_strings","e4x","end_with_newline","indent_with_tabs","preindent_index","Output","sweet_code","get_code","OutputLine","_character_count","_indent_count","_items","_empty","level","baseIndentLength","indent_length","is_empty","input","remove_indent","indent_cache","add_outputline","x","add_space_before_token","frame","output_length","eat_newlines","opts","get_directives","directives_block_pattern","directive_pattern","directive_match","tokenize_next","resulting_string","whitespace_on_this_line","n_newlines","whitespace_before_token","parser_pos","input_length","last_token","Token","whitespace","digit","allow_decimal","allow_e","local_digit","digit_hex","isIdentifierStart","charCodeAt","isIdentifierChar","reserved_words","comment","block_comment_pattern","comment_match","directives_end_ignore_pattern","lineBreak","comment_pattern","sep","esc","has_char_escapes","in_char_class","xmlRegExp","xmlStr","rootTag","isEndTag","tagName","isSingletonTag","xmlLength","unescape_string","sharp","template_pattern","template_match","in_html_comment","punct","s_hex","String","fromCharCode","token_values","open","open_stack","comments","nonASCIIidentifierStartChars","nonASCIIidentifierChars","nonASCIIidentifierStart","nonASCIIidentifier","code","window","__require","__exports","__module","_retrieveGlobal","jsonlint","b","trace","yy","symbols_","error","JSONString","STRING","JSONNumber","NUMBER","JSONNullLiteral","NULL","JSONBooleanLiteral","TRUE","FALSE","JSONText","JSONValue","EOF","JSONObject","JSONArray","{","}","JSONMemberList","JSONMember",":",",","[","]","JSONElementList","$accept","$end","terminals_",2,4,6,8,10,11,14,17,18,21,22,23,24,"productions_","performAction","f","h","$","Number","table",3,5,7,9,12,13,15,16,1,19,20,25,"defaultActions","parseError","parse","o","lexer","k","m","setInput","yylloc","n","q","r","t","y","z","w","showPosition","yylineno","loc","expected","yyleng","yytext","_$","first_line","last_line","first_column","last_column","_input","_more","_less","done","matched","conditionStack","unput","more","less","pastInput","upcomingInput","_currentRules","rules","flex","begin","popState","conditions","topState","pushState","INITIAL","inclusive","parser","main","readFileSync","cwd","path","read","charset","argv","args","place","copyObj","defaults","setGuttersForLineNumbers","doc","Doc","lineSeparator","inputStyles","inputStyle","display","Display","wrapper","updateGutters","themeChanged","lineWrapping","autofocus","mobile","focus","initScrollbars","keyMaps","overlays","modeGen","overwrite","delayingBlurEvent","focused","suppressEdits","pasteIncoming","cutIncoming","selectingText","draggingText","highlight","Delayed","keySeq","specialChars","cm","ie","ie_version","setTimeout","reset","registerEventHandlers","ensureGlobalHandlers","startOperation","curOp","forceUpdate","attachDoc","hasFocus","bind","onFocus","onBlur","optionHandlers","Init","maybeUpdateLineNumberWidth","finishInit","initHooks","endOperation","webkit","getComputedStyle","lineDiv","textRendering","scrollbarFiller","elt","setAttribute","gutterFiller","selectionDiv","cursorDiv","measure","lineMeasure","lineSpace","mover","sizer","sizerWidth","heightForcer","scrollerGap","gutters","lineGutter","scroller","zIndex","paddingRight","gecko","draggable","appendChild","viewFrom","viewTo","first","reportedViewFrom","reportedViewTo","view","renderedView","externalMeasured","viewOffset","lastWrapHeight","lastWrapWidth","updateLineNumbers","nativeBarWidth","barHeight","barWidth","scrollbarsClipped","lineNumWidth","lineNumInnerWidth","lineNumChars","alignWidgets","cachedCharWidth","cachedTextHeight","cachedPaddingH","maxLine","maxLineLength","maxLineChanged","wheelDX","wheelDY","wheelStartX","wheelStartY","selForContextMenu","activeTouch","init","loadMode","getMode","modeOption","resetModeState","iter","stateAfter","styles","frontier","startWorker","regChange","wrappingChanged","addClass","minWidth","rmClass","findMaxLine","estimateLineHeights","clearCaches","updateScrollbars","estimateHeight","th","textHeight","wrapping","perLine","Math","max","clientWidth","charWidth","lineIsHidden","widgetsHeight","widgets","height","ceil","est","estHeight","updateLineHeight","theme","guttersChanged","alignHorizontally","specs","removeChildren","gutterClass","gElt","width","updateGutterSpace","offsetWidth","marginLeft","lineLength","merged","cur","collapsedSpanAtStart","found","find","to","collapsedSpanAtEnd","getLine","lineNumbers","measureForScrollbars","gutterW","docH","round","paddingVert","clientHeight","viewHeight","scrollWidth","viewWidth","barLeft","fixedGutter","docHeight","scrollHeight","scrollGap","gutterWidth","NativeScrollbars","scroll","vert","horiz","on","scrollTop","scrollLeft","checkedOverlay","minHeight","NullScrollbars","scrollbars","clear","scrollbarModel","scrollbarStyle","node","insertBefore","axis","setScrollLeft","setScrollTop","startWidth","startHeight","updateScrollbarsInner","updateHeightsInViewport","sizes","update","right","paddingBottom","bottom","coverGutterNextToScrollbar","visibleLines","viewport","top","floor","paddingTop","lineAtHeight","ensure","ensureFrom","ensureTo","heightAtLine","min","lastLine","firstChild","comp","compensateForHScroll","left","hidden","gutter","alignable","lineNumberFor","size","innerW","padding","lineNumberFormatter","firstLineNumber","getBoundingClientRect","DisplayUpdate","force","visible","editorIsHidden","wrapperHeight","wrapperWidth","oldDisplayWidth","displayWidth","dims","getDimensions","events","maybeClipScrollbars","marginBottom","borderRightWidth","updateDisplayIfNeeded","resetView","countDirtyView","viewportMargin","sawCollapsedSpans","visualLineNo","visualLineEndNo","different","adjustView","toUpdate","activeElt","patchDisplay","offsetHeight","postUpdateDisplay","displayHeight","barMeasure","updateSelection","setDocumentHeight","signal","updateDisplaySimple","finish","total","prevBottom","offsetTop","bot","box","diff","updateWidgetHeight","rest","gutterLeft","clientLeft","nextSibling","offsetLeft","fixedPos","gutterTotalWidth","updateNumbersFrom","rm","mac","currentWheelTarget","parentNode","removeChild","container","lineN","lineView","updateNumber","lineNumber","changes","updateLineForChanges","document","createTextNode","buildLineElement","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","updateLineBackground","cls","bgClass","background","wrap","getLineContent","ext","built","buildLineContent","pre","textClass","wrapClass","gutterBackground","markers","gutterMarkers","gutterWrap","setUneditable","insertLineWidgets","insertLineWidgetsFor","allowAbove","ws","widget","handleMouseEvents","positionLineWidget","above","signalLater","noHScroll","coverGutter","paddingLeft","position","copyPos","Pos","maxPos","cmp","minPos","ensureFocus","isReadOnly","readOnly","cantEdit","applyTextInput","inserted","deleted","sel","origin","paste","textLines","splitLines","multiPaste","ranges","lastCopied","map","range","empty","lst","updateInput","changeEvent","makeChange","triggerElectric","ensureCursorVisible","typing","handlePaste","pasted","clipboardData","getData","preventDefault","disableInput","runInOp","electricChars","smartIndent","head","getModeAt","indentLine","copyableRanges","lineRange","anchor","getRange","disableBrowserMagic","field","TextareaInput","prevInput","pollingFast","polling","inaccurateSelection","hasSelection","composing","hiddenTextarea","te","div","ios","border","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","gracePeriod","posToDOM","findViewForLine","mapFromLineView","order","getOrder","side","partPos","getBidiPartAt","nodeAndOffsetInLineMap","collapse","badPos","bad","domToPos","lineNode","childNodes","clipPos","locateNodeInLineView","textNode","topNode","maps","curNode","lineNo","contains","nodeType","nodeValue","after","dist","textContent","before","previousSibling","domTextBetween","fromLine","toLine","recognizeMarker","marker","walk","cmText","getAttribute","markerID","findMarks","getBetween","lineSep","nodeName","val","Selection","primIndex","Range","normalizeSelection","prim","sort","inv","simpleSelection","clipLine","clipToLen","linelen","isLine","clipPosArray","array","extendRange","other","extend","posBefore","extendSelection","setSelection","primary","extendSelections","heads","newSel","replaceOneSelection","setSimpleSelection","filterSelectionChange","setSelectionReplaceHistory","history","setSelectionNoUndo","addSelectionToHistory","hasHandler","bias","setSelectionInner","skipAtomicInSelection","equals","selectionChanged","signalCursorActivity","reCheckSelection","sel_dontScroll","mayClear","newAnchor","skipAtomic","newHead","flipped","curPos","dir","search","markedSpans","sp","inclusiveLeft","inclusiveRight","explicitlyCleared","atomic","newPos","showSelection","prepareSelection","curFragment","cursors","createDocumentFragment","selFragment","selection","collapsed","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursorCoords","singleCursorHeightPerLine","cursor","cursorHeight","otherCursor","add","fragment","rightSide","drawForLine","fromArg","toArg","coords","charCoords","lineObj","lineLen","iterateBidiSections","rightPos","leftPos","leftSide","paddingH","sFrom","sTo","singleVLine","visualLine","leftEnd","rightStart","restartBlink","clearInterval","blinker","visibility","cursorBlinkRate","setInterval","time","highlightWorker","Date","workTime","copyState","getStateBefore","changedLines","oldStyles","tooLong","maxHighlightLength","highlighted","highlightLine","oldCls","styleClasses","newCls","classes","ischange","processLine","workDelay","regLineChange","findStartLine","precise","minindent","minline","lim","innerMode","countColumn","tabSize","save","removeChildrenAndAdd","currentStyle","data","isNaN","ensureLineHeights","rect","curWidth","heights","rects","getClientRects","abs","cache","caches","updateExternalMeasurement","LineView","measureChar","measureCharPrepared","prepareMeasureForLine","findViewIndex","hasHeights","prepared","varHeight","key","measureCharInner","bogus","rtop","rbottom","mStart","mEnd","insertLeft","coverStart","coverEnd","isExtendingChar","nullRect","maybeUpdateRectForZooming","rSpan","rbot","mid","screen","logicalXDPI","deviceXDPI","hasBadZoomedRects","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","pageScrollX","pageXOffset","documentElement","pageScrollY","pageYOffset","intoCoordSystem","widgetHeight","yOff","lOff","xOff","fromCoordSystem","localBox","lineSpaceBox","preparedMeasure","getBidi","part","bidiLeft","bidiRight","bidiOther","estimateCoords","PosWithInfo","outside","xRel","coordsChar","coordsCharInner","mergedPos","getX","wrongLine","innerOff","adjust","bidi","lineLeft","lineRight","fromX","fromOutside","toX","toOutside","moveVisually","xDiff","step","middle","middleX","measureText","viewChanged","changeObjs","cursorActivityHandlers","cursorActivityCalled","updateMaxLine","scrollToPos","nextOpId","operationGroup","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","callbacks","op","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","mustUpdate","updatedDisplay","adjustWidthTo","maxScrollLeft","preparedSelection","forceScroll","scrollPosIntoView","margin","isCursor","maybeScrollWindow","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","operation","methodOp","docMethodOp","visualLineContinued","buildViewArray","nextPos","lendiff","cut","viewCuttingPoint","cutTop","cutBot","oldN","newN","dirty","finishTouch","touchFinished","prevTouch","isMouseLikeTouchEvent","touches","touch","radiusX","radiusY","farAway","dx","dy","onMouseDown","signalDOMEvent","posFromMouse","clickInGutter","eventInWidget","e_preventDefault","findWordAt","captureRightClick","onContextMenu","clearTimeout","now","moved","pageX","pageY","onScrollWheel","dragFunctions","enter","e_stop","over","onDragOver","onDragStart","drop","onDrop","leave","clearDragCursor","inp","getField","onKeyUp","onKeyDown","onKeyPress","dragDropChanged","old","wasOn","funcs","toggle","off","onResize","setSize","e_target","liberal","forRect","space","clientX","clientY","colDiff","supportsTouch","shiftKey","e_button","leftButtonDown","lastMiddleDown","delayBlurEvent","lastDoubleClick","lastClick","contained","modifier","metaKey","ctrlKey","dragDrop","dragAndDrop","leftButtonStartDrag","leftButtonSelect","startTime","dragEnd","e2","addNew","extendTo","lastPos","startCol","posCol","findColumn","startSel","ourIndex","scrollIntoView","oldRange","ourRange","sel_mouse","curCount","counter","editorSize","move","up","lastSelOrigin","altKey","gutterEvent","prevent","signalfn","mX","mY","lineBox","e_defaultPrevented","lastDrop","files","dataTransfer","FileReader","File","loadFile","file","allowDropFileTypes","reader","onload","change","changeEnd","readAsText","selected","listSelections","replaceRange","replaceSelection","setData","getSelection","setDragImage","safari","img","src","presto","_top","frag","dragCursor","isScroller","delta","wheelEventDelta","canScrollX","canScrollY","wheelPixelsPerUnit","pixels","wheelSamples","movedX","movedY","sample","doHandleBinding","bound","dropShift","commands","ensurePolled","prevShift","lookupKeyForEditor","handle","lookupKey","extraKeys","keyMap","dispatchKey","seq","isModifierKey","stopSeq","handleKeyBinding","keyName","motion","handleCharBinding","keyCode","returnValue","handled","lastStoppedKey","hasCopyEvent","showCrossHair","charCode","which","receivedFocus","contextMenuInGutter","adjustForChange","computeSelAfterChange","offsetPos","nw","computeReplacedSel","hint","oldPrev","newPrev","filterChange","canceled","cancel","ignoreReadOnly","sawReadOnlySpans","removeReadOnlyRanges","makeChangeInner","selAfter","addChangeToHistory","makeChangeSingleDoc","stretchSpansOverChange","rebased","linkedDocs","sharedHist","rebaseHist","makeChangeFromHistory","allowSelectionOnly","event","hist","undone","dest","lastOrigin","pushSelectionToHistory","clearRedo","antiChanges","generation","maxGeneration","filter","historyChangeFromChange","mergeOldSpans","shiftDoc","distance","spans","removed","makeChangeSingleDocInEditor","updateDoc","recomputeMaxLength","checkWidthStart","full","isWholeLineUpdate","changesHandler","changeHandler","doScroll","innerHeight","phantom","scrollNode","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","x1","y1","x2","y2","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollPos","resolveScrollToPos","getCursor","cursorScrollMargin","sPos","scrollTo","how","aggressive","curSpace","curSpaceString","indentString","indentWithTabs","spaceStr","changeLine","changeType","no","deleteNearSelection","compute","kill","toKill","replaced","findPosH","unit","visually","findNextLine","possible","moveOnce","boundToLine","moveLogically","origDir","sawType","helper","getHelper","isWordChar","hitSide","findPosV","pageSize","option","deflt","notOnInit","normalizeKeyName","alt","ctrl","cmd","parts","getKeyMap","markText","shared","markTextShared","TextMarker","clearWhenEmpty","replacedWith","widgetNode","conflictingCollapsedRange","addToHistory","curLine","addMarkedSpan","MarkedSpan","clearOnEnter","clearHistory","nextMarkerId","title","startStyle","endStyle","css","cloneNode","linked","isParent","SharedTextMarker","findSharedMarkers","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","getMarkedSpanFor","span","removeMarkedSpan","attachLine","markedSpansBefore","startCh","isInsert","startsBefore","endsAfter","markedSpansAfter","endCh","oldFirst","oldLast","sameLine","clearEmptySpans","newMarkers","gapMarkers","gap","getOldSpans","stretched","oldCur","stretchCur","mark","mk","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","vis","lineIsHiddenInner","adjustScrollWhenAboveVisible","parentStyle","addLineWidget","LineWidget","insertAt","aboveVisible","updateLine","cleanUpLine","extractLineClasses","lineClass","callBlankLine","blankLine","inner","readToken","takeToken","asArray","getObj","copy","StringStream","runMode","lineClasses","forceToEnd","flattenSpans","curStart","curStyle","addModeClass","mName","st","overlay","at","i_end","opaque","getLineStyles","updateFrontier","startAt","interpretTokenStyle","styleToClassCacheWithMode","styleToClassCache","builder","col","splitSpaces","getOption","addToken","buildToken","hasBadBidiRects","buildTokenBadBidi","allowFrontierUpdate","insertLineContent","joinClasses","zeroWidthElement","lastChild","defaultSpecialCharPlaceholder","displayText","special","mustWrap","skipped","txt","tabWidth","specialCharPlaceholder","fullStyle","buildCollapsedSpan","ignoreWidget","needsContentAttribute","createElement","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","foundBookmarks","upto","tokenText","wholeLineUpdateBefore","spansFor","linesFor","Line","firstLine","lastText","lastSpans","nlines","insert","remove","added","LeafChunk","BranchChunk","children","chunkSize","sharedHistOnly","propagate","skip","rel","chunk","child","sz","getLines","lh","bidiOrdering","History","startGen","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","histChange","attachLocalSpans","clearSelectionEvents","lastChangeEvent","opId","historyEventDelay","selectionEventCanBeMerged","somethingSelected","existing","removeClearedSpans","copyHistoryArray","newGroup","instantiateSel","deepCopy","newChanges","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","defaultPrevented","srcElement","button","getHandlers","emitter","_handlers","noHandlers","bnd","orphanDelayedCallbacks","fireOrphanDelayed","delayed","override","codemirrorIgnore","cursorActivity","eventMixin","ctor","spaceStrs","nothing","createObj","base","props","inst","create","isWordCharBasic","isEmpty","extendingChars","tag","cssText","count","activeElement","root","classTest","as","forEachCodeMirror","getElementsByClassName","byClass","globalsRegistered","registerGlobalHandlers","resizeTimer","zwspSupported","badBidiRects","r0","r1","badZoomedRects","normal","fromRange","lineStart","visual","lineEnd","lineStartSmart","firstNonWS","inWS","compareBidiLevel","linedir","moveInLine","byUnit","userAgent","navigator","platform","ie_upto10","ie_11up","documentMode","qtwebkit","chrome","vendor","mac_geMountainLion","windows","presto_version","flipCtrlCmd","needsH","needsV","sWidth","totalHeight","totalWidth","overlayHack","barMouseDown","native","cmpPos","prepareCopyCut","getSelections","selectInput","lineWiseCopyCut","setSelections","textarea","poll","fastPoll","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","minimal","blur","resetPosition","slowPoll","pollInterval","missed","execCommand","same","prepareSelectAllHack","selectionStart","extval","selectionEnd","rehide","oldCSS","selectAll","detectingSelectAll","resetSelectionOnContextMenu","oldScrollY","scrollY","mouseup","readOnlyChanged","onCopyCut","clearData","kludge","hadFocus","startData","ours","applyComposition","forceCompositionEnd","pollContent","showPrimarySelection","showMultipleSelections","curAnchor","anchorNode","anchorOffset","curFocus","focusNode","focusOffset","rangeCount","getRangeAt","rng","removeAllRanges","addRange","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","pollSelection","fromIndex","fromNode","toIndex","toNode","newText","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","contenteditable","here","there","wheelDeltaX","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","setOption","getDoc","addKeyMap","removeKeyMap","addOverlay","spec","modeSpec","removeOverlay","indentSelection","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelpers","helpers","help","_global","pred","getStateAfter","defaultTextHeight","defaultCharWidth","setGutterMarker","gutterID","clearGutter","lineInfo","getViewport","addWidget","vspace","hspace","triggerOnKeyDown","triggerOnKeyPress","triggerOnKeyUp","amount","moveH","extendSelectionsBy","rtlMoveVisually","sel_move","deleteH","goalColumn","moveV","goals","startChar","check","toggleOverwrite","getScrollInfo","interpret","refresh","oldHeight","swapDoc","getInputField","getWrapperElement","getScrollerElement","getGutterElement","setValue","newBreaks","detach","attach","integer","disabled","tabIndex","modes","mimeModes","mime","resolveMode","mfactory","modeObj","modeExtensions","exts","modeProps","extendMode","properties","defineExtension","func","defineDocExtension","defineOption","defineInitHook","registerGlobalHelper","predicate","nstate","a1","a2","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","delWrappedLineRight","undo","redo","undoSelection","redoSelection","goDocStart","goDocEnd","goLineStart","goLineStartSmart","goLineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","goLineDown","goPageUp","goPageDown","goCharLeft","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentMore","indentLess","insertTab","insertSoftTab","spaces","replaceSelections","defaultTab","transposeChars","newlineAndIndent","basic","Left","Right","Up","Down","End","Home","PageUp","PageDown","Delete","Backspace","Shift-Backspace","Tab","Shift-Tab","Enter","Insert","Esc","pcDefault","Ctrl-A","Ctrl-D","Ctrl-Z","Shift-Ctrl-Z","Ctrl-Y","Ctrl-Home","Ctrl-End","Ctrl-Up","Ctrl-Down","Ctrl-Left","Ctrl-Right","Alt-Left","Alt-Right","Ctrl-Backspace","Ctrl-Delete","Ctrl-S","Ctrl-F","Ctrl-G","Shift-Ctrl-G","Shift-Ctrl-F","Shift-Ctrl-R","Ctrl-[","Ctrl-]","Ctrl-U","Shift-Ctrl-U","Alt-U","fallthrough","emacsy","Ctrl-B","Ctrl-P","Ctrl-N","Alt-F","Alt-B","Ctrl-E","Ctrl-V","Shift-Ctrl-V","Ctrl-H","Alt-D","Alt-Backspace","Ctrl-K","Ctrl-T","macDefault","Cmd-A","Cmd-D","Cmd-Z","Shift-Cmd-Z","Cmd-Y","Cmd-Home","Cmd-Up","Cmd-End","Cmd-Down","Cmd-Left","Cmd-Right","Ctrl-Alt-Backspace","Alt-Delete","Cmd-S","Cmd-F","Cmd-G","Shift-Cmd-G","Cmd-Alt-F","Shift-Cmd-Alt-F","Cmd-[","Cmd-]","Cmd-Backspace","Cmd-Delete","Cmd-U","Shift-Cmd-U","normalizeKeyMap","keymap","keyname","keyNames","noShift","altGraphKey","fromTextArea","getValue","tabindex","placeholder","form","leaveSubmitMethodAlone","realSubmit","submit","wrappedSubmit","getTextArea","toTextArea","lastColumnPos","lastColumnValue","skipTo","backUp","consume","caseInsensitive","cased","str","toLowerCase","hideFirstChars","withOp","dHeight","oldH","removeInner","insertInner","iterN","spilled","newleaf","maybeSpill","sibling","myIndex","used","nextDocId","cleanGeneration","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","setCursor","addSelection","dup","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","indexFromPos","copyHistory","linkedDoc","unlinkDoc","splitIds","iterLinkedDocs","getEditor","splitLinesAuto","eachLine","dontDelegate","method","e_stopPropagation","stopPropagation","cancelBubble","addEventListener","attachEvent","removeEventListener","detachEvent","ms","startIndex","startValue","nextTab","goal","select","_e","nonASCIISingleCaseWordChar","toUpperCase","createRange","endNode","setEnd","setStart","createTextRange","moveToElementText","moveEnd","moveStart","host","nl","rt","ownerDocument","parentElement","compareEndPoints","oncopy",27,32,33,34,35,36,37,38,39,40,44,45,46,59,61,91,92,93,106,107,109,110,111,127,173,186,187,188,189,190,191,192,219,220,221,222,63232,63233,63234,63235,63272,63273,63275,63276,63277,63302,"charType","lowTypes","arabicTypes","BidiSpan","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","outerType","types","nstart","unshift","version","minify","parseQuery","location","query","decodeURIComponent","App","editor","codeInput","forms","faq","getElementById","styleActiveLine","matchBrackets","evt","go","classList","fn","fetch","resp","validate","err","notify","comb","reformat","success","innerHTML","url","XMLHttpRequest","onreadystatechange","readyState","DONE","status","responseText","statusText","send","encodeURIComponent","app"],"mappings":"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","file":"app.min.js","sourcesContent":["\"format global\";\n(function(global) {\n\n  var defined = {};\n\n  // indexOf polyfill for IE8\n  var indexOf = Array.prototype.indexOf || function(item) {\n    for (var i = 0, l = this.length; i < l; i++)\n      if (this[i] === item)\n        return i;\n    return -1;\n  }\n\n  var getOwnPropertyDescriptor = true;\n  try {\n    Object.getOwnPropertyDescriptor({ a: 0 }, 'a');\n  }\n  catch(e) {\n    getOwnPropertyDescriptor = false;\n  }\n\n  var defineProperty;\n  (function () {\n    try {\n      if (!!Object.defineProperty({}, 'a', {}))\n        defineProperty = Object.defineProperty;\n    }\n    catch (e) {\n      defineProperty = function(obj, prop, opt) {\n        try {\n          obj[prop] = opt.value || opt.get.call(obj);\n        }\n        catch(e) {}\n      }\n    }\n  })();\n\n  function register(name, deps, declare) {\n    if (arguments.length === 4)\n      return registerDynamic.apply(this, arguments);\n    doRegister(name, {\n      declarative: true,\n      deps: deps,\n      declare: declare\n    });\n  }\n\n  function registerDynamic(name, deps, executingRequire, execute) {\n    doRegister(name, {\n      declarative: false,\n      deps: deps,\n      executingRequire: executingRequire,\n      execute: execute\n    });\n  }\n\n  function doRegister(name, entry) {\n    entry.name = name;\n\n    // we never overwrite an existing define\n    if (!(name in defined))\n      defined[name] = entry;\n\n    // we have to normalize dependencies\n    // (assume dependencies are normalized for now)\n    // entry.normalizedDeps = entry.deps.map(normalize);\n    entry.normalizedDeps = entry.deps;\n  }\n\n\n  function buildGroups(entry, groups) {\n    groups[entry.groupIndex] = groups[entry.groupIndex] || [];\n\n    if (indexOf.call(groups[entry.groupIndex], entry) != -1)\n      return;\n\n    groups[entry.groupIndex].push(entry);\n\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      var depEntry = defined[depName];\n\n      // not in the registry means already linked / ES6\n      if (!depEntry || depEntry.evaluated)\n        continue;\n\n      // now we know the entry is in our unlinked linkage group\n      var depGroupIndex = entry.groupIndex + (depEntry.declarative != entry.declarative);\n\n      // the group index of an entry is always the maximum\n      if (depEntry.groupIndex === undefined || depEntry.groupIndex < depGroupIndex) {\n\n        // if already in a group, remove from the old group\n        if (depEntry.groupIndex !== undefined) {\n          groups[depEntry.groupIndex].splice(indexOf.call(groups[depEntry.groupIndex], depEntry), 1);\n\n          // if the old group is empty, then we have a mixed depndency cycle\n          if (groups[depEntry.groupIndex].length == 0)\n            throw new TypeError(\"Mixed dependency cycle detected\");\n        }\n\n        depEntry.groupIndex = depGroupIndex;\n      }\n\n      buildGroups(depEntry, groups);\n    }\n  }\n\n  function link(name) {\n    var startEntry = defined[name];\n\n    startEntry.groupIndex = 0;\n\n    var groups = [];\n\n    buildGroups(startEntry, groups);\n\n    var curGroupDeclarative = !!startEntry.declarative == groups.length % 2;\n    for (var i = groups.length - 1; i >= 0; i--) {\n      var group = groups[i];\n      for (var j = 0; j < group.length; j++) {\n        var entry = group[j];\n\n        // link each group\n        if (curGroupDeclarative)\n          linkDeclarativeModule(entry);\n        else\n          linkDynamicModule(entry);\n      }\n      curGroupDeclarative = !curGroupDeclarative; \n    }\n  }\n\n  // module binding records\n  var moduleRecords = {};\n  function getOrCreateModuleRecord(name) {\n    return moduleRecords[name] || (moduleRecords[name] = {\n      name: name,\n      dependencies: [],\n      exports: {}, // start from an empty module and extend\n      importers: []\n    })\n  }\n\n  function linkDeclarativeModule(entry) {\n    // only link if already not already started linking (stops at circular)\n    if (entry.module)\n      return;\n\n    var module = entry.module = getOrCreateModuleRecord(entry.name);\n    var exports = entry.module.exports;\n\n    var declaration = entry.declare.call(global, function(name, value) {\n      module.locked = true;\n\n      if (typeof name == 'object') {\n        for (var p in name)\n          exports[p] = name[p];\n      }\n      else {\n        exports[name] = value;\n      }\n\n      for (var i = 0, l = module.importers.length; i < l; i++) {\n        var importerModule = module.importers[i];\n        if (!importerModule.locked) {\n          for (var j = 0; j < importerModule.dependencies.length; ++j) {\n            if (importerModule.dependencies[j] === module) {\n              importerModule.setters[j](exports);\n            }\n          }\n        }\n      }\n\n      module.locked = false;\n      return value;\n    });\n\n    module.setters = declaration.setters;\n    module.execute = declaration.execute;\n\n    // now link all the module dependencies\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      var depEntry = defined[depName];\n      var depModule = moduleRecords[depName];\n\n      // work out how to set depExports based on scenarios...\n      var depExports;\n\n      if (depModule) {\n        depExports = depModule.exports;\n      }\n      else if (depEntry && !depEntry.declarative) {\n        depExports = depEntry.esModule;\n      }\n      // in the module registry\n      else if (!depEntry) {\n        depExports = load(depName);\n      }\n      // we have an entry -> link\n      else {\n        linkDeclarativeModule(depEntry);\n        depModule = depEntry.module;\n        depExports = depModule.exports;\n      }\n\n      // only declarative modules have dynamic bindings\n      if (depModule && depModule.importers) {\n        depModule.importers.push(module);\n        module.dependencies.push(depModule);\n      }\n      else\n        module.dependencies.push(null);\n\n      // run the setter for this dependency\n      if (module.setters[i])\n        module.setters[i](depExports);\n    }\n  }\n\n  // An analog to loader.get covering execution of all three layers (real declarative, simulated declarative, simulated dynamic)\n  function getModule(name) {\n    var exports;\n    var entry = defined[name];\n\n    if (!entry) {\n      exports = load(name);\n      if (!exports)\n        throw new Error(\"Unable to load dependency \" + name + \".\");\n    }\n\n    else {\n      if (entry.declarative)\n        ensureEvaluated(name, []);\n\n      else if (!entry.evaluated)\n        linkDynamicModule(entry);\n\n      exports = entry.module.exports;\n    }\n\n    if ((!entry || entry.declarative) && exports && exports.__useDefault)\n      return exports['default'];\n\n    return exports;\n  }\n\n  function linkDynamicModule(entry) {\n    if (entry.module)\n      return;\n\n    var exports = {};\n\n    var module = entry.module = { exports: exports, id: entry.name };\n\n    // AMD requires execute the tree first\n    if (!entry.executingRequire) {\n      for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n        var depName = entry.normalizedDeps[i];\n        var depEntry = defined[depName];\n        if (depEntry)\n          linkDynamicModule(depEntry);\n      }\n    }\n\n    // now execute\n    entry.evaluated = true;\n    var output = entry.execute.call(global, function(name) {\n      for (var i = 0, l = entry.deps.length; i < l; i++) {\n        if (entry.deps[i] != name)\n          continue;\n        return getModule(entry.normalizedDeps[i]);\n      }\n      throw new TypeError('Module ' + name + ' not declared as a dependency.');\n    }, exports, module);\n\n    if (output)\n      module.exports = output;\n\n    // create the esModule object, which allows ES6 named imports of dynamics\n    exports = module.exports;\n \n    if (exports && exports.__esModule) {\n      entry.esModule = exports;\n    }\n    else {\n      entry.esModule = {};\n      \n      // don't trigger getters/setters in environments that support them\n      if ((typeof exports == 'object' || typeof exports == 'function') && exports !== global) {\n        if (getOwnPropertyDescriptor) {\n          var d;\n          for (var p in exports)\n            if (d = Object.getOwnPropertyDescriptor(exports, p))\n              defineProperty(entry.esModule, p, d);\n        }\n        else {\n          var hasOwnProperty = exports && exports.hasOwnProperty;\n          for (var p in exports) {\n            if (!hasOwnProperty || exports.hasOwnProperty(p))\n              entry.esModule[p] = exports[p];\n          }\n         }\n       }\n      entry.esModule['default'] = exports;\n      defineProperty(entry.esModule, '__useDefault', {\n        value: true\n      });\n    }\n  }\n\n  /*\n   * Given a module, and the list of modules for this current branch,\n   *  ensure that each of the dependencies of this module is evaluated\n   *  (unless one is a circular dependency already in the list of seen\n   *  modules, in which case we execute it)\n   *\n   * Then we evaluate the module itself depth-first left to right \n   * execution to match ES6 modules\n   */\n  function ensureEvaluated(moduleName, seen) {\n    var entry = defined[moduleName];\n\n    // if already seen, that means it's an already-evaluated non circular dependency\n    if (!entry || entry.evaluated || !entry.declarative)\n      return;\n\n    // this only applies to declarative modules which late-execute\n\n    seen.push(moduleName);\n\n    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {\n      var depName = entry.normalizedDeps[i];\n      if (indexOf.call(seen, depName) == -1) {\n        if (!defined[depName])\n          load(depName);\n        else\n          ensureEvaluated(depName, seen);\n      }\n    }\n\n    if (entry.evaluated)\n      return;\n\n    entry.evaluated = true;\n    entry.module.execute.call(global);\n  }\n\n  // magical execution function\n  var modules = {};\n  function load(name) {\n    if (modules[name])\n      return modules[name];\n\n    // node core modules\n    if (name.substr(0, 6) == '@node/')\n      return require(name.substr(6));\n\n    var entry = defined[name];\n\n    // first we check if this module has already been defined in the registry\n    if (!entry)\n      throw \"Module \" + name + \" not present.\";\n\n    // recursively ensure that the module and all its \n    // dependencies are linked (with dependency group handling)\n    link(name);\n\n    // now handle dependency execution in correct order\n    ensureEvaluated(name, []);\n\n    // remove from the registry\n    defined[name] = undefined;\n\n    // exported modules get __esModule defined for interop\n    if (entry.declarative)\n      defineProperty(entry.module.exports, '__esModule', { value: true });\n\n    // return the defined module object\n    return modules[name] = entry.declarative ? entry.module.exports : entry.esModule;\n  };\n\n  return function(mains, depNames, declare) {\n    return function(formatDetect) {\n      formatDetect(function(deps) {\n        var System = {\n          _nodeRequire: typeof require != 'undefined' && require.resolve && typeof process != 'undefined' && require,\n          register: register,\n          registerDynamic: registerDynamic,\n          get: load, \n          set: function(name, module) {\n            modules[name] = module; \n          },\n          newModule: function(module) {\n            return module;\n          }\n        };\n        System.set('@empty', {});\n\n        // register external dependencies\n        for (var i = 0; i < depNames.length; i++) (function(depName, dep) {\n          if (dep && dep.__esModule)\n            System.register(depName, [], function(_export) {\n              return {\n                setters: [],\n                execute: function() {\n                  for (var p in dep)\n                    if (p != '__esModule' && !(typeof p == 'object' && p + '' == 'Module'))\n                      _export(p, dep[p]);\n                }\n              };\n            });\n          else\n            System.registerDynamic(depName, [], false, function() {\n              return dep;\n            });\n        })(depNames[i], arguments[i]);\n\n        // register modules in this bundle\n        declare(System);\n\n        // load mains\n        var firstLoad = load(mains[0]);\n        if (mains.length > 1)\n          for (var i = 1; i < mains.length; i++)\n            load(mains[i]);\n\n        if (firstLoad.__useDefault)\n          return firstLoad['default'];\n        else\n          return firstLoad;\n      });\n    };\n  };\n\n})(typeof self != 'undefined' ? self : global)\n/* (['mainModule'], ['external-dep'], function($__System) {\n  System.register(...);\n})\n(function(factory) {\n  if (typeof define && define.amd)\n    define(['external-dep'], factory);\n  // etc UMD / module pattern\n})*/\n\n(['1'], [], function($__System) {\n\n(function(__global) {\n  var loader = $__System;\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  var indexOf = Array.prototype.indexOf || function(item) {\n    for (var i = 0, l = this.length; i < l; i++)\n      if (this[i] === item)\n        return i;\n    return -1;\n  }\n\n  function readMemberExpression(p, value) {\n    var pParts = p.split('.');\n    while (pParts.length)\n      value = value[pParts.shift()];\n    return value;\n  }\n\n  // bare minimum ignores for IE8\n  var ignoredGlobalProps = ['_g', 'sessionStorage', 'localStorage', 'clipboardData', 'frames', 'external', 'mozAnimationStartTime', 'webkitStorageInfo', 'webkitIndexedDB'];\n\n  var globalSnapshot;\n\n  function forEachGlobal(callback) {\n    if (Object.keys)\n      Object.keys(__global).forEach(callback);\n    else\n      for (var g in __global) {\n        if (!hasOwnProperty.call(__global, g))\n          continue;\n        callback(g);\n      }\n  }\n\n  function forEachGlobalValue(callback) {\n    forEachGlobal(function(globalName) {\n      if (indexOf.call(ignoredGlobalProps, globalName) != -1)\n        return;\n      try {\n        var value = __global[globalName];\n      }\n      catch (e) {\n        ignoredGlobalProps.push(globalName);\n      }\n      callback(globalName, value);\n    });\n  }\n\n  loader.set('@@global-helpers', loader.newModule({\n    prepareGlobal: function(moduleName, exportName, globals) {\n      // disable module detection\n      var curDefine = __global.define;\n       \n      __global.define = undefined;\n      __global.exports = undefined;\n      if (__global.module && __global.module.exports)\n        __global.module = undefined;\n\n      // set globals\n      var oldGlobals;\n      if (globals) {\n        oldGlobals = {};\n        for (var g in globals) {\n          oldGlobals[g] = globals[g];\n          __global[g] = globals[g];\n        }\n      }\n\n      // store a complete copy of the global object in order to detect changes\n      if (!exportName) {\n        globalSnapshot = {};\n\n        forEachGlobalValue(function(name, value) {\n          globalSnapshot[name] = value;\n        });\n      }\n\n      // return function to retrieve global\n      return function() {\n        var globalValue;\n\n        if (exportName) {\n          globalValue = readMemberExpression(exportName, __global);\n        }\n        else {\n          var singleGlobal;\n          var multipleExports;\n          var exports = {};\n\n          forEachGlobalValue(function(name, value) {\n            if (globalSnapshot[name] === value)\n              return;\n            if (typeof value == 'undefined')\n              return;\n            exports[name] = value;\n\n            if (typeof singleGlobal != 'undefined') {\n              if (!multipleExports && singleGlobal !== value)\n                multipleExports = true;\n            }\n            else {\n              singleGlobal = value;\n            }\n          });\n          globalValue = multipleExports ? exports : singleGlobal;\n        }\n\n        // revert globals\n        if (oldGlobals) {\n          for (var g in oldGlobals)\n            __global[g] = oldGlobals[g];\n        }\n        __global.define = curDefine;\n\n        return globalValue;\n      };\n    }\n  }));\n\n})(typeof self != 'undefined' ? self : global);\n\n(function(__global) {\n  var loader = $__System;\n  var indexOf = Array.prototype.indexOf || function(item) {\n    for (var i = 0, l = this.length; i < l; i++)\n      if (this[i] === item)\n        return i;\n    return -1;\n  }\n\n  var commentRegEx = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg;\n  var cjsRequirePre = \"(?:^|[^$_a-zA-Z\\\\xA0-\\\\uFFFF.])\";\n  var cjsRequirePost = \"\\\\s*\\\\(\\\\s*(\\\"([^\\\"]+)\\\"|'([^']+)')\\\\s*\\\\)\";\n  var fnBracketRegEx = /\\(([^\\)]*)\\)/;\n  var wsRegEx = /^\\s+|\\s+$/g;\n  \n  var requireRegExs = {};\n\n  function getCJSDeps(source, requireIndex) {\n\n    // remove comments\n    source = source.replace(commentRegEx, '');\n\n    // determine the require alias\n    var params = source.match(fnBracketRegEx);\n    var requireAlias = (params[1].split(',')[requireIndex] || 'require').replace(wsRegEx, '');\n\n    // find or generate the regex for this requireAlias\n    var requireRegEx = requireRegExs[requireAlias] || (requireRegExs[requireAlias] = new RegExp(cjsRequirePre + requireAlias + cjsRequirePost, 'g'));\n\n    requireRegEx.lastIndex = 0;\n\n    var deps = [];\n\n    var match;\n    while (match = requireRegEx.exec(source))\n      deps.push(match[2] || match[3]);\n\n    return deps;\n  }\n\n  /*\n    AMD-compatible require\n    To copy RequireJS, set window.require = window.requirejs = loader.amdRequire\n  */\n  function require(names, callback, errback, referer) {\n    // in amd, first arg can be a config object... we just ignore\n    if (typeof names == 'object' && !(names instanceof Array))\n      return require.apply(null, Array.prototype.splice.call(arguments, 1, arguments.length - 1));\n\n    // amd require\n    if (typeof names == 'string' && typeof callback == 'function')\n      names = [names];\n    if (names instanceof Array) {\n      var dynamicRequires = [];\n      for (var i = 0; i < names.length; i++)\n        dynamicRequires.push(loader['import'](names[i], referer));\n      Promise.all(dynamicRequires).then(function(modules) {\n        if (callback)\n          callback.apply(null, modules);\n      }, errback);\n    }\n\n    // commonjs require\n    else if (typeof names == 'string') {\n      var module = loader.get(names);\n      return module.__useDefault ? module['default'] : module;\n    }\n\n    else\n      throw new TypeError('Invalid require');\n  }\n\n  function define(name, deps, factory) {\n    if (typeof name != 'string') {\n      factory = deps;\n      deps = name;\n      name = null;\n    }\n    if (!(deps instanceof Array)) {\n      factory = deps;\n      deps = ['require', 'exports', 'module'].splice(0, factory.length);\n    }\n\n    if (typeof factory != 'function')\n      factory = (function(factory) {\n        return function() { return factory; }\n      })(factory);\n\n    // in IE8, a trailing comma becomes a trailing undefined entry\n    if (deps[deps.length - 1] === undefined)\n      deps.pop();\n\n    // remove system dependencies\n    var requireIndex, exportsIndex, moduleIndex;\n    \n    if ((requireIndex = indexOf.call(deps, 'require')) != -1) {\n      \n      deps.splice(requireIndex, 1);\n\n      // only trace cjs requires for non-named\n      // named defines assume the trace has already been done\n      if (!name)\n        deps = deps.concat(getCJSDeps(factory.toString(), requireIndex));\n    }\n\n    if ((exportsIndex = indexOf.call(deps, 'exports')) != -1)\n      deps.splice(exportsIndex, 1);\n    \n    if ((moduleIndex = indexOf.call(deps, 'module')) != -1)\n      deps.splice(moduleIndex, 1);\n\n    var define = {\n      name: name,\n      deps: deps,\n      execute: function(req, exports, module) {\n\n        var depValues = [];\n        for (var i = 0; i < deps.length; i++)\n          depValues.push(req(deps[i]));\n\n        module.uri = module.id;\n\n        module.config = function() {};\n\n        // add back in system dependencies\n        if (moduleIndex != -1)\n          depValues.splice(moduleIndex, 0, module);\n        \n        if (exportsIndex != -1)\n          depValues.splice(exportsIndex, 0, exports);\n        \n        if (requireIndex != -1) \n          depValues.splice(requireIndex, 0, function(names, callback, errback) {\n            if (typeof names == 'string' && typeof callback != 'function')\n              return req(names);\n            return require.call(loader, names, callback, errback, module.id);\n          });\n\n        var output = factory.apply(exportsIndex == -1 ? __global : exports, depValues);\n\n        if (typeof output == 'undefined' && module)\n          output = module.exports;\n\n        if (typeof output != 'undefined')\n          return output;\n      }\n    };\n\n    // anonymous define\n    if (!name) {\n      // already defined anonymously -> throw\n      if (lastModule.anonDefine)\n        throw new TypeError('Multiple defines for anonymous module');\n      lastModule.anonDefine = define;\n    }\n    // named define\n    else {\n      // if we don't have any other defines,\n      // then let this be an anonymous define\n      // this is just to support single modules of the form:\n      // define('jquery')\n      // still loading anonymously\n      // because it is done widely enough to be useful\n      if (!lastModule.anonDefine && !lastModule.isBundle) {\n        lastModule.anonDefine = define;\n      }\n      // otherwise its a bundle only\n      else {\n        // if there is an anonDefine already (we thought it could have had a single named define)\n        // then we define it now\n        // this is to avoid defining named defines when they are actually anonymous\n        if (lastModule.anonDefine && lastModule.anonDefine.name)\n          loader.registerDynamic(lastModule.anonDefine.name, lastModule.anonDefine.deps, false, lastModule.anonDefine.execute);\n\n        lastModule.anonDefine = null;\n      }\n\n      // note this is now a bundle\n      lastModule.isBundle = true;\n\n      // define the module through the register registry\n      loader.registerDynamic(name, define.deps, false, define.execute);\n    }\n  }\n  define.amd = {};\n\n  // adds define as a global (potentially just temporarily)\n  function createDefine(loader) {\n    lastModule.anonDefine = null;\n    lastModule.isBundle = false;\n\n    // ensure no NodeJS environment detection\n    var oldModule = __global.module;\n    var oldExports = __global.exports;\n    var oldDefine = __global.define;\n\n    __global.module = undefined;\n    __global.exports = undefined;\n    __global.define = define;\n\n    return function() {\n      __global.define = oldDefine;\n      __global.module = oldModule;\n      __global.exports = oldExports;\n    };\n  }\n\n  var lastModule = {\n    isBundle: false,\n    anonDefine: null\n  };\n\n  loader.set('@@amd-helpers', loader.newModule({\n    createDefine: createDefine,\n    require: require,\n    define: define,\n    lastModule: lastModule\n  }));\n  loader.amdDefine = define;\n  loader.amdRequire = require;\n})(typeof self != 'undefined' ? self : global);\n\n\"bundle\";\n(function() {\nvar _removeDefine = $__System.get(\"@@amd-helpers\").createDefine();\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\")\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd)\n    define(\"2\", [\"3\"], mod);\n  else\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n  CodeMirror.defineMode(\"javascript\", function(config, parserConfig) {\n    var indentUnit = config.indentUnit;\n    var statementIndent = parserConfig.statementIndent;\n    var jsonldMode = parserConfig.jsonld;\n    var jsonMode = parserConfig.json || jsonldMode;\n    var isTS = parserConfig.typescript;\n    var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n    var keywords = function() {\n      function kw(type) {\n        return {\n          type: type,\n          style: \"keyword\"\n        };\n      }\n      var A = kw(\"keyword a\"),\n          B = kw(\"keyword b\"),\n          C = kw(\"keyword c\");\n      var operator = kw(\"operator\"),\n          atom = {\n            type: \"atom\",\n            style: \"atom\"\n          };\n      var jsKeywords = {\n        \"if\": kw(\"if\"),\n        \"while\": A,\n        \"with\": A,\n        \"else\": B,\n        \"do\": B,\n        \"try\": B,\n        \"finally\": B,\n        \"return\": C,\n        \"break\": C,\n        \"continue\": C,\n        \"new\": kw(\"new\"),\n        \"delete\": C,\n        \"throw\": C,\n        \"debugger\": C,\n        \"var\": kw(\"var\"),\n        \"const\": kw(\"var\"),\n        \"let\": kw(\"var\"),\n        \"async\": kw(\"async\"),\n        \"function\": kw(\"function\"),\n        \"catch\": kw(\"catch\"),\n        \"for\": kw(\"for\"),\n        \"switch\": kw(\"switch\"),\n        \"case\": kw(\"case\"),\n        \"default\": kw(\"default\"),\n        \"in\": operator,\n        \"typeof\": operator,\n        \"instanceof\": operator,\n        \"true\": atom,\n        \"false\": atom,\n        \"null\": atom,\n        \"undefined\": atom,\n        \"NaN\": atom,\n        \"Infinity\": atom,\n        \"this\": kw(\"this\"),\n        \"class\": kw(\"class\"),\n        \"super\": kw(\"atom\"),\n        \"await\": C,\n        \"yield\": C,\n        \"export\": kw(\"export\"),\n        \"import\": kw(\"import\"),\n        \"extends\": C\n      };\n      if (isTS) {\n        var type = {\n          type: \"variable\",\n          style: \"variable-3\"\n        };\n        var tsKeywords = {\n          \"interface\": kw(\"interface\"),\n          \"extends\": kw(\"extends\"),\n          \"constructor\": kw(\"constructor\"),\n          \"public\": kw(\"public\"),\n          \"private\": kw(\"private\"),\n          \"protected\": kw(\"protected\"),\n          \"static\": kw(\"static\"),\n          \"string\": type,\n          \"number\": type,\n          \"boolean\": type,\n          \"any\": type\n        };\n        for (var attr in tsKeywords) {\n          jsKeywords[attr] = tsKeywords[attr];\n        }\n      }\n      return jsKeywords;\n    }();\n    var isOperatorChar = /[+\\-*&%=<>!?|~^]/;\n    var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n    function readRegexp(stream) {\n      var escaped = false,\n          next,\n          inSet = false;\n      while ((next = stream.next()) != null) {\n        if (!escaped) {\n          if (next == \"/\" && !inSet)\n            return;\n          if (next == \"[\")\n            inSet = true;\n          else if (inSet && next == \"]\")\n            inSet = false;\n        }\n        escaped = !escaped && next == \"\\\\\";\n      }\n    }\n    var type,\n        content;\n    function ret(tp, style, cont) {\n      type = tp;\n      content = cont;\n      return style;\n    }\n    function tokenBase(stream, state) {\n      var ch = stream.next();\n      if (ch == '\"' || ch == \"'\") {\n        state.tokenize = tokenString(ch);\n        return state.tokenize(stream, state);\n      } else if (ch == \".\" && stream.match(/^\\d+(?:[eE][+\\-]?\\d+)?/)) {\n        return ret(\"number\", \"number\");\n      } else if (ch == \".\" && stream.match(\"..\")) {\n        return ret(\"spread\", \"meta\");\n      } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n        return ret(ch);\n      } else if (ch == \"=\" && stream.eat(\">\")) {\n        return ret(\"=>\", \"operator\");\n      } else if (ch == \"0\" && stream.eat(/x/i)) {\n        stream.eatWhile(/[\\da-f]/i);\n        return ret(\"number\", \"number\");\n      } else if (ch == \"0\" && stream.eat(/o/i)) {\n        stream.eatWhile(/[0-7]/i);\n        return ret(\"number\", \"number\");\n      } else if (ch == \"0\" && stream.eat(/b/i)) {\n        stream.eatWhile(/[01]/i);\n        return ret(\"number\", \"number\");\n      } else if (/\\d/.test(ch)) {\n        stream.match(/^\\d*(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/);\n        return ret(\"number\", \"number\");\n      } else if (ch == \"/\") {\n        if (stream.eat(\"*\")) {\n          state.tokenize = tokenComment;\n          return tokenComment(stream, state);\n        } else if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return ret(\"comment\", \"comment\");\n        } else if (state.lastType == \"operator\" || state.lastType == \"keyword c\" || state.lastType == \"sof\" || /^[\\[{}\\(,;:]$/.test(state.lastType)) {\n          readRegexp(stream);\n          stream.match(/^\\b(([gimyu])(?![gimyu]*\\2))+\\b/);\n          return ret(\"regexp\", \"string-2\");\n        } else {\n          stream.eatWhile(isOperatorChar);\n          return ret(\"operator\", \"operator\", stream.current());\n        }\n      } else if (ch == \"`\") {\n        state.tokenize = tokenQuasi;\n        return tokenQuasi(stream, state);\n      } else if (ch == \"#\") {\n        stream.skipToEnd();\n        return ret(\"error\", \"error\");\n      } else if (isOperatorChar.test(ch)) {\n        stream.eatWhile(isOperatorChar);\n        return ret(\"operator\", \"operator\", stream.current());\n      } else if (wordRE.test(ch)) {\n        stream.eatWhile(wordRE);\n        var word = stream.current(),\n            known = keywords.propertyIsEnumerable(word) && keywords[word];\n        return (known && state.lastType != \".\") ? ret(known.type, known.style, word) : ret(\"variable\", \"variable\", word);\n      }\n    }\n    function tokenString(quote) {\n      return function(stream, state) {\n        var escaped = false,\n            next;\n        if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)) {\n          state.tokenize = tokenBase;\n          return ret(\"jsonld-keyword\", \"meta\");\n        }\n        while ((next = stream.next()) != null) {\n          if (next == quote && !escaped)\n            break;\n          escaped = !escaped && next == \"\\\\\";\n        }\n        if (!escaped)\n          state.tokenize = tokenBase;\n        return ret(\"string\", \"string\");\n      };\n    }\n    function tokenComment(stream, state) {\n      var maybeEnd = false,\n          ch;\n      while (ch = stream.next()) {\n        if (ch == \"/\" && maybeEnd) {\n          state.tokenize = tokenBase;\n          break;\n        }\n        maybeEnd = (ch == \"*\");\n      }\n      return ret(\"comment\", \"comment\");\n    }\n    function tokenQuasi(stream, state) {\n      var escaped = false,\n          next;\n      while ((next = stream.next()) != null) {\n        if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n          state.tokenize = tokenBase;\n          break;\n        }\n        escaped = !escaped && next == \"\\\\\";\n      }\n      return ret(\"quasi\", \"string-2\", stream.current());\n    }\n    var brackets = \"([{}])\";\n    function findFatArrow(stream, state) {\n      if (state.fatArrowAt)\n        state.fatArrowAt = null;\n      var arrow = stream.string.indexOf(\"=>\", stream.start);\n      if (arrow < 0)\n        return;\n      var depth = 0,\n          sawSomething = false;\n      for (var pos = arrow - 1; pos >= 0; --pos) {\n        var ch = stream.string.charAt(pos);\n        var bracket = brackets.indexOf(ch);\n        if (bracket >= 0 && bracket < 3) {\n          if (!depth) {\n            ++pos;\n            break;\n          }\n          if (--depth == 0)\n            break;\n        } else if (bracket >= 3 && bracket < 6) {\n          ++depth;\n        } else if (wordRE.test(ch)) {\n          sawSomething = true;\n        } else if (/[\"'\\/]/.test(ch)) {\n          return;\n        } else if (sawSomething && !depth) {\n          ++pos;\n          break;\n        }\n      }\n      if (sawSomething && !depth)\n        state.fatArrowAt = pos;\n    }\n    var atomicTypes = {\n      \"atom\": true,\n      \"number\": true,\n      \"variable\": true,\n      \"string\": true,\n      \"regexp\": true,\n      \"this\": true,\n      \"jsonld-keyword\": true\n    };\n    function JSLexical(indented, column, type, align, prev, info) {\n      this.indented = indented;\n      this.column = column;\n      this.type = type;\n      this.prev = prev;\n      this.info = info;\n      if (align != null)\n        this.align = align;\n    }\n    function inScope(state, varname) {\n      for (var v = state.localVars; v; v = v.next)\n        if (v.name == varname)\n          return true;\n      for (var cx = state.context; cx; cx = cx.prev) {\n        for (var v = cx.vars; v; v = v.next)\n          if (v.name == varname)\n            return true;\n      }\n    }\n    function parseJS(state, style, type, content, stream) {\n      var cc = state.cc;\n      cx.state = state;\n      cx.stream = stream;\n      cx.marked = null, cx.cc = cc;\n      cx.style = style;\n      if (!state.lexical.hasOwnProperty(\"align\"))\n        state.lexical.align = true;\n      while (true) {\n        var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n        if (combinator(type, content)) {\n          while (cc.length && cc[cc.length - 1].lex)\n            cc.pop()();\n          if (cx.marked)\n            return cx.marked;\n          if (type == \"variable\" && inScope(state, content))\n            return \"variable-2\";\n          return style;\n        }\n      }\n    }\n    var cx = {\n      state: null,\n      column: null,\n      marked: null,\n      cc: null\n    };\n    function pass() {\n      for (var i = arguments.length - 1; i >= 0; i--)\n        cx.cc.push(arguments[i]);\n    }\n    function cont() {\n      pass.apply(null, arguments);\n      return true;\n    }\n    function register(varname) {\n      function inList(list) {\n        for (var v = list; v; v = v.next)\n          if (v.name == varname)\n            return true;\n        return false;\n      }\n      var state = cx.state;\n      cx.marked = \"def\";\n      if (state.context) {\n        if (inList(state.localVars))\n          return;\n        state.localVars = {\n          name: varname,\n          next: state.localVars\n        };\n      } else {\n        if (inList(state.globalVars))\n          return;\n        if (parserConfig.globalVars)\n          state.globalVars = {\n            name: varname,\n            next: state.globalVars\n          };\n      }\n    }\n    var defaultVars = {\n      name: \"this\",\n      next: {name: \"arguments\"}\n    };\n    function pushcontext() {\n      cx.state.context = {\n        prev: cx.state.context,\n        vars: cx.state.localVars\n      };\n      cx.state.localVars = defaultVars;\n    }\n    function popcontext() {\n      cx.state.localVars = cx.state.context.vars;\n      cx.state.context = cx.state.context.prev;\n    }\n    function pushlex(type, info) {\n      var result = function() {\n        var state = cx.state,\n            indent = state.indented;\n        if (state.lexical.type == \"stat\")\n          indent = state.lexical.indented;\n        else\n          for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev)\n            indent = outer.indented;\n        state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n      };\n      result.lex = true;\n      return result;\n    }\n    function poplex() {\n      var state = cx.state;\n      if (state.lexical.prev) {\n        if (state.lexical.type == \")\")\n          state.indented = state.lexical.indented;\n        state.lexical = state.lexical.prev;\n      }\n    }\n    poplex.lex = true;\n    function expect(wanted) {\n      function exp(type) {\n        if (type == wanted)\n          return cont();\n        else if (wanted == \";\")\n          return pass();\n        else\n          return cont(exp);\n      }\n      ;\n      return exp;\n    }\n    function statement(type, value) {\n      if (type == \"var\")\n        return cont(pushlex(\"vardef\", value.length), vardef, expect(\";\"), poplex);\n      if (type == \"keyword a\")\n        return cont(pushlex(\"form\"), expression, statement, poplex);\n      if (type == \"keyword b\")\n        return cont(pushlex(\"form\"), statement, poplex);\n      if (type == \"{\")\n        return cont(pushlex(\"}\"), block, poplex);\n      if (type == \";\")\n        return cont();\n      if (type == \"if\") {\n        if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex)\n          cx.state.cc.pop()();\n        return cont(pushlex(\"form\"), expression, statement, poplex, maybeelse);\n      }\n      if (type == \"function\")\n        return cont(functiondef);\n      if (type == \"for\")\n        return cont(pushlex(\"form\"), forspec, statement, poplex);\n      if (type == \"variable\")\n        return cont(pushlex(\"stat\"), maybelabel);\n      if (type == \"switch\")\n        return cont(pushlex(\"form\"), expression, pushlex(\"}\", \"switch\"), expect(\"{\"), block, poplex, poplex);\n      if (type == \"case\")\n        return cont(expression, expect(\":\"));\n      if (type == \"default\")\n        return cont(expect(\":\"));\n      if (type == \"catch\")\n        return cont(pushlex(\"form\"), pushcontext, expect(\"(\"), funarg, expect(\")\"), statement, poplex, popcontext);\n      if (type == \"class\")\n        return cont(pushlex(\"form\"), className, poplex);\n      if (type == \"export\")\n        return cont(pushlex(\"stat\"), afterExport, poplex);\n      if (type == \"import\")\n        return cont(pushlex(\"stat\"), afterImport, poplex);\n      return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n    }\n    function expression(type) {\n      return expressionInner(type, false);\n    }\n    function expressionNoComma(type) {\n      return expressionInner(type, true);\n    }\n    function expressionInner(type, noComma) {\n      if (cx.state.fatArrowAt == cx.stream.start) {\n        var body = noComma ? arrowBodyNoComma : arrowBody;\n        if (type == \"(\")\n          return cont(pushcontext, pushlex(\")\"), commasep(pattern, \")\"), poplex, expect(\"=>\"), body, popcontext);\n        else if (type == \"variable\")\n          return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n      }\n      var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n      if (atomicTypes.hasOwnProperty(type))\n        return cont(maybeop);\n      if (type == \"async\")\n        return cont(expression);\n      if (type == \"function\")\n        return cont(functiondef, maybeop);\n      if (type == \"keyword c\")\n        return cont(noComma ? maybeexpressionNoComma : maybeexpression);\n      if (type == \"(\")\n        return cont(pushlex(\")\"), maybeexpression, comprehension, expect(\")\"), poplex, maybeop);\n      if (type == \"operator\" || type == \"spread\")\n        return cont(noComma ? expressionNoComma : expression);\n      if (type == \"[\")\n        return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n      if (type == \"{\")\n        return contCommasep(objprop, \"}\", null, maybeop);\n      if (type == \"quasi\")\n        return pass(quasi, maybeop);\n      if (type == \"new\")\n        return cont(maybeTarget(noComma));\n      return cont();\n    }\n    function maybeexpression(type) {\n      if (type.match(/[;\\}\\)\\],]/))\n        return pass();\n      return pass(expression);\n    }\n    function maybeexpressionNoComma(type) {\n      if (type.match(/[;\\}\\)\\],]/))\n        return pass();\n      return pass(expressionNoComma);\n    }\n    function maybeoperatorComma(type, value) {\n      if (type == \",\")\n        return cont(expression);\n      return maybeoperatorNoComma(type, value, false);\n    }\n    function maybeoperatorNoComma(type, value, noComma) {\n      var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n      var expr = noComma == false ? expression : expressionNoComma;\n      if (type == \"=>\")\n        return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n      if (type == \"operator\") {\n        if (/\\+\\+|--/.test(value))\n          return cont(me);\n        if (value == \"?\")\n          return cont(expression, expect(\":\"), expr);\n        return cont(expr);\n      }\n      if (type == \"quasi\") {\n        return pass(quasi, me);\n      }\n      if (type == \";\")\n        return;\n      if (type == \"(\")\n        return contCommasep(expressionNoComma, \")\", \"call\", me);\n      if (type == \".\")\n        return cont(property, me);\n      if (type == \"[\")\n        return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n    }\n    function quasi(type, value) {\n      if (type != \"quasi\")\n        return pass();\n      if (value.slice(value.length - 2) != \"${\")\n        return cont(quasi);\n      return cont(expression, continueQuasi);\n    }\n    function continueQuasi(type) {\n      if (type == \"}\") {\n        cx.marked = \"string-2\";\n        cx.state.tokenize = tokenQuasi;\n        return cont(quasi);\n      }\n    }\n    function arrowBody(type) {\n      findFatArrow(cx.stream, cx.state);\n      return pass(type == \"{\" ? statement : expression);\n    }\n    function arrowBodyNoComma(type) {\n      findFatArrow(cx.stream, cx.state);\n      return pass(type == \"{\" ? statement : expressionNoComma);\n    }\n    function maybeTarget(noComma) {\n      return function(type) {\n        if (type == \".\")\n          return cont(noComma ? targetNoComma : target);\n        else\n          return pass(noComma ? expressionNoComma : expression);\n      };\n    }\n    function target(_, value) {\n      if (value == \"target\") {\n        cx.marked = \"keyword\";\n        return cont(maybeoperatorComma);\n      }\n    }\n    function targetNoComma(_, value) {\n      if (value == \"target\") {\n        cx.marked = \"keyword\";\n        return cont(maybeoperatorNoComma);\n      }\n    }\n    function maybelabel(type) {\n      if (type == \":\")\n        return cont(poplex, statement);\n      return pass(maybeoperatorComma, expect(\";\"), poplex);\n    }\n    function property(type) {\n      if (type == \"variable\") {\n        cx.marked = \"property\";\n        return cont();\n      }\n    }\n    function objprop(type, value) {\n      if (type == \"async\") {\n        return cont(objprop);\n      } else if (type == \"variable\" || cx.style == \"keyword\") {\n        cx.marked = \"property\";\n        if (value == \"get\" || value == \"set\")\n          return cont(getterSetter);\n        return cont(afterprop);\n      } else if (type == \"number\" || type == \"string\") {\n        cx.marked = jsonldMode ? \"property\" : (cx.style + \" property\");\n        return cont(afterprop);\n      } else if (type == \"jsonld-keyword\") {\n        return cont(afterprop);\n      } else if (type == \"[\") {\n        return cont(expression, expect(\"]\"), afterprop);\n      }\n    }\n    function getterSetter(type) {\n      if (type != \"variable\")\n        return pass(afterprop);\n      cx.marked = \"property\";\n      return cont(functiondef);\n    }\n    function afterprop(type) {\n      if (type == \":\")\n        return cont(expressionNoComma);\n      if (type == \"(\")\n        return pass(functiondef);\n    }\n    function commasep(what, end) {\n      function proceed(type) {\n        if (type == \",\") {\n          var lex = cx.state.lexical;\n          if (lex.info == \"call\")\n            lex.pos = (lex.pos || 0) + 1;\n          return cont(what, proceed);\n        }\n        if (type == end)\n          return cont();\n        return cont(expect(end));\n      }\n      return function(type) {\n        if (type == end)\n          return cont();\n        return pass(what, proceed);\n      };\n    }\n    function contCommasep(what, end, info) {\n      for (var i = 3; i < arguments.length; i++)\n        cx.cc.push(arguments[i]);\n      return cont(pushlex(end, info), commasep(what, end), poplex);\n    }\n    function block(type) {\n      if (type == \"}\")\n        return cont();\n      return pass(statement, block);\n    }\n    function maybetype(type) {\n      if (isTS && type == \":\")\n        return cont(typedef);\n    }\n    function maybedefault(_, value) {\n      if (value == \"=\")\n        return cont(expressionNoComma);\n    }\n    function typedef(type) {\n      if (type == \"variable\") {\n        cx.marked = \"variable-3\";\n        return cont();\n      }\n    }\n    function vardef() {\n      return pass(pattern, maybetype, maybeAssign, vardefCont);\n    }\n    function pattern(type, value) {\n      if (type == \"variable\") {\n        register(value);\n        return cont();\n      }\n      if (type == \"spread\")\n        return cont(pattern);\n      if (type == \"[\")\n        return contCommasep(pattern, \"]\");\n      if (type == \"{\")\n        return contCommasep(proppattern, \"}\");\n    }\n    function proppattern(type, value) {\n      if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n        register(value);\n        return cont(maybeAssign);\n      }\n      if (type == \"variable\")\n        cx.marked = \"property\";\n      if (type == \"spread\")\n        return cont(pattern);\n      return cont(expect(\":\"), pattern, maybeAssign);\n    }\n    function maybeAssign(_type, value) {\n      if (value == \"=\")\n        return cont(expressionNoComma);\n    }\n    function vardefCont(type) {\n      if (type == \",\")\n        return cont(vardef);\n    }\n    function maybeelse(type, value) {\n      if (type == \"keyword b\" && value == \"else\")\n        return cont(pushlex(\"form\", \"else\"), statement, poplex);\n    }\n    function forspec(type) {\n      if (type == \"(\")\n        return cont(pushlex(\")\"), forspec1, expect(\")\"), poplex);\n    }\n    function forspec1(type) {\n      if (type == \"var\")\n        return cont(vardef, expect(\";\"), forspec2);\n      if (type == \";\")\n        return cont(forspec2);\n      if (type == \"variable\")\n        return cont(formaybeinof);\n      return pass(expression, expect(\";\"), forspec2);\n    }\n    function formaybeinof(_type, value) {\n      if (value == \"in\" || value == \"of\") {\n        cx.marked = \"keyword\";\n        return cont(expression);\n      }\n      return cont(maybeoperatorComma, forspec2);\n    }\n    function forspec2(type, value) {\n      if (type == \";\")\n        return cont(forspec3);\n      if (value == \"in\" || value == \"of\") {\n        cx.marked = \"keyword\";\n        return cont(expression);\n      }\n      return pass(expression, expect(\";\"), forspec3);\n    }\n    function forspec3(type) {\n      if (type != \")\")\n        cont(expression);\n    }\n    function functiondef(type, value) {\n      if (value == \"*\") {\n        cx.marked = \"keyword\";\n        return cont(functiondef);\n      }\n      if (type == \"variable\") {\n        register(value);\n        return cont(functiondef);\n      }\n      if (type == \"(\")\n        return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, statement, popcontext);\n    }\n    function funarg(type) {\n      if (type == \"spread\")\n        return cont(funarg);\n      return pass(pattern, maybetype, maybedefault);\n    }\n    function className(type, value) {\n      if (type == \"variable\") {\n        register(value);\n        return cont(classNameAfter);\n      }\n    }\n    function classNameAfter(type, value) {\n      if (value == \"extends\")\n        return cont(expression, classNameAfter);\n      if (type == \"{\")\n        return cont(pushlex(\"}\"), classBody, poplex);\n    }\n    function classBody(type, value) {\n      if (type == \"variable\" || cx.style == \"keyword\") {\n        if (value == \"static\") {\n          cx.marked = \"keyword\";\n          return cont(classBody);\n        }\n        cx.marked = \"property\";\n        if (value == \"get\" || value == \"set\")\n          return cont(classGetterSetter, functiondef, classBody);\n        return cont(functiondef, classBody);\n      }\n      if (value == \"*\") {\n        cx.marked = \"keyword\";\n        return cont(classBody);\n      }\n      if (type == \";\")\n        return cont(classBody);\n      if (type == \"}\")\n        return cont();\n    }\n    function classGetterSetter(type) {\n      if (type != \"variable\")\n        return pass();\n      cx.marked = \"property\";\n      return cont();\n    }\n    function afterExport(_type, value) {\n      if (value == \"*\") {\n        cx.marked = \"keyword\";\n        return cont(maybeFrom, expect(\";\"));\n      }\n      if (value == \"default\") {\n        cx.marked = \"keyword\";\n        return cont(expression, expect(\";\"));\n      }\n      return pass(statement);\n    }\n    function afterImport(type) {\n      if (type == \"string\")\n        return cont();\n      return pass(importSpec, maybeFrom);\n    }\n    function importSpec(type, value) {\n      if (type == \"{\")\n        return contCommasep(importSpec, \"}\");\n      if (type == \"variable\")\n        register(value);\n      if (value == \"*\")\n        cx.marked = \"keyword\";\n      return cont(maybeAs);\n    }\n    function maybeAs(_type, value) {\n      if (value == \"as\") {\n        cx.marked = \"keyword\";\n        return cont(importSpec);\n      }\n    }\n    function maybeFrom(_type, value) {\n      if (value == \"from\") {\n        cx.marked = \"keyword\";\n        return cont(expression);\n      }\n    }\n    function arrayLiteral(type) {\n      if (type == \"]\")\n        return cont();\n      return pass(expressionNoComma, maybeArrayComprehension);\n    }\n    function maybeArrayComprehension(type) {\n      if (type == \"for\")\n        return pass(comprehension, expect(\"]\"));\n      if (type == \",\")\n        return cont(commasep(maybeexpressionNoComma, \"]\"));\n      return pass(commasep(expressionNoComma, \"]\"));\n    }\n    function comprehension(type) {\n      if (type == \"for\")\n        return cont(forspec, comprehension);\n      if (type == \"if\")\n        return cont(expression, comprehension);\n    }\n    function isContinuedStatement(state, textAfter) {\n      return state.lastType == \"operator\" || state.lastType == \",\" || isOperatorChar.test(textAfter.charAt(0)) || /[,.]/.test(textAfter.charAt(0));\n    }\n    return {\n      startState: function(basecolumn) {\n        var state = {\n          tokenize: tokenBase,\n          lastType: \"sof\",\n          cc: [],\n          lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n          localVars: parserConfig.localVars,\n          context: parserConfig.localVars && {vars: parserConfig.localVars},\n          indented: 0\n        };\n        if (parserConfig.globalVars && typeof parserConfig.globalVars == \"object\")\n          state.globalVars = parserConfig.globalVars;\n        return state;\n      },\n      token: function(stream, state) {\n        if (stream.sol()) {\n          if (!state.lexical.hasOwnProperty(\"align\"))\n            state.lexical.align = false;\n          state.indented = stream.indentation();\n          findFatArrow(stream, state);\n        }\n        if (state.tokenize != tokenComment && stream.eatSpace())\n          return null;\n        var style = state.tokenize(stream, state);\n        if (type == \"comment\")\n          return style;\n        state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n        return parseJS(state, style, type, content, stream);\n      },\n      indent: function(state, textAfter) {\n        if (state.tokenize == tokenComment)\n          return CodeMirror.Pass;\n        if (state.tokenize != tokenBase)\n          return 0;\n        var firstChar = textAfter && textAfter.charAt(0),\n            lexical = state.lexical;\n        if (!/^\\s*else\\b/.test(textAfter))\n          for (var i = state.cc.length - 1; i >= 0; --i) {\n            var c = state.cc[i];\n            if (c == poplex)\n              lexical = lexical.prev;\n            else if (c != maybeelse)\n              break;\n          }\n        if (lexical.type == \"stat\" && firstChar == \"}\")\n          lexical = lexical.prev;\n        if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\")\n          lexical = lexical.prev;\n        var type = lexical.type,\n            closing = firstChar == type;\n        if (type == \"vardef\")\n          return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info + 1 : 0);\n        else if (type == \"form\" && firstChar == \"{\")\n          return lexical.indented;\n        else if (type == \"form\")\n          return lexical.indented + indentUnit;\n        else if (type == \"stat\")\n          return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);\n        else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false)\n          return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);\n        else if (lexical.align)\n          return lexical.column + (closing ? 0 : 1);\n        else\n          return lexical.indented + (closing ? 0 : indentUnit);\n      },\n      electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n      blockCommentStart: jsonMode ? null : \"/*\",\n      blockCommentEnd: jsonMode ? null : \"*/\",\n      lineComment: jsonMode ? null : \"//\",\n      fold: \"brace\",\n      closeBrackets: \"()[]{}''\\\"\\\"``\",\n      helperType: jsonMode ? \"json\" : \"javascript\",\n      jsonldMode: jsonldMode,\n      jsonMode: jsonMode\n    };\n  });\n  CodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n  CodeMirror.defineMIME(\"text/javascript\", \"javascript\");\n  CodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\n  CodeMirror.defineMIME(\"application/javascript\", \"javascript\");\n  CodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\n  CodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\n  CodeMirror.defineMIME(\"application/json\", {\n    name: \"javascript\",\n    json: true\n  });\n  CodeMirror.defineMIME(\"application/x-json\", {\n    name: \"javascript\",\n    json: true\n  });\n  CodeMirror.defineMIME(\"application/ld+json\", {\n    name: \"javascript\",\n    jsonld: true\n  });\n  CodeMirror.defineMIME(\"text/typescript\", {\n    name: \"javascript\",\n    typescript: true\n  });\n  CodeMirror.defineMIME(\"application/typescript\", {\n    name: \"javascript\",\n    typescript: true\n  });\n});\n\n_removeDefine();\n})();\n(function() {\nvar _removeDefine = $__System.get(\"@@amd-helpers\").createDefine();\ndefine(\"4\", [], function() {\n  return function(json) {\n    var tokenizer = /\"|(\\/\\*)|(\\*\\/)|(\\/\\/)|\\n|\\r/g,\n        in_string = false,\n        in_multiline_comment = false,\n        in_singleline_comment = false,\n        tmp,\n        tmp2,\n        new_str = [],\n        ns = 0,\n        from = 0,\n        lc,\n        rc;\n    ;\n    tokenizer.lastIndex = 0;\n    while (tmp = tokenizer.exec(json)) {\n      lc = RegExp.leftContext;\n      rc = RegExp.rightContext;\n      if (!in_multiline_comment && !in_singleline_comment) {\n        tmp2 = lc.substring(from);\n        if (!in_string) {\n          tmp2 = tmp2.replace(/(\\n|\\r|\\s)*/g, \"\");\n        }\n        new_str[ns++] = tmp2;\n      }\n      from = tokenizer.lastIndex;\n      if (tmp[0] == \"\\\"\" && !in_multiline_comment && !in_singleline_comment) {\n        tmp2 = lc.match(/(\\\\)*$/);\n        if (!in_string || !tmp2 || (tmp2[0].length % 2) == 0) {\n          in_string = !in_string;\n        }\n        from--;\n        rc = json.substring(from);\n      } else if (tmp[0] == \"/*\" && !in_string && !in_multiline_comment && !in_singleline_comment) {\n        in_multiline_comment = true;\n      } else if (tmp[0] == \"*/\" && !in_string && in_multiline_comment && !in_singleline_comment) {\n        in_multiline_comment = false;\n      } else if (tmp[0] == \"//\" && !in_string && !in_multiline_comment && !in_singleline_comment) {\n        in_singleline_comment = true;\n      } else if ((tmp[0] == \"\\n\" || tmp[0] == \"\\r\") && !in_string && !in_multiline_comment && in_singleline_comment) {\n        in_singleline_comment = false;\n      } else if (!in_multiline_comment && !in_singleline_comment && !(/\\n|\\r|\\s/.test(tmp[0]))) {\n        new_str[ns++] = tmp[0];\n      }\n    }\n    new_str[ns++] = rc;\n    return new_str.join(\"\");\n  };\n});\n\n_removeDefine();\n})();\n(function() {\nvar _removeDefine = $__System.get(\"@@amd-helpers\").createDefine();\n(function() {\n  var acorn = {};\n  (function(exports) {\n    var nonASCIIwhitespace = /[\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]/;\n    var nonASCIIidentifierStartChars = \"\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\";\n    var nonASCIIidentifierChars = \"\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f\";\n    var nonASCIIidentifierStart = new RegExp(\"[\" + nonASCIIidentifierStartChars + \"]\");\n    var nonASCIIidentifier = new RegExp(\"[\" + nonASCIIidentifierStartChars + nonASCIIidentifierChars + \"]\");\n    var newline = exports.newline = /[\\n\\r\\u2028\\u2029]/;\n    var lineBreak = exports.lineBreak = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n    var isIdentifierStart = exports.isIdentifierStart = function(code) {\n      if (code < 65)\n        return code === 36;\n      if (code < 91)\n        return true;\n      if (code < 97)\n        return code === 95;\n      if (code < 123)\n        return true;\n      return code >= 0xaa && nonASCIIidentifierStart.test(String.fromCharCode(code));\n    };\n    var isIdentifierChar = exports.isIdentifierChar = function(code) {\n      if (code < 48)\n        return code === 36;\n      if (code < 58)\n        return true;\n      if (code < 65)\n        return false;\n      if (code < 91)\n        return true;\n      if (code < 97)\n        return code === 95;\n      if (code < 123)\n        return true;\n      return code >= 0xaa && nonASCIIidentifier.test(String.fromCharCode(code));\n    };\n  })(acorn);\n  function in_array(what, arr) {\n    for (var i = 0; i < arr.length; i += 1) {\n      if (arr[i] === what) {\n        return true;\n      }\n    }\n    return false;\n  }\n  function trim(s) {\n    return s.replace(/^\\s+|\\s+$/g, '');\n  }\n  function ltrim(s) {\n    return s.replace(/^\\s+/g, '');\n  }\n  function rtrim(s) {\n    return s.replace(/\\s+$/g, '');\n  }\n  function js_beautify(js_source_text, options) {\n    \"use strict\";\n    var beautifier = new Beautifier(js_source_text, options);\n    return beautifier.beautify();\n  }\n  var MODE = {\n    BlockStatement: 'BlockStatement',\n    Statement: 'Statement',\n    ObjectLiteral: 'ObjectLiteral',\n    ArrayLiteral: 'ArrayLiteral',\n    ForInitializer: 'ForInitializer',\n    Conditional: 'Conditional',\n    Expression: 'Expression'\n  };\n  function Beautifier(js_source_text, options) {\n    \"use strict\";\n    var output;\n    var tokens = [],\n        token_pos;\n    var Tokenizer;\n    var current_token;\n    var last_type,\n        last_last_text,\n        indent_string;\n    var flags,\n        previous_flags,\n        flag_store;\n    var prefix;\n    var handlers,\n        opt;\n    var baseIndentString = '';\n    handlers = {\n      'TK_START_EXPR': handle_start_expr,\n      'TK_END_EXPR': handle_end_expr,\n      'TK_START_BLOCK': handle_start_block,\n      'TK_END_BLOCK': handle_end_block,\n      'TK_WORD': handle_word,\n      'TK_RESERVED': handle_word,\n      'TK_SEMICOLON': handle_semicolon,\n      'TK_STRING': handle_string,\n      'TK_EQUALS': handle_equals,\n      'TK_OPERATOR': handle_operator,\n      'TK_COMMA': handle_comma,\n      'TK_BLOCK_COMMENT': handle_block_comment,\n      'TK_COMMENT': handle_comment,\n      'TK_DOT': handle_dot,\n      'TK_UNKNOWN': handle_unknown,\n      'TK_EOF': handle_eof\n    };\n    function create_flags(flags_base, mode) {\n      var next_indent_level = 0;\n      if (flags_base) {\n        next_indent_level = flags_base.indentation_level;\n        if (!output.just_added_newline() && flags_base.line_indent_level > next_indent_level) {\n          next_indent_level = flags_base.line_indent_level;\n        }\n      }\n      var next_flags = {\n        mode: mode,\n        parent: flags_base,\n        last_text: flags_base ? flags_base.last_text : '',\n        last_word: flags_base ? flags_base.last_word : '',\n        declaration_statement: false,\n        declaration_assignment: false,\n        multiline_frame: false,\n        if_block: false,\n        else_block: false,\n        do_block: false,\n        do_while: false,\n        in_case_statement: false,\n        in_case: false,\n        case_body: false,\n        indentation_level: next_indent_level,\n        line_indent_level: flags_base ? flags_base.line_indent_level : next_indent_level,\n        start_line_index: output.get_line_number(),\n        ternary_depth: 0\n      };\n      return next_flags;\n    }\n    options = options ? options : {};\n    opt = {};\n    if (options.braces_on_own_line !== undefined) {\n      opt.brace_style = options.braces_on_own_line ? \"expand\" : \"collapse\";\n    }\n    opt.brace_style = options.brace_style ? options.brace_style : (opt.brace_style ? opt.brace_style : \"collapse\");\n    if (opt.brace_style === \"expand-strict\") {\n      opt.brace_style = \"expand\";\n    }\n    opt.indent_size = options.indent_size ? parseInt(options.indent_size, 10) : 4;\n    opt.indent_char = options.indent_char ? options.indent_char : ' ';\n    opt.eol = options.eol ? options.eol : '\\n';\n    opt.preserve_newlines = (options.preserve_newlines === undefined) ? true : options.preserve_newlines;\n    opt.break_chained_methods = (options.break_chained_methods === undefined) ? false : options.break_chained_methods;\n    opt.max_preserve_newlines = (options.max_preserve_newlines === undefined) ? 0 : parseInt(options.max_preserve_newlines, 10);\n    opt.space_in_paren = (options.space_in_paren === undefined) ? false : options.space_in_paren;\n    opt.space_in_empty_paren = (options.space_in_empty_paren === undefined) ? false : options.space_in_empty_paren;\n    opt.jslint_happy = (options.jslint_happy === undefined) ? false : options.jslint_happy;\n    opt.space_after_anon_function = (options.space_after_anon_function === undefined) ? false : options.space_after_anon_function;\n    opt.keep_array_indentation = (options.keep_array_indentation === undefined) ? false : options.keep_array_indentation;\n    opt.space_before_conditional = (options.space_before_conditional === undefined) ? true : options.space_before_conditional;\n    opt.unescape_strings = (options.unescape_strings === undefined) ? false : options.unescape_strings;\n    opt.wrap_line_length = (options.wrap_line_length === undefined) ? 0 : parseInt(options.wrap_line_length, 10);\n    opt.e4x = (options.e4x === undefined) ? false : options.e4x;\n    opt.end_with_newline = (options.end_with_newline === undefined) ? false : options.end_with_newline;\n    opt.comma_first = (options.comma_first === undefined) ? false : options.comma_first;\n    opt.test_output_raw = (options.test_output_raw === undefined) ? false : options.test_output_raw;\n    if (opt.jslint_happy) {\n      opt.space_after_anon_function = true;\n    }\n    if (options.indent_with_tabs) {\n      opt.indent_char = '\\t';\n      opt.indent_size = 1;\n    }\n    opt.eol = opt.eol.replace(/\\\\r/, '\\r').replace(/\\\\n/, '\\n');\n    indent_string = '';\n    while (opt.indent_size > 0) {\n      indent_string += opt.indent_char;\n      opt.indent_size -= 1;\n    }\n    var preindent_index = 0;\n    if (js_source_text && js_source_text.length) {\n      while ((js_source_text.charAt(preindent_index) === ' ' || js_source_text.charAt(preindent_index) === '\\t')) {\n        baseIndentString += js_source_text.charAt(preindent_index);\n        preindent_index += 1;\n      }\n      js_source_text = js_source_text.substring(preindent_index);\n    }\n    last_type = 'TK_START_BLOCK';\n    last_last_text = '';\n    output = new Output(indent_string, baseIndentString);\n    output.raw = opt.test_output_raw;\n    flag_store = [];\n    set_mode(MODE.BlockStatement);\n    this.beautify = function() {\n      var local_token,\n          sweet_code;\n      Tokenizer = new tokenizer(js_source_text, opt, indent_string);\n      tokens = Tokenizer.tokenize();\n      token_pos = 0;\n      while (local_token = get_token()) {\n        for (var i = 0; i < local_token.comments_before.length; i++) {\n          handle_token(local_token.comments_before[i]);\n        }\n        handle_token(local_token);\n        last_last_text = flags.last_text;\n        last_type = local_token.type;\n        flags.last_text = local_token.text;\n        token_pos += 1;\n      }\n      sweet_code = output.get_code();\n      if (opt.end_with_newline) {\n        sweet_code += '\\n';\n      }\n      if (opt.eol != '\\n') {\n        sweet_code = sweet_code.replace(/[\\n]/g, opt.eol);\n      }\n      return sweet_code;\n    };\n    function handle_token(local_token) {\n      var newlines = local_token.newlines;\n      var keep_whitespace = opt.keep_array_indentation && is_array(flags.mode);\n      if (keep_whitespace) {\n        for (i = 0; i < newlines; i += 1) {\n          print_newline(i > 0);\n        }\n      } else {\n        if (opt.max_preserve_newlines && newlines > opt.max_preserve_newlines) {\n          newlines = opt.max_preserve_newlines;\n        }\n        if (opt.preserve_newlines) {\n          if (local_token.newlines > 1) {\n            print_newline();\n            for (var i = 1; i < newlines; i += 1) {\n              print_newline(true);\n            }\n          }\n        }\n      }\n      current_token = local_token;\n      handlers[current_token.type]();\n    }\n    function split_newlines(s) {\n      s = s.replace(/\\x0d/g, '');\n      var out = [],\n          idx = s.indexOf(\"\\n\");\n      while (idx !== -1) {\n        out.push(s.substring(0, idx));\n        s = s.substring(idx + 1);\n        idx = s.indexOf(\"\\n\");\n      }\n      if (s.length) {\n        out.push(s);\n      }\n      return out;\n    }\n    function allow_wrap_or_preserved_newline(force_linewrap) {\n      force_linewrap = (force_linewrap === undefined) ? false : force_linewrap;\n      if (output.just_added_newline()) {\n        return;\n      }\n      if ((opt.preserve_newlines && current_token.wanted_newline) || force_linewrap) {\n        print_newline(false, true);\n      } else if (opt.wrap_line_length) {\n        var proposed_line_length = output.current_line.get_character_count() + current_token.text.length + (output.space_before_token ? 1 : 0);\n        if (proposed_line_length >= opt.wrap_line_length) {\n          print_newline(false, true);\n        }\n      }\n    }\n    function print_newline(force_newline, preserve_statement_flags) {\n      if (!preserve_statement_flags) {\n        if (flags.last_text !== ';' && flags.last_text !== ',' && flags.last_text !== '=' && last_type !== 'TK_OPERATOR') {\n          while (flags.mode === MODE.Statement && !flags.if_block && !flags.do_block) {\n            restore_mode();\n          }\n        }\n      }\n      if (output.add_new_line(force_newline)) {\n        flags.multiline_frame = true;\n      }\n    }\n    function print_token_line_indentation() {\n      if (output.just_added_newline()) {\n        if (opt.keep_array_indentation && is_array(flags.mode) && current_token.wanted_newline) {\n          output.current_line.push(current_token.whitespace_before);\n          output.space_before_token = false;\n        } else if (output.set_indent(flags.indentation_level)) {\n          flags.line_indent_level = flags.indentation_level;\n        }\n      }\n    }\n    function print_token(printable_token) {\n      if (output.raw) {\n        output.add_raw_token(current_token);\n        return;\n      }\n      if (opt.comma_first && last_type === 'TK_COMMA' && output.just_added_newline()) {\n        if (output.previous_line.last() === ',') {\n          output.previous_line.pop();\n          print_token_line_indentation();\n          output.add_token(',');\n          output.space_before_token = true;\n        }\n      }\n      printable_token = printable_token || current_token.text;\n      print_token_line_indentation();\n      output.add_token(printable_token);\n    }\n    function indent() {\n      flags.indentation_level += 1;\n    }\n    function deindent() {\n      if (flags.indentation_level > 0 && ((!flags.parent) || flags.indentation_level > flags.parent.indentation_level))\n        flags.indentation_level -= 1;\n    }\n    function set_mode(mode) {\n      if (flags) {\n        flag_store.push(flags);\n        previous_flags = flags;\n      } else {\n        previous_flags = create_flags(null, mode);\n      }\n      flags = create_flags(previous_flags, mode);\n    }\n    function is_array(mode) {\n      return mode === MODE.ArrayLiteral;\n    }\n    function is_expression(mode) {\n      return in_array(mode, [MODE.Expression, MODE.ForInitializer, MODE.Conditional]);\n    }\n    function restore_mode() {\n      if (flag_store.length > 0) {\n        previous_flags = flags;\n        flags = flag_store.pop();\n        if (previous_flags.mode === MODE.Statement) {\n          output.remove_redundant_indentation(previous_flags);\n        }\n      }\n    }\n    function start_of_object_property() {\n      return flags.parent.mode === MODE.ObjectLiteral && flags.mode === MODE.Statement && ((flags.last_text === ':' && flags.ternary_depth === 0) || (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set'])));\n    }\n    function start_of_statement() {\n      if ((last_type === 'TK_RESERVED' && in_array(flags.last_text, ['var', 'let', 'const']) && current_token.type === 'TK_WORD') || (last_type === 'TK_RESERVED' && flags.last_text === 'do') || (last_type === 'TK_RESERVED' && flags.last_text === 'return' && !current_token.wanted_newline) || (last_type === 'TK_RESERVED' && flags.last_text === 'else' && !(current_token.type === 'TK_RESERVED' && current_token.text === 'if')) || (last_type === 'TK_END_EXPR' && (previous_flags.mode === MODE.ForInitializer || previous_flags.mode === MODE.Conditional)) || (last_type === 'TK_WORD' && flags.mode === MODE.BlockStatement && !flags.in_case && !(current_token.text === '--' || current_token.text === '++') && last_last_text !== 'function' && current_token.type !== 'TK_WORD' && current_token.type !== 'TK_RESERVED') || (flags.mode === MODE.ObjectLiteral && ((flags.last_text === ':' && flags.ternary_depth === 0) || (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set']))))) {\n        set_mode(MODE.Statement);\n        indent();\n        if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['var', 'let', 'const']) && current_token.type === 'TK_WORD') {\n          flags.declaration_statement = true;\n        }\n        if (!start_of_object_property()) {\n          allow_wrap_or_preserved_newline(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['do', 'for', 'if', 'while']));\n        }\n        return true;\n      }\n      return false;\n    }\n    function all_lines_start_with(lines, c) {\n      for (var i = 0; i < lines.length; i++) {\n        var line = trim(lines[i]);\n        if (line.charAt(0) !== c) {\n          return false;\n        }\n      }\n      return true;\n    }\n    function each_line_matches_indent(lines, indent) {\n      var i = 0,\n          len = lines.length,\n          line;\n      for (; i < len; i++) {\n        line = lines[i];\n        if (line && line.indexOf(indent) !== 0) {\n          return false;\n        }\n      }\n      return true;\n    }\n    function is_special_word(word) {\n      return in_array(word, ['case', 'return', 'do', 'if', 'throw', 'else']);\n    }\n    function get_token(offset) {\n      var index = token_pos + (offset || 0);\n      return (index < 0 || index >= tokens.length) ? null : tokens[index];\n    }\n    function handle_start_expr() {\n      if (start_of_statement()) {}\n      var next_mode = MODE.Expression;\n      if (current_token.text === '[') {\n        if (last_type === 'TK_WORD' || flags.last_text === ')') {\n          if (last_type === 'TK_RESERVED' && in_array(flags.last_text, Tokenizer.line_starters)) {\n            output.space_before_token = true;\n          }\n          set_mode(next_mode);\n          print_token();\n          indent();\n          if (opt.space_in_paren) {\n            output.space_before_token = true;\n          }\n          return;\n        }\n        next_mode = MODE.ArrayLiteral;\n        if (is_array(flags.mode)) {\n          if (flags.last_text === '[' || (flags.last_text === ',' && (last_last_text === ']' || last_last_text === '}'))) {\n            if (!opt.keep_array_indentation) {\n              print_newline();\n            }\n          }\n        }\n      } else {\n        if (last_type === 'TK_RESERVED' && flags.last_text === 'for') {\n          next_mode = MODE.ForInitializer;\n        } else if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['if', 'while'])) {\n          next_mode = MODE.Conditional;\n        } else {}\n      }\n      if (flags.last_text === ';' || last_type === 'TK_START_BLOCK') {\n        print_newline();\n      } else if (last_type === 'TK_END_EXPR' || last_type === 'TK_START_EXPR' || last_type === 'TK_END_BLOCK' || flags.last_text === '.') {\n        allow_wrap_or_preserved_newline(current_token.wanted_newline);\n      } else if (!(last_type === 'TK_RESERVED' && current_token.text === '(') && last_type !== 'TK_WORD' && last_type !== 'TK_OPERATOR') {\n        output.space_before_token = true;\n      } else if ((last_type === 'TK_RESERVED' && (flags.last_word === 'function' || flags.last_word === 'typeof')) || (flags.last_text === '*' && last_last_text === 'function')) {\n        if (opt.space_after_anon_function) {\n          output.space_before_token = true;\n        }\n      } else if (last_type === 'TK_RESERVED' && (in_array(flags.last_text, Tokenizer.line_starters) || flags.last_text === 'catch')) {\n        if (opt.space_before_conditional) {\n          output.space_before_token = true;\n        }\n      }\n      if (current_token.text === '(' && last_type === 'TK_RESERVED' && flags.last_word === 'await') {\n        output.space_before_token = true;\n      }\n      if (current_token.text === '(') {\n        if (last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\n          if (!start_of_object_property()) {\n            allow_wrap_or_preserved_newline();\n          }\n        }\n      }\n      set_mode(next_mode);\n      print_token();\n      if (opt.space_in_paren) {\n        output.space_before_token = true;\n      }\n      indent();\n    }\n    function handle_end_expr() {\n      while (flags.mode === MODE.Statement) {\n        restore_mode();\n      }\n      if (flags.multiline_frame) {\n        allow_wrap_or_preserved_newline(current_token.text === ']' && is_array(flags.mode) && !opt.keep_array_indentation);\n      }\n      if (opt.space_in_paren) {\n        if (last_type === 'TK_START_EXPR' && !opt.space_in_empty_paren) {\n          output.trim();\n          output.space_before_token = false;\n        } else {\n          output.space_before_token = true;\n        }\n      }\n      if (current_token.text === ']' && opt.keep_array_indentation) {\n        print_token();\n        restore_mode();\n      } else {\n        restore_mode();\n        print_token();\n      }\n      output.remove_redundant_indentation(previous_flags);\n      if (flags.do_while && previous_flags.mode === MODE.Conditional) {\n        previous_flags.mode = MODE.Expression;\n        flags.do_block = false;\n        flags.do_while = false;\n      }\n    }\n    function handle_start_block() {\n      var next_token = get_token(1);\n      var second_token = get_token(2);\n      if (second_token && ((second_token.text === ':' && in_array(next_token.type, ['TK_STRING', 'TK_WORD', 'TK_RESERVED'])) || (in_array(next_token.text, ['get', 'set']) && in_array(second_token.type, ['TK_WORD', 'TK_RESERVED'])))) {\n        if (!in_array(last_last_text, ['class', 'interface'])) {\n          set_mode(MODE.ObjectLiteral);\n        } else {\n          set_mode(MODE.BlockStatement);\n        }\n      } else {\n        set_mode(MODE.BlockStatement);\n      }\n      var empty_braces = !next_token.comments_before.length && next_token.text === '}';\n      var empty_anonymous_function = empty_braces && flags.last_word === 'function' && last_type === 'TK_END_EXPR';\n      if (opt.brace_style === \"expand\" || (opt.brace_style === \"none\" && current_token.wanted_newline)) {\n        if (last_type !== 'TK_OPERATOR' && (empty_anonymous_function || last_type === 'TK_EQUALS' || (last_type === 'TK_RESERVED' && is_special_word(flags.last_text) && flags.last_text !== 'else'))) {\n          output.space_before_token = true;\n        } else {\n          print_newline(false, true);\n        }\n      } else {\n        if (last_type !== 'TK_OPERATOR' && last_type !== 'TK_START_EXPR') {\n          if (last_type === 'TK_START_BLOCK') {\n            print_newline();\n          } else {\n            output.space_before_token = true;\n          }\n        } else {\n          if (is_array(previous_flags.mode) && flags.last_text === ',') {\n            if (last_last_text === '}') {\n              output.space_before_token = true;\n            } else {\n              print_newline();\n            }\n          }\n        }\n      }\n      print_token();\n      indent();\n    }\n    function handle_end_block() {\n      while (flags.mode === MODE.Statement) {\n        restore_mode();\n      }\n      var empty_braces = last_type === 'TK_START_BLOCK';\n      if (opt.brace_style === \"expand\") {\n        if (!empty_braces) {\n          print_newline();\n        }\n      } else {\n        if (!empty_braces) {\n          if (is_array(flags.mode) && opt.keep_array_indentation) {\n            opt.keep_array_indentation = false;\n            print_newline();\n            opt.keep_array_indentation = true;\n          } else {\n            print_newline();\n          }\n        }\n      }\n      restore_mode();\n      print_token();\n    }\n    function handle_word() {\n      if (current_token.type === 'TK_RESERVED' && flags.mode !== MODE.ObjectLiteral && in_array(current_token.text, ['set', 'get'])) {\n        current_token.type = 'TK_WORD';\n      }\n      if (current_token.type === 'TK_RESERVED' && flags.mode === MODE.ObjectLiteral) {\n        var next_token = get_token(1);\n        if (next_token.text == ':') {\n          current_token.type = 'TK_WORD';\n        }\n      }\n      if (start_of_statement()) {} else if (current_token.wanted_newline && !is_expression(flags.mode) && (last_type !== 'TK_OPERATOR' || (flags.last_text === '--' || flags.last_text === '++')) && last_type !== 'TK_EQUALS' && (opt.preserve_newlines || !(last_type === 'TK_RESERVED' && in_array(flags.last_text, ['var', 'let', 'const', 'set', 'get'])))) {\n        print_newline();\n      }\n      if (flags.do_block && !flags.do_while) {\n        if (current_token.type === 'TK_RESERVED' && current_token.text === 'while') {\n          output.space_before_token = true;\n          print_token();\n          output.space_before_token = true;\n          flags.do_while = true;\n          return;\n        } else {\n          print_newline();\n          flags.do_block = false;\n        }\n      }\n      if (flags.if_block) {\n        if (!flags.else_block && (current_token.type === 'TK_RESERVED' && current_token.text === 'else')) {\n          flags.else_block = true;\n        } else {\n          while (flags.mode === MODE.Statement) {\n            restore_mode();\n          }\n          flags.if_block = false;\n          flags.else_block = false;\n        }\n      }\n      if (current_token.type === 'TK_RESERVED' && (current_token.text === 'case' || (current_token.text === 'default' && flags.in_case_statement))) {\n        print_newline();\n        if (flags.case_body || opt.jslint_happy) {\n          deindent();\n          flags.case_body = false;\n        }\n        print_token();\n        flags.in_case = true;\n        flags.in_case_statement = true;\n        return;\n      }\n      if (current_token.type === 'TK_RESERVED' && current_token.text === 'function') {\n        if (in_array(flags.last_text, ['}', ';']) || (output.just_added_newline() && !in_array(flags.last_text, ['[', '{', ':', '=', ',']))) {\n          if (!output.just_added_blankline() && !current_token.comments_before.length) {\n            print_newline();\n            print_newline(true);\n          }\n        }\n        if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD') {\n          if (last_type === 'TK_RESERVED' && in_array(flags.last_text, ['get', 'set', 'new', 'return', 'export', 'async'])) {\n            output.space_before_token = true;\n          } else if (last_type === 'TK_RESERVED' && flags.last_text === 'default' && last_last_text === 'export') {\n            output.space_before_token = true;\n          } else {\n            print_newline();\n          }\n        } else if (last_type === 'TK_OPERATOR' || flags.last_text === '=') {\n          output.space_before_token = true;\n        } else if (!flags.multiline_frame && (is_expression(flags.mode) || is_array(flags.mode))) {} else {\n          print_newline();\n        }\n      }\n      if (last_type === 'TK_COMMA' || last_type === 'TK_START_EXPR' || last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\n        if (!start_of_object_property()) {\n          allow_wrap_or_preserved_newline();\n        }\n      }\n      if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['function', 'get', 'set'])) {\n        print_token();\n        flags.last_word = current_token.text;\n        return;\n      }\n      prefix = 'NONE';\n      if (last_type === 'TK_END_BLOCK') {\n        if (!(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['else', 'catch', 'finally']))) {\n          prefix = 'NEWLINE';\n        } else {\n          if (opt.brace_style === \"expand\" || opt.brace_style === \"end-expand\" || (opt.brace_style === \"none\" && current_token.wanted_newline)) {\n            prefix = 'NEWLINE';\n          } else {\n            prefix = 'SPACE';\n            output.space_before_token = true;\n          }\n        }\n      } else if (last_type === 'TK_SEMICOLON' && flags.mode === MODE.BlockStatement) {\n        prefix = 'NEWLINE';\n      } else if (last_type === 'TK_SEMICOLON' && is_expression(flags.mode)) {\n        prefix = 'SPACE';\n      } else if (last_type === 'TK_STRING') {\n        prefix = 'NEWLINE';\n      } else if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD' || (flags.last_text === '*' && last_last_text === 'function')) {\n        prefix = 'SPACE';\n      } else if (last_type === 'TK_START_BLOCK') {\n        prefix = 'NEWLINE';\n      } else if (last_type === 'TK_END_EXPR') {\n        output.space_before_token = true;\n        prefix = 'NEWLINE';\n      }\n      if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, Tokenizer.line_starters) && flags.last_text !== ')') {\n        if (flags.last_text === 'else' || flags.last_text === 'export') {\n          prefix = 'SPACE';\n        } else {\n          prefix = 'NEWLINE';\n        }\n      }\n      if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['else', 'catch', 'finally'])) {\n        if (last_type !== 'TK_END_BLOCK' || opt.brace_style === \"expand\" || opt.brace_style === \"end-expand\" || (opt.brace_style === \"none\" && current_token.wanted_newline)) {\n          print_newline();\n        } else {\n          output.trim(true);\n          var line = output.current_line;\n          if (line.last() !== '}') {\n            print_newline();\n          }\n          output.space_before_token = true;\n        }\n      } else if (prefix === 'NEWLINE') {\n        if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\n          output.space_before_token = true;\n        } else if (last_type !== 'TK_END_EXPR') {\n          if ((last_type !== 'TK_START_EXPR' || !(current_token.type === 'TK_RESERVED' && in_array(current_token.text, ['var', 'let', 'const']))) && flags.last_text !== ':') {\n            if (current_token.type === 'TK_RESERVED' && current_token.text === 'if' && flags.last_text === 'else') {\n              output.space_before_token = true;\n            } else {\n              print_newline();\n            }\n          }\n        } else if (current_token.type === 'TK_RESERVED' && in_array(current_token.text, Tokenizer.line_starters) && flags.last_text !== ')') {\n          print_newline();\n        }\n      } else if (flags.multiline_frame && is_array(flags.mode) && flags.last_text === ',' && last_last_text === '}') {\n        print_newline();\n      } else if (prefix === 'SPACE') {\n        output.space_before_token = true;\n      }\n      print_token();\n      flags.last_word = current_token.text;\n      if (current_token.type === 'TK_RESERVED' && current_token.text === 'do') {\n        flags.do_block = true;\n      }\n      if (current_token.type === 'TK_RESERVED' && current_token.text === 'if') {\n        flags.if_block = true;\n      }\n    }\n    function handle_semicolon() {\n      if (start_of_statement()) {\n        output.space_before_token = false;\n      }\n      while (flags.mode === MODE.Statement && !flags.if_block && !flags.do_block) {\n        restore_mode();\n      }\n      print_token();\n    }\n    function handle_string() {\n      if (start_of_statement()) {\n        output.space_before_token = true;\n      } else if (last_type === 'TK_RESERVED' || last_type === 'TK_WORD') {\n        output.space_before_token = true;\n      } else if (last_type === 'TK_COMMA' || last_type === 'TK_START_EXPR' || last_type === 'TK_EQUALS' || last_type === 'TK_OPERATOR') {\n        if (!start_of_object_property()) {\n          allow_wrap_or_preserved_newline();\n        }\n      } else {\n        print_newline();\n      }\n      print_token();\n    }\n    function handle_equals() {\n      if (start_of_statement()) {}\n      if (flags.declaration_statement) {\n        flags.declaration_assignment = true;\n      }\n      output.space_before_token = true;\n      print_token();\n      output.space_before_token = true;\n    }\n    function handle_comma() {\n      if (flags.declaration_statement) {\n        if (is_expression(flags.parent.mode)) {\n          flags.declaration_assignment = false;\n        }\n        print_token();\n        if (flags.declaration_assignment) {\n          flags.declaration_assignment = false;\n          print_newline(false, true);\n        } else {\n          output.space_before_token = true;\n          if (opt.comma_first) {\n            allow_wrap_or_preserved_newline();\n          }\n        }\n        return;\n      }\n      print_token();\n      if (flags.mode === MODE.ObjectLiteral || (flags.mode === MODE.Statement && flags.parent.mode === MODE.ObjectLiteral)) {\n        if (flags.mode === MODE.Statement) {\n          restore_mode();\n        }\n        print_newline();\n      } else {\n        output.space_before_token = true;\n        if (opt.comma_first) {\n          allow_wrap_or_preserved_newline();\n        }\n      }\n    }\n    function handle_operator() {\n      if (start_of_statement()) {}\n      if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\n        output.space_before_token = true;\n        print_token();\n        return;\n      }\n      if (current_token.text === '*' && last_type === 'TK_DOT') {\n        print_token();\n        return;\n      }\n      if (current_token.text === ':' && flags.in_case) {\n        flags.case_body = true;\n        indent();\n        print_token();\n        print_newline();\n        flags.in_case = false;\n        return;\n      }\n      if (current_token.text === '::') {\n        print_token();\n        return;\n      }\n      if (last_type === 'TK_OPERATOR') {\n        allow_wrap_or_preserved_newline();\n      }\n      var space_before = true;\n      var space_after = true;\n      if (in_array(current_token.text, ['--', '++', '!', '~']) || (in_array(current_token.text, ['-', '+']) && (in_array(last_type, ['TK_START_BLOCK', 'TK_START_EXPR', 'TK_EQUALS', 'TK_OPERATOR']) || in_array(flags.last_text, Tokenizer.line_starters) || flags.last_text === ','))) {\n        space_before = false;\n        space_after = false;\n        if (current_token.wanted_newline && (current_token.text === '--' || current_token.text === '++')) {\n          print_newline(false, true);\n        }\n        if (flags.last_text === ';' && is_expression(flags.mode)) {\n          space_before = true;\n        }\n        if (last_type === 'TK_RESERVED') {\n          space_before = true;\n        } else if (last_type === 'TK_END_EXPR') {\n          space_before = !(flags.last_text === ']' && (current_token.text === '--' || current_token.text === '++'));\n        } else if (last_type === 'TK_OPERATOR') {\n          space_before = in_array(current_token.text, ['--', '-', '++', '+']) && in_array(flags.last_text, ['--', '-', '++', '+']);\n          if (in_array(current_token.text, ['+', '-']) && in_array(flags.last_text, ['--', '++'])) {\n            space_after = true;\n          }\n        }\n        if ((flags.mode === MODE.BlockStatement || flags.mode === MODE.Statement) && (flags.last_text === '{' || flags.last_text === ';')) {\n          print_newline();\n        }\n      } else if (current_token.text === ':') {\n        if (flags.ternary_depth === 0) {\n          space_before = false;\n        } else {\n          flags.ternary_depth -= 1;\n        }\n      } else if (current_token.text === '?') {\n        flags.ternary_depth += 1;\n      } else if (current_token.text === '*' && last_type === 'TK_RESERVED' && flags.last_text === 'function') {\n        space_before = false;\n        space_after = false;\n      }\n      output.space_before_token = output.space_before_token || space_before;\n      print_token();\n      output.space_before_token = space_after;\n    }\n    function handle_block_comment() {\n      if (output.raw) {\n        output.add_raw_token(current_token);\n        if (current_token.directives && current_token.directives['preserve'] === 'end') {\n          if (!opt.test_output_raw) {\n            output.raw = false;\n          }\n        }\n        return;\n      }\n      if (current_token.directives) {\n        print_newline(false, true);\n        print_token();\n        if (current_token.directives['preserve'] === 'start') {\n          output.raw = true;\n        }\n        print_newline(false, true);\n        return;\n      }\n      if (!acorn.newline.test(current_token.text) && !current_token.wanted_newline) {\n        output.space_before_token = true;\n        print_token();\n        output.space_before_token = true;\n        return;\n      }\n      var lines = split_newlines(current_token.text);\n      var j;\n      var javadoc = false;\n      var starless = false;\n      var lastIndent = current_token.whitespace_before;\n      var lastIndentLength = lastIndent.length;\n      print_newline(false, true);\n      if (lines.length > 1) {\n        if (all_lines_start_with(lines.slice(1), '*')) {\n          javadoc = true;\n        } else if (each_line_matches_indent(lines.slice(1), lastIndent)) {\n          starless = true;\n        }\n      }\n      print_token(lines[0]);\n      for (j = 1; j < lines.length; j++) {\n        print_newline(false, true);\n        if (javadoc) {\n          print_token(' ' + ltrim(lines[j]));\n        } else if (starless && lines[j].length > lastIndentLength) {\n          print_token(lines[j].substring(lastIndentLength));\n        } else {\n          output.add_token(lines[j]);\n        }\n      }\n      print_newline(false, true);\n    }\n    function handle_comment() {\n      if (current_token.wanted_newline) {\n        print_newline(false, true);\n      } else {\n        output.trim(true);\n      }\n      output.space_before_token = true;\n      print_token();\n      print_newline(false, true);\n    }\n    function handle_dot() {\n      if (start_of_statement()) {}\n      if (last_type === 'TK_RESERVED' && is_special_word(flags.last_text)) {\n        output.space_before_token = true;\n      } else {\n        allow_wrap_or_preserved_newline(flags.last_text === ')' && opt.break_chained_methods);\n      }\n      print_token();\n    }\n    function handle_unknown() {\n      print_token();\n      if (current_token.text[current_token.text.length - 1] === '\\n') {\n        print_newline();\n      }\n    }\n    function handle_eof() {\n      while (flags.mode === MODE.Statement) {\n        restore_mode();\n      }\n    }\n  }\n  function OutputLine(parent) {\n    var _character_count = 0;\n    var _indent_count = -1;\n    var _items = [];\n    var _empty = true;\n    this.set_indent = function(level) {\n      _character_count = parent.baseIndentLength + level * parent.indent_length;\n      _indent_count = level;\n    };\n    this.get_character_count = function() {\n      return _character_count;\n    };\n    this.is_empty = function() {\n      return _empty;\n    };\n    this.last = function() {\n      if (!this._empty) {\n        return _items[_items.length - 1];\n      } else {\n        return null;\n      }\n    };\n    this.push = function(input) {\n      _items.push(input);\n      _character_count += input.length;\n      _empty = false;\n    };\n    this.pop = function() {\n      var item = null;\n      if (!_empty) {\n        item = _items.pop();\n        _character_count -= item.length;\n        _empty = _items.length === 0;\n      }\n      return item;\n    };\n    this.remove_indent = function() {\n      if (_indent_count > 0) {\n        _indent_count -= 1;\n        _character_count -= parent.indent_length;\n      }\n    };\n    this.trim = function() {\n      while (this.last() === ' ') {\n        var item = _items.pop();\n        _character_count -= 1;\n      }\n      _empty = _items.length === 0;\n    };\n    this.toString = function() {\n      var result = '';\n      if (!this._empty) {\n        if (_indent_count >= 0) {\n          result = parent.indent_cache[_indent_count];\n        }\n        result += _items.join('');\n      }\n      return result;\n    };\n  }\n  function Output(indent_string, baseIndentString) {\n    baseIndentString = baseIndentString || '';\n    this.indent_cache = [baseIndentString];\n    this.baseIndentLength = baseIndentString.length;\n    this.indent_length = indent_string.length;\n    this.raw = false;\n    var lines = [];\n    this.baseIndentString = baseIndentString;\n    this.indent_string = indent_string;\n    this.previous_line = null;\n    this.current_line = null;\n    this.space_before_token = false;\n    this.add_outputline = function() {\n      this.previous_line = this.current_line;\n      this.current_line = new OutputLine(this);\n      lines.push(this.current_line);\n    };\n    this.add_outputline();\n    this.get_line_number = function() {\n      return lines.length;\n    };\n    this.add_new_line = function(force_newline) {\n      if (this.get_line_number() === 1 && this.just_added_newline()) {\n        return false;\n      }\n      if (force_newline || !this.just_added_newline()) {\n        if (!this.raw) {\n          this.add_outputline();\n        }\n        return true;\n      }\n      return false;\n    };\n    this.get_code = function() {\n      var sweet_code = lines.join('\\n').replace(/[\\r\\n\\t ]+$/, '');\n      return sweet_code;\n    };\n    this.set_indent = function(level) {\n      if (lines.length > 1) {\n        while (level >= this.indent_cache.length) {\n          this.indent_cache.push(this.indent_cache[this.indent_cache.length - 1] + this.indent_string);\n        }\n        this.current_line.set_indent(level);\n        return true;\n      }\n      this.current_line.set_indent(0);\n      return false;\n    };\n    this.add_raw_token = function(token) {\n      for (var x = 0; x < token.newlines; x++) {\n        this.add_outputline();\n      }\n      this.current_line.push(token.whitespace_before);\n      this.current_line.push(token.text);\n      this.space_before_token = false;\n    };\n    this.add_token = function(printable_token) {\n      this.add_space_before_token();\n      this.current_line.push(printable_token);\n    };\n    this.add_space_before_token = function() {\n      if (this.space_before_token && !this.just_added_newline()) {\n        this.current_line.push(' ');\n      }\n      this.space_before_token = false;\n    };\n    this.remove_redundant_indentation = function(frame) {\n      if (frame.multiline_frame || frame.mode === MODE.ForInitializer || frame.mode === MODE.Conditional) {\n        return;\n      }\n      var index = frame.start_line_index;\n      var line;\n      var output_length = lines.length;\n      while (index < output_length) {\n        lines[index].remove_indent();\n        index++;\n      }\n    };\n    this.trim = function(eat_newlines) {\n      eat_newlines = (eat_newlines === undefined) ? false : eat_newlines;\n      this.current_line.trim(indent_string, baseIndentString);\n      while (eat_newlines && lines.length > 1 && this.current_line.is_empty()) {\n        lines.pop();\n        this.current_line = lines[lines.length - 1];\n        this.current_line.trim();\n      }\n      this.previous_line = lines.length > 1 ? lines[lines.length - 2] : null;\n    };\n    this.just_added_newline = function() {\n      return this.current_line.is_empty();\n    };\n    this.just_added_blankline = function() {\n      if (this.just_added_newline()) {\n        if (lines.length === 1) {\n          return true;\n        }\n        var line = lines[lines.length - 2];\n        return line.is_empty();\n      }\n      return false;\n    };\n  }\n  var Token = function(type, text, newlines, whitespace_before, mode, parent) {\n    this.type = type;\n    this.text = text;\n    this.comments_before = [];\n    this.newlines = newlines || 0;\n    this.wanted_newline = newlines > 0;\n    this.whitespace_before = whitespace_before || '';\n    this.parent = null;\n    this.directives = null;\n  };\n  function tokenizer(input, opts, indent_string) {\n    var whitespace = \"\\n\\r\\t \".split('');\n    var digit = /[0-9]/;\n    var digit_hex = /[0123456789abcdefABCDEF]/;\n    var punct = ('+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>' + ' <%= <% %> <?= <? ?>').split(' ');\n    this.line_starters = 'continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export'.split(',');\n    var reserved_words = this.line_starters.concat(['do', 'in', 'else', 'get', 'set', 'new', 'catch', 'finally', 'typeof', 'yield', 'async', 'await']);\n    var block_comment_pattern = /([\\s\\S]*?)((?:\\*\\/)|$)/g;\n    var comment_pattern = /([^\\n\\r\\u2028\\u2029]*)/g;\n    var directives_block_pattern = /\\/\\* beautify( \\w+[:]\\w+)+ \\*\\//g;\n    var directive_pattern = / (\\w+)[:](\\w+)/g;\n    var directives_end_ignore_pattern = /([\\s\\S]*?)((?:\\/\\*\\sbeautify\\signore:end\\s\\*\\/)|$)/g;\n    var template_pattern = /((<\\?php|<\\?=)[\\s\\S]*?\\?>)|(<%[\\s\\S]*?%>)/g;\n    var n_newlines,\n        whitespace_before_token,\n        in_html_comment,\n        tokens,\n        parser_pos;\n    var input_length;\n    this.tokenize = function() {\n      input_length = input.length;\n      parser_pos = 0;\n      in_html_comment = false;\n      tokens = [];\n      var next,\n          last;\n      var token_values;\n      var open = null;\n      var open_stack = [];\n      var comments = [];\n      while (!(last && last.type === 'TK_EOF')) {\n        token_values = tokenize_next();\n        next = new Token(token_values[1], token_values[0], n_newlines, whitespace_before_token);\n        while (next.type === 'TK_COMMENT' || next.type === 'TK_BLOCK_COMMENT' || next.type === 'TK_UNKNOWN') {\n          if (next.type === 'TK_BLOCK_COMMENT') {\n            next.directives = token_values[2];\n          }\n          comments.push(next);\n          token_values = tokenize_next();\n          next = new Token(token_values[1], token_values[0], n_newlines, whitespace_before_token);\n        }\n        if (comments.length) {\n          next.comments_before = comments;\n          comments = [];\n        }\n        if (next.type === 'TK_START_BLOCK' || next.type === 'TK_START_EXPR') {\n          next.parent = last;\n          open_stack.push(open);\n          open = next;\n        } else if ((next.type === 'TK_END_BLOCK' || next.type === 'TK_END_EXPR') && (open && ((next.text === ']' && open.text === '[') || (next.text === ')' && open.text === '(') || (next.text === '}' && open.text === '{')))) {\n          next.parent = open.parent;\n          open = open_stack.pop();\n        }\n        tokens.push(next);\n        last = next;\n      }\n      return tokens;\n    };\n    function get_directives(text) {\n      if (!text.match(directives_block_pattern)) {\n        return null;\n      }\n      var directives = {};\n      directive_pattern.lastIndex = 0;\n      var directive_match = directive_pattern.exec(text);\n      while (directive_match) {\n        directives[directive_match[1]] = directive_match[2];\n        directive_match = directive_pattern.exec(text);\n      }\n      return directives;\n    }\n    function tokenize_next() {\n      var i,\n          resulting_string;\n      var whitespace_on_this_line = [];\n      n_newlines = 0;\n      whitespace_before_token = '';\n      if (parser_pos >= input_length) {\n        return ['', 'TK_EOF'];\n      }\n      var last_token;\n      if (tokens.length) {\n        last_token = tokens[tokens.length - 1];\n      } else {\n        last_token = new Token('TK_START_BLOCK', '{');\n      }\n      var c = input.charAt(parser_pos);\n      parser_pos += 1;\n      while (in_array(c, whitespace)) {\n        if (acorn.newline.test(c)) {\n          if (!(c === '\\n' && input.charAt(parser_pos - 2) === '\\r')) {\n            n_newlines += 1;\n            whitespace_on_this_line = [];\n          }\n        } else {\n          whitespace_on_this_line.push(c);\n        }\n        if (parser_pos >= input_length) {\n          return ['', 'TK_EOF'];\n        }\n        c = input.charAt(parser_pos);\n        parser_pos += 1;\n      }\n      if (whitespace_on_this_line.length) {\n        whitespace_before_token = whitespace_on_this_line.join('');\n      }\n      if (digit.test(c)) {\n        var allow_decimal = true;\n        var allow_e = true;\n        var local_digit = digit;\n        if (c === '0' && parser_pos < input_length && /[Xx]/.test(input.charAt(parser_pos))) {\n          allow_decimal = false;\n          allow_e = false;\n          c += input.charAt(parser_pos);\n          parser_pos += 1;\n          local_digit = digit_hex;\n        } else {\n          c = '';\n          parser_pos -= 1;\n        }\n        while (parser_pos < input_length && local_digit.test(input.charAt(parser_pos))) {\n          c += input.charAt(parser_pos);\n          parser_pos += 1;\n          if (allow_decimal && parser_pos < input_length && input.charAt(parser_pos) === '.') {\n            c += input.charAt(parser_pos);\n            parser_pos += 1;\n            allow_decimal = false;\n          }\n          if (allow_e && parser_pos < input_length && /[Ee]/.test(input.charAt(parser_pos))) {\n            c += input.charAt(parser_pos);\n            parser_pos += 1;\n            if (parser_pos < input_length && /[+-]/.test(input.charAt(parser_pos))) {\n              c += input.charAt(parser_pos);\n              parser_pos += 1;\n            }\n            allow_e = false;\n            allow_decimal = false;\n          }\n        }\n        return [c, 'TK_WORD'];\n      }\n      if (acorn.isIdentifierStart(input.charCodeAt(parser_pos - 1))) {\n        if (parser_pos < input_length) {\n          while (acorn.isIdentifierChar(input.charCodeAt(parser_pos))) {\n            c += input.charAt(parser_pos);\n            parser_pos += 1;\n            if (parser_pos === input_length) {\n              break;\n            }\n          }\n        }\n        if (!(last_token.type === 'TK_DOT' || (last_token.type === 'TK_RESERVED' && in_array(last_token.text, ['set', 'get']))) && in_array(c, reserved_words)) {\n          if (c === 'in') {\n            return [c, 'TK_OPERATOR'];\n          }\n          return [c, 'TK_RESERVED'];\n        }\n        return [c, 'TK_WORD'];\n      }\n      if (c === '(' || c === '[') {\n        return [c, 'TK_START_EXPR'];\n      }\n      if (c === ')' || c === ']') {\n        return [c, 'TK_END_EXPR'];\n      }\n      if (c === '{') {\n        return [c, 'TK_START_BLOCK'];\n      }\n      if (c === '}') {\n        return [c, 'TK_END_BLOCK'];\n      }\n      if (c === ';') {\n        return [c, 'TK_SEMICOLON'];\n      }\n      if (c === '/') {\n        var comment = '';\n        if (input.charAt(parser_pos) === '*') {\n          parser_pos += 1;\n          block_comment_pattern.lastIndex = parser_pos;\n          var comment_match = block_comment_pattern.exec(input);\n          comment = '/*' + comment_match[0];\n          parser_pos += comment_match[0].length;\n          var directives = get_directives(comment);\n          if (directives && directives['ignore'] === 'start') {\n            directives_end_ignore_pattern.lastIndex = parser_pos;\n            comment_match = directives_end_ignore_pattern.exec(input);\n            comment += comment_match[0];\n            parser_pos += comment_match[0].length;\n          }\n          comment = comment.replace(acorn.lineBreak, '\\n');\n          return [comment, 'TK_BLOCK_COMMENT', directives];\n        }\n        if (input.charAt(parser_pos) === '/') {\n          parser_pos += 1;\n          comment_pattern.lastIndex = parser_pos;\n          var comment_match = comment_pattern.exec(input);\n          comment = '//' + comment_match[0];\n          parser_pos += comment_match[0].length;\n          return [comment, 'TK_COMMENT'];\n        }\n      }\n      if (c === '`' || c === \"'\" || c === '\"' || ((c === '/') || (opts.e4x && c === \"<\" && input.slice(parser_pos - 1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\\[CDATA\\[[\\s\\S]*?\\]\\])(\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{.*?}))*\\s*(\\/?)\\s*>/))) && ((last_token.type === 'TK_RESERVED' && in_array(last_token.text, ['return', 'case', 'throw', 'else', 'do', 'typeof', 'yield'])) || (last_token.type === 'TK_END_EXPR' && last_token.text === ')' && last_token.parent && last_token.parent.type === 'TK_RESERVED' && in_array(last_token.parent.text, ['if', 'while', 'for'])) || (in_array(last_token.type, ['TK_COMMENT', 'TK_START_EXPR', 'TK_START_BLOCK', 'TK_END_BLOCK', 'TK_OPERATOR', 'TK_EQUALS', 'TK_EOF', 'TK_SEMICOLON', 'TK_COMMA'])))) {\n        var sep = c,\n            esc = false,\n            has_char_escapes = false;\n        resulting_string = c;\n        if (sep === '/') {\n          var in_char_class = false;\n          while (parser_pos < input_length && ((esc || in_char_class || input.charAt(parser_pos) !== sep) && !acorn.newline.test(input.charAt(parser_pos)))) {\n            resulting_string += input.charAt(parser_pos);\n            if (!esc) {\n              esc = input.charAt(parser_pos) === '\\\\';\n              if (input.charAt(parser_pos) === '[') {\n                in_char_class = true;\n              } else if (input.charAt(parser_pos) === ']') {\n                in_char_class = false;\n              }\n            } else {\n              esc = false;\n            }\n            parser_pos += 1;\n          }\n        } else if (opts.e4x && sep === '<') {\n          var xmlRegExp = /<(\\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\\[CDATA\\[[\\s\\S]*?\\]\\])(\\s+[-a-zA-Z:0-9_.]+\\s*=\\s*('[^']*'|\"[^\"]*\"|{.*?}))*\\s*(\\/?)\\s*>/g;\n          var xmlStr = input.slice(parser_pos - 1);\n          var match = xmlRegExp.exec(xmlStr);\n          if (match && match.index === 0) {\n            var rootTag = match[2];\n            var depth = 0;\n            while (match) {\n              var isEndTag = !!match[1];\n              var tagName = match[2];\n              var isSingletonTag = (!!match[match.length - 1]) || (tagName.slice(0, 8) === \"![CDATA[\");\n              if (tagName === rootTag && !isSingletonTag) {\n                if (isEndTag) {\n                  --depth;\n                } else {\n                  ++depth;\n                }\n              }\n              if (depth <= 0) {\n                break;\n              }\n              match = xmlRegExp.exec(xmlStr);\n            }\n            var xmlLength = match ? match.index + match[0].length : xmlStr.length;\n            xmlStr = xmlStr.slice(0, xmlLength);\n            parser_pos += xmlLength - 1;\n            xmlStr = xmlStr.replace(acorn.lineBreak, '\\n');\n            return [xmlStr, \"TK_STRING\"];\n          }\n        } else {\n          while (parser_pos < input_length && (esc || (input.charAt(parser_pos) !== sep && (sep === '`' || !acorn.newline.test(input.charAt(parser_pos)))))) {\n            if ((esc || sep === '`') && acorn.newline.test(input.charAt(parser_pos))) {\n              if (input.charAt(parser_pos) === '\\r' && input.charAt(parser_pos + 1) === '\\n') {\n                parser_pos += 1;\n              }\n              resulting_string += '\\n';\n            } else {\n              resulting_string += input.charAt(parser_pos);\n            }\n            if (esc) {\n              if (input.charAt(parser_pos) === 'x' || input.charAt(parser_pos) === 'u') {\n                has_char_escapes = true;\n              }\n              esc = false;\n            } else {\n              esc = input.charAt(parser_pos) === '\\\\';\n            }\n            parser_pos += 1;\n          }\n        }\n        if (has_char_escapes && opts.unescape_strings) {\n          resulting_string = unescape_string(resulting_string);\n        }\n        if (parser_pos < input_length && input.charAt(parser_pos) === sep) {\n          resulting_string += sep;\n          parser_pos += 1;\n          if (sep === '/') {\n            while (parser_pos < input_length && acorn.isIdentifierStart(input.charCodeAt(parser_pos))) {\n              resulting_string += input.charAt(parser_pos);\n              parser_pos += 1;\n            }\n          }\n        }\n        return [resulting_string, 'TK_STRING'];\n      }\n      if (c === '#') {\n        if (tokens.length === 0 && input.charAt(parser_pos) === '!') {\n          resulting_string = c;\n          while (parser_pos < input_length && c !== '\\n') {\n            c = input.charAt(parser_pos);\n            resulting_string += c;\n            parser_pos += 1;\n          }\n          return [trim(resulting_string) + '\\n', 'TK_UNKNOWN'];\n        }\n        var sharp = '#';\n        if (parser_pos < input_length && digit.test(input.charAt(parser_pos))) {\n          do {\n            c = input.charAt(parser_pos);\n            sharp += c;\n            parser_pos += 1;\n          } while (parser_pos < input_length && c !== '#' && c !== '=');\n          if (c === '#') {} else if (input.charAt(parser_pos) === '[' && input.charAt(parser_pos + 1) === ']') {\n            sharp += '[]';\n            parser_pos += 2;\n          } else if (input.charAt(parser_pos) === '{' && input.charAt(parser_pos + 1) === '}') {\n            sharp += '{}';\n            parser_pos += 2;\n          }\n          return [sharp, 'TK_WORD'];\n        }\n      }\n      if (c === '<' && (input.charAt(parser_pos) === '?' || input.charAt(parser_pos) === '%')) {\n        template_pattern.lastIndex = parser_pos - 1;\n        var template_match = template_pattern.exec(input);\n        if (template_match) {\n          c = template_match[0];\n          parser_pos += c.length - 1;\n          c = c.replace(acorn.lineBreak, '\\n');\n          return [c, 'TK_STRING'];\n        }\n      }\n      if (c === '<' && input.substring(parser_pos - 1, parser_pos + 3) === '<!--') {\n        parser_pos += 3;\n        c = '<!--';\n        while (!acorn.newline.test(input.charAt(parser_pos)) && parser_pos < input_length) {\n          c += input.charAt(parser_pos);\n          parser_pos++;\n        }\n        in_html_comment = true;\n        return [c, 'TK_COMMENT'];\n      }\n      if (c === '-' && in_html_comment && input.substring(parser_pos - 1, parser_pos + 2) === '-->') {\n        in_html_comment = false;\n        parser_pos += 2;\n        return ['-->', 'TK_COMMENT'];\n      }\n      if (c === '.') {\n        return [c, 'TK_DOT'];\n      }\n      if (in_array(c, punct)) {\n        while (parser_pos < input_length && in_array(c + input.charAt(parser_pos), punct)) {\n          c += input.charAt(parser_pos);\n          parser_pos += 1;\n          if (parser_pos >= input_length) {\n            break;\n          }\n        }\n        if (c === ',') {\n          return [c, 'TK_COMMA'];\n        } else if (c === '=') {\n          return [c, 'TK_EQUALS'];\n        } else {\n          return [c, 'TK_OPERATOR'];\n        }\n      }\n      return [c, 'TK_UNKNOWN'];\n    }\n    function unescape_string(s) {\n      var esc = false,\n          out = '',\n          pos = 0,\n          s_hex = '',\n          escaped = 0,\n          c;\n      while (esc || pos < s.length) {\n        c = s.charAt(pos);\n        pos++;\n        if (esc) {\n          esc = false;\n          if (c === 'x') {\n            s_hex = s.substr(pos, 2);\n            pos += 2;\n          } else if (c === 'u') {\n            s_hex = s.substr(pos, 4);\n            pos += 4;\n          } else {\n            out += '\\\\' + c;\n            continue;\n          }\n          if (!s_hex.match(/^[0123456789abcdefABCDEF]+$/)) {\n            return s;\n          }\n          escaped = parseInt(s_hex, 16);\n          if (escaped >= 0x00 && escaped < 0x20) {\n            if (c === 'x') {\n              out += '\\\\x' + s_hex;\n            } else {\n              out += '\\\\u' + s_hex;\n            }\n            continue;\n          } else if (escaped === 0x22 || escaped === 0x27 || escaped === 0x5c) {\n            out += '\\\\' + String.fromCharCode(escaped);\n          } else if (c === 'x' && escaped > 0x7e && escaped <= 0xff) {\n            return s;\n          } else {\n            out += String.fromCharCode(escaped);\n          }\n        } else if (c === '\\\\') {\n          esc = true;\n        } else {\n          out += c;\n        }\n      }\n      return out;\n    }\n  }\n  if (typeof define === \"function\" && define.amd) {\n    define(\"5\", [], function() {\n      return {js_beautify: js_beautify};\n    });\n  } else if (typeof exports !== \"undefined\") {\n    exports.js_beautify = js_beautify;\n  } else if (typeof window !== \"undefined\") {\n    window.js_beautify = js_beautify;\n  } else if (typeof global !== \"undefined\") {\n    global.js_beautify = js_beautify;\n  }\n}());\n\n_removeDefine();\n})();\n$__System.registerDynamic(\"6\", [], false, function(__require, __exports, __module) {\n  var _retrieveGlobal = $__System.get(\"@@global-helpers\").prepareGlobal(__module.id, null, null);\n  (function() {\n    var jsonlint = this[\"jsonlint\"];\n    var jsonlint = function() {\n      var a = !0,\n          b = !1,\n          c = {},\n          d = function() {\n            var a = {\n              trace: function() {},\n              yy: {},\n              symbols_: {\n                error: 2,\n                JSONString: 3,\n                STRING: 4,\n                JSONNumber: 5,\n                NUMBER: 6,\n                JSONNullLiteral: 7,\n                NULL: 8,\n                JSONBooleanLiteral: 9,\n                TRUE: 10,\n                FALSE: 11,\n                JSONText: 12,\n                JSONValue: 13,\n                EOF: 14,\n                JSONObject: 15,\n                JSONArray: 16,\n                \"{\": 17,\n                \"}\": 18,\n                JSONMemberList: 19,\n                JSONMember: 20,\n                \":\": 21,\n                \",\": 22,\n                \"[\": 23,\n                \"]\": 24,\n                JSONElementList: 25,\n                $accept: 0,\n                $end: 1\n              },\n              terminals_: {\n                2: \"error\",\n                4: \"STRING\",\n                6: \"NUMBER\",\n                8: \"NULL\",\n                10: \"TRUE\",\n                11: \"FALSE\",\n                14: \"EOF\",\n                17: \"{\",\n                18: \"}\",\n                21: \":\",\n                22: \",\",\n                23: \"[\",\n                24: \"]\"\n              },\n              productions_: [0, [3, 1], [5, 1], [7, 1], [9, 1], [9, 1], [12, 2], [13, 1], [13, 1], [13, 1], [13, 1], [13, 1], [13, 1], [15, 2], [15, 3], [20, 3], [19, 1], [19, 3], [16, 2], [16, 3], [25, 1], [25, 3]],\n              performAction: function(b, c, d, e, f, g, h) {\n                var i = g.length - 1;\n                switch (f) {\n                  case 1:\n                    this.$ = b.replace(/\\\\(\\\\|\")/g, \"$1\").replace(/\\\\n/g, \"\\n\").replace(/\\\\r/g, \"\\r\").replace(/\\\\t/g, \"\t\").replace(/\\\\v/g, \"\u000b\").replace(/\\\\f/g, \"\\f\").replace(/\\\\b/g, \"\\b\");\n                    break;\n                  case 2:\n                    this.$ = Number(b);\n                    break;\n                  case 3:\n                    this.$ = null;\n                    break;\n                  case 4:\n                    this.$ = !0;\n                    break;\n                  case 5:\n                    this.$ = !1;\n                    break;\n                  case 6:\n                    return this.$ = g[i - 1];\n                  case 13:\n                    this.$ = {};\n                    break;\n                  case 14:\n                    this.$ = g[i - 1];\n                    break;\n                  case 15:\n                    this.$ = [g[i - 2], g[i]];\n                    break;\n                  case 16:\n                    this.$ = {}, this.$[g[i][0]] = g[i][1];\n                    break;\n                  case 17:\n                    this.$ = g[i - 2], g[i - 2][g[i][0]] = g[i][1];\n                    break;\n                  case 18:\n                    this.$ = [];\n                    break;\n                  case 19:\n                    this.$ = g[i - 1];\n                    break;\n                  case 20:\n                    this.$ = [g[i]];\n                    break;\n                  case 21:\n                    this.$ = g[i - 2], g[i - 2].push(g[i]);\n                }\n              },\n              table: [{\n                3: 5,\n                4: [1, 12],\n                5: 6,\n                6: [1, 13],\n                7: 3,\n                8: [1, 9],\n                9: 4,\n                10: [1, 10],\n                11: [1, 11],\n                12: 1,\n                13: 2,\n                15: 7,\n                16: 8,\n                17: [1, 14],\n                23: [1, 15]\n              }, {1: [3]}, {14: [1, 16]}, {\n                14: [2, 7],\n                18: [2, 7],\n                22: [2, 7],\n                24: [2, 7]\n              }, {\n                14: [2, 8],\n                18: [2, 8],\n                22: [2, 8],\n                24: [2, 8]\n              }, {\n                14: [2, 9],\n                18: [2, 9],\n                22: [2, 9],\n                24: [2, 9]\n              }, {\n                14: [2, 10],\n                18: [2, 10],\n                22: [2, 10],\n                24: [2, 10]\n              }, {\n                14: [2, 11],\n                18: [2, 11],\n                22: [2, 11],\n                24: [2, 11]\n              }, {\n                14: [2, 12],\n                18: [2, 12],\n                22: [2, 12],\n                24: [2, 12]\n              }, {\n                14: [2, 3],\n                18: [2, 3],\n                22: [2, 3],\n                24: [2, 3]\n              }, {\n                14: [2, 4],\n                18: [2, 4],\n                22: [2, 4],\n                24: [2, 4]\n              }, {\n                14: [2, 5],\n                18: [2, 5],\n                22: [2, 5],\n                24: [2, 5]\n              }, {\n                14: [2, 1],\n                18: [2, 1],\n                21: [2, 1],\n                22: [2, 1],\n                24: [2, 1]\n              }, {\n                14: [2, 2],\n                18: [2, 2],\n                22: [2, 2],\n                24: [2, 2]\n              }, {\n                3: 20,\n                4: [1, 12],\n                18: [1, 17],\n                19: 18,\n                20: 19\n              }, {\n                3: 5,\n                4: [1, 12],\n                5: 6,\n                6: [1, 13],\n                7: 3,\n                8: [1, 9],\n                9: 4,\n                10: [1, 10],\n                11: [1, 11],\n                13: 23,\n                15: 7,\n                16: 8,\n                17: [1, 14],\n                23: [1, 15],\n                24: [1, 21],\n                25: 22\n              }, {1: [2, 6]}, {\n                14: [2, 13],\n                18: [2, 13],\n                22: [2, 13],\n                24: [2, 13]\n              }, {\n                18: [1, 24],\n                22: [1, 25]\n              }, {\n                18: [2, 16],\n                22: [2, 16]\n              }, {21: [1, 26]}, {\n                14: [2, 18],\n                18: [2, 18],\n                22: [2, 18],\n                24: [2, 18]\n              }, {\n                22: [1, 28],\n                24: [1, 27]\n              }, {\n                22: [2, 20],\n                24: [2, 20]\n              }, {\n                14: [2, 14],\n                18: [2, 14],\n                22: [2, 14],\n                24: [2, 14]\n              }, {\n                3: 20,\n                4: [1, 12],\n                20: 29\n              }, {\n                3: 5,\n                4: [1, 12],\n                5: 6,\n                6: [1, 13],\n                7: 3,\n                8: [1, 9],\n                9: 4,\n                10: [1, 10],\n                11: [1, 11],\n                13: 30,\n                15: 7,\n                16: 8,\n                17: [1, 14],\n                23: [1, 15]\n              }, {\n                14: [2, 19],\n                18: [2, 19],\n                22: [2, 19],\n                24: [2, 19]\n              }, {\n                3: 5,\n                4: [1, 12],\n                5: 6,\n                6: [1, 13],\n                7: 3,\n                8: [1, 9],\n                9: 4,\n                10: [1, 10],\n                11: [1, 11],\n                13: 31,\n                15: 7,\n                16: 8,\n                17: [1, 14],\n                23: [1, 15]\n              }, {\n                18: [2, 17],\n                22: [2, 17]\n              }, {\n                18: [2, 15],\n                22: [2, 15]\n              }, {\n                22: [2, 21],\n                24: [2, 21]\n              }],\n              defaultActions: {16: [2, 6]},\n              parseError: function(b, c) {\n                throw new Error(b);\n              },\n              parse: function(b) {\n                function o(a) {\n                  d.length = d.length - 2 * a, e.length = e.length - a, f.length = f.length - a;\n                }\n                function p() {\n                  var a;\n                  return a = c.lexer.lex() || 1, typeof a != \"number\" && (a = c.symbols_[a] || a), a;\n                }\n                var c = this,\n                    d = [0],\n                    e = [null],\n                    f = [],\n                    g = this.table,\n                    h = \"\",\n                    i = 0,\n                    j = 0,\n                    k = 0,\n                    l = 2,\n                    m = 1;\n                this.lexer.setInput(b), this.lexer.yy = this.yy, this.yy.lexer = this.lexer, typeof this.lexer.yylloc == \"undefined\" && (this.lexer.yylloc = {});\n                var n = this.lexer.yylloc;\n                f.push(n), typeof this.yy.parseError == \"function\" && (this.parseError = this.yy.parseError);\n                var q,\n                    r,\n                    s,\n                    t,\n                    u,\n                    v,\n                    w = {},\n                    x,\n                    y,\n                    z,\n                    A;\n                for (; ; ) {\n                  s = d[d.length - 1], this.defaultActions[s] ? t = this.defaultActions[s] : (q == null && (q = p()), t = g[s] && g[s][q]);\n                  if (typeof t == \"undefined\" || !t.length || !t[0]) {\n                    if (!k) {\n                      A = [];\n                      for (x in g[s])\n                        this.terminals_[x] && x > 2 && A.push(\"'\" + this.terminals_[x] + \"'\");\n                      var B = \"\";\n                      this.lexer.showPosition ? B = \"Parse error on line \" + (i + 1) + \":\\n\" + this.lexer.showPosition() + \"\\nExpecting \" + A.join(\", \") + \", got '\" + this.terminals_[q] + \"'\" : B = \"Parse error on line \" + (i + 1) + \": Unexpected \" + (q == 1 ? \"end of input\" : \"'\" + (this.terminals_[q] || q) + \"'\"), this.parseError(B, {\n                        text: this.lexer.match,\n                        token: this.terminals_[q] || q,\n                        line: this.lexer.yylineno,\n                        loc: n,\n                        expected: A\n                      });\n                    }\n                    if (k == 3) {\n                      if (q == m)\n                        throw new Error(B || \"Parsing halted.\");\n                      j = this.lexer.yyleng, h = this.lexer.yytext, i = this.lexer.yylineno, n = this.lexer.yylloc, q = p();\n                    }\n                    for (; ; ) {\n                      if (l.toString() in g[s])\n                        break;\n                      if (s == 0)\n                        throw new Error(B || \"Parsing halted.\");\n                      o(1), s = d[d.length - 1];\n                    }\n                    r = q, q = l, s = d[d.length - 1], t = g[s] && g[s][l], k = 3;\n                  }\n                  if (t[0] instanceof Array && t.length > 1)\n                    throw new Error(\"Parse Error: multiple actions possible at state: \" + s + \", token: \" + q);\n                  switch (t[0]) {\n                    case 1:\n                      d.push(q), e.push(this.lexer.yytext), f.push(this.lexer.yylloc), d.push(t[1]), q = null, r ? (q = r, r = null) : (j = this.lexer.yyleng, h = this.lexer.yytext, i = this.lexer.yylineno, n = this.lexer.yylloc, k > 0 && k--);\n                      break;\n                    case 2:\n                      y = this.productions_[t[1]][1], w.$ = e[e.length - y], w._$ = {\n                        first_line: f[f.length - (y || 1)].first_line,\n                        last_line: f[f.length - 1].last_line,\n                        first_column: f[f.length - (y || 1)].first_column,\n                        last_column: f[f.length - 1].last_column\n                      }, v = this.performAction.call(w, h, j, i, this.yy, t[1], e, f);\n                      if (typeof v != \"undefined\")\n                        return v;\n                      y && (d = d.slice(0, -1 * y * 2), e = e.slice(0, -1 * y), f = f.slice(0, -1 * y)), d.push(this.productions_[t[1]][0]), e.push(w.$), f.push(w._$), z = g[d[d.length - 2]][d[d.length - 1]], d.push(z);\n                      break;\n                    case 3:\n                      return !0;\n                  }\n                }\n                return !0;\n              }\n            },\n                b = function() {\n                  var a = {\n                    EOF: 1,\n                    parseError: function(b, c) {\n                      if (!this.yy.parseError)\n                        throw new Error(b);\n                      this.yy.parseError(b, c);\n                    },\n                    setInput: function(a) {\n                      return this._input = a, this._more = this._less = this.done = !1, this.yylineno = this.yyleng = 0, this.yytext = this.matched = this.match = \"\", this.conditionStack = [\"INITIAL\"], this.yylloc = {\n                        first_line: 1,\n                        first_column: 0,\n                        last_line: 1,\n                        last_column: 0\n                      }, this;\n                    },\n                    input: function() {\n                      var a = this._input[0];\n                      this.yytext += a, this.yyleng++, this.match += a, this.matched += a;\n                      var b = a.match(/\\n/);\n                      return b && this.yylineno++, this._input = this._input.slice(1), a;\n                    },\n                    unput: function(a) {\n                      return this._input = a + this._input, this;\n                    },\n                    more: function() {\n                      return this._more = !0, this;\n                    },\n                    less: function(a) {\n                      this._input = this.match.slice(a) + this._input;\n                    },\n                    pastInput: function() {\n                      var a = this.matched.substr(0, this.matched.length - this.match.length);\n                      return (a.length > 20 ? \"...\" : \"\") + a.substr(-20).replace(/\\n/g, \"\");\n                    },\n                    upcomingInput: function() {\n                      var a = this.match;\n                      return a.length < 20 && (a += this._input.substr(0, 20 - a.length)), (a.substr(0, 20) + (a.length > 20 ? \"...\" : \"\")).replace(/\\n/g, \"\");\n                    },\n                    showPosition: function() {\n                      var a = this.pastInput(),\n                          b = (new Array(a.length + 1)).join(\"-\");\n                      return a + this.upcomingInput() + \"\\n\" + b + \"^\";\n                    },\n                    next: function() {\n                      if (this.done)\n                        return this.EOF;\n                      this._input || (this.done = !0);\n                      var a,\n                          b,\n                          c,\n                          d,\n                          e,\n                          f;\n                      this._more || (this.yytext = \"\", this.match = \"\");\n                      var g = this._currentRules();\n                      for (var h = 0; h < g.length; h++) {\n                        c = this._input.match(this.rules[g[h]]);\n                        if (c && (!b || c[0].length > b[0].length)) {\n                          b = c, d = h;\n                          if (!this.options.flex)\n                            break;\n                        }\n                      }\n                      if (b) {\n                        f = b[0].match(/\\n.*/g), f && (this.yylineno += f.length), this.yylloc = {\n                          first_line: this.yylloc.last_line,\n                          last_line: this.yylineno + 1,\n                          first_column: this.yylloc.last_column,\n                          last_column: f ? f[f.length - 1].length - 1 : this.yylloc.last_column + b[0].length\n                        }, this.yytext += b[0], this.match += b[0], this.yyleng = this.yytext.length, this._more = !1, this._input = this._input.slice(b[0].length), this.matched += b[0], a = this.performAction.call(this, this.yy, this, g[d], this.conditionStack[this.conditionStack.length - 1]), this.done && this._input && (this.done = !1);\n                        if (a)\n                          return a;\n                        return;\n                      }\n                      if (this._input === \"\")\n                        return this.EOF;\n                      this.parseError(\"Lexical error on line \" + (this.yylineno + 1) + \". Unrecognized text.\\n\" + this.showPosition(), {\n                        text: \"\",\n                        token: null,\n                        line: this.yylineno\n                      });\n                    },\n                    lex: function() {\n                      var b = this.next();\n                      return typeof b != \"undefined\" ? b : this.lex();\n                    },\n                    begin: function(b) {\n                      this.conditionStack.push(b);\n                    },\n                    popState: function() {\n                      return this.conditionStack.pop();\n                    },\n                    _currentRules: function() {\n                      return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n                    },\n                    topState: function() {\n                      return this.conditionStack[this.conditionStack.length - 2];\n                    },\n                    pushState: function(b) {\n                      this.begin(b);\n                    }\n                  };\n                  return a.options = {}, a.performAction = function(b, c, d, e) {\n                    var f = e;\n                    switch (d) {\n                      case 0:\n                        break;\n                      case 1:\n                        return 6;\n                      case 2:\n                        return c.yytext = c.yytext.substr(1, c.yyleng - 2), 4;\n                      case 3:\n                        return 17;\n                      case 4:\n                        return 18;\n                      case 5:\n                        return 23;\n                      case 6:\n                        return 24;\n                      case 7:\n                        return 22;\n                      case 8:\n                        return 21;\n                      case 9:\n                        return 10;\n                      case 10:\n                        return 11;\n                      case 11:\n                        return 8;\n                      case 12:\n                        return 14;\n                      case 13:\n                        return \"INVALID\";\n                    }\n                  }, a.rules = [/^(?:\\s+)/, /^(?:(-?([0-9]|[1-9][0-9]+))(\\.[0-9]+)?([eE][-+]?[0-9]+)?\\b)/, /^(?:\"(?:\\\\[\\\\\"bfnrt/]|\\\\u[a-fA-F0-9]{4}|[^\\\\\\0-\\x09\\x0a-\\x1f\"])*\")/, /^(?:\\{)/, /^(?:\\})/, /^(?:\\[)/, /^(?:\\])/, /^(?:,)/, /^(?::)/, /^(?:true\\b)/, /^(?:false\\b)/, /^(?:null\\b)/, /^(?:$)/, /^(?:.)/], a.conditions = {INITIAL: {\n                      rules: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\n                      inclusive: !0\n                    }}, a;\n                }();\n            return a.lexer = b, a;\n          }();\n      return typeof a != \"undefined\" && typeof c != \"undefined\" && (c.parser = d, c.parse = function() {\n        return d.parse.apply(d, arguments);\n      }, c.main = function(d) {\n        if (!d[1])\n          throw new Error(\"Usage: \" + d[0] + \" FILE\");\n        if (typeof process != \"undefined\")\n          var e = a(\"fs\").readFileSync(a(\"path\").join(process.cwd(), d[1]), \"utf8\");\n        else\n          var f = a(\"file\").path(a(\"file\").cwd()),\n              e = f.join(d[1]).read({charset: \"utf-8\"});\n        return c.parser.parse(e);\n      }, typeof b != \"undefined\" && a.main === b && c.main(typeof process != \"undefined\" ? process.argv.slice(1) : a(\"system\").args)), c;\n    }();\n    this[\"jsonlint\"] = jsonlint;\n  })();\n  return _retrieveGlobal();\n});\n\n(function() {\nvar _removeDefine = $__System.get(\"@@amd-helpers\").createDefine();\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\")\n    module.exports = mod();\n  else if (typeof define == \"function\" && define.amd)\n    return define(\"3\", [], mod);\n  else\n    this.CodeMirror = mod();\n})(function() {\n  \"use strict\";\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : ie_11up[1]);\n  var webkit = /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n  var ios = /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n  var mobile = ios || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var windows = /win/i.test(platform);\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version)\n    presto_version = Number(presto_version[1]);\n  if (presto_version && presto_version >= 15) {\n    presto = false;\n    webkit = true;\n  }\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n  var sawReadOnlySpans = false,\n      sawCollapsedSpans = false;\n  function CodeMirror(place, options) {\n    if (!(this instanceof CodeMirror))\n      return new CodeMirror(place, options);\n    this.options = options = options ? copyObj(options) : {};\n    copyObj(defaults, options, false);\n    setGuttersForLineNumbers(options);\n    var doc = options.value;\n    if (typeof doc == \"string\")\n      doc = new Doc(doc, options.mode, null, options.lineSeparator);\n    this.doc = doc;\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input);\n    display.wrapper.CodeMirror = this;\n    updateGutters(this);\n    themeChanged(this);\n    if (options.lineWrapping)\n      this.display.wrapper.className += \" CodeMirror-wrap\";\n    if (options.autofocus && !mobile)\n      display.input.focus();\n    initScrollbars(this);\n    this.state = {\n      keyMaps: [],\n      overlays: [],\n      modeGen: 0,\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false,\n      pasteIncoming: false,\n      cutIncoming: false,\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(),\n      keySeq: null,\n      specialChars: null\n    };\n    var cm = this;\n    if (ie && ie_version < 11)\n      setTimeout(function() {\n        cm.display.input.reset(true);\n      }, 20);\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n    if ((options.autofocus && !mobile) || cm.hasFocus())\n      setTimeout(bind(onFocus, this), 20);\n    else\n      onBlur(this);\n    for (var opt in optionHandlers)\n      if (optionHandlers.hasOwnProperty(opt))\n        optionHandlers[opt](this, options[opt], Init);\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit)\n      options.finishInit(this);\n    for (var i = 0; i < initHooks.length; ++i)\n      initHooks[i](this);\n    endOperation(this);\n    if (webkit && options.lineWrapping && getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      display.lineDiv.style.textRendering = \"auto\";\n  }\n  function Display(place, doc, input) {\n    var d = this;\n    this.input = input;\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    d.lineDiv = elt(\"div\", null, \"CodeMirror-code\");\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    d.lineSpace = elt(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv], null, \"position: relative; outline: none\");\n    d.mover = elt(\"div\", [elt(\"div\", [d.lineSpace], \"CodeMirror-lines\")], null, \"position: relative\");\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n    if (ie && ie_version < 8) {\n      d.gutters.style.zIndex = -1;\n      d.scroller.style.paddingRight = 0;\n    }\n    if (!webkit && !(gecko && mobile))\n      d.scroller.draggable = true;\n    if (place) {\n      if (place.appendChild)\n        place.appendChild(d.wrapper);\n      else\n        place(d.wrapper);\n    }\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    d.view = [];\n    d.renderedView = null;\n    d.externalMeasured = null;\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    d.alignWidgets = false;\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n    d.shift = false;\n    d.selForContextMenu = null;\n    d.activeTouch = null;\n    input.init(d);\n  }\n  function loadMode(cm) {\n    cm.doc.mode = CodeMirror.getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n  function resetModeState(cm) {\n    cm.doc.iter(function(line) {\n      if (line.stateAfter)\n        line.stateAfter = null;\n      if (line.styles)\n        line.styles = null;\n    });\n    cm.doc.frontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp)\n      regChange(cm);\n  }\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function() {\n      updateScrollbars(cm);\n    }, 100);\n  }\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display),\n        wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function(line) {\n      if (lineIsHidden(cm.doc, line))\n        return 0;\n      var widgetsHeight = 0;\n      if (line.widgets)\n        for (var i = 0; i < line.widgets.length; i++) {\n          if (line.widgets[i].height)\n            widgetsHeight += line.widgets[i].height;\n        }\n      if (wrapping)\n        return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;\n      else\n        return widgetsHeight + th;\n    };\n  }\n  function estimateLineHeights(cm) {\n    var doc = cm.doc,\n        est = estimateHeight(cm);\n    doc.iter(function(line) {\n      var estHeight = est(line);\n      if (estHeight != line.height)\n        updateLineHeight(line, estHeight);\n    });\n  }\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") + cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n  function guttersChanged(cm) {\n    updateGutters(cm);\n    regChange(cm);\n    setTimeout(function() {\n      alignHorizontally(cm);\n    }, 20);\n  }\n  function updateGutters(cm) {\n    var gutters = cm.display.gutters,\n        specs = cm.options.gutters;\n    removeChildren(gutters);\n    for (var i = 0; i < specs.length; ++i) {\n      var gutterClass = specs[i];\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + gutterClass));\n      if (gutterClass == \"CodeMirror-linenumbers\") {\n        cm.display.lineGutter = gElt;\n        gElt.style.width = (cm.display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = i ? \"\" : \"none\";\n    updateGutterSpace(cm);\n  }\n  function updateGutterSpace(cm) {\n    var width = cm.display.gutters.offsetWidth;\n    cm.display.sizer.style.marginLeft = width + \"px\";\n  }\n  function lineLength(line) {\n    if (line.height == 0)\n      return 0;\n    var len = line.text.length,\n        merged,\n        cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found = merged.find(0, true);\n      len -= cur.text.length - found.from.ch;\n      cur = found.to.line;\n      len += cur.text.length - found.to.ch;\n    }\n    return len;\n  }\n  function findMaxLine(cm) {\n    var d = cm.display,\n        doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function(line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n  function setGuttersForLineNumbers(options) {\n    var found = indexOf(options.gutters, \"CodeMirror-linenumbers\");\n    if (found == -1 && options.lineNumbers) {\n      options.gutters = options.gutters.concat([\"CodeMirror-linenumbers\"]);\n    } else if (found > -1 && !options.lineNumbers) {\n      options.gutters = options.gutters.slice(0);\n      options.gutters.splice(found, 1);\n    }\n  }\n  function measureForScrollbars(cm) {\n    var d = cm.display,\n        gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth,\n      clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    };\n  }\n  function NativeScrollbars(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    place(vert);\n    place(horiz);\n    on(vert, \"scroll\", function() {\n      if (vert.clientHeight)\n        scroll(vert.scrollTop, \"vertical\");\n    });\n    on(horiz, \"scroll\", function() {\n      if (horiz.clientWidth)\n        scroll(horiz.scrollLeft, \"horizontal\");\n    });\n    this.checkedOverlay = false;\n    if (ie && ie_version < 8)\n      this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\";\n  }\n  NativeScrollbars.prototype = copyObj({\n    update: function(measure) {\n      var needsH = measure.scrollWidth > measure.clientWidth + 1;\n      var needsV = measure.scrollHeight > measure.clientHeight + 1;\n      var sWidth = measure.nativeBarWidth;\n      if (needsV) {\n        this.vert.style.display = \"block\";\n        this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n        var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n        this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n      } else {\n        this.vert.style.display = \"\";\n        this.vert.firstChild.style.height = \"0\";\n      }\n      if (needsH) {\n        this.horiz.style.display = \"block\";\n        this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n        this.horiz.style.left = measure.barLeft + \"px\";\n        var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n        this.horiz.firstChild.style.width = (measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n      } else {\n        this.horiz.style.display = \"\";\n        this.horiz.firstChild.style.width = \"0\";\n      }\n      if (!this.checkedOverlay && measure.clientHeight > 0) {\n        if (sWidth == 0)\n          this.overlayHack();\n        this.checkedOverlay = true;\n      }\n      return {\n        right: needsV ? sWidth : 0,\n        bottom: needsH ? sWidth : 0\n      };\n    },\n    setScrollLeft: function(pos) {\n      if (this.horiz.scrollLeft != pos)\n        this.horiz.scrollLeft = pos;\n    },\n    setScrollTop: function(pos) {\n      if (this.vert.scrollTop != pos)\n        this.vert.scrollTop = pos;\n    },\n    overlayHack: function() {\n      var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n      this.horiz.style.minHeight = this.vert.style.minWidth = w;\n      var self = this;\n      var barMouseDown = function(e) {\n        if (e_target(e) != self.vert && e_target(e) != self.horiz)\n          operation(self.cm, onMouseDown)(e);\n      };\n      on(this.vert, \"mousedown\", barMouseDown);\n      on(this.horiz, \"mousedown\", barMouseDown);\n    },\n    clear: function() {\n      var parent = this.horiz.parentNode;\n      parent.removeChild(this.horiz);\n      parent.removeChild(this.vert);\n    }\n  }, NativeScrollbars.prototype);\n  function NullScrollbars() {}\n  NullScrollbars.prototype = copyObj({\n    update: function() {\n      return {\n        bottom: 0,\n        right: 0\n      };\n    },\n    setScrollLeft: function() {},\n    setScrollTop: function() {},\n    clear: function() {}\n  }, NullScrollbars.prototype);\n  CodeMirror.scrollbarModel = {\n    \"native\": NativeScrollbars,\n    \"null\": NullScrollbars\n  };\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n    }\n    cm.display.scrollbars = new CodeMirror.scrollbarModel[cm.options.scrollbarStyle](function(node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      on(node, \"mousedown\", function() {\n        if (cm.state.focused)\n          setTimeout(function() {\n            cm.display.input.focus();\n          }, 0);\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function(pos, axis) {\n      if (axis == \"horizontal\")\n        setScrollLeft(cm, pos);\n      else\n        setScrollTop(cm, pos);\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      addClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n  }\n  function updateScrollbars(cm, measure) {\n    if (!measure)\n      measure = measureForScrollbars(cm);\n    var startWidth = cm.display.barWidth,\n        startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        updateHeightsInViewport(cm);\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth;\n      startHeight = cm.display.barHeight;\n    }\n  }\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else\n      d.scrollbarFiller.style.display = \"\";\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else\n      d.gutterFiller.style.display = \"\";\n  }\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n    var from = lineAtHeight(doc, top),\n        to = lineAtHeight(doc, bottom);\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line,\n          ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {\n      from: from,\n      to: Math.max(to, from + 1)\n    };\n  }\n  function alignHorizontally(cm) {\n    var display = cm.display,\n        view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter))\n      return;\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth,\n        left = comp + \"px\";\n    for (var i = 0; i < view.length; i++)\n      if (!view[i].hidden) {\n        if (cm.options.fixedGutter && view[i].gutter)\n          view[i].gutter.style.left = left;\n        var align = view[i].alignable;\n        if (align)\n          for (var j = 0; j < align.length; j++)\n            align[j].style.left = left;\n      }\n    if (cm.options.fixedGutter)\n      display.gutters.style.left = (comp + gutterW) + \"px\";\n  }\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers)\n      return false;\n    var doc = cm.doc,\n        last = lineNumberFor(cm.options, doc.first + doc.size - 1),\n        display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)], \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth,\n          padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm);\n      return true;\n    }\n    return false;\n  }\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber));\n  }\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;\n  }\n  function DisplayUpdate(cm, viewport, force) {\n    var display = cm.display;\n    this.viewport = viewport;\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  }\n  DisplayUpdate.prototype.signal = function(emitter, type) {\n    if (hasHandler(emitter, type))\n      this.events.push(arguments);\n  };\n  DisplayUpdate.prototype.finish = function() {\n    for (var i = 0; i < this.events.length; i++)\n      signal.apply(null, this.events[i]);\n  };\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display,\n        doc = cm.doc;\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false;\n    }\n    if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && countDirtyView(cm) == 0)\n      return false;\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20)\n      from = Math.max(doc.first, display.viewFrom);\n    if (display.viewTo > to && display.viewTo - to < 20)\n      to = Math.min(end, display.viewTo);\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n    var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      return false;\n    var focused = activeElt();\n    if (toUpdate > 4)\n      display.lineDiv.style.display = \"none\";\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4)\n      display.lineDiv.style.display = \"\";\n    display.renderedView = display.view;\n    if (focused && activeElt() != focused && focused.offsetHeight)\n      focused.focus();\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n    display.updateLineNumbers = null;\n    return true;\n  }\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n    for (var first = true; ; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        if (viewport && viewport.top != null)\n          viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)};\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          break;\n      }\n      if (!updateDisplayIfNeeded(cm, update))\n        break;\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      setDocumentHeight(cm, barMeasure);\n      updateScrollbars(cm, barMeasure);\n    }\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom;\n      cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      setDocumentHeight(cm, barMeasure);\n      updateScrollbars(cm, barMeasure);\n      update.finish();\n    }\n  }\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    var total = measure.docHeight + cm.display.barHeight;\n    cm.display.heightForcer.style.top = total + \"px\";\n    cm.display.gutters.style.height = Math.max(total + scrollGap(cm), measure.clientHeight) + \"px\";\n  }\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i],\n          height;\n      if (cur.hidden)\n        continue;\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n      }\n      var diff = cur.line.height - height;\n      if (height < 2)\n        height = textHeight(display);\n      if (diff > .001 || diff < -.001) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest)\n          for (var j = 0; j < cur.rest.length; j++)\n            updateWidgetHeight(cur.rest[j]);\n      }\n    }\n  }\n  function updateWidgetHeight(line) {\n    if (line.widgets)\n      for (var i = 0; i < line.widgets.length; ++i)\n        line.widgets[i].height = line.widgets[i].node.offsetHeight;\n  }\n  function getDimensions(cm) {\n    var d = cm.display,\n        left = {},\n        width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild,\n        i = 0; n; n = n.nextSibling, ++i) {\n      left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[cm.options.gutters[i]] = n.clientWidth;\n    }\n    return {\n      fixedPos: compensateForHScroll(d),\n      gutterTotalWidth: d.gutters.offsetWidth,\n      gutterLeft: left,\n      gutterWidth: width,\n      wrapperWidth: d.wrapper.clientWidth\n    };\n  }\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display,\n        lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv,\n        cur = container.firstChild;\n    function rm(node) {\n      var next = node.nextSibling;\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        node.style.display = \"none\";\n      else\n        node.parentNode.removeChild(node);\n      return next;\n    }\n    var view = display.view,\n        lineN = display.viewFrom;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) {} else if (!lineView.node || lineView.node.parentNode != container) {\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else {\n        while (cur != lineView.node)\n          cur = rm(cur);\n        var updateNumber = lineNumbers && updateNumbersFrom != null && updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1)\n            updateNumber = false;\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur)\n      cur = rm(cur);\n  }\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\")\n        updateLineText(cm, lineView);\n      else if (type == \"gutter\")\n        updateLineGutter(cm, lineView, lineN, dims);\n      else if (type == \"class\")\n        updateLineClasses(lineView);\n      else if (type == \"widget\")\n        updateLineWidgets(cm, lineView, dims);\n    }\n    lineView.changes = null;\n  }\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        lineView.text.parentNode.replaceChild(lineView.node, lineView.text);\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8)\n        lineView.node.style.zIndex = 2;\n    }\n    return lineView.node;\n  }\n  function updateLineBackground(lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls)\n      cls += \" CodeMirror-linebackground\";\n    if (lineView.background) {\n      if (cls)\n        lineView.background.className = cls;\n      else {\n        lineView.background.parentNode.removeChild(lineView.background);\n        lineView.background = null;\n      }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n    }\n  }\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built;\n    }\n    return buildLineContent(cm, lineView);\n  }\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node)\n      lineView.node = built.pre;\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n  function updateLineClasses(lineView) {\n    updateLineBackground(lineView);\n    if (lineView.line.wrapClass)\n      ensureLineWrapped(lineView).className = lineView.line.wrapClass;\n    else if (lineView.node != lineView.text)\n      lineView.node.className = \"\";\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass, \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + dims.gutterTotalWidth + \"px\");\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\");\n      cm.display.input.setUneditable(gutterWrap);\n      wrap.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        gutterWrap.className += \" \" + lineView.line.gutterClass;\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        lineView.lineNumber = gutterWrap.appendChild(elt(\"div\", lineNumberFor(cm.options, lineN), \"CodeMirror-linenumber CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \" + cm.display.lineNumInnerWidth + \"px\"));\n      if (markers)\n        for (var k = 0; k < cm.options.gutters.length; ++k) {\n          var id = cm.options.gutters[k],\n              found = markers.hasOwnProperty(id) && markers[id];\n          if (found)\n            gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[id] + \"px; width: \" + dims.gutterWidth[id] + \"px\"));\n        }\n    }\n  }\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable)\n      lineView.alignable = null;\n    for (var node = lineView.node.firstChild,\n        next; node; node = next) {\n      var next = node.nextSibling;\n      if (node.className == \"CodeMirror-linewidget\")\n        lineView.node.removeChild(node);\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass)\n      lineView.bgClass = built.bgClass;\n    if (built.textClass)\n      lineView.textClass = built.textClass;\n    updateLineClasses(lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node;\n  }\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest)\n      for (var i = 0; i < lineView.rest.length; i++)\n        insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);\n  }\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets)\n      return;\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0,\n        ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i],\n          node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\");\n      if (!widget.handleMouseEvents)\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        wrap.insertBefore(node, lineView.gutter || lineView.text);\n      else\n        wrap.appendChild(node);\n      signalLater(widget, \"redraw\");\n    }\n  }\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n      (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll)\n        node.style.marginLeft = -dims.gutterTotalWidth + \"px\";\n    }\n  }\n  var Pos = CodeMirror.Pos = function(line, ch) {\n    if (!(this instanceof Pos))\n      return new Pos(line, ch);\n    this.line = line;\n    this.ch = ch;\n  };\n  var cmp = CodeMirror.cmpPos = function(a, b) {\n    return a.line - b.line || a.ch - b.ch;\n  };\n  function copyPos(x) {\n    return Pos(x.line, x.ch);\n  }\n  function maxPos(a, b) {\n    return cmp(a, b) < 0 ? b : a;\n  }\n  function minPos(a, b) {\n    return cmp(a, b) < 0 ? a : b;\n  }\n  function ensureFocus(cm) {\n    if (!cm.state.focused) {\n      cm.display.input.focus();\n      onFocus(cm);\n    }\n  }\n  function isReadOnly(cm) {\n    return cm.options.readOnly || cm.doc.cantEdit;\n  }\n  var lastCopied = null;\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel)\n      sel = doc.sel;\n    var paste = cm.state.pasteIncoming || origin == \"paste\";\n    var textLines = doc.splitLines(inserted),\n        multiPaste = null;\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.length; i++)\n            multiPaste.push(doc.splitLines(lastCopied[i]));\n        }\n      } else if (textLines.length == sel.ranges.length) {\n        multiPaste = map(textLines, function(l) {\n          return [l];\n        });\n      }\n    }\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      var from = range.from(),\n          to = range.to();\n      if (range.empty()) {\n        if (deleted && deleted > 0)\n          from = Pos(from.line, from.ch - deleted);\n        else if (cm.state.overwrite && !paste)\n          to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));\n      }\n      var updateInput = cm.curOp.updateInput;\n      var changeEvent = {\n        from: from,\n        to: to,\n        text: multiPaste ? multiPaste[i % multiPaste.length] : textLines,\n        origin: origin || (paste ? \"paste\" : cm.state.cutIncoming ? \"cut\" : \"+input\")\n      };\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      triggerElectric(cm, inserted);\n    ensureCursorVisible(cm);\n    cm.curOp.updateInput = updateInput;\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = false;\n  }\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"text/plain\");\n    if (pasted) {\n      e.preventDefault();\n      if (!isReadOnly(cm) && !cm.options.disableInput)\n        runInOp(cm, function() {\n          applyTextInput(cm, pasted, 0, null, \"paste\");\n        });\n      return true;\n    }\n  }\n  function triggerElectric(cm, inserted) {\n    if (!cm.options.electricChars || !cm.options.smartIndent)\n      return;\n    var sel = cm.doc.sel;\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line))\n        continue;\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break;\n          }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n          indented = indentLine(cm, range.head.line, \"smart\");\n      }\n      if (indented)\n        signalLater(cm, \"electricInput\", cm, range.head.line);\n    }\n  }\n  function copyableRanges(cm) {\n    var text = [],\n        ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {\n        anchor: Pos(line, 0),\n        head: Pos(line + 1, 0)\n      };\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {\n      text: text,\n      ranges: ranges\n    };\n  }\n  function disableBrowserMagic(field) {\n    field.setAttribute(\"autocorrect\", \"off\");\n    field.setAttribute(\"autocapitalize\", \"off\");\n    field.setAttribute(\"spellcheck\", \"false\");\n  }\n  function TextareaInput(cm) {\n    this.cm = cm;\n    this.prevInput = \"\";\n    this.pollingFast = false;\n    this.polling = new Delayed();\n    this.inaccurateSelection = false;\n    this.hasSelection = false;\n    this.composing = null;\n  }\n  ;\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    if (webkit)\n      te.style.width = \"1000px\";\n    else\n      te.setAttribute(\"wrap\", \"off\");\n    if (ios)\n      te.style.border = \"1px solid black\";\n    disableBrowserMagic(te);\n    return div;\n  }\n  TextareaInput.prototype = copyObj({\n    init: function(display) {\n      var input = this,\n          cm = this.cm;\n      var div = this.wrapper = hiddenTextarea();\n      var te = this.textarea = div.firstChild;\n      display.wrapper.insertBefore(div, display.wrapper.firstChild);\n      if (ios)\n        te.style.width = \"0px\";\n      on(te, \"input\", function() {\n        if (ie && ie_version >= 9 && input.hasSelection)\n          input.hasSelection = null;\n        input.poll();\n      });\n      on(te, \"paste\", function(e) {\n        if (handlePaste(e, cm))\n          return true;\n        cm.state.pasteIncoming = true;\n        input.fastPoll();\n      });\n      function prepareCopyCut(e) {\n        if (cm.somethingSelected()) {\n          lastCopied = cm.getSelections();\n          if (input.inaccurateSelection) {\n            input.prevInput = \"\";\n            input.inaccurateSelection = false;\n            te.value = lastCopied.join(\"\\n\");\n            selectInput(te);\n          }\n        } else if (!cm.options.lineWiseCopyCut) {\n          return;\n        } else {\n          var ranges = copyableRanges(cm);\n          lastCopied = ranges.text;\n          if (e.type == \"cut\") {\n            cm.setSelections(ranges.ranges, null, sel_dontScroll);\n          } else {\n            input.prevInput = \"\";\n            te.value = ranges.text.join(\"\\n\");\n            selectInput(te);\n          }\n        }\n        if (e.type == \"cut\")\n          cm.state.cutIncoming = true;\n      }\n      on(te, \"cut\", prepareCopyCut);\n      on(te, \"copy\", prepareCopyCut);\n      on(display.scroller, \"paste\", function(e) {\n        if (eventInWidget(display, e))\n          return;\n        cm.state.pasteIncoming = true;\n        input.focus();\n      });\n      on(display.lineSpace, \"selectstart\", function(e) {\n        if (!eventInWidget(display, e))\n          e_preventDefault(e);\n      });\n      on(te, \"compositionstart\", function() {\n        var start = cm.getCursor(\"from\");\n        if (input.composing)\n          input.composing.range.clear();\n        input.composing = {\n          start: start,\n          range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n        };\n      });\n      on(te, \"compositionend\", function() {\n        if (input.composing) {\n          input.poll();\n          input.composing.range.clear();\n          input.composing = null;\n        }\n      });\n    },\n    prepareSelection: function() {\n      var cm = this.cm,\n          display = cm.display,\n          doc = cm.doc;\n      var result = prepareSelection(cm);\n      if (cm.options.moveInputWithCursor) {\n        var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n        var wrapOff = display.wrapper.getBoundingClientRect(),\n            lineOff = display.lineDiv.getBoundingClientRect();\n        result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10, headPos.top + lineOff.top - wrapOff.top));\n        result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10, headPos.left + lineOff.left - wrapOff.left));\n      }\n      return result;\n    },\n    showSelection: function(drawn) {\n      var cm = this.cm,\n          display = cm.display;\n      removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n      removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n      if (drawn.teTop != null) {\n        this.wrapper.style.top = drawn.teTop + \"px\";\n        this.wrapper.style.left = drawn.teLeft + \"px\";\n      }\n    },\n    reset: function(typing) {\n      if (this.contextMenuPending)\n        return;\n      var minimal,\n          selected,\n          cm = this.cm,\n          doc = cm.doc;\n      if (cm.somethingSelected()) {\n        this.prevInput = \"\";\n        var range = doc.sel.primary();\n        minimal = hasCopyEvent && (range.to().line - range.from().line > 100 || (selected = cm.getSelection()).length > 1000);\n        var content = minimal ? \"-\" : selected || cm.getSelection();\n        this.textarea.value = content;\n        if (cm.state.focused)\n          selectInput(this.textarea);\n        if (ie && ie_version >= 9)\n          this.hasSelection = content;\n      } else if (!typing) {\n        this.prevInput = this.textarea.value = \"\";\n        if (ie && ie_version >= 9)\n          this.hasSelection = null;\n      }\n      this.inaccurateSelection = minimal;\n    },\n    getField: function() {\n      return this.textarea;\n    },\n    supportsTouch: function() {\n      return false;\n    },\n    focus: function() {\n      if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n        try {\n          this.textarea.focus();\n        } catch (e) {}\n      }\n    },\n    blur: function() {\n      this.textarea.blur();\n    },\n    resetPosition: function() {\n      this.wrapper.style.top = this.wrapper.style.left = 0;\n    },\n    receivedFocus: function() {\n      this.slowPoll();\n    },\n    slowPoll: function() {\n      var input = this;\n      if (input.pollingFast)\n        return;\n      input.polling.set(this.cm.options.pollInterval, function() {\n        input.poll();\n        if (input.cm.state.focused)\n          input.slowPoll();\n      });\n    },\n    fastPoll: function() {\n      var missed = false,\n          input = this;\n      input.pollingFast = true;\n      function p() {\n        var changed = input.poll();\n        if (!changed && !missed) {\n          missed = true;\n          input.polling.set(60, p);\n        } else {\n          input.pollingFast = false;\n          input.slowPoll();\n        }\n      }\n      input.polling.set(20, p);\n    },\n    poll: function() {\n      var cm = this.cm,\n          input = this.textarea,\n          prevInput = this.prevInput;\n      if (this.contextMenuPending || !cm.state.focused || (hasSelection(input) && !prevInput && !this.composing) || isReadOnly(cm) || cm.options.disableInput || cm.state.keySeq)\n        return false;\n      var text = input.value;\n      if (text == prevInput && !cm.somethingSelected())\n        return false;\n      if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\\uf700-\\uf7ff]/.test(text)) {\n        cm.display.input.reset();\n        return false;\n      }\n      if (cm.doc.sel == cm.display.selForContextMenu) {\n        var first = text.charCodeAt(0);\n        if (first == 0x200b && !prevInput)\n          prevInput = \"\\u200b\";\n        if (first == 0x21da) {\n          this.reset();\n          return this.cm.execCommand(\"undo\");\n        }\n      }\n      var same = 0,\n          l = Math.min(prevInput.length, text.length);\n      while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same))\n        ++same;\n      var self = this;\n      runInOp(cm, function() {\n        applyTextInput(cm, text.slice(same), prevInput.length - same, null, self.composing ? \"*compose\" : null);\n        if (text.length > 1000 || text.indexOf(\"\\n\") > -1)\n          input.value = self.prevInput = \"\";\n        else\n          self.prevInput = text;\n        if (self.composing) {\n          self.composing.range.clear();\n          self.composing.range = cm.markText(self.composing.start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"});\n        }\n      });\n      return true;\n    },\n    ensurePolled: function() {\n      if (this.pollingFast && this.poll())\n        this.pollingFast = false;\n    },\n    onKeyPress: function() {\n      if (ie && ie_version >= 9)\n        this.hasSelection = null;\n      this.fastPoll();\n    },\n    onContextMenu: function(e) {\n      var input = this,\n          cm = input.cm,\n          display = cm.display,\n          te = input.textarea;\n      var pos = posFromMouse(cm, e),\n          scrollPos = display.scroller.scrollTop;\n      if (!pos || presto)\n        return;\n      var reset = cm.options.resetSelectionOnContextMenu;\n      if (reset && cm.doc.sel.contains(pos) == -1)\n        operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);\n      var oldCSS = te.style.cssText;\n      input.wrapper.style.position = \"absolute\";\n      te.style.cssText = \"position: fixed; width: 30px; height: 30px; top: \" + (e.clientY - 5) + \"px; left: \" + (e.clientX - 5) + \"px; z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n      if (webkit)\n        var oldScrollY = window.scrollY;\n      display.input.focus();\n      if (webkit)\n        window.scrollTo(null, oldScrollY);\n      display.input.reset();\n      if (!cm.somethingSelected())\n        te.value = input.prevInput = \" \";\n      input.contextMenuPending = true;\n      display.selForContextMenu = cm.doc.sel;\n      clearTimeout(display.detectingSelectAll);\n      function prepareSelectAllHack() {\n        if (te.selectionStart != null) {\n          var selected = cm.somethingSelected();\n          var extval = \"\\u200b\" + (selected ? te.value : \"\");\n          te.value = \"\\u21da\";\n          te.value = extval;\n          input.prevInput = selected ? \"\" : \"\\u200b\";\n          te.selectionStart = 1;\n          te.selectionEnd = extval.length;\n          display.selForContextMenu = cm.doc.sel;\n        }\n      }\n      function rehide() {\n        input.contextMenuPending = false;\n        input.wrapper.style.position = \"relative\";\n        te.style.cssText = oldCSS;\n        if (ie && ie_version < 9)\n          display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);\n        if (te.selectionStart != null) {\n          if (!ie || (ie && ie_version < 9))\n            prepareSelectAllHack();\n          var i = 0,\n              poll = function() {\n                if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 && te.selectionEnd > 0 && input.prevInput == \"\\u200b\")\n                  operation(cm, commands.selectAll)(cm);\n                else if (i++ < 10)\n                  display.detectingSelectAll = setTimeout(poll, 500);\n                else\n                  display.input.reset();\n              };\n          display.detectingSelectAll = setTimeout(poll, 200);\n        }\n      }\n      if (ie && ie_version >= 9)\n        prepareSelectAllHack();\n      if (captureRightClick) {\n        e_stop(e);\n        var mouseup = function() {\n          off(window, \"mouseup\", mouseup);\n          setTimeout(rehide, 20);\n        };\n        on(window, \"mouseup\", mouseup);\n      } else {\n        setTimeout(rehide, 50);\n      }\n    },\n    readOnlyChanged: function(val) {\n      if (!val)\n        this.reset();\n    },\n    setUneditable: nothing,\n    needsContentAttribute: false\n  }, TextareaInput.prototype);\n  function ContentEditableInput(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.gracePeriod = false;\n  }\n  ContentEditableInput.prototype = copyObj({\n    init: function(display) {\n      var input = this,\n          cm = input.cm;\n      var div = input.div = display.lineDiv;\n      disableBrowserMagic(div);\n      on(div, \"paste\", function(e) {\n        handlePaste(e, cm);\n      });\n      on(div, \"compositionstart\", function(e) {\n        var data = e.data;\n        input.composing = {\n          sel: cm.doc.sel,\n          data: data,\n          startData: data\n        };\n        if (!data)\n          return;\n        var prim = cm.doc.sel.primary();\n        var line = cm.getLine(prim.head.line);\n        var found = line.indexOf(data, Math.max(0, prim.head.ch - data.length));\n        if (found > -1 && found <= prim.head.ch)\n          input.composing.sel = simpleSelection(Pos(prim.head.line, found), Pos(prim.head.line, found + data.length));\n      });\n      on(div, \"compositionupdate\", function(e) {\n        input.composing.data = e.data;\n      });\n      on(div, \"compositionend\", function(e) {\n        var ours = input.composing;\n        if (!ours)\n          return;\n        if (e.data != ours.startData && !/\\u200b/.test(e.data))\n          ours.data = e.data;\n        setTimeout(function() {\n          if (!ours.handled)\n            input.applyComposition(ours);\n          if (input.composing == ours)\n            input.composing = null;\n        }, 50);\n      });\n      on(div, \"touchstart\", function() {\n        input.forceCompositionEnd();\n      });\n      on(div, \"input\", function() {\n        if (input.composing)\n          return;\n        if (isReadOnly(cm) || !input.pollContent())\n          runInOp(input.cm, function() {\n            regChange(cm);\n          });\n      });\n      function onCopyCut(e) {\n        if (cm.somethingSelected()) {\n          lastCopied = cm.getSelections();\n          if (e.type == \"cut\")\n            cm.replaceSelection(\"\", null, \"cut\");\n        } else if (!cm.options.lineWiseCopyCut) {\n          return;\n        } else {\n          var ranges = copyableRanges(cm);\n          lastCopied = ranges.text;\n          if (e.type == \"cut\") {\n            cm.operation(function() {\n              cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n              cm.replaceSelection(\"\", null, \"cut\");\n            });\n          }\n        }\n        if (e.clipboardData && !ios) {\n          e.preventDefault();\n          e.clipboardData.clearData();\n          e.clipboardData.setData(\"text/plain\", lastCopied.join(\"\\n\"));\n        } else {\n          var kludge = hiddenTextarea(),\n              te = kludge.firstChild;\n          cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n          te.value = lastCopied.join(\"\\n\");\n          var hadFocus = document.activeElement;\n          selectInput(te);\n          setTimeout(function() {\n            cm.display.lineSpace.removeChild(kludge);\n            hadFocus.focus();\n          }, 50);\n        }\n      }\n      on(div, \"copy\", onCopyCut);\n      on(div, \"cut\", onCopyCut);\n    },\n    prepareSelection: function() {\n      var result = prepareSelection(this.cm, false);\n      result.focus = this.cm.state.focused;\n      return result;\n    },\n    showSelection: function(info) {\n      if (!info || !this.cm.display.view.length)\n        return;\n      if (info.focus)\n        this.showPrimarySelection();\n      this.showMultipleSelections(info);\n    },\n    showPrimarySelection: function() {\n      var sel = window.getSelection(),\n          prim = this.cm.doc.sel.primary();\n      var curAnchor = domToPos(this.cm, sel.anchorNode, sel.anchorOffset);\n      var curFocus = domToPos(this.cm, sel.focusNode, sel.focusOffset);\n      if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad && cmp(minPos(curAnchor, curFocus), prim.from()) == 0 && cmp(maxPos(curAnchor, curFocus), prim.to()) == 0)\n        return;\n      var start = posToDOM(this.cm, prim.from());\n      var end = posToDOM(this.cm, prim.to());\n      if (!start && !end)\n        return;\n      var view = this.cm.display.view;\n      var old = sel.rangeCount && sel.getRangeAt(0);\n      if (!start) {\n        start = {\n          node: view[0].measure.map[2],\n          offset: 0\n        };\n      } else if (!end) {\n        var measure = view[view.length - 1].measure;\n        var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n        end = {\n          node: map[map.length - 1],\n          offset: map[map.length - 2] - map[map.length - 3]\n        };\n      }\n      try {\n        var rng = range(start.node, start.offset, end.offset, end.node);\n      } catch (e) {}\n      if (rng) {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n        if (old && sel.anchorNode == null)\n          sel.addRange(old);\n        else if (gecko)\n          this.startGracePeriod();\n      }\n      this.rememberSelection();\n    },\n    startGracePeriod: function() {\n      var input = this;\n      clearTimeout(this.gracePeriod);\n      this.gracePeriod = setTimeout(function() {\n        input.gracePeriod = false;\n        if (input.selectionChanged())\n          input.cm.operation(function() {\n            input.cm.curOp.selectionChanged = true;\n          });\n      }, 20);\n    },\n    showMultipleSelections: function(info) {\n      removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n      removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n    },\n    rememberSelection: function() {\n      var sel = window.getSelection();\n      this.lastAnchorNode = sel.anchorNode;\n      this.lastAnchorOffset = sel.anchorOffset;\n      this.lastFocusNode = sel.focusNode;\n      this.lastFocusOffset = sel.focusOffset;\n    },\n    selectionInEditor: function() {\n      var sel = window.getSelection();\n      if (!sel.rangeCount)\n        return false;\n      var node = sel.getRangeAt(0).commonAncestorContainer;\n      return contains(this.div, node);\n    },\n    focus: function() {\n      if (this.cm.options.readOnly != \"nocursor\")\n        this.div.focus();\n    },\n    blur: function() {\n      this.div.blur();\n    },\n    getField: function() {\n      return this.div;\n    },\n    supportsTouch: function() {\n      return true;\n    },\n    receivedFocus: function() {\n      var input = this;\n      if (this.selectionInEditor())\n        this.pollSelection();\n      else\n        runInOp(this.cm, function() {\n          input.cm.curOp.selectionChanged = true;\n        });\n      function poll() {\n        if (input.cm.state.focused) {\n          input.pollSelection();\n          input.polling.set(input.cm.options.pollInterval, poll);\n        }\n      }\n      this.polling.set(this.cm.options.pollInterval, poll);\n    },\n    selectionChanged: function() {\n      var sel = window.getSelection();\n      return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;\n    },\n    pollSelection: function() {\n      if (!this.composing && !this.gracePeriod && this.selectionChanged()) {\n        var sel = window.getSelection(),\n            cm = this.cm;\n        this.rememberSelection();\n        var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n        var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n        if (anchor && head)\n          runInOp(cm, function() {\n            setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n            if (anchor.bad || head.bad)\n              cm.curOp.selectionChanged = true;\n          });\n      }\n    },\n    pollContent: function() {\n      var cm = this.cm,\n          display = cm.display,\n          sel = cm.doc.sel.primary();\n      var from = sel.from(),\n          to = sel.to();\n      if (from.line < display.viewFrom || to.line > display.viewTo - 1)\n        return false;\n      var fromIndex;\n      if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n        var fromLine = lineNo(display.view[0].line);\n        var fromNode = display.view[0].node;\n      } else {\n        var fromLine = lineNo(display.view[fromIndex].line);\n        var fromNode = display.view[fromIndex - 1].node.nextSibling;\n      }\n      var toIndex = findViewIndex(cm, to.line);\n      if (toIndex == display.view.length - 1) {\n        var toLine = display.viewTo - 1;\n        var toNode = display.lineDiv.lastChild;\n      } else {\n        var toLine = lineNo(display.view[toIndex + 1].line) - 1;\n        var toNode = display.view[toIndex + 1].node.previousSibling;\n      }\n      var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n      var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n      while (newText.length > 1 && oldText.length > 1) {\n        if (lst(newText) == lst(oldText)) {\n          newText.pop();\n          oldText.pop();\n          toLine--;\n        } else if (newText[0] == oldText[0]) {\n          newText.shift();\n          oldText.shift();\n          fromLine++;\n        } else\n          break;\n      }\n      var cutFront = 0,\n          cutEnd = 0;\n      var newTop = newText[0],\n          oldTop = oldText[0],\n          maxCutFront = Math.min(newTop.length, oldTop.length);\n      while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n        ++cutFront;\n      var newBot = lst(newText),\n          oldBot = lst(oldText);\n      var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0), oldBot.length - (oldText.length == 1 ? cutFront : 0));\n      while (cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n        ++cutEnd;\n      newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd);\n      newText[0] = newText[0].slice(cutFront);\n      var chFrom = Pos(fromLine, cutFront);\n      var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n      if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n        replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n        return true;\n      }\n    },\n    ensurePolled: function() {\n      this.forceCompositionEnd();\n    },\n    reset: function() {\n      this.forceCompositionEnd();\n    },\n    forceCompositionEnd: function() {\n      if (!this.composing || this.composing.handled)\n        return;\n      this.applyComposition(this.composing);\n      this.composing.handled = true;\n      this.div.blur();\n      this.div.focus();\n    },\n    applyComposition: function(composing) {\n      if (isReadOnly(this.cm))\n        operation(this.cm, regChange)(this.cm);\n      else if (composing.data && composing.data != composing.startData)\n        operation(this.cm, applyTextInput)(this.cm, composing.data, 0, composing.sel);\n    },\n    setUneditable: function(node) {\n      node.contentEditable = \"false\";\n    },\n    onKeyPress: function(e) {\n      e.preventDefault();\n      if (!isReadOnly(this.cm))\n        operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);\n    },\n    readOnlyChanged: function(val) {\n      this.div.contentEditable = String(val != \"nocursor\");\n    },\n    onContextMenu: nothing,\n    resetPosition: nothing,\n    needsContentAttribute: true\n  }, ContentEditableInput.prototype);\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden)\n      return null;\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n    var order = getOrder(line),\n        side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result;\n  }\n  function badPos(pos, bad) {\n    if (bad)\n      pos.bad = true;\n    return pos;\n  }\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode)\n        return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);\n      node = null;\n      offset = 0;\n    } else {\n      for (lineNode = node; ; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv)\n          return null;\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv)\n          break;\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        return locateNodeInLineView(lineView, node, offset);\n    }\n  }\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild,\n        bad = false;\n    if (!node || !contains(wrapper, node))\n      return badPos(Pos(lineNo(lineView.line), 0), true);\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad);\n      }\n    }\n    var textNode = node.nodeType == 3 ? node : null,\n        topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset)\n        offset = textNode.nodeValue.length;\n    }\n    while (topNode.parentNode != wrapper)\n      topNode = topNode.parentNode;\n    var measure = lineView.measure,\n        maps = measure.maps;\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n            if (offset < 0 || curNode != textNode)\n              ch = map[j + (offset ? 1 : 0)];\n            return Pos(line, ch);\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found)\n      return badPos(found, bad);\n    for (var after = topNode.nextSibling,\n        dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        return badPos(Pos(found.line, found.ch - dist), bad);\n      else\n        dist += after.textContent.length;\n    }\n    for (var before = topNode.previousSibling,\n        dist = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        return badPos(Pos(found.line, found.ch + dist), bad);\n      else\n        dist += after.textContent.length;\n    }\n  }\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\",\n        closing = false,\n        lineSep = cm.doc.lineSeparator();\n    function recognizeMarker(id) {\n      return function(marker) {\n        return marker.id == id;\n      };\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText != null) {\n          if (cmText == \"\")\n            cmText = node.textContent.replace(/\\u200b/g, \"\");\n          text += cmText;\n          return;\n        }\n        var markerID = node.getAttribute(\"cm-marker\"),\n            range;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range = found[0].find()))\n            text += getBetween(cm.doc, range.from, range.to).join(lineSep);\n          return;\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\")\n          return;\n        for (var i = 0; i < node.childNodes.length; i++)\n          walk(node.childNodes[i]);\n        if (/^(pre|div|p)$/i.test(node.nodeName))\n          closing = true;\n      } else if (node.nodeType == 3) {\n        var val = node.nodeValue;\n        if (!val)\n          return;\n        if (closing) {\n          text += lineSep;\n          closing = false;\n        }\n        text += val;\n      }\n    }\n    for (; ; ) {\n      walk(from);\n      if (from == to)\n        break;\n      from = from.nextSibling;\n    }\n    return text;\n  }\n  CodeMirror.inputStyles = {\n    \"textarea\": TextareaInput,\n    \"contenteditable\": ContentEditableInput\n  };\n  function Selection(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  }\n  Selection.prototype = {\n    primary: function() {\n      return this.ranges[this.primIndex];\n    },\n    equals: function(other) {\n      if (other == this)\n        return true;\n      if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length)\n        return false;\n      for (var i = 0; i < this.ranges.length; i++) {\n        var here = this.ranges[i],\n            there = other.ranges[i];\n        if (cmp(here.anchor, there.anchor) != 0 || cmp(here.head, there.head) != 0)\n          return false;\n      }\n      return true;\n    },\n    deepCopy: function() {\n      for (var out = [],\n          i = 0; i < this.ranges.length; i++)\n        out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));\n      return new Selection(out, this.primIndex);\n    },\n    somethingSelected: function() {\n      for (var i = 0; i < this.ranges.length; i++)\n        if (!this.ranges[i].empty())\n          return true;\n      return false;\n    },\n    contains: function(pos, end) {\n      if (!end)\n        end = pos;\n      for (var i = 0; i < this.ranges.length; i++) {\n        var range = this.ranges[i];\n        if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n          return i;\n      }\n      return -1;\n    }\n  };\n  function Range(anchor, head) {\n    this.anchor = anchor;\n    this.head = head;\n  }\n  Range.prototype = {\n    from: function() {\n      return minPos(this.anchor, this.head);\n    },\n    to: function() {\n      return maxPos(this.anchor, this.head);\n    },\n    empty: function() {\n      return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;\n    }\n  };\n  function normalizeSelection(ranges, primIndex) {\n    var prim = ranges[primIndex];\n    ranges.sort(function(a, b) {\n      return cmp(a.from(), b.from());\n    });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i],\n          prev = ranges[i - 1];\n      if (cmp(prev.to(), cur.from()) >= 0) {\n        var from = minPos(prev.from(), cur.from()),\n            to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex)\n          --primIndex;\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex);\n  }\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0);\n  }\n  function clipLine(doc, n) {\n    return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));\n  }\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first)\n      return Pos(doc.first, 0);\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last)\n      return Pos(last, getLine(doc, last).text.length);\n    return clipToLen(pos, getLine(doc, pos.line).text.length);\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen)\n      return Pos(pos.line, linelen);\n    else if (ch < 0)\n      return Pos(pos.line, 0);\n    else\n      return pos;\n  }\n  function isLine(doc, l) {\n    return l >= doc.first && l < doc.first + doc.size;\n  }\n  function clipPosArray(doc, array) {\n    for (var out = [],\n        i = 0; i < array.length; i++)\n      out[i] = clipPos(doc, array[i]);\n    return out;\n  }\n  function extendRange(doc, range, head, other) {\n    if (doc.cm && doc.cm.display.shift || doc.extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head);\n    } else {\n      return new Range(other || head, head);\n    }\n  }\n  function extendSelection(doc, head, other, options) {\n    setSelection(doc, new Selection([extendRange(doc, doc.sel.primary(), head, other)], 0), options);\n  }\n  function extendSelections(doc, heads, options) {\n    for (var out = [],\n        i = 0; i < doc.sel.ranges.length; i++)\n      out[i] = extendRange(doc, doc.sel.ranges[i], heads[i], null);\n    var newSel = normalizeSelection(out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);\n  }\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n  function filterSelectionChange(doc, sel) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor), clipPos(doc, ranges[i].head));\n      }\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm)\n      signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj);\n    if (obj.ranges != sel.ranges)\n      return normalizeSelection(obj.ranges, obj.ranges.length - 1);\n    else\n      return sel;\n  }\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done,\n        last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      sel = filterSelectionChange(doc, sel);\n    var bias = options && options.bias || (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n    if (!(options && options.scroll === false) && doc.cm)\n      ensureCursorVisible(doc.cm);\n  }\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel))\n      return;\n    doc.sel = sel;\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false), sel_dontScroll);\n  }\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out)\n          out = sel.ranges.slice(0, i);\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(out, sel.primIndex) : sel;\n  }\n  function skipAtomic(doc, pos, bias, mayClear) {\n    var flipped = false,\n        curPos = pos;\n    var dir = bias || 1;\n    doc.cantEdit = false;\n    search: for (; ; ) {\n      var line = getLine(doc, curPos.line);\n      if (line.markedSpans) {\n        for (var i = 0; i < line.markedSpans.length; ++i) {\n          var sp = line.markedSpans[i],\n              m = sp.marker;\n          if ((sp.from == null || (m.inclusiveLeft ? sp.from <= curPos.ch : sp.from < curPos.ch)) && (sp.to == null || (m.inclusiveRight ? sp.to >= curPos.ch : sp.to > curPos.ch))) {\n            if (mayClear) {\n              signal(m, \"beforeCursorEnter\");\n              if (m.explicitlyCleared) {\n                if (!line.markedSpans)\n                  break;\n                else {\n                  --i;\n                  continue;\n                }\n              }\n            }\n            if (!m.atomic)\n              continue;\n            var newPos = m.find(dir < 0 ? -1 : 1);\n            if (cmp(newPos, curPos) == 0) {\n              newPos.ch += dir;\n              if (newPos.ch < 0) {\n                if (newPos.line > doc.first)\n                  newPos = clipPos(doc, Pos(newPos.line - 1));\n                else\n                  newPos = null;\n              } else if (newPos.ch > line.text.length) {\n                if (newPos.line < doc.first + doc.size - 1)\n                  newPos = Pos(newPos.line + 1, 0);\n                else\n                  newPos = null;\n              }\n              if (!newPos) {\n                if (flipped) {\n                  if (!mayClear)\n                    return skipAtomic(doc, pos, bias, true);\n                  doc.cantEdit = true;\n                  return Pos(doc.first, 0);\n                }\n                flipped = true;\n                newPos = pos;\n                dir = -dir;\n              }\n            }\n            curPos = newPos;\n            continue search;\n          }\n        }\n      }\n      return curPos;\n    }\n  }\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n  function prepareSelection(cm, primary) {\n    var doc = cm.doc,\n        result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (primary === false && i == doc.sel.primIndex)\n        continue;\n      var range = doc.sel.ranges[i];\n      var collapsed = range.empty();\n      if (collapsed || cm.options.showCursorWhenSelecting)\n        drawSelectionCursor(cm, range.head, curFragment);\n      if (!collapsed)\n        drawSelectionRange(cm, range, selFragment);\n    }\n    return result;\n  }\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n    if (pos.other) {\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display,\n        doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display),\n        leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    function add(left, top, width, bottom) {\n      if (top < 0)\n        top = 0;\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + left + \"px; top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px; height: \" + (bottom - top) + \"px\"));\n    }\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start,\n          end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias);\n      }\n      iterateBidiSections(getOrder(lineObj), fromArg || 0, toArg == null ? lineLen : toArg, function(from, to, dir) {\n        var leftPos = coords(from, \"left\"),\n            rightPos,\n            left,\n            right;\n        if (from == to) {\n          rightPos = leftPos;\n          left = right = leftPos.left;\n        } else {\n          rightPos = coords(to - 1, \"right\");\n          if (dir == \"rtl\") {\n            var tmp = leftPos;\n            leftPos = rightPos;\n            rightPos = tmp;\n          }\n          left = leftPos.left;\n          right = rightPos.right;\n        }\n        if (fromArg == null && from == 0)\n          left = leftSide;\n        if (rightPos.top - leftPos.top > 3) {\n          add(left, leftPos.top, null, leftPos.bottom);\n          left = leftSide;\n          if (leftPos.bottom < rightPos.top)\n            add(left, leftPos.bottom, null, rightPos.top);\n        }\n        if (toArg == null && to == lineLen)\n          right = rightSide;\n        if (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left)\n          start = leftPos;\n        if (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right)\n          end = rightPos;\n        if (left < leftSide + 1)\n          left = leftSide;\n        add(left, rightPos.top, right - left, rightPos.bottom);\n      });\n      return {\n        start: start,\n        end: end\n      };\n    }\n    var sFrom = range.from(),\n        sTo = range.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line),\n          toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        add(leftSide, leftEnd.bottom, null, rightStart.top);\n    }\n    output.appendChild(fragment);\n  }\n  function restartBlink(cm) {\n    if (!cm.state.focused)\n      return;\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      display.blinker = setInterval(function() {\n        display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate);\n    else if (cm.options.cursorBlinkRate < 0)\n      display.cursorDiv.style.visibility = \"hidden\";\n  }\n  function startWorker(cm, time) {\n    if (cm.doc.mode.startState && cm.doc.frontier < cm.display.viewTo)\n      cm.state.highlight.set(time, bind(highlightWorker, cm));\n  }\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.frontier < doc.first)\n      doc.frontier = doc.first;\n    if (doc.frontier >= cm.display.viewTo)\n      return;\n    var end = +new Date + cm.options.workTime;\n    var state = copyState(doc.mode, getStateBefore(cm, doc.frontier));\n    var changedLines = [];\n    doc.iter(doc.frontier, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function(line) {\n      if (doc.frontier >= cm.display.viewFrom) {\n        var oldStyles = line.styles,\n            tooLong = line.text.length > cm.options.maxHighlightLength;\n        var highlighted = highlightLine(cm, line, tooLong ? copyState(doc.mode, state) : state, true);\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses,\n            newCls = highlighted.classes;\n        if (newCls)\n          line.styleClasses = newCls;\n        else if (oldCls)\n          line.styleClasses = null;\n        var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i)\n          ischange = oldStyles[i] != line.styles[i];\n        if (ischange)\n          changedLines.push(doc.frontier);\n        line.stateAfter = tooLong ? state : copyState(doc.mode, state);\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          processLine(cm, line.text, state);\n        line.stateAfter = doc.frontier % 5 == 0 ? copyState(doc.mode, state) : null;\n      }\n      ++doc.frontier;\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true;\n      }\n    });\n    if (changedLines.length)\n      runInOp(cm, function() {\n        for (var i = 0; i < changedLines.length; i++)\n          regLineChange(cm, changedLines[i], \"text\");\n      });\n  }\n  function findStartLine(cm, n, precise) {\n    var minindent,\n        minline,\n        doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first)\n        return doc.first;\n      var line = getLine(doc, search - 1);\n      if (line.stateAfter && (!precise || search <= doc.frontier))\n        return search;\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline;\n  }\n  function getStateBefore(cm, n, precise) {\n    var doc = cm.doc,\n        display = cm.display;\n    if (!doc.mode.startState)\n      return true;\n    var pos = findStartLine(cm, n, precise),\n        state = pos > doc.first && getLine(doc, pos - 1).stateAfter;\n    if (!state)\n      state = startState(doc.mode);\n    else\n      state = copyState(doc.mode, state);\n    doc.iter(pos, n, function(line) {\n      processLine(cm, line.text, state);\n      var save = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo;\n      line.stateAfter = save ? copyState(doc.mode, state) : null;\n      ++pos;\n    });\n    if (precise)\n      doc.frontier = pos;\n    return state;\n  }\n  function paddingTop(display) {\n    return display.lineSpace.offsetTop;\n  }\n  function paddingVert(display) {\n    return display.mover.offsetHeight - display.lineSpace.offsetHeight;\n  }\n  function paddingH(display) {\n    if (display.cachedPaddingH)\n      return display.cachedPaddingH;\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {\n      left: parseInt(style.paddingLeft),\n      right: parseInt(style.paddingRight)\n    };\n    if (!isNaN(data.left) && !isNaN(data.right))\n      display.cachedPaddingH = data;\n    return data;\n  }\n  function scrollGap(cm) {\n    return scrollerGap - cm.display.nativeBarWidth;\n  }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;\n  }\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i],\n              next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            heights.push((cur.bottom + next.top) / 2 - rect.top);\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      return {\n        map: lineView.measure.map,\n        cache: lineView.measure.cache\n      };\n    for (var i = 0; i < lineView.rest.length; i++)\n      if (lineView.rest[i] == line)\n        return {\n          map: lineView.measure.maps[i],\n          cache: lineView.measure.caches[i]\n        };\n    for (var i = 0; i < lineView.rest.length; i++)\n      if (lineNo(lineView.rest[i]) > lineN)\n        return {\n          map: lineView.measure.maps[i],\n          cache: lineView.measure.caches[i],\n          before: true\n        };\n  }\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view;\n  }\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);\n  }\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      return cm.display.view[findViewIndex(cm, lineN)];\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      return ext;\n  }\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      view = updateExternalMeasurement(cm, line);\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line,\n      view: view,\n      rect: null,\n      map: info.map,\n      cache: info.cache,\n      before: info.before,\n      hasHeights: false\n    };\n  }\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before)\n      ch = -1;\n    var key = ch + (bias || \"\"),\n        found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        prepared.rect = prepared.view.text.getBoundingClientRect();\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus)\n        prepared.cache[key] = found;\n    }\n    return {\n      left: found.left,\n      right: found.right,\n      top: varHeight ? found.rtop : found.top,\n      bottom: varHeight ? found.rbottom : found.bottom\n    };\n  }\n  var nullRect = {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  };\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node,\n        start,\n        end,\n        collapse;\n    for (var i = 0; i < map.length; i += 3) {\n      var mStart = map[i],\n          mEnd = map[i + 1];\n      if (ch < mStart) {\n        start = 0;\n        end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd)\n          collapse = \"right\";\n      }\n      if (start != null) {\n        node = map[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          collapse = bias;\n        if (bias == \"left\" && start == 0)\n          while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          }\n        if (bias == \"right\" && start == mEnd - mStart)\n          while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          }\n        break;\n      }\n    }\n    return {\n      node: node,\n      start: start,\n      end: end,\n      collapse: collapse,\n      coverStart: mStart,\n      coverEnd: mEnd\n    };\n  }\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node,\n        start = place.start,\n        end = place.end,\n        collapse = place.collapse;\n    var rect;\n    if (node.nodeType == 3) {\n      for (var i = 0; i < 4; i++) {\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start)))\n          --start;\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end)))\n          ++end;\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {\n          rect = node.parentNode.getBoundingClientRect();\n        } else if (ie && cm.options.lineWrapping) {\n          var rects = range(node, start, end).getClientRects();\n          if (rects.length)\n            rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n          else\n            rect = nullRect;\n        } else {\n          rect = range(node, start, end).getBoundingClientRect() || nullRect;\n        }\n        if (rect.left || rect.right || start == 0)\n          break;\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11)\n        rect = maybeUpdateRectForZooming(cm.display.measure, rect);\n    } else {\n      if (start > 0)\n        collapse = bias = \"right\";\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n      else\n        rect = node.getBoundingClientRect();\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        rect = {\n          left: rSpan.left,\n          right: rSpan.left + charWidth(cm.display),\n          top: rSpan.top,\n          bottom: rSpan.bottom\n        };\n      else\n        rect = nullRect;\n    }\n    var rtop = rect.top - prepared.rect.top,\n        rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    for (var i = 0; i < heights.length - 1; i++)\n      if (mid < heights[i])\n        break;\n    var top = i ? heights[i - 1] : 0,\n        bot = heights[i];\n    var result = {\n      left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n      right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n      top: top,\n      bottom: bot\n    };\n    if (!rect.left && !rect.right)\n      result.bogus = true;\n    if (!cm.options.singleCursorHeightPerLine) {\n      result.rtop = rtop;\n      result.rbottom = rbot;\n    }\n    return result;\n  }\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      return rect;\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {\n      left: rect.left * scaleX,\n      right: rect.right * scaleX,\n      top: rect.top * scaleY,\n      bottom: rect.bottom * scaleY\n    };\n  }\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest)\n        for (var i = 0; i < lineView.rest.length; i++)\n          lineView.measure.caches[i] = {};\n    }\n  }\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      clearLineMeasurementCacheFor(cm.display.view[i]);\n  }\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping)\n      cm.display.maxLineChanged = true;\n    cm.display.lineNumChars = null;\n  }\n  function pageScrollX() {\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft;\n  }\n  function pageScrollY() {\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop;\n  }\n  function intoCoordSystem(cm, lineObj, rect, context) {\n    if (lineObj.widgets)\n      for (var i = 0; i < lineObj.widgets.length; ++i)\n        if (lineObj.widgets[i].above) {\n          var size = widgetHeight(lineObj.widgets[i]);\n          rect.top += size;\n          rect.bottom += size;\n        }\n    if (context == \"line\")\n      return rect;\n    if (!context)\n      context = \"local\";\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\")\n      yOff += paddingTop(cm.display);\n    else\n      yOff -= cm.display.viewOffset;\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff;\n      rect.right += xOff;\n    }\n    rect.top += yOff;\n    rect.bottom += yOff;\n    return rect;\n  }\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\")\n      return coords;\n    var left = coords.left,\n        top = coords.top;\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {\n      left: left - lineSpaceBox.left,\n      top: top - lineSpaceBox.top\n    };\n  }\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj)\n      lineObj = getLine(cm.doc, pos.line);\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);\n  }\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure)\n      preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right)\n        m.left = m.right;\n      else\n        m.right = m.left;\n      return intoCoordSystem(cm, lineObj, m, context);\n    }\n    function getBidi(ch, partPos) {\n      var part = order[partPos],\n          right = part.level % 2;\n      if (ch == bidiLeft(part) && partPos && part.level < order[partPos - 1].level) {\n        part = order[--partPos];\n        ch = bidiRight(part) - (part.level % 2 ? 0 : 1);\n        right = true;\n      } else if (ch == bidiRight(part) && partPos < order.length - 1 && part.level < order[partPos + 1].level) {\n        part = order[++partPos];\n        ch = bidiLeft(part) - part.level % 2;\n        right = false;\n      }\n      if (right && ch == part.to && ch > part.from)\n        return get(ch - 1);\n      return get(ch, right);\n    }\n    var order = getOrder(lineObj),\n        ch = pos.ch;\n    if (!order)\n      return get(ch);\n    var partPos = getBidiPartAt(order, ch);\n    var val = getBidi(ch, partPos);\n    if (bidiOther != null)\n      val.other = getBidi(ch, bidiOther);\n    return val;\n  }\n  function estimateCoords(cm, pos) {\n    var left = 0,\n        pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping)\n      left = charWidth(cm.display) * pos.ch;\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {\n      left: left,\n      right: left,\n      top: top,\n      bottom: top + lineObj.height\n    };\n  }\n  function PosWithInfo(line, ch, outside, xRel) {\n    var pos = Pos(line, ch);\n    pos.xRel = xRel;\n    if (outside)\n      pos.outside = true;\n    return pos;\n  }\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0)\n      return PosWithInfo(doc.first, 0, true, -1);\n    var lineN = lineAtHeight(doc, y),\n        last = doc.first + doc.size - 1;\n    if (lineN > last)\n      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, true, 1);\n    if (x < 0)\n      x = 0;\n    var lineObj = getLine(doc, lineN);\n    for (; ; ) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var merged = collapsedSpanAtEnd(lineObj);\n      var mergedPos = merged && merged.find(0, true);\n      if (merged && (found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0))\n        lineN = lineNo(lineObj = mergedPos.to.line);\n      else\n        return found;\n    }\n  }\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    var innerOff = y - heightAtLine(lineObj);\n    var wrongLine = false,\n        adjust = 2 * cm.display.wrapper.clientWidth;\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    function getX(ch) {\n      var sp = cursorCoords(cm, Pos(lineNo, ch), \"line\", lineObj, preparedMeasure);\n      wrongLine = true;\n      if (innerOff > sp.bottom)\n        return sp.left - adjust;\n      else if (innerOff < sp.top)\n        return sp.left + adjust;\n      else\n        wrongLine = false;\n      return sp.left;\n    }\n    var bidi = getOrder(lineObj),\n        dist = lineObj.text.length;\n    var from = lineLeft(lineObj),\n        to = lineRight(lineObj);\n    var fromX = getX(from),\n        fromOutside = wrongLine,\n        toX = getX(to),\n        toOutside = wrongLine;\n    if (x > toX)\n      return PosWithInfo(lineNo, to, toOutside, 1);\n    for (; ; ) {\n      if (bidi ? to == from || to == moveVisually(lineObj, from, 1) : to - from <= 1) {\n        var ch = x < fromX || x - fromX <= toX - x ? from : to;\n        var xDiff = x - (ch == from ? fromX : toX);\n        while (isExtendingChar(lineObj.text.charAt(ch)))\n          ++ch;\n        var pos = PosWithInfo(lineNo, ch, ch == from ? fromOutside : toOutside, xDiff < -1 ? -1 : xDiff > 1 ? 1 : 0);\n        return pos;\n      }\n      var step = Math.ceil(dist / 2),\n          middle = from + step;\n      if (bidi) {\n        middle = from;\n        for (var i = 0; i < step; ++i)\n          middle = moveVisually(lineObj, middle, 1);\n      }\n      var middleX = getX(middle);\n      if (middleX > x) {\n        to = middle;\n        toX = middleX;\n        if (toOutside = wrongLine)\n          toX += 1000;\n        dist = step;\n      } else {\n        from = middle;\n        fromX = middleX;\n        fromOutside = wrongLine;\n        dist -= step;\n      }\n    }\n  }\n  var measureText;\n  function textHeight(display) {\n    if (display.cachedTextHeight != null)\n      return display.cachedTextHeight;\n    if (measureText == null) {\n      measureText = elt(\"pre\");\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3)\n      display.cachedTextHeight = height;\n    removeChildren(display.measure);\n    return height || 1;\n  }\n  function charWidth(display) {\n    if (display.cachedCharWidth != null)\n      return display.cachedCharWidth;\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor]);\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(),\n        width = (rect.right - rect.left) / 10;\n    if (width > 2)\n      display.cachedCharWidth = width;\n    return width || 10;\n  }\n  var operationGroup = null;\n  var nextOpId = 0;\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,\n      startHeight: cm.doc.height,\n      forceUpdate: false,\n      updateInput: null,\n      typing: false,\n      changeObjs: null,\n      cursorActivityHandlers: null,\n      cursorActivityCalled: 0,\n      selectionChanged: false,\n      updateMaxLine: false,\n      scrollLeft: null,\n      scrollTop: null,\n      scrollToPos: null,\n      focus: false,\n      id: ++nextOpId\n    };\n    if (operationGroup) {\n      operationGroup.ops.push(cm.curOp);\n    } else {\n      cm.curOp.ownsGroup = operationGroup = {\n        ops: [cm.curOp],\n        delayedCallbacks: []\n      };\n    }\n  }\n  function fireCallbacksForOps(group) {\n    var callbacks = group.delayedCallbacks,\n        i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        callbacks[i].call(null);\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);\n      }\n    } while (i < callbacks.length);\n  }\n  function endOperation(cm) {\n    var op = cm.curOp,\n        group = op.ownsGroup;\n    if (!group)\n      return;\n    try {\n      fireCallbacksForOps(group);\n    } finally {\n      operationGroup = null;\n      for (var i = 0; i < group.ops.length; i++)\n        group.ops[i].cm.curOp = null;\n      endOperations(group);\n    }\n  }\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++)\n      endOperation_R1(ops[i]);\n    for (var i = 0; i < ops.length; i++)\n      endOperation_W1(ops[i]);\n    for (var i = 0; i < ops.length; i++)\n      endOperation_R2(ops[i]);\n    for (var i = 0; i < ops.length; i++)\n      endOperation_W2(ops[i]);\n    for (var i = 0; i < ops.length; i++)\n      endOperation_finish(ops[i]);\n  }\n  function endOperation_R1(op) {\n    var cm = op.cm,\n        display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine)\n      findMaxLine(cm);\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && {\n      top: op.scrollTop,\n      ensure: op.scrollToPos\n    }, op.forceUpdate);\n  }\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n  function endOperation_R2(op) {\n    var cm = op.cm,\n        display = cm.display;\n    if (op.updatedDisplay)\n      updateHeightsInViewport(cm);\n    op.barMeasure = measureForScrollbars(cm);\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n    if (op.updatedDisplay || op.selectionChanged)\n      op.preparedSelection = display.input.prepareSelection();\n  }\n  function endOperation_W2(op) {\n    var cm = op.cm;\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);\n      cm.display.maxLineChanged = false;\n    }\n    if (op.preparedSelection)\n      cm.display.input.showSelection(op.preparedSelection);\n    if (op.updatedDisplay)\n      setDocumentHeight(cm, op.barMeasure);\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      updateScrollbars(cm, op.barMeasure);\n    if (op.selectionChanged)\n      restartBlink(cm);\n    if (cm.state.focused && op.updateInput)\n      cm.display.input.reset(op.typing);\n    if (op.focus && op.focus == activeElt())\n      ensureFocus(op.cm);\n  }\n  function endOperation_finish(op) {\n    var cm = op.cm,\n        display = cm.display,\n        doc = cm.doc;\n    if (op.updatedDisplay)\n      postUpdateDisplay(cm, op.update);\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      display.wheelStartX = display.wheelStartY = null;\n    if (op.scrollTop != null && (display.scroller.scrollTop != op.scrollTop || op.forceScroll)) {\n      doc.scrollTop = Math.max(0, Math.min(display.scroller.scrollHeight - display.scroller.clientHeight, op.scrollTop));\n      display.scrollbars.setScrollTop(doc.scrollTop);\n      display.scroller.scrollTop = doc.scrollTop;\n    }\n    if (op.scrollLeft != null && (display.scroller.scrollLeft != op.scrollLeft || op.forceScroll)) {\n      doc.scrollLeft = Math.max(0, Math.min(display.scroller.scrollWidth - displayWidth(cm), op.scrollLeft));\n      display.scrollbars.setScrollLeft(doc.scrollLeft);\n      display.scroller.scrollLeft = doc.scrollLeft;\n      alignHorizontally(cm);\n    }\n    if (op.scrollToPos) {\n      var coords = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from), clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      if (op.scrollToPos.isCursor && cm.state.focused)\n        maybeScrollWindow(cm, coords);\n    }\n    var hidden = op.maybeHiddenMarkers,\n        unhidden = op.maybeUnhiddenMarkers;\n    if (hidden)\n      for (var i = 0; i < hidden.length; ++i)\n        if (!hidden[i].lines.length)\n          signal(hidden[i], \"hide\");\n    if (unhidden)\n      for (var i = 0; i < unhidden.length; ++i)\n        if (unhidden[i].lines.length)\n          signal(unhidden[i], \"unhide\");\n    if (display.wrapper.offsetHeight)\n      doc.scrollTop = cm.display.scroller.scrollTop;\n    if (op.changeObjs)\n      signal(cm, \"changes\", cm, op.changeObjs);\n    if (op.update)\n      op.update.finish();\n  }\n  function runInOp(cm, f) {\n    if (cm.curOp)\n      return f();\n    startOperation(cm);\n    try {\n      return f();\n    } finally {\n      endOperation(cm);\n    }\n  }\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp)\n        return f.apply(cm, arguments);\n      startOperation(cm);\n      try {\n        return f.apply(cm, arguments);\n      } finally {\n        endOperation(cm);\n      }\n    };\n  }\n  function methodOp(f) {\n    return function() {\n      if (this.curOp)\n        return f.apply(this, arguments);\n      startOperation(this);\n      try {\n        return f.apply(this, arguments);\n      } finally {\n        endOperation(this);\n      }\n    };\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp)\n        return f.apply(this, arguments);\n      startOperation(cm);\n      try {\n        return f.apply(this, arguments);\n      } finally {\n        endOperation(cm);\n      }\n    };\n  }\n  function LineView(doc, line, lineN) {\n    this.line = line;\n    this.rest = visualLineContinued(line);\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n  function buildViewArray(cm, from, to) {\n    var array = [],\n        nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array;\n  }\n  function regChange(cm, from, to, lendiff) {\n    if (from == null)\n      from = cm.doc.first;\n    if (to == null)\n      to = cm.doc.first + cm.doc.size;\n    if (!lendiff)\n      lendiff = 0;\n    var display = cm.display;\n    if (lendiff && to < display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      display.updateLineNumbers = from;\n    cm.curOp.viewChanged = true;\n    if (from >= display.viewTo) {\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        resetView(cm);\n    } else if (to <= display.viewFrom) {\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) {\n      resetView(cm);\n    } else if (from <= display.viewFrom) {\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) {\n      var cut = viewCuttingPoint(cm, from, from, -1);\n      if (cut) {\n        display.view = display.view.slice(0, cut.index);\n        display.viewTo = cut.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else {\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        ext.lineN += lendiff;\n      else if (from < ext.lineN + ext.size)\n        display.externalMeasured = null;\n    }\n  }\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display,\n        ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      display.externalMeasured = null;\n    if (line < display.viewFrom || line >= display.viewTo)\n      return;\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null)\n      return;\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1)\n      arr.push(type);\n  }\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo)\n      return null;\n    n -= cm.display.viewFrom;\n    if (n < 0)\n      return null;\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0)\n        return i;\n    }\n  }\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN),\n        diff,\n        view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      return {\n        index: index,\n        lineN: newN\n      };\n    for (var i = 0,\n        n = cm.display.viewFrom; i < index; i++)\n      n += view[i].size;\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1)\n          return null;\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff;\n      newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1))\n        return null;\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {\n      index: index,\n      lineN: newN\n    };\n  }\n  function adjustView(cm, from, to) {\n    var display = cm.display,\n        view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);\n      else if (display.viewFrom < from)\n        display.view = display.view.slice(findViewIndex(cm, from));\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));\n      else if (display.viewTo > to)\n        display.view = display.view.slice(0, findViewIndex(cm, to));\n    }\n    display.viewTo = to;\n  }\n  function countDirtyView(cm) {\n    var view = cm.display.view,\n        dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes))\n        ++dirty;\n    }\n    return dirty;\n  }\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    if (ie && ie_version < 11)\n      on(d.scroller, \"dblclick\", operation(cm, function(e) {\n        if (signalDOMEvent(cm, e))\n          return;\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e))\n          return;\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      }));\n    else\n      on(d.scroller, \"dblclick\", function(e) {\n        signalDOMEvent(cm, e) || e_preventDefault(e);\n      });\n    if (!captureRightClick)\n      on(d.scroller, \"contextmenu\", function(e) {\n        onContextMenu(cm, e);\n      });\n    var touchFinished,\n        prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function() {\n          d.activeTouch = null;\n        }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    ;\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1)\n        return false;\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1;\n    }\n    function farAway(touch, other) {\n      if (other.left == null)\n        return true;\n      var dx = other.left - touch.left,\n          dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20;\n    }\n    on(d.scroller, \"touchstart\", function(e) {\n      if (!isMouseLikeTouchEvent(e)) {\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {\n          start: now,\n          moved: false,\n          prev: now - prevTouch.end <= 300 ? prevTouch : null\n        };\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function() {\n      if (d.activeTouch)\n        d.activeTouch.moved = true;\n    });\n    on(d.scroller, \"touchend\", function(e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null && !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"),\n            range;\n        if (!touch.prev || farAway(touch, touch.prev))\n          range = new Range(pos, pos);\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev))\n          range = cm.findWordAt(pos);\n        else\n          range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0)));\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n    on(d.scroller, \"scroll\", function() {\n      if (d.scroller.clientHeight) {\n        setScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n    on(d.scroller, \"mousewheel\", function(e) {\n      onScrollWheel(cm, e);\n    });\n    on(d.scroller, \"DOMMouseScroll\", function(e) {\n      onScrollWheel(cm, e);\n    });\n    on(d.wrapper, \"scroll\", function() {\n      d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;\n    });\n    d.dragFunctions = {\n      enter: function(e) {\n        if (!signalDOMEvent(cm, e))\n          e_stop(e);\n      },\n      over: function(e) {\n        if (!signalDOMEvent(cm, e)) {\n          onDragOver(cm, e);\n          e_stop(e);\n        }\n      },\n      start: function(e) {\n        onDragStart(cm, e);\n      },\n      drop: operation(cm, onDrop),\n      leave: function() {\n        clearDragCursor(cm);\n      }\n    };\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function(e) {\n      onKeyUp.call(cm, e);\n    });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", bind(onFocus, cm));\n    on(inp, \"blur\", bind(onBlur, cm));\n  }\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != CodeMirror.Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n  function onResize(cm) {\n    var d = cm.display;\n    if (d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth)\n      return;\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") || (n.parentNode == display.sizer && n != display.mover))\n        return true;\n    }\n  }\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\")\n      return null;\n    var x,\n        y,\n        space = display.lineSpace.getBoundingClientRect();\n    try {\n      x = e.clientX - space.left;\n      y = e.clientY - space.top;\n    } catch (e) {\n      return null;\n    }\n    var coords = coordsChar(cm, x, y),\n        line;\n    if (forRect && coords.xRel == 1 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords;\n  }\n  function onMouseDown(e) {\n    var cm = this,\n        display = cm.display;\n    if (display.activeTouch && display.input.supportsTouch() || signalDOMEvent(cm, e))\n      return;\n    display.shift = e.shiftKey;\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        display.scroller.draggable = false;\n        setTimeout(function() {\n          display.scroller.draggable = true;\n        }, 100);\n      }\n      return;\n    }\n    if (clickInGutter(cm, e))\n      return;\n    var start = posFromMouse(cm, e);\n    window.focus();\n    switch (e_button(e)) {\n      case 1:\n        if (cm.state.selectingText)\n          cm.state.selectingText(e);\n        else if (start)\n          leftButtonDown(cm, e, start);\n        else if (e_target(e) == display.scroller)\n          e_preventDefault(e);\n        break;\n      case 2:\n        if (webkit)\n          cm.state.lastMiddleDown = +new Date;\n        if (start)\n          extendSelection(cm.doc, start);\n        setTimeout(function() {\n          display.input.focus();\n        }, 20);\n        e_preventDefault(e);\n        break;\n      case 3:\n        if (captureRightClick)\n          onContextMenu(cm, e);\n        else\n          delayBlurEvent(cm);\n        break;\n    }\n  }\n  var lastClick,\n      lastDoubleClick;\n  function leftButtonDown(cm, e, start) {\n    if (ie)\n      setTimeout(bind(ensureFocus, cm), 0);\n    else\n      cm.curOp.focus = activeElt();\n    var now = +new Date,\n        type;\n    if (lastDoubleClick && lastDoubleClick.time > now - 400 && cmp(lastDoubleClick.pos, start) == 0) {\n      type = \"triple\";\n    } else if (lastClick && lastClick.time > now - 400 && cmp(lastClick.pos, start) == 0) {\n      type = \"double\";\n      lastDoubleClick = {\n        time: now,\n        pos: start\n      };\n    } else {\n      type = \"single\";\n      lastClick = {\n        time: now,\n        pos: start\n      };\n    }\n    var sel = cm.doc.sel,\n        modifier = mac ? e.metaKey : e.ctrlKey,\n        contained;\n    if (cm.options.dragDrop && dragAndDrop && !isReadOnly(cm) && type == \"single\" && (contained = sel.contains(start)) > -1 && (cmp((contained = sel.ranges[contained]).from(), start) < 0 || start.xRel > 0) && (cmp(contained.to(), start) > 0 || start.xRel < 0))\n      leftButtonStartDrag(cm, e, start, modifier);\n    else\n      leftButtonSelect(cm, e, start, type, modifier);\n  }\n  function leftButtonStartDrag(cm, e, start, modifier) {\n    var display = cm.display,\n        startTime = +new Date;\n    var dragEnd = operation(cm, function(e2) {\n      if (webkit)\n        display.scroller.draggable = false;\n      cm.state.draggingText = false;\n      off(document, \"mouseup\", dragEnd);\n      off(display.scroller, \"drop\", dragEnd);\n      if (Math.abs(e.clientX - e2.clientX) + Math.abs(e.clientY - e2.clientY) < 10) {\n        e_preventDefault(e2);\n        if (!modifier && +new Date - 200 < startTime)\n          extendSelection(cm.doc, start);\n        if (webkit || ie && ie_version == 9)\n          setTimeout(function() {\n            document.body.focus();\n            display.input.focus();\n          }, 20);\n        else\n          display.input.focus();\n      }\n    });\n    if (webkit)\n      display.scroller.draggable = true;\n    cm.state.draggingText = dragEnd;\n    if (display.scroller.dragDrop)\n      display.scroller.dragDrop();\n    on(document, \"mouseup\", dragEnd);\n    on(display.scroller, \"drop\", dragEnd);\n  }\n  function leftButtonSelect(cm, e, start, type, addNew) {\n    var display = cm.display,\n        doc = cm.doc;\n    e_preventDefault(e);\n    var ourRange,\n        ourIndex,\n        startSel = doc.sel,\n        ranges = startSel.ranges;\n    if (addNew && !e.shiftKey) {\n      ourIndex = doc.sel.contains(start);\n      if (ourIndex > -1)\n        ourRange = ranges[ourIndex];\n      else\n        ourRange = new Range(start, start);\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n    if (e.altKey) {\n      type = \"rect\";\n      if (!addNew)\n        ourRange = new Range(start, start);\n      start = posFromMouse(cm, e, true, true);\n      ourIndex = -1;\n    } else if (type == \"double\") {\n      var word = cm.findWordAt(start);\n      if (cm.display.shift || doc.extend)\n        ourRange = extendRange(doc, ourRange, word.anchor, word.head);\n      else\n        ourRange = word;\n    } else if (type == \"triple\") {\n      var line = new Range(Pos(start.line, 0), clipPos(doc, Pos(start.line + 1, 0)));\n      if (cm.display.shift || doc.extend)\n        ourRange = extendRange(doc, ourRange, line.anchor, line.head);\n      else\n        ourRange = line;\n    } else {\n      ourRange = extendRange(doc, ourRange, start);\n    }\n    if (!addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(ranges.concat([ourRange]), ourIndex), {\n        scroll: false,\n        origin: \"*mouse\"\n      });\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && type == \"single\" && !e.shiftKey) {\n      setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0), {\n        scroll: false,\n        origin: \"*mouse\"\n      });\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0)\n        return;\n      lastPos = pos;\n      if (type == \"rect\") {\n        var ranges = [],\n            tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol),\n            right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line),\n            end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {\n          var text = getLine(doc, line).text,\n              leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));\n          else if (text.length > leftPos)\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));\n        }\n        if (!ranges.length)\n          ranges.push(new Range(start, start));\n        setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex), {\n          origin: \"*mouse\",\n          scroll: false\n        });\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var anchor = oldRange.anchor,\n            head = pos;\n        if (type != \"single\") {\n          if (type == \"double\")\n            var range = cm.findWordAt(pos);\n          else\n            var range = new Range(Pos(pos.line, 0), clipPos(doc, Pos(pos.line + 1, 0)));\n          if (cmp(range.anchor, anchor) > 0) {\n            head = range.head;\n            anchor = minPos(oldRange.from(), range.anchor);\n          } else {\n            head = range.anchor;\n            anchor = maxPos(oldRange.to(), range.head);\n          }\n        }\n        var ranges = startSel.ranges.slice(0);\n        ranges[ourIndex] = new Range(clipPos(doc, anchor), head);\n        setSelection(doc, normalizeSelection(ranges, ourIndex), sel_mouse);\n      }\n    }\n    var editorSize = display.wrapper.getBoundingClientRect();\n    var counter = 0;\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, type == \"rect\");\n      if (!cur)\n        return;\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          setTimeout(operation(cm, function() {\n            if (counter == curCount)\n              extend(e);\n          }), 150);\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside)\n          setTimeout(operation(cm, function() {\n            if (counter != curCount)\n              return;\n            display.scroller.scrollTop += outside;\n            extend(e);\n          }), 50);\n      }\n    }\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      e_preventDefault(e);\n      display.input.focus();\n      off(document, \"mousemove\", move);\n      off(document, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n    var move = operation(cm, function(e) {\n      if (!e_button(e))\n        done(e);\n      else\n        extend(e);\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(document, \"mousemove\", move);\n    on(document, \"mouseup\", up);\n  }\n  function gutterEvent(cm, e, type, prevent, signalfn) {\n    try {\n      var mX = e.clientX,\n          mY = e.clientY;\n    } catch (e) {\n      return false;\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right))\n      return false;\n    if (prevent)\n      e_preventDefault(e);\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n    if (mY > lineBox.bottom || !hasHandler(cm, type))\n      return e_defaultPrevented(e);\n    mY -= lineBox.top - display.viewOffset;\n    for (var i = 0; i < cm.options.gutters.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.options.gutters[i];\n        signalfn(cm, type, cm, line, gutter, e);\n        return e_defaultPrevented(e);\n      }\n    }\n  }\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true, signalLater);\n  }\n  var lastDrop = 0;\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      return;\n    e_preventDefault(e);\n    if (ie)\n      lastDrop = +new Date;\n    var pos = posFromMouse(cm, e, true),\n        files = e.dataTransfer.files;\n    if (!pos || isReadOnly(cm))\n      return;\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length,\n          text = Array(n),\n          read = 0;\n      var loadFile = function(file, i) {\n        if (cm.options.allowDropFileTypes && indexOf(cm.options.allowDropFileTypes, file.type) == -1)\n          return;\n        var reader = new FileReader;\n        reader.onload = operation(cm, function() {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content))\n            content = \"\";\n          text[i] = content;\n          if (++read == n) {\n            pos = clipPos(cm.doc, pos);\n            var change = {\n              from: pos,\n              to: pos,\n              text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),\n              origin: \"paste\"\n            };\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));\n          }\n        });\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < n; ++i)\n        loadFile(files[i], i);\n    } else {\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        setTimeout(function() {\n          cm.display.input.focus();\n        }, 20);\n        return;\n      }\n      try {\n        var text = e.dataTransfer.getData(\"Text\");\n        if (text) {\n          if (cm.state.draggingText && !(mac ? e.altKey : e.ctrlKey))\n            var selected = cm.listSelections();\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected)\n            for (var i = 0; i < selected.length; ++i)\n              replaceRange(cm.doc, \"\", selected[i].anchor, selected[i].head, \"drag\");\n          cm.replaceSelection(text, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      } catch (e) {}\n    }\n  }\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) {\n      e_stop(e);\n      return;\n    }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      return;\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto)\n        img.parentNode.removeChild(img);\n    }\n  }\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos)\n      return;\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n  function setScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2)\n      return;\n    cm.doc.scrollTop = val;\n    if (!gecko)\n      updateDisplaySimple(cm, {top: val});\n    if (cm.display.scroller.scrollTop != val)\n      cm.display.scroller.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (gecko)\n      updateDisplaySimple(cm);\n    startWorker(cm, 100);\n  }\n  function setScrollLeft(cm, val, isScroller) {\n    if (isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2)\n      return;\n    val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth);\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val)\n      cm.display.scroller.scrollLeft = val;\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n  var wheelSamples = 0,\n      wheelPixelsPerUnit = null;\n  if (ie)\n    wheelPixelsPerUnit = -.53;\n  else if (gecko)\n    wheelPixelsPerUnit = 15;\n  else if (chrome)\n    wheelPixelsPerUnit = -.7;\n  else if (safari)\n    wheelPixelsPerUnit = -1 / 3;\n  var wheelEventDelta = function(e) {\n    var dx = e.wheelDeltaX,\n        dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS)\n      dx = e.detail;\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS)\n      dy = e.detail;\n    else if (dy == null)\n      dy = e.wheelDelta;\n    return {\n      x: dx,\n      y: dy\n    };\n  };\n  CodeMirror.wheelEventPixels = function(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta;\n  };\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e),\n        dx = delta.x,\n        dy = delta.y;\n    var display = cm.display,\n        scroll = display.scroller;\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY))\n      return;\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target,\n          view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer;\n          }\n        }\n      }\n    }\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY)\n        setScrollTop(cm, Math.max(0, Math.min(scroll.scrollTop + dy * wheelPixelsPerUnit, scroll.scrollHeight - scroll.clientHeight)));\n      setScrollLeft(cm, Math.max(0, Math.min(scroll.scrollLeft + dx * wheelPixelsPerUnit, scroll.scrollWidth - scroll.clientWidth)));\n      if (!dy || (dy && canScrollY))\n        e_preventDefault(e);\n      display.wheelStartX = null;\n      return;\n    }\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop,\n          bot = top + display.wrapper.clientHeight;\n      if (pixels < 0)\n        top = Math.max(0, top + pixels - 50);\n      else\n        bot = Math.min(cm.doc.height, bot + pixels + 50);\n      updateDisplaySimple(cm, {\n        top: top,\n        bottom: bot\n      });\n    }\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft;\n        display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx;\n        display.wheelDY = dy;\n        setTimeout(function() {\n          if (display.wheelStartX == null)\n            return;\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) || (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample)\n            return;\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx;\n        display.wheelDY += dy;\n      }\n    }\n  }\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound)\n        return false;\n    }\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift,\n        done = false;\n    try {\n      if (isReadOnly(cm))\n        cm.state.suppressEdits = true;\n      if (dropShift)\n        cm.display.shift = false;\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done;\n  }\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result)\n        return result;\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm)) || lookupKey(name, cm.options.keyMap, handle, cm);\n  }\n  var stopSeq = new Delayed;\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name))\n        return \"handled\";\n      stopSeq.set(50, function() {\n        if (cm.state.keySeq == seq) {\n          cm.state.keySeq = null;\n          cm.display.input.reset();\n        }\n      });\n      name = seq + \" \" + name;\n    }\n    var result = lookupKeyForEditor(cm, name, handle);\n    if (result == \"multi\")\n      cm.state.keySeq = name;\n    if (result == \"handled\")\n      signalLater(cm, \"keyHandled\", cm, name, e);\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n    if (seq && !result && /\\'$/.test(name)) {\n      e_preventDefault(e);\n      return true;\n    }\n    return !!result;\n  }\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name)\n      return false;\n    if (e.shiftKey && !cm.state.keySeq) {\n      return dispatchKey(cm, \"Shift-\" + name, e, function(b) {\n        return doHandleBinding(cm, b, true);\n      }) || dispatchKey(cm, name, e, function(b) {\n        if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n          return doHandleBinding(cm, b);\n      });\n    } else {\n      return dispatchKey(cm, name, e, function(b) {\n        return doHandleBinding(cm, b);\n      });\n    }\n  }\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function(b) {\n      return doHandleBinding(cm, b, true);\n    });\n  }\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    cm.curOp.focus = activeElt();\n    if (signalDOMEvent(cm, e))\n      return;\n    if (ie && ie_version < 11 && e.keyCode == 27)\n      e.returnValue = false;\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        cm.replaceSelection(\"\", null, \"cut\");\n    }\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      showCrossHair(cm);\n  }\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n  function onKeyUp(e) {\n    if (e.keyCode == 16)\n      this.doc.sel.shift = false;\n    signalDOMEvent(this, e);\n  }\n  function onKeyPress(e) {\n    var cm = this;\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey)\n      return;\n    var keyCode = e.keyCode,\n        charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {\n      lastStoppedKey = null;\n      e_preventDefault(e);\n      return;\n    }\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e))\n      return;\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    if (handleCharBinding(cm, e, ch))\n      return;\n    cm.display.input.onKeyPress(e);\n  }\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function() {\n      if (cm.state.delayingBlurEvent) {\n        cm.state.delayingBlurEvent = false;\n        onBlur(cm);\n      }\n    }, 100);\n  }\n  function onFocus(cm) {\n    if (cm.state.delayingBlurEvent)\n      cm.state.delayingBlurEvent = false;\n    if (cm.options.readOnly == \"nocursor\")\n      return;\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit)\n          setTimeout(function() {\n            cm.display.input.reset(true);\n          }, 20);\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm) {\n    if (cm.state.delayingBlurEvent)\n      return;\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function() {\n      if (!cm.state.focused)\n        cm.display.shift = false;\n    }, 150);\n  }\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e))\n      return;\n    if (signalDOMEvent(cm, e, \"contextmenu\"))\n      return;\n    cm.display.input.onContextMenu(e);\n  }\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\"))\n      return false;\n    return gutterEvent(cm, e, \"gutterContextMenu\", false, signal);\n  }\n  var changeEnd = CodeMirror.changeEnd = function(change) {\n    if (!change.text)\n      return change.to;\n    return Pos(change.from.line + change.text.length - 1, lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));\n  };\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0)\n      return pos;\n    if (cmp(pos, change.to) <= 0)\n      return changeEnd(change);\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1,\n        ch = pos.ch;\n    if (pos.line == change.to.line)\n      ch += changeEnd(change).ch - change.to.ch;\n    return Pos(line, ch);\n  }\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change), adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(out, doc.sel.primIndex);\n  }\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      return Pos(nw.line, pos.ch - old.ch + nw.ch);\n    else\n      return Pos(nw.line + (pos.line - old.line), pos.ch);\n  }\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0),\n        newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i],\n            inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex);\n  }\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function() {\n        this.canceled = true;\n      }\n    };\n    if (update)\n      obj.update = function(from, to, text, origin) {\n        if (from)\n          this.from = clipPos(doc, from);\n        if (to)\n          this.to = clipPos(doc, to);\n        if (text)\n          this.text = text;\n        if (origin !== undefined)\n          this.origin = origin;\n      };\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm)\n      signal(doc.cm, \"beforeChange\", doc.cm, obj);\n    if (obj.canceled)\n      return null;\n    return {\n      from: obj.from,\n      to: obj.to,\n      text: obj.text,\n      origin: obj.origin\n    };\n  }\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp)\n        return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);\n      if (doc.cm.state.suppressEdits)\n        return;\n    }\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change)\n        return;\n    }\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        makeChangeInner(doc, {\n          from: split[i].from,\n          to: split[i].to,\n          text: i ? [\"\"] : change.text\n        });\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0)\n      return;\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n    linkedDocs(doc, function(doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    if (doc.cm && doc.cm.state.suppressEdits)\n      return;\n    var hist = doc.history,\n        event,\n        selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone,\n        dest = type == \"undo\" ? hist.undone : hist.done;\n    for (var i = 0; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        break;\n    }\n    if (i == source.length)\n      return;\n    hist.lastOrigin = hist.lastSelOrigin = null;\n    for (; ; ) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return;\n        }\n        selAfter = event;\n      } else\n        break;\n    }\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({\n      changes: antiChanges,\n      generation: hist.generation\n    });\n    hist.generation = event.generation || ++hist.maxGeneration;\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n    for (var i = event.changes.length - 1; i >= 0; --i) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return;\n      }\n      antiChanges.push(historyChangeFromChange(doc, change));\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm)\n        doc.cm.scrollIntoView({\n          from: change.from,\n          to: changeEnd(change)\n        });\n      var rebased = [];\n      linkedDocs(doc, function(doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    }\n  }\n  function shiftDoc(doc, distance) {\n    if (distance == 0)\n      return;\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function(range) {\n      return new Range(Pos(range.anchor.line + distance, range.anchor.ch), Pos(range.head.line + distance, range.head.ch));\n    }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display,\n          l = d.viewFrom; l < d.viewTo; l++)\n        regLineChange(doc.cm, l, \"gutter\");\n    }\n  }\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return;\n    }\n    if (change.from.line > doc.lastLine())\n      return;\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {\n        from: Pos(doc.first, 0),\n        to: Pos(change.to.line + shift, change.to.ch),\n        text: [lst(change.text)],\n        origin: change.origin\n      };\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {\n        from: change.from,\n        to: Pos(last, getLine(doc, last).text.length),\n        text: [change.text[0]],\n        origin: change.origin\n      };\n    }\n    change.removed = getBetween(doc, change.from, change.to);\n    if (!selAfter)\n      selAfter = computeSelAfterChange(doc, change);\n    if (doc.cm)\n      makeChangeSingleDocInEditor(doc.cm, change, spans);\n    else\n      updateDoc(doc, change, spans);\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n  }\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc,\n        display = cm.display,\n        from = change.from,\n        to = change.to;\n    var recomputeMaxLength = false,\n        checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function(line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true;\n        }\n      });\n    }\n    if (doc.sel.contains(change.from, change.to) > -1)\n      signalCursorActivity(cm);\n    updateDoc(doc, change, spans, estimateHeight(cm));\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function(line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength)\n        cm.curOp.updateMaxLine = true;\n    }\n    doc.frontier = Math.min(doc.frontier, from.line);\n    startWorker(cm, 400);\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    if (change.full)\n      regChange(cm);\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      regLineChange(cm, from.line, \"text\");\n    else\n      regChange(cm, from.line, to.line + 1, lendiff);\n    var changesHandler = hasHandler(cm, \"changes\"),\n        changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from,\n        to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler)\n        signalLater(cm, \"change\", cm, obj);\n      if (changesHandler)\n        (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);\n    }\n    cm.display.selForContextMenu = null;\n  }\n  function replaceRange(doc, code, from, to, origin) {\n    if (!to)\n      to = from;\n    if (cmp(to, from) < 0) {\n      var tmp = to;\n      to = from;\n      from = tmp;\n    }\n    if (typeof code == \"string\")\n      code = doc.splitLines(code);\n    makeChange(doc, {\n      from: from,\n      to: to,\n      text: code,\n      origin: origin\n    });\n  }\n  function maybeScrollWindow(cm, coords) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\"))\n      return;\n    var display = cm.display,\n        box = display.sizer.getBoundingClientRect(),\n        doScroll = null;\n    if (coords.top + box.top < 0)\n      doScroll = true;\n    else if (coords.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight))\n      doScroll = false;\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, \"position: absolute; top: \" + (coords.top - display.viewOffset - paddingTop(cm.display)) + \"px; height: \" + (coords.bottom - coords.top + scrollGap(cm) + display.barHeight) + \"px; left: \" + coords.left + \"px; width: 2px;\");\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null)\n      margin = 0;\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false,\n          coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      var scrollPos = calculateScrollPos(cm, Math.min(coords.left, endCoords.left), Math.min(coords.top, endCoords.top) - margin, Math.max(coords.left, endCoords.left), Math.max(coords.bottom, endCoords.bottom) + margin);\n      var startTop = cm.doc.scrollTop,\n          startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        setScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1)\n          changed = true;\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1)\n          changed = true;\n      }\n      if (!changed)\n        break;\n    }\n    return coords;\n  }\n  function scrollIntoView(cm, x1, y1, x2, y2) {\n    var scrollPos = calculateScrollPos(cm, x1, y1, x2, y2);\n    if (scrollPos.scrollTop != null)\n      setScrollTop(cm, scrollPos.scrollTop);\n    if (scrollPos.scrollLeft != null)\n      setScrollLeft(cm, scrollPos.scrollLeft);\n  }\n  function calculateScrollPos(cm, x1, y1, x2, y2) {\n    var display = cm.display,\n        snapMargin = textHeight(cm.display);\n    if (y1 < 0)\n      y1 = 0;\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm),\n        result = {};\n    if (y2 - y1 > screen)\n      y2 = y1 + screen;\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = y1 < snapMargin,\n        atBottom = y2 > docBottom - snapMargin;\n    if (y1 < screentop) {\n      result.scrollTop = atTop ? 0 : y1;\n    } else if (y2 > screentop + screen) {\n      var newTop = Math.min(y1, (atBottom ? docBottom : y2) - screen);\n      if (newTop != screentop)\n        result.scrollTop = newTop;\n    }\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n    var tooWide = x2 - x1 > screenw;\n    if (tooWide)\n      x2 = x1 + screenw;\n    if (x1 < 10)\n      result.scrollLeft = 0;\n    else if (x1 < screenleft)\n      result.scrollLeft = Math.max(0, x1 - (tooWide ? 0 : 10));\n    else if (x2 > screenw + screenleft - 3)\n      result.scrollLeft = x2 + (tooWide ? 0 : 10) - screenw;\n    return result;\n  }\n  function addToScrollPos(cm, left, top) {\n    if (left != null || top != null)\n      resolveScrollToPos(cm);\n    if (left != null)\n      cm.curOp.scrollLeft = (cm.curOp.scrollLeft == null ? cm.doc.scrollLeft : cm.curOp.scrollLeft) + left;\n    if (top != null)\n      cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor(),\n        from = cur,\n        to = cur;\n    if (!cm.options.lineWrapping) {\n      from = cur.ch ? Pos(cur.line, cur.ch - 1) : cur;\n      to = Pos(cur.line, cur.ch + 1);\n    }\n    cm.curOp.scrollToPos = {\n      from: from,\n      to: to,\n      margin: cm.options.cursorScrollMargin,\n      isCursor: true\n    };\n  }\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from),\n          to = estimateCoords(cm, range.to);\n      var sPos = calculateScrollPos(cm, Math.min(from.left, to.left), Math.min(from.top, to.top) - range.margin, Math.max(from.right, to.right), Math.max(from.bottom, to.bottom) + range.margin);\n      cm.scrollTo(sPos.scrollLeft, sPos.scrollTop);\n    }\n  }\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc,\n        state;\n    if (how == null)\n      how = \"add\";\n    if (how == \"smart\") {\n      if (!doc.mode.indent)\n        how = \"prev\";\n      else\n        state = getStateBefore(cm, n);\n    }\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n),\n        curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter)\n      line.stateAfter = null;\n    var curSpaceString = line.text.match(/^\\s*/)[0],\n        indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive)\n          return;\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first)\n        indentation = countColumn(getLine(doc, n - 1).text, null, tabSize);\n      else\n        indentation = 0;\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n    var indentString = \"\",\n        pos = 0;\n    if (cm.options.indentWithTabs)\n      for (var i = Math.floor(indentation / tabSize); i; --i) {\n        pos += tabSize;\n        indentString += \"\\t\";\n      }\n    if (pos < indentation)\n      indentString += spaceStr(indentation - pos);\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true;\n    } else {\n      for (var i = 0; i < doc.sel.ranges.length; i++) {\n        var range = doc.sel.ranges[i];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i, new Range(pos, pos));\n          break;\n        }\n      }\n    }\n  }\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle,\n        line = handle;\n    if (typeof handle == \"number\")\n      line = getLine(doc, clipLine(doc, handle));\n    else\n      no = lineNo(handle);\n    if (no == null)\n      return null;\n    if (op(line, no) && doc.cm)\n      regLineChange(doc.cm, no, changeType);\n    return line;\n  }\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges,\n        kill = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break;\n        }\n      }\n      kill.push(toKill);\n    }\n    runInOp(cm, function() {\n      for (var i = kill.length - 1; i >= 0; i--)\n        replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\");\n      ensureCursorVisible(cm);\n    });\n  }\n  function findPosH(doc, pos, dir, unit, visually) {\n    var line = pos.line,\n        ch = pos.ch,\n        origDir = dir;\n    var lineObj = getLine(doc, line);\n    var possible = true;\n    function findNextLine() {\n      var l = line + dir;\n      if (l < doc.first || l >= doc.first + doc.size)\n        return (possible = false);\n      line = l;\n      return lineObj = getLine(doc, l);\n    }\n    function moveOnce(boundToLine) {\n      var next = (visually ? moveVisually : moveLogically)(lineObj, ch, dir, true);\n      if (next == null) {\n        if (!boundToLine && findNextLine()) {\n          if (visually)\n            ch = (dir < 0 ? lineRight : lineLeft)(lineObj);\n          else\n            ch = dir < 0 ? lineObj.text.length : 0;\n        } else\n          return (possible = false);\n      } else\n        ch = next;\n      return true;\n    }\n    if (unit == \"char\")\n      moveOnce();\n    else if (unit == \"column\")\n      moveOnce(true);\n    else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null,\n          group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true; ; first = false) {\n        if (dir < 0 && !moveOnce(!first))\n          break;\n        var cur = lineObj.text.charAt(ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\" : group && cur == \"\\n\" ? \"n\" : !group || /\\s/.test(cur) ? null : \"p\";\n        if (group && !first && !type)\n          type = \"s\";\n        if (sawType && sawType != type) {\n          if (dir < 0) {\n            dir = 1;\n            moveOnce();\n          }\n          break;\n        }\n        if (type)\n          sawType = type;\n        if (dir > 0 && !moveOnce(!first))\n          break;\n      }\n    }\n    var result = skipAtomic(doc, Pos(line, ch), origDir, true);\n    if (!possible)\n      result.hitSide = true;\n    return result;\n  }\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc,\n        x = pos.left,\n        y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      y = pos.top + dir * (pageSize - (dir < 0 ? 1.5 : .5) * textHeight(cm.display));\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    for (; ; ) {\n      var target = coordsChar(cm, x, y);\n      if (!target.outside)\n        break;\n      if (dir < 0 ? y <= 0 : y >= doc.height) {\n        target.hitSide = true;\n        break;\n      }\n      y += dir * 5;\n    }\n    return target;\n  }\n  CodeMirror.prototype = {\n    constructor: CodeMirror,\n    focus: function() {\n      window.focus();\n      this.display.input.focus();\n    },\n    setOption: function(option, value) {\n      var options = this.options,\n          old = options[option];\n      if (options[option] == value && option != \"mode\")\n        return;\n      options[option] = value;\n      if (optionHandlers.hasOwnProperty(option))\n        operation(this, optionHandlers[option])(this, value, old);\n    },\n    getOption: function(option) {\n      return this.options[option];\n    },\n    getDoc: function() {\n      return this.doc;\n    },\n    addKeyMap: function(map, bottom) {\n      this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n    },\n    removeKeyMap: function(map) {\n      var maps = this.state.keyMaps;\n      for (var i = 0; i < maps.length; ++i)\n        if (maps[i] == map || maps[i].name == map) {\n          maps.splice(i, 1);\n          return true;\n        }\n    },\n    addOverlay: methodOp(function(spec, options) {\n      var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n      if (mode.startState)\n        throw new Error(\"Overlays may not be stateful.\");\n      this.state.overlays.push({\n        mode: mode,\n        modeSpec: spec,\n        opaque: options && options.opaque\n      });\n      this.state.modeGen++;\n      regChange(this);\n    }),\n    removeOverlay: methodOp(function(spec) {\n      var overlays = this.state.overlays;\n      for (var i = 0; i < overlays.length; ++i) {\n        var cur = overlays[i].modeSpec;\n        if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n          overlays.splice(i, 1);\n          this.state.modeGen++;\n          regChange(this);\n          return;\n        }\n      }\n    }),\n    indentLine: methodOp(function(n, dir, aggressive) {\n      if (typeof dir != \"string\" && typeof dir != \"number\") {\n        if (dir == null)\n          dir = this.options.smartIndent ? \"smart\" : \"prev\";\n        else\n          dir = dir ? \"add\" : \"subtract\";\n      }\n      if (isLine(this.doc, n))\n        indentLine(this, n, dir, aggressive);\n    }),\n    indentSelection: methodOp(function(how) {\n      var ranges = this.doc.sel.ranges,\n          end = -1;\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (!range.empty()) {\n          var from = range.from(),\n              to = range.to();\n          var start = Math.max(end, from.line);\n          end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n          for (var j = start; j < end; ++j)\n            indentLine(this, j, how);\n          var newRanges = this.doc.sel.ranges;\n          if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n            replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);\n        } else if (range.head.line > end) {\n          indentLine(this, range.head.line, how, true);\n          end = range.head.line;\n          if (i == this.doc.sel.primIndex)\n            ensureCursorVisible(this);\n        }\n      }\n    }),\n    getTokenAt: function(pos, precise) {\n      return takeToken(this, pos, precise);\n    },\n    getLineTokens: function(line, precise) {\n      return takeToken(this, Pos(line), precise, true);\n    },\n    getTokenTypeAt: function(pos) {\n      pos = clipPos(this.doc, pos);\n      var styles = getLineStyles(this, getLine(this.doc, pos.line));\n      var before = 0,\n          after = (styles.length - 1) / 2,\n          ch = pos.ch;\n      var type;\n      if (ch == 0)\n        type = styles[2];\n      else\n        for (; ; ) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch)\n            after = mid;\n          else if (styles[mid * 2 + 1] < ch)\n            before = mid + 1;\n          else {\n            type = styles[mid * 2 + 2];\n            break;\n          }\n        }\n      var cut = type ? type.indexOf(\"cm-overlay \") : -1;\n      return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);\n    },\n    getModeAt: function(pos) {\n      var mode = this.doc.mode;\n      if (!mode.innerMode)\n        return mode;\n      return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;\n    },\n    getHelper: function(pos, type) {\n      return this.getHelpers(pos, type)[0];\n    },\n    getHelpers: function(pos, type) {\n      var found = [];\n      if (!helpers.hasOwnProperty(type))\n        return found;\n      var help = helpers[type],\n          mode = this.getModeAt(pos);\n      if (typeof mode[type] == \"string\") {\n        if (help[mode[type]])\n          found.push(help[mode[type]]);\n      } else if (mode[type]) {\n        for (var i = 0; i < mode[type].length; i++) {\n          var val = help[mode[type][i]];\n          if (val)\n            found.push(val);\n        }\n      } else if (mode.helperType && help[mode.helperType]) {\n        found.push(help[mode.helperType]);\n      } else if (help[mode.name]) {\n        found.push(help[mode.name]);\n      }\n      for (var i = 0; i < help._global.length; i++) {\n        var cur = help._global[i];\n        if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n          found.push(cur.val);\n      }\n      return found;\n    },\n    getStateAfter: function(line, precise) {\n      var doc = this.doc;\n      line = clipLine(doc, line == null ? doc.first + doc.size - 1 : line);\n      return getStateBefore(this, line + 1, precise);\n    },\n    cursorCoords: function(start, mode) {\n      var pos,\n          range = this.doc.sel.primary();\n      if (start == null)\n        pos = range.head;\n      else if (typeof start == \"object\")\n        pos = clipPos(this.doc, start);\n      else\n        pos = start ? range.from() : range.to();\n      return cursorCoords(this, pos, mode || \"page\");\n    },\n    charCoords: function(pos, mode) {\n      return charCoords(this, clipPos(this.doc, pos), mode || \"page\");\n    },\n    coordsChar: function(coords, mode) {\n      coords = fromCoordSystem(this, coords, mode || \"page\");\n      return coordsChar(this, coords.left, coords.top);\n    },\n    lineAtHeight: function(height, mode) {\n      height = fromCoordSystem(this, {\n        top: height,\n        left: 0\n      }, mode || \"page\").top;\n      return lineAtHeight(this.doc, height + this.display.viewOffset);\n    },\n    heightAtLine: function(line, mode) {\n      var end = false,\n          lineObj;\n      if (typeof line == \"number\") {\n        var last = this.doc.first + this.doc.size - 1;\n        if (line < this.doc.first)\n          line = this.doc.first;\n        else if (line > last) {\n          line = last;\n          end = true;\n        }\n        lineObj = getLine(this.doc, line);\n      } else {\n        lineObj = line;\n      }\n      return intoCoordSystem(this, lineObj, {\n        top: 0,\n        left: 0\n      }, mode || \"page\").top + (end ? this.doc.height - heightAtLine(lineObj) : 0);\n    },\n    defaultTextHeight: function() {\n      return textHeight(this.display);\n    },\n    defaultCharWidth: function() {\n      return charWidth(this.display);\n    },\n    setGutterMarker: methodOp(function(line, gutterID, value) {\n      return changeLine(this.doc, line, \"gutter\", function(line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers))\n          line.gutterMarkers = null;\n        return true;\n      });\n    }),\n    clearGutter: methodOp(function(gutterID) {\n      var cm = this,\n          doc = cm.doc,\n          i = doc.first;\n      doc.iter(function(line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          line.gutterMarkers[gutterID] = null;\n          regLineChange(cm, i, \"gutter\");\n          if (isEmpty(line.gutterMarkers))\n            line.gutterMarkers = null;\n        }\n        ++i;\n      });\n    }),\n    lineInfo: function(line) {\n      if (typeof line == \"number\") {\n        if (!isLine(this.doc, line))\n          return null;\n        var n = line;\n        line = getLine(this.doc, line);\n        if (!line)\n          return null;\n      } else {\n        var n = lineNo(line);\n        if (n == null)\n          return null;\n      }\n      return {\n        line: n,\n        handle: line,\n        text: line.text,\n        gutterMarkers: line.gutterMarkers,\n        textClass: line.textClass,\n        bgClass: line.bgClass,\n        wrapClass: line.wrapClass,\n        widgets: line.widgets\n      };\n    },\n    getViewport: function() {\n      return {\n        from: this.display.viewFrom,\n        to: this.display.viewTo\n      };\n    },\n    addWidget: function(pos, node, scroll, vert, horiz) {\n      var display = this.display;\n      pos = cursorCoords(this, clipPos(this.doc, pos));\n      var top = pos.bottom,\n          left = pos.left;\n      node.style.position = \"absolute\";\n      node.setAttribute(\"cm-ignore-events\", \"true\");\n      this.display.input.setUneditable(node);\n      display.sizer.appendChild(node);\n      if (vert == \"over\") {\n        top = pos.top;\n      } else if (vert == \"above\" || vert == \"near\") {\n        var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n            hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n        if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n          top = pos.top - node.offsetHeight;\n        else if (pos.bottom + node.offsetHeight <= vspace)\n          top = pos.bottom;\n        if (left + node.offsetWidth > hspace)\n          left = hspace - node.offsetWidth;\n      }\n      node.style.top = top + \"px\";\n      node.style.left = node.style.right = \"\";\n      if (horiz == \"right\") {\n        left = display.sizer.clientWidth - node.offsetWidth;\n        node.style.right = \"0px\";\n      } else {\n        if (horiz == \"left\")\n          left = 0;\n        else if (horiz == \"middle\")\n          left = (display.sizer.clientWidth - node.offsetWidth) / 2;\n        node.style.left = left + \"px\";\n      }\n      if (scroll)\n        scrollIntoView(this, left, top, left + node.offsetWidth, top + node.offsetHeight);\n    },\n    triggerOnKeyDown: methodOp(onKeyDown),\n    triggerOnKeyPress: methodOp(onKeyPress),\n    triggerOnKeyUp: onKeyUp,\n    execCommand: function(cmd) {\n      if (commands.hasOwnProperty(cmd))\n        return commands[cmd].call(null, this);\n    },\n    triggerElectric: methodOp(function(text) {\n      triggerElectric(this, text);\n    }),\n    findPosH: function(from, amount, unit, visually) {\n      var dir = 1;\n      if (amount < 0) {\n        dir = -1;\n        amount = -amount;\n      }\n      for (var i = 0,\n          cur = clipPos(this.doc, from); i < amount; ++i) {\n        cur = findPosH(this.doc, cur, dir, unit, visually);\n        if (cur.hitSide)\n          break;\n      }\n      return cur;\n    },\n    moveH: methodOp(function(dir, unit) {\n      var cm = this;\n      cm.extendSelectionsBy(function(range) {\n        if (cm.display.shift || cm.doc.extend || range.empty())\n          return findPosH(cm.doc, range.head, dir, unit, cm.options.rtlMoveVisually);\n        else\n          return dir < 0 ? range.from() : range.to();\n      }, sel_move);\n    }),\n    deleteH: methodOp(function(dir, unit) {\n      var sel = this.doc.sel,\n          doc = this.doc;\n      if (sel.somethingSelected())\n        doc.replaceSelection(\"\", null, \"+delete\");\n      else\n        deleteNearSelection(this, function(range) {\n          var other = findPosH(doc, range.head, dir, unit, false);\n          return dir < 0 ? {\n            from: other,\n            to: range.head\n          } : {\n            from: range.head,\n            to: other\n          };\n        });\n    }),\n    findPosV: function(from, amount, unit, goalColumn) {\n      var dir = 1,\n          x = goalColumn;\n      if (amount < 0) {\n        dir = -1;\n        amount = -amount;\n      }\n      for (var i = 0,\n          cur = clipPos(this.doc, from); i < amount; ++i) {\n        var coords = cursorCoords(this, cur, \"div\");\n        if (x == null)\n          x = coords.left;\n        else\n          coords.left = x;\n        cur = findPosV(this, coords, dir, unit);\n        if (cur.hitSide)\n          break;\n      }\n      return cur;\n    },\n    moveV: methodOp(function(dir, unit) {\n      var cm = this,\n          doc = this.doc,\n          goals = [];\n      var collapse = !cm.display.shift && !doc.extend && doc.sel.somethingSelected();\n      doc.extendSelectionsBy(function(range) {\n        if (collapse)\n          return dir < 0 ? range.from() : range.to();\n        var headPos = cursorCoords(cm, range.head, \"div\");\n        if (range.goalColumn != null)\n          headPos.left = range.goalColumn;\n        goals.push(headPos.left);\n        var pos = findPosV(cm, headPos, dir, unit);\n        if (unit == \"page\" && range == doc.sel.primary())\n          addToScrollPos(cm, null, charCoords(cm, pos, \"div\").top - headPos.top);\n        return pos;\n      }, sel_move);\n      if (goals.length)\n        for (var i = 0; i < doc.sel.ranges.length; i++)\n          doc.sel.ranges[i].goalColumn = goals[i];\n    }),\n    findWordAt: function(pos) {\n      var doc = this.doc,\n          line = getLine(doc, pos.line).text;\n      var start = pos.ch,\n          end = pos.ch;\n      if (line) {\n        var helper = this.getHelper(pos, \"wordChars\");\n        if ((pos.xRel < 0 || end == line.length) && start)\n          --start;\n        else\n          ++end;\n        var startChar = line.charAt(start);\n        var check = isWordChar(startChar, helper) ? function(ch) {\n          return isWordChar(ch, helper);\n        } : /\\s/.test(startChar) ? function(ch) {\n          return /\\s/.test(ch);\n        } : function(ch) {\n          return !/\\s/.test(ch) && !isWordChar(ch);\n        };\n        while (start > 0 && check(line.charAt(start - 1)))\n          --start;\n        while (end < line.length && check(line.charAt(end)))\n          ++end;\n      }\n      return new Range(Pos(pos.line, start), Pos(pos.line, end));\n    },\n    toggleOverwrite: function(value) {\n      if (value != null && value == this.state.overwrite)\n        return;\n      if (this.state.overwrite = !this.state.overwrite)\n        addClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n      else\n        rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n      signal(this, \"overwriteToggle\", this, this.state.overwrite);\n    },\n    hasFocus: function() {\n      return this.display.input.getField() == activeElt();\n    },\n    scrollTo: methodOp(function(x, y) {\n      if (x != null || y != null)\n        resolveScrollToPos(this);\n      if (x != null)\n        this.curOp.scrollLeft = x;\n      if (y != null)\n        this.curOp.scrollTop = y;\n    }),\n    getScrollInfo: function() {\n      var scroller = this.display.scroller;\n      return {\n        left: scroller.scrollLeft,\n        top: scroller.scrollTop,\n        height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n        width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n        clientHeight: displayHeight(this),\n        clientWidth: displayWidth(this)\n      };\n    },\n    scrollIntoView: methodOp(function(range, margin) {\n      if (range == null) {\n        range = {\n          from: this.doc.sel.primary().head,\n          to: null\n        };\n        if (margin == null)\n          margin = this.options.cursorScrollMargin;\n      } else if (typeof range == \"number\") {\n        range = {\n          from: Pos(range, 0),\n          to: null\n        };\n      } else if (range.from == null) {\n        range = {\n          from: range,\n          to: null\n        };\n      }\n      if (!range.to)\n        range.to = range.from;\n      range.margin = margin || 0;\n      if (range.from.line != null) {\n        resolveScrollToPos(this);\n        this.curOp.scrollToPos = range;\n      } else {\n        var sPos = calculateScrollPos(this, Math.min(range.from.left, range.to.left), Math.min(range.from.top, range.to.top) - range.margin, Math.max(range.from.right, range.to.right), Math.max(range.from.bottom, range.to.bottom) + range.margin);\n        this.scrollTo(sPos.scrollLeft, sPos.scrollTop);\n      }\n    }),\n    setSize: methodOp(function(width, height) {\n      var cm = this;\n      function interpret(val) {\n        return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val;\n      }\n      if (width != null)\n        cm.display.wrapper.style.width = interpret(width);\n      if (height != null)\n        cm.display.wrapper.style.height = interpret(height);\n      if (cm.options.lineWrapping)\n        clearLineMeasurementCache(this);\n      var lineNo = cm.display.viewFrom;\n      cm.doc.iter(lineNo, cm.display.viewTo, function(line) {\n        if (line.widgets)\n          for (var i = 0; i < line.widgets.length; i++)\n            if (line.widgets[i].noHScroll) {\n              regLineChange(cm, lineNo, \"widget\");\n              break;\n            }\n        ++lineNo;\n      });\n      cm.curOp.forceUpdate = true;\n      signal(cm, \"refresh\", this);\n    }),\n    operation: function(f) {\n      return runInOp(this, f);\n    },\n    refresh: methodOp(function() {\n      var oldHeight = this.display.cachedTextHeight;\n      regChange(this);\n      this.curOp.forceUpdate = true;\n      clearCaches(this);\n      this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop);\n      updateGutterSpace(this);\n      if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5)\n        estimateLineHeights(this);\n      signal(this, \"refresh\", this);\n    }),\n    swapDoc: methodOp(function(doc) {\n      var old = this.doc;\n      old.cm = null;\n      attachDoc(this, doc);\n      clearCaches(this);\n      this.display.input.reset();\n      this.scrollTo(doc.scrollLeft, doc.scrollTop);\n      this.curOp.forceScroll = true;\n      signalLater(this, \"swapDoc\", this, old);\n      return old;\n    }),\n    getInputField: function() {\n      return this.display.input.getField();\n    },\n    getWrapperElement: function() {\n      return this.display.wrapper;\n    },\n    getScrollerElement: function() {\n      return this.display.scroller;\n    },\n    getGutterElement: function() {\n      return this.display.gutters;\n    }\n  };\n  eventMixin(CodeMirror);\n  var defaults = CodeMirror.defaults = {};\n  var optionHandlers = CodeMirror.optionHandlers = {};\n  function option(name, deflt, handle, notOnInit) {\n    CodeMirror.defaults[name] = deflt;\n    if (handle)\n      optionHandlers[name] = notOnInit ? function(cm, val, old) {\n        if (old != Init)\n          handle(cm, val, old);\n      } : handle;\n  }\n  var Init = CodeMirror.Init = {toString: function() {\n      return \"CodeMirror.Init\";\n    }};\n  option(\"value\", \"\", function(cm, val) {\n    cm.setValue(val);\n  }, true);\n  option(\"mode\", null, function(cm, val) {\n    cm.doc.modeOption = val;\n    loadMode(cm);\n  }, true);\n  option(\"indentUnit\", 2, loadMode, true);\n  option(\"indentWithTabs\", false);\n  option(\"smartIndent\", true);\n  option(\"tabSize\", 4, function(cm) {\n    resetModeState(cm);\n    clearCaches(cm);\n    regChange(cm);\n  }, true);\n  option(\"lineSeparator\", null, function(cm, val) {\n    cm.doc.lineSep = val;\n    if (!val)\n      return;\n    var newBreaks = [],\n        lineNo = cm.doc.first;\n    cm.doc.iter(function(line) {\n      for (var pos = 0; ; ) {\n        var found = line.text.indexOf(val, pos);\n        if (found == -1)\n          break;\n        pos = found + val.length;\n        newBreaks.push(Pos(lineNo, found));\n      }\n      lineNo++;\n    });\n    for (var i = newBreaks.length - 1; i >= 0; i--)\n      replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length));\n  });\n  option(\"specialChars\", /[\\t\\u0000-\\u0019\\u00ad\\u200b-\\u200f\\u2028\\u2029\\ufeff]/g, function(cm, val, old) {\n    cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n    if (old != CodeMirror.Init)\n      cm.refresh();\n  });\n  option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function(cm) {\n    cm.refresh();\n  }, true);\n  option(\"electricChars\", true);\n  option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function() {\n    throw new Error(\"inputStyle can not (yet) be changed in a running editor\");\n  }, true);\n  option(\"rtlMoveVisually\", !windows);\n  option(\"wholeLineUpdateBefore\", true);\n  option(\"theme\", \"default\", function(cm) {\n    themeChanged(cm);\n    guttersChanged(cm);\n  }, true);\n  option(\"keyMap\", \"default\", function(cm, val, old) {\n    var next = getKeyMap(val);\n    var prev = old != CodeMirror.Init && getKeyMap(old);\n    if (prev && prev.detach)\n      prev.detach(cm, next);\n    if (next.attach)\n      next.attach(cm, prev || null);\n  });\n  option(\"extraKeys\", null);\n  option(\"lineWrapping\", false, wrappingChanged, true);\n  option(\"gutters\", [], function(cm) {\n    setGuttersForLineNumbers(cm.options);\n    guttersChanged(cm);\n  }, true);\n  option(\"fixedGutter\", true, function(cm, val) {\n    cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n    cm.refresh();\n  }, true);\n  option(\"coverGutterNextToScrollbar\", false, function(cm) {\n    updateScrollbars(cm);\n  }, true);\n  option(\"scrollbarStyle\", \"native\", function(cm) {\n    initScrollbars(cm);\n    updateScrollbars(cm);\n    cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n    cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n  }, true);\n  option(\"lineNumbers\", false, function(cm) {\n    setGuttersForLineNumbers(cm.options);\n    guttersChanged(cm);\n  }, true);\n  option(\"firstLineNumber\", 1, guttersChanged, true);\n  option(\"lineNumberFormatter\", function(integer) {\n    return integer;\n  }, guttersChanged, true);\n  option(\"showCursorWhenSelecting\", false, updateSelection, true);\n  option(\"resetSelectionOnContextMenu\", true);\n  option(\"lineWiseCopyCut\", true);\n  option(\"readOnly\", false, function(cm, val) {\n    if (val == \"nocursor\") {\n      onBlur(cm);\n      cm.display.input.blur();\n      cm.display.disabled = true;\n    } else {\n      cm.display.disabled = false;\n    }\n    cm.display.input.readOnlyChanged(val);\n  });\n  option(\"disableInput\", false, function(cm, val) {\n    if (!val)\n      cm.display.input.reset();\n  }, true);\n  option(\"dragDrop\", true, dragDropChanged);\n  option(\"allowDropFileTypes\", null);\n  option(\"cursorBlinkRate\", 530);\n  option(\"cursorScrollMargin\", 0);\n  option(\"cursorHeight\", 1, updateSelection, true);\n  option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n  option(\"workTime\", 100);\n  option(\"workDelay\", 100);\n  option(\"flattenSpans\", true, resetModeState, true);\n  option(\"addModeClass\", false, resetModeState, true);\n  option(\"pollInterval\", 100);\n  option(\"undoDepth\", 200, function(cm, val) {\n    cm.doc.history.undoDepth = val;\n  });\n  option(\"historyEventDelay\", 1250);\n  option(\"viewportMargin\", 10, function(cm) {\n    cm.refresh();\n  }, true);\n  option(\"maxHighlightLength\", 10000, resetModeState, true);\n  option(\"moveInputWithCursor\", true, function(cm, val) {\n    if (!val)\n      cm.display.input.resetPosition();\n  });\n  option(\"tabindex\", null, function(cm, val) {\n    cm.display.input.getField().tabIndex = val || \"\";\n  });\n  option(\"autofocus\", null);\n  var modes = CodeMirror.modes = {},\n      mimeModes = CodeMirror.mimeModes = {};\n  CodeMirror.defineMode = function(name, mode) {\n    if (!CodeMirror.defaults.mode && name != \"null\")\n      CodeMirror.defaults.mode = name;\n    if (arguments.length > 2)\n      mode.dependencies = Array.prototype.slice.call(arguments, 2);\n    modes[name] = mode;\n  };\n  CodeMirror.defineMIME = function(mime, spec) {\n    mimeModes[mime] = spec;\n  };\n  CodeMirror.resolveMode = function(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\")\n        found = {name: found};\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return CodeMirror.resolveMode(\"application/xml\");\n    }\n    if (typeof spec == \"string\")\n      return {name: spec};\n    else\n      return spec || {name: \"null\"};\n  };\n  CodeMirror.getMode = function(options, spec) {\n    var spec = CodeMirror.resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory)\n      return CodeMirror.getMode(options, \"text/plain\");\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop))\n          continue;\n        if (modeObj.hasOwnProperty(prop))\n          modeObj[\"_\" + prop] = modeObj[prop];\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType)\n      modeObj.helperType = spec.helperType;\n    if (spec.modeProps)\n      for (var prop in spec.modeProps)\n        modeObj[prop] = spec.modeProps[prop];\n    return modeObj;\n  };\n  CodeMirror.defineMode(\"null\", function() {\n    return {token: function(stream) {\n        stream.skipToEnd();\n      }};\n  });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n  var modeExtensions = CodeMirror.modeExtensions = {};\n  CodeMirror.extendMode = function(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  };\n  CodeMirror.defineExtension = function(name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function(name, func) {\n    Doc.prototype[name] = func;\n  };\n  CodeMirror.defineOption = option;\n  var initHooks = [];\n  CodeMirror.defineInitHook = function(f) {\n    initHooks.push(f);\n  };\n  var helpers = CodeMirror.helpers = {};\n  CodeMirror.registerHelper = function(type, name, value) {\n    if (!helpers.hasOwnProperty(type))\n      helpers[type] = CodeMirror[type] = {_global: []};\n    helpers[type][name] = value;\n  };\n  CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n    CodeMirror.registerHelper(type, name, value);\n    helpers[type]._global.push({\n      pred: predicate,\n      val: value\n    });\n  };\n  var copyState = CodeMirror.copyState = function(mode, state) {\n    if (state === true)\n      return state;\n    if (mode.copyState)\n      return mode.copyState(state);\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array)\n        val = val.concat([]);\n      nstate[n] = val;\n    }\n    return nstate;\n  };\n  var startState = CodeMirror.startState = function(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true;\n  };\n  CodeMirror.innerMode = function(mode, state) {\n    while (mode.innerMode) {\n      var info = mode.innerMode(state);\n      if (!info || info.mode == mode)\n        break;\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {\n      mode: mode,\n      state: state\n    };\n  };\n  var commands = CodeMirror.commands = {\n    selectAll: function(cm) {\n      cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n    },\n    singleSelection: function(cm) {\n      cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll);\n    },\n    killLine: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        if (range.empty()) {\n          var len = getLine(cm.doc, range.head.line).text.length;\n          if (range.head.ch == len && range.head.line < cm.lastLine())\n            return {\n              from: range.head,\n              to: Pos(range.head.line + 1, 0)\n            };\n          else\n            return {\n              from: range.head,\n              to: Pos(range.head.line, len)\n            };\n        } else {\n          return {\n            from: range.from(),\n            to: range.to()\n          };\n        }\n      });\n    },\n    deleteLine: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        return {\n          from: Pos(range.from().line, 0),\n          to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n        };\n      });\n    },\n    delLineLeft: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        return {\n          from: Pos(range.from().line, 0),\n          to: range.from()\n        };\n      });\n    },\n    delWrappedLineLeft: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var leftPos = cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n        return {\n          from: leftPos,\n          to: range.from()\n        };\n      });\n    },\n    delWrappedLineRight: function(cm) {\n      deleteNearSelection(cm, function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var rightPos = cm.coordsChar({\n          left: cm.display.lineDiv.offsetWidth + 100,\n          top: top\n        }, \"div\");\n        return {\n          from: range.from(),\n          to: rightPos\n        };\n      });\n    },\n    undo: function(cm) {\n      cm.undo();\n    },\n    redo: function(cm) {\n      cm.redo();\n    },\n    undoSelection: function(cm) {\n      cm.undoSelection();\n    },\n    redoSelection: function(cm) {\n      cm.redoSelection();\n    },\n    goDocStart: function(cm) {\n      cm.extendSelection(Pos(cm.firstLine(), 0));\n    },\n    goDocEnd: function(cm) {\n      cm.extendSelection(Pos(cm.lastLine()));\n    },\n    goLineStart: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        return lineStart(cm, range.head.line);\n      }, {\n        origin: \"+move\",\n        bias: 1\n      });\n    },\n    goLineStartSmart: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        return lineStartSmart(cm, range.head);\n      }, {\n        origin: \"+move\",\n        bias: 1\n      });\n    },\n    goLineEnd: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        return lineEnd(cm, range.head.line);\n      }, {\n        origin: \"+move\",\n        bias: -1\n      });\n    },\n    goLineRight: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({\n          left: cm.display.lineDiv.offsetWidth + 100,\n          top: top\n        }, \"div\");\n      }, sel_move);\n    },\n    goLineLeft: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n      }, sel_move);\n    },\n    goLineLeftSmart: function(cm) {\n      cm.extendSelectionsBy(function(range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var pos = cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n        if (pos.ch < cm.getLine(pos.line).search(/\\S/))\n          return lineStartSmart(cm, range.head);\n        return pos;\n      }, sel_move);\n    },\n    goLineUp: function(cm) {\n      cm.moveV(-1, \"line\");\n    },\n    goLineDown: function(cm) {\n      cm.moveV(1, \"line\");\n    },\n    goPageUp: function(cm) {\n      cm.moveV(-1, \"page\");\n    },\n    goPageDown: function(cm) {\n      cm.moveV(1, \"page\");\n    },\n    goCharLeft: function(cm) {\n      cm.moveH(-1, \"char\");\n    },\n    goCharRight: function(cm) {\n      cm.moveH(1, \"char\");\n    },\n    goColumnLeft: function(cm) {\n      cm.moveH(-1, \"column\");\n    },\n    goColumnRight: function(cm) {\n      cm.moveH(1, \"column\");\n    },\n    goWordLeft: function(cm) {\n      cm.moveH(-1, \"word\");\n    },\n    goGroupRight: function(cm) {\n      cm.moveH(1, \"group\");\n    },\n    goGroupLeft: function(cm) {\n      cm.moveH(-1, \"group\");\n    },\n    goWordRight: function(cm) {\n      cm.moveH(1, \"word\");\n    },\n    delCharBefore: function(cm) {\n      cm.deleteH(-1, \"char\");\n    },\n    delCharAfter: function(cm) {\n      cm.deleteH(1, \"char\");\n    },\n    delWordBefore: function(cm) {\n      cm.deleteH(-1, \"word\");\n    },\n    delWordAfter: function(cm) {\n      cm.deleteH(1, \"word\");\n    },\n    delGroupBefore: function(cm) {\n      cm.deleteH(-1, \"group\");\n    },\n    delGroupAfter: function(cm) {\n      cm.deleteH(1, \"group\");\n    },\n    indentAuto: function(cm) {\n      cm.indentSelection(\"smart\");\n    },\n    indentMore: function(cm) {\n      cm.indentSelection(\"add\");\n    },\n    indentLess: function(cm) {\n      cm.indentSelection(\"subtract\");\n    },\n    insertTab: function(cm) {\n      cm.replaceSelection(\"\\t\");\n    },\n    insertSoftTab: function(cm) {\n      var spaces = [],\n          ranges = cm.listSelections(),\n          tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(new Array(tabSize - col % tabSize + 1).join(\" \"));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function(cm) {\n      if (cm.somethingSelected())\n        cm.indentSelection(\"add\");\n      else\n        cm.execCommand(\"insertTab\");\n    },\n    transposeChars: function(cm) {\n      runInOp(cm, function() {\n        var ranges = cm.listSelections(),\n            newSel = [];\n        for (var i = 0; i < ranges.length; i++) {\n          var cur = ranges[i].head,\n              line = getLine(cm.doc, cur.line).text;\n          if (line) {\n            if (cur.ch == line.length)\n              cur = new Pos(cur.line, cur.ch - 1);\n            if (cur.ch > 0) {\n              cur = new Pos(cur.line, cur.ch + 1);\n              cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2), Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n            } else if (cur.line > cm.doc.first) {\n              var prev = getLine(cm.doc, cur.line - 1).text;\n              if (prev)\n                cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1), Pos(cur.line - 1, prev.length - 1), Pos(cur.line, 1), \"+transpose\");\n            }\n          }\n          newSel.push(new Range(cur, cur));\n        }\n        cm.setSelections(newSel);\n      });\n    },\n    newlineAndIndent: function(cm) {\n      runInOp(cm, function() {\n        var len = cm.listSelections().length;\n        for (var i = 0; i < len; i++) {\n          var range = cm.listSelections()[i];\n          cm.replaceRange(cm.doc.lineSeparator(), range.anchor, range.head, \"+input\");\n          cm.indentLine(range.from().line + 1, null, true);\n        }\n        ensureCursorVisible(cm);\n      });\n    },\n    toggleOverwrite: function(cm) {\n      cm.toggleOverwrite();\n    }\n  };\n  var keyMap = CodeMirror.keyMap = {};\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\",\n    \"Right\": \"goCharRight\",\n    \"Up\": \"goLineUp\",\n    \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\",\n    \"Home\": \"goLineStartSmart\",\n    \"PageUp\": \"goPageUp\",\n    \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\",\n    \"Backspace\": \"delCharBefore\",\n    \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\",\n    \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\",\n    \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\",\n    \"Ctrl-D\": \"deleteLine\",\n    \"Ctrl-Z\": \"undo\",\n    \"Shift-Ctrl-Z\": \"redo\",\n    \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\",\n    \"Ctrl-End\": \"goDocEnd\",\n    \"Ctrl-Up\": \"goLineUp\",\n    \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\",\n    \"Ctrl-Right\": \"goGroupRight\",\n    \"Alt-Left\": \"goLineStart\",\n    \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Delete\": \"delGroupAfter\",\n    \"Ctrl-S\": \"save\",\n    \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\",\n    \"Shift-Ctrl-G\": \"findPrev\",\n    \"Shift-Ctrl-F\": \"replace\",\n    \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\",\n    \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\",\n    \"Shift-Ctrl-U\": \"redoSelection\",\n    \"Alt-U\": \"redoSelection\",\n    fallthrough: \"basic\"\n  };\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\",\n    \"Ctrl-B\": \"goCharLeft\",\n    \"Ctrl-P\": \"goLineUp\",\n    \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\",\n    \"Alt-B\": \"goWordLeft\",\n    \"Ctrl-A\": \"goLineStart\",\n    \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\",\n    \"Shift-Ctrl-V\": \"goPageUp\",\n    \"Ctrl-D\": \"delCharAfter\",\n    \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\",\n    \"Alt-Backspace\": \"delWordBefore\",\n    \"Ctrl-K\": \"killLine\",\n    \"Ctrl-T\": \"transposeChars\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\",\n    \"Cmd-D\": \"deleteLine\",\n    \"Cmd-Z\": \"undo\",\n    \"Shift-Cmd-Z\": \"redo\",\n    \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\",\n    \"Cmd-Up\": \"goDocStart\",\n    \"Cmd-End\": \"goDocEnd\",\n    \"Cmd-Down\": \"goDocEnd\",\n    \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\",\n    \"Cmd-Left\": \"goLineLeft\",\n    \"Cmd-Right\": \"goLineRight\",\n    \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\",\n    \"Alt-Delete\": \"delGroupAfter\",\n    \"Cmd-S\": \"save\",\n    \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\",\n    \"Shift-Cmd-G\": \"findPrev\",\n    \"Cmd-Alt-F\": \"replace\",\n    \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\",\n    \"Cmd-]\": \"indentMore\",\n    \"Cmd-Backspace\": \"delWrappedLineLeft\",\n    \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\",\n    \"Shift-Cmd-U\": \"redoSelection\",\n    \"Ctrl-Up\": \"goDocStart\",\n    \"Ctrl-Down\": \"goDocEnd\",\n    fallthrough: [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/),\n        name = parts[parts.length - 1];\n    var alt,\n        ctrl,\n        shift,\n        cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod))\n        cmd = true;\n      else if (/^a(lt)?$/i.test(mod))\n        alt = true;\n      else if (/^(c|ctrl|control)$/i.test(mod))\n        ctrl = true;\n      else if (/^s(hift)$/i.test(mod))\n        shift = true;\n      else\n        throw new Error(\"Unrecognized modifier name: \" + mod);\n    }\n    if (alt)\n      name = \"Alt-\" + name;\n    if (ctrl)\n      name = \"Ctrl-\" + name;\n    if (cmd)\n      name = \"Cmd-\" + name;\n    if (shift)\n      name = \"Shift-\" + name;\n    return name;\n  }\n  CodeMirror.normalizeKeyMap = function(keymap) {\n    var copy = {};\n    for (var keyname in keymap)\n      if (keymap.hasOwnProperty(keyname)) {\n        var value = keymap[keyname];\n        if (/^(name|fallthrough|(de|at)tach)$/.test(keyname))\n          continue;\n        if (value == \"...\") {\n          delete keymap[keyname];\n          continue;\n        }\n        var keys = map(keyname.split(\" \"), normalizeKeyName);\n        for (var i = 0; i < keys.length; i++) {\n          var val,\n              name;\n          if (i == keys.length - 1) {\n            name = keys.join(\" \");\n            val = value;\n          } else {\n            name = keys.slice(0, i + 1).join(\" \");\n            val = \"...\";\n          }\n          var prev = copy[name];\n          if (!prev)\n            copy[name] = val;\n          else if (prev != val)\n            throw new Error(\"Inconsistent bindings for \" + name);\n        }\n        delete keymap[keyname];\n      }\n    for (var prop in copy)\n      keymap[prop] = copy[prop];\n    return keymap;\n  };\n  var lookupKey = CodeMirror.lookupKey = function(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n    if (found === false)\n      return \"nothing\";\n    if (found === \"...\")\n      return \"multi\";\n    if (found != null && handle(found))\n      return \"handled\";\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n        return lookupKey(key, map.fallthrough, handle, context);\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n        if (result)\n          return result;\n      }\n    }\n  };\n  var isModifierKey = CodeMirror.isModifierKey = function(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\";\n  };\n  var keyName = CodeMirror.keyName = function(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"])\n      return false;\n    var base = keyNames[event.keyCode],\n        name = base;\n    if (name == null || event.altGraphKey)\n      return false;\n    if (event.altKey && base != \"Alt\")\n      name = \"Alt-\" + name;\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\")\n      name = \"Ctrl-\" + name;\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\")\n      name = \"Cmd-\" + name;\n    if (!noShift && event.shiftKey && base != \"Shift\")\n      name = \"Shift-\" + name;\n    return name;\n  };\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val;\n  }\n  CodeMirror.fromTextArea = function(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      options.tabindex = textarea.tabIndex;\n    if (!options.placeholder && textarea.placeholder)\n      options.placeholder = textarea.placeholder;\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea || textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n    function save() {\n      textarea.value = cm.getValue();\n    }\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form,\n            realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function() {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch (e) {}\n      }\n    }\n    options.finishInit = function(cm) {\n      cm.save = save;\n      cm.getTextArea = function() {\n        return textarea;\n      };\n      cm.toTextArea = function() {\n        cm.toTextArea = isNaN;\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (typeof textarea.form.submit == \"function\")\n            textarea.form.submit = realSubmit;\n        }\n      };\n    };\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function(node) {\n      textarea.parentNode.insertBefore(node, textarea.nextSibling);\n    }, options);\n    return cm;\n  };\n  var StringStream = CodeMirror.StringStream = function(string, tabSize) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n  };\n  StringStream.prototype = {\n    eol: function() {\n      return this.pos >= this.string.length;\n    },\n    sol: function() {\n      return this.pos == this.lineStart;\n    },\n    peek: function() {\n      return this.string.charAt(this.pos) || undefined;\n    },\n    next: function() {\n      if (this.pos < this.string.length)\n        return this.string.charAt(this.pos++);\n    },\n    eat: function(match) {\n      var ch = this.string.charAt(this.pos);\n      if (typeof match == \"string\")\n        var ok = ch == match;\n      else\n        var ok = ch && (match.test ? match.test(ch) : match(ch));\n      if (ok) {\n        ++this.pos;\n        return ch;\n      }\n    },\n    eatWhile: function(match) {\n      var start = this.pos;\n      while (this.eat(match)) {}\n      return this.pos > start;\n    },\n    eatSpace: function() {\n      var start = this.pos;\n      while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos)))\n        ++this.pos;\n      return this.pos > start;\n    },\n    skipToEnd: function() {\n      this.pos = this.string.length;\n    },\n    skipTo: function(ch) {\n      var found = this.string.indexOf(ch, this.pos);\n      if (found > -1) {\n        this.pos = found;\n        return true;\n      }\n    },\n    backUp: function(n) {\n      this.pos -= n;\n    },\n    column: function() {\n      if (this.lastColumnPos < this.start) {\n        this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n        this.lastColumnPos = this.start;\n      }\n      return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n    },\n    indentation: function() {\n      return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n    },\n    match: function(pattern, consume, caseInsensitive) {\n      if (typeof pattern == \"string\") {\n        var cased = function(str) {\n          return caseInsensitive ? str.toLowerCase() : str;\n        };\n        var substr = this.string.substr(this.pos, pattern.length);\n        if (cased(substr) == cased(pattern)) {\n          if (consume !== false)\n            this.pos += pattern.length;\n          return true;\n        }\n      } else {\n        var match = this.string.slice(this.pos).match(pattern);\n        if (match && match.index > 0)\n          return null;\n        if (match && consume !== false)\n          this.pos += match[0].length;\n        return match;\n      }\n    },\n    current: function() {\n      return this.string.slice(this.start, this.pos);\n    },\n    hideFirstChars: function(n, inner) {\n      this.lineStart += n;\n      try {\n        return inner();\n      } finally {\n        this.lineStart -= n;\n      }\n    }\n  };\n  var nextMarkerId = 0;\n  var TextMarker = CodeMirror.TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n  eventMixin(TextMarker);\n  TextMarker.prototype.clear = function() {\n    if (this.explicitlyCleared)\n      return;\n    var cm = this.doc.cm,\n        withOp = cm && !cm.curOp;\n    if (withOp)\n      startOperation(cm);\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found)\n        signalLater(this, \"clear\", found.from, found.to);\n    }\n    var min = null,\n        max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed)\n        regLineChange(cm, lineNo(line), \"text\");\n      else if (cm) {\n        if (span.to != null)\n          max = lineNo(line);\n        if (span.from != null)\n          min = lineNo(line);\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        updateLineHeight(line, textHeight(cm.display));\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping)\n      for (var i = 0; i < this.lines.length; ++i) {\n        var visual = visualLine(this.lines[i]),\n            len = lineLength(visual);\n        if (len > cm.display.maxLineLength) {\n          cm.display.maxLine = visual;\n          cm.display.maxLineLength = len;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    if (min != null && cm && this.collapsed)\n      regChange(cm, min, max + 1);\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm)\n        reCheckSelection(cm.doc);\n    }\n    if (cm)\n      signalLater(cm, \"markerCleared\", cm, this);\n    if (withOp)\n      endOperation(cm);\n    if (this.parent)\n      this.parent.clear();\n  };\n  TextMarker.prototype.find = function(side, lineObj) {\n    if (side == null && this.type == \"bookmark\")\n      side = 1;\n    var from,\n        to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1)\n          return from;\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1)\n          return to;\n      }\n    }\n    return from && {\n      from: from,\n      to: to\n    };\n  };\n  TextMarker.prototype.changed = function() {\n    var pos = this.find(-1, true),\n        widget = this,\n        cm = this.doc.cm;\n    if (!pos || !cm)\n      return;\n    runInOp(cm, function() {\n      var line = pos.line,\n          lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          updateLineHeight(line, line.height + dHeight);\n      }\n    });\n  };\n  TextMarker.prototype.attachLine = function(line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);\n    }\n    this.lines.push(line);\n  };\n  TextMarker.prototype.detachLine = function(line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  var nextMarkerId = 0;\n  function markText(doc, from, to, options, type) {\n    if (options && options.shared)\n      return markTextShared(doc, from, to, options, type);\n    if (doc.cm && !doc.cm.curOp)\n      return operation(doc.cm, markText)(doc, from, to, options, type);\n    var marker = new TextMarker(doc, type),\n        diff = cmp(from, to);\n    if (options)\n      copyObj(options, marker, false);\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      return marker;\n    if (marker.replacedWith) {\n      marker.collapsed = true;\n      marker.widgetNode = elt(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents)\n        marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\");\n      if (options.insertLeft)\n        marker.widgetNode.insertLeft = true;\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");\n      sawCollapsedSpans = true;\n    }\n    if (marker.addToHistory)\n      addChangeToHistory(doc, {\n        from: from,\n        to: to,\n        origin: \"markText\"\n      }, doc.sel, NaN);\n    var curLine = from.line,\n        cm = doc.cm,\n        updateMaxLine;\n    doc.iter(curLine, to.line + 1, function(line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        updateMaxLine = true;\n      if (marker.collapsed && curLine != from.line)\n        updateLineHeight(line, 0);\n      addMarkedSpan(line, new MarkedSpan(marker, curLine == from.line ? from.ch : null, curLine == to.line ? to.ch : null));\n      ++curLine;\n    });\n    if (marker.collapsed)\n      doc.iter(from.line, to.line + 1, function(line) {\n        if (lineIsHidden(doc, line))\n          updateLineHeight(line, 0);\n      });\n    if (marker.clearOnEnter)\n      on(marker, \"beforeCursorEnter\", function() {\n        marker.clear();\n      });\n    if (marker.readOnly) {\n      sawReadOnlySpans = true;\n      if (doc.history.done.length || doc.history.undone.length)\n        doc.clearHistory();\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      if (updateMaxLine)\n        cm.curOp.updateMaxLine = true;\n      if (marker.collapsed)\n        regChange(cm, from.line, to.line + 1);\n      else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css)\n        for (var i = from.line; i <= to.line; i++)\n          regLineChange(cm, i, \"text\");\n      if (marker.atomic)\n        reCheckSelection(cm.doc);\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker;\n  }\n  var SharedTextMarker = CodeMirror.SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      markers[i].parent = this;\n  };\n  eventMixin(SharedTextMarker);\n  SharedTextMarker.prototype.clear = function() {\n    if (this.explicitlyCleared)\n      return;\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      this.markers[i].clear();\n    signalLater(this, \"clear\");\n  };\n  SharedTextMarker.prototype.find = function(side, lineObj) {\n    return this.primary.find(side, lineObj);\n  };\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)],\n        primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function(doc) {\n      if (widget)\n        options.widgetNode = widget.cloneNode(true);\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        if (doc.linked[i].isParent)\n          return;\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary);\n  }\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function(m) {\n      return m.parent;\n    });\n  }\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i],\n          pos = marker.find();\n      var mFrom = doc.clipPos(pos.from),\n          mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n  function detachSharedMarkers(markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i],\n          linked = [marker.primary.doc];\n      ;\n      linkedDocs(marker.primary.doc, function(d) {\n        linked.push(d);\n      });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    }\n  }\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from;\n    this.to = to;\n  }\n  function getMarkedSpanFor(spans, marker) {\n    if (spans)\n      for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if (span.marker == marker)\n          return span;\n      }\n  }\n  function removeMarkedSpan(spans, span) {\n    for (var r,\n        i = 0; i < spans.length; ++i)\n      if (spans[i] != span)\n        (r || (r = [])).push(spans[i]);\n    return r;\n  }\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  }\n  function markedSpansBefore(old, startCh, isInsert) {\n    if (old)\n      for (var i = 0,\n          nw; i < old.length; ++i) {\n        var span = old[i],\n            marker = span.marker;\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n        if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n          var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);\n          (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n        }\n      }\n    return nw;\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    if (old)\n      for (var i = 0,\n          nw; i < old.length; ++i) {\n        var span = old[i],\n            marker = span.marker;\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n        if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n          var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);\n          (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh, span.to == null ? null : span.to - endCh));\n        }\n      }\n    return nw;\n  }\n  function stretchSpansOverChange(doc, change) {\n    if (change.full)\n      return null;\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast)\n      return null;\n    var startCh = change.from.ch,\n        endCh = change.to.ch,\n        isInsert = cmp(change.from, change.to) == 0;\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n    var sameLine = change.text.length == 1,\n        offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found)\n            span.to = startCh;\n          else if (sameLine)\n            span.to = found.to == null ? null : found.to + offset;\n        }\n      }\n    }\n    if (last) {\n      for (var i = 0; i < last.length; ++i) {\n        var span = last[i];\n        if (span.to != null)\n          span.to += offset;\n        if (span.from == null) {\n          var found = getMarkedSpanFor(first, span.marker);\n          if (!found) {\n            span.from = offset;\n            if (sameLine)\n              (first || (first = [])).push(span);\n          }\n        } else {\n          span.from += offset;\n          if (sameLine)\n            (first || (first = [])).push(span);\n        }\n      }\n    }\n    if (first)\n      first = clearEmptySpans(first);\n    if (last && last != first)\n      last = clearEmptySpans(last);\n    var newMarkers = [first];\n    if (!sameLine) {\n      var gap = change.text.length - 2,\n          gapMarkers;\n      if (gap > 0 && first)\n        for (var i = 0; i < first.length; ++i)\n          if (first[i].to == null)\n            (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i].marker, null, null));\n      for (var i = 0; i < gap; ++i)\n        newMarkers.push(gapMarkers);\n      newMarkers.push(last);\n    }\n    return newMarkers;\n  }\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        spans.splice(i--, 1);\n    }\n    if (!spans.length)\n      return null;\n    return spans;\n  }\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old)\n      return stretched;\n    if (!stretched)\n      return old;\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i],\n          stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            if (oldCur[k].marker == span.marker)\n              continue spans;\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old;\n  }\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function(line) {\n      if (line.markedSpans)\n        for (var i = 0; i < line.markedSpans.length; ++i) {\n          var mark = line.markedSpans[i].marker;\n          if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n            (markers || (markers = [])).push(mark);\n        }\n    });\n    if (!markers)\n      return null;\n    var parts = [{\n      from: from,\n      to: to\n    }];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i],\n          m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0)\n          continue;\n        var newParts = [j, 1],\n            dfrom = cmp(p.from, m.from),\n            dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          newParts.push({\n            from: p.from,\n            to: m.from\n          });\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          newParts.push({\n            from: m.to,\n            to: p.to\n          });\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 1;\n      }\n    }\n    return parts;\n  }\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans)\n      return;\n    for (var i = 0; i < spans.length; ++i)\n      spans[i].marker.detachLine(line);\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans)\n      return;\n    for (var i = 0; i < spans.length; ++i)\n      spans[i].marker.attachLine(line);\n    line.markedSpans = spans;\n  }\n  function extraLeft(marker) {\n    return marker.inclusiveLeft ? -1 : 0;\n  }\n  function extraRight(marker) {\n    return marker.inclusiveRight ? 1 : 0;\n  }\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0)\n      return lenDiff;\n    var aPos = a.find(),\n        bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp)\n      return -fromCmp;\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp)\n      return toCmp;\n    return b.id - a.id;\n  }\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans,\n        found;\n    if (sps)\n      for (var sp,\n          i = 0; i < sps.length; ++i) {\n        sp = sps[i];\n        if (sp.marker.collapsed && (start ? sp.from : sp.to) == null && (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n          found = sp.marker;\n      }\n    return found;\n  }\n  function collapsedSpanAtStart(line) {\n    return collapsedSpanAtSide(line, true);\n  }\n  function collapsedSpanAtEnd(line) {\n    return collapsedSpanAtSide(line, false);\n  }\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps)\n      for (var i = 0; i < sps.length; ++i) {\n        var sp = sps[i];\n        if (!sp.marker.collapsed)\n          continue;\n        var found = sp.marker.find(0);\n        var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n        var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n        if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0)\n          continue;\n        if (fromCmp <= 0 && (cmp(found.to, from) > 0 || (sp.marker.inclusiveRight && marker.inclusiveLeft)) || fromCmp >= 0 && (cmp(found.from, to) < 0 || (sp.marker.inclusiveLeft && marker.inclusiveRight)))\n          return true;\n      }\n  }\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      line = merged.find(-1, true).line;\n    return line;\n  }\n  function visualLineContinued(line) {\n    var merged,\n        lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n      (lines || (lines = [])).push(line);\n    }\n    return lines;\n  }\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN),\n        vis = visualLine(line);\n    if (line == vis)\n      return lineN;\n    return lineNo(vis);\n  }\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine())\n      return lineN;\n    var line = getLine(doc, lineN),\n        merged;\n    if (!lineIsHidden(doc, line))\n      return lineN;\n    while (merged = collapsedSpanAtEnd(line))\n      line = merged.find(1, true).line;\n    return lineNo(line) + 1;\n  }\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps)\n      for (var sp,\n          i = 0; i < sps.length; ++i) {\n        sp = sps[i];\n        if (!sp.marker.collapsed)\n          continue;\n        if (sp.from == null)\n          return true;\n        if (sp.marker.widgetNode)\n          continue;\n        if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n          return true;\n      }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      return true;\n    for (var sp,\n        i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (sp.to == null || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc, line, sp))\n        return true;\n    }\n  }\n  var LineWidget = CodeMirror.LineWidget = function(doc, node, options) {\n    if (options)\n      for (var opt in options)\n        if (options.hasOwnProperty(opt))\n          this[opt] = options[opt];\n    this.doc = doc;\n    this.node = node;\n  };\n  eventMixin(LineWidget);\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      addToScrollPos(cm, null, diff);\n  }\n  LineWidget.prototype.clear = function() {\n    var cm = this.doc.cm,\n        ws = this.line.widgets,\n        line = this.line,\n        no = lineNo(line);\n    if (no == null || !ws)\n      return;\n    for (var i = 0; i < ws.length; ++i)\n      if (ws[i] == this)\n        ws.splice(i--, 1);\n    if (!ws.length)\n      line.widgets = null;\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm)\n      runInOp(cm, function() {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n  };\n  LineWidget.prototype.changed = function() {\n    var oldH = this.height,\n        cm = this.doc.cm,\n        line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff)\n      return;\n    updateLineHeight(line, line.height + diff);\n    if (cm)\n      runInOp(cm, function() {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n      });\n  };\n  function widgetHeight(widget) {\n    if (widget.height != null)\n      return widget.height;\n    var cm = widget.doc.cm;\n    if (!cm)\n      return 0;\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\";\n      if (widget.noHScroll)\n        parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\";\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.offsetHeight;\n  }\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll)\n      cm.display.alignWidgets = true;\n    changeLine(doc, handle, \"widget\", function(line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null)\n        widgets.push(widget);\n      else\n        widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible)\n          addToScrollPos(cm, null, widget.height);\n        cm.curOp.forceUpdate = true;\n      }\n      return true;\n    });\n    return widget;\n  }\n  var Line = CodeMirror.Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n  eventMixin(Line);\n  Line.prototype.lineNo = function() {\n    return lineNo(this);\n  };\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter)\n      line.stateAfter = null;\n    if (line.styles)\n      line.styles = null;\n    if (line.order != null)\n      line.order = null;\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height)\n      updateLineHeight(line, estHeight);\n  }\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n  function extractLineClasses(type, output) {\n    if (type)\n      for (; ; ) {\n        var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n        if (!lineClass)\n          break;\n        type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n        var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n        if (output[prop] == null)\n          output[prop] = lineClass[2];\n        else if (!(new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\")).test(output[prop]))\n          output[prop] += \" \" + lineClass[2];\n      }\n    return type;\n  }\n  function callBlankLine(mode, state) {\n    if (mode.blankLine)\n      return mode.blankLine(state);\n    if (!mode.innerMode)\n      return;\n    var inner = CodeMirror.innerMode(mode, state);\n    if (inner.mode.blankLine)\n      return inner.mode.blankLine(inner.state);\n  }\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner)\n        inner[0] = CodeMirror.innerMode(mode, state).mode;\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start)\n        return style;\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\");\n  }\n  function takeToken(cm, pos, precise, asArray) {\n    function getObj(copy) {\n      return {\n        start: stream.start,\n        end: stream.pos,\n        string: stream.current(),\n        type: style || null,\n        state: copy ? copyState(doc.mode, state) : state\n      };\n    }\n    var doc = cm.doc,\n        mode = doc.mode,\n        style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line),\n        state = getStateBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize),\n        tokens;\n    if (asArray)\n      tokens = [];\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, state);\n      if (asArray)\n        tokens.push(getObj(true));\n    }\n    return asArray ? tokens : getObj();\n  }\n  function runMode(cm, text, mode, state, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null)\n      flattenSpans = cm.options.flattenSpans;\n    var curStart = 0,\n        curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize),\n        style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\")\n      extractLineClasses(callBlankLine(mode, state), lineClasses);\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd)\n          processLine(cm, text, state, stream.pos);\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName)\n          style = \"m-\" + (style ? mName + \" \" + style : mName);\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 50000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      var pos = Math.min(stream.pos, curStart + 50000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n  function highlightLine(cm, line, state, forceToEnd) {\n    var st = [cm.state.modeGen],\n        lineClasses = {};\n    runMode(cm, line.text, cm.doc.mode, state, function(end, style) {\n      st.push(end, style);\n    }, lineClasses, forceToEnd);\n    for (var o = 0; o < cm.state.overlays.length; ++o) {\n      var overlay = cm.state.overlays[o],\n          i = 1,\n          at = 0;\n      runMode(cm, line.text, overlay.mode, true, function(end, style) {\n        var start = i;\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            st.splice(i, 1, end, st[i + 1], i_end);\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style)\n          return;\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"cm-overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start + 1];\n            st[start + 1] = (cur ? cur + \" \" : \"\") + \"cm-overlay \" + style;\n          }\n        }\n      }, lineClasses);\n    }\n    return {\n      styles: st,\n      classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null\n    };\n  }\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var state = getStateBefore(cm, lineNo(line));\n      var result = highlightLine(cm, line, line.text.length > cm.options.maxHighlightLength ? copyState(cm.doc.mode, state) : state);\n      line.stateAfter = state;\n      line.styles = result.styles;\n      if (result.classes)\n        line.styleClasses = result.classes;\n      else if (line.styleClasses)\n        line.styleClasses = null;\n      if (updateFrontier === cm.doc.frontier)\n        cm.doc.frontier++;\n    }\n    return line.styles;\n  }\n  function processLine(cm, text, state, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\")\n      callBlankLine(mode, state);\n    while (!stream.eol()) {\n      readToken(mode, stream, state);\n      stream.start = stream.pos;\n    }\n  }\n  var styleToClassCache = {},\n      styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style))\n      return null;\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] || (cache[style] = style.replace(/\\S+/g, \"cm-$&\"));\n  }\n  function buildLineContent(cm, lineView) {\n    var content = elt(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {\n      pre: elt(\"pre\", [content], \"CodeMirror-line\"),\n      content: content,\n      col: 0,\n      pos: 0,\n      cm: cm,\n      splitSpaces: (ie || webkit) && cm.getOption(\"lineWrapping\")\n    };\n    lineView.measure = {};\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line,\n          order;\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line)))\n        builder.addToken = buildTokenBadBidi(builder.addToken, order);\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\");\n        if (line.styleClasses.textClass)\n          builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\");\n      }\n      if (builder.map.length == 0)\n        builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n        (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);\n        (lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n    if (webkit && /\\bcm-tab\\b/.test(builder.content.lastChild.className))\n      builder.content.className = \"cm-tab-wrap-hack\";\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\");\n    return builder;\n  }\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token;\n  }\n  function buildToken(builder, text, style, startStyle, endStyle, title, css) {\n    if (!text)\n      return;\n    var displayText = builder.splitSpaces ? text.replace(/ {3,}/g, splitSpaces) : text;\n    var special = builder.cm.state.specialChars,\n        mustWrap = false;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      var content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9)\n        mustWrap = true;\n      builder.pos += text.length;\n    } else {\n      var content = document.createDocumentFragment(),\n          pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9)\n            content.appendChild(elt(\"span\", [txt]));\n          else\n            content.appendChild(txt);\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m)\n          break;\n        pos += skipped + 1;\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize,\n              tabWidth = tabSize - builder.col % tabSize;\n          var txt = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt.setAttribute(\"role\", \"presentation\");\n          txt.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          var txt = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          var txt = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9)\n            content.appendChild(elt(\"span\", [txt]));\n          else\n            content.appendChild(txt);\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt);\n        builder.pos++;\n      }\n    }\n    if (style || startStyle || endStyle || mustWrap || css) {\n      var fullStyle = style || \"\";\n      if (startStyle)\n        fullStyle += startStyle;\n      if (endStyle)\n        fullStyle += endStyle;\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (title)\n        token.title = title;\n      return builder.content.appendChild(token);\n    }\n    builder.content.appendChild(content);\n  }\n  function splitSpaces(old) {\n    var out = \" \";\n    for (var i = 0; i < old.length - 2; ++i)\n      out += i % 2 ? \" \" : \"\\u00a0\";\n    out += \" \";\n    return out;\n  }\n  function buildTokenBadBidi(inner, order) {\n    return function(builder, text, style, startStyle, endStyle, title, css) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos,\n          end = start + text.length;\n      for (; ; ) {\n        for (var i = 0; i < order.length; i++) {\n          var part = order[i];\n          if (part.to > start && part.from <= start)\n            break;\n        }\n        if (part.to >= end)\n          return inner(builder, text, style, startStyle, endStyle, title, css);\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    };\n  }\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget)\n      builder.map.push(builder.pos, builder.pos + size, widget);\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        widget = builder.content.appendChild(document.createElement(\"span\"));\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n  }\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans,\n        allText = line.text,\n        at = 0;\n    if (!spans) {\n      for (var i = 1; i < styles.length; i += 2)\n        builder.addToken(builder, allText.slice(at, at = styles[i]), interpretTokenStyle(styles[i + 1], builder.cm.options));\n      return;\n    }\n    var len = allText.length,\n        pos = 0,\n        i = 1,\n        text = \"\",\n        style,\n        css;\n    var nextChange = 0,\n        spanStyle,\n        spanEndStyle,\n        spanStartStyle,\n        title,\n        collapsed;\n    for (; ; ) {\n      if (nextChange == pos) {\n        spanStyle = spanEndStyle = spanStartStyle = title = css = \"\";\n        collapsed = null;\n        nextChange = Infinity;\n        var foundBookmarks = [];\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j],\n              m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className)\n              spanStyle += \" \" + m.className;\n            if (m.css)\n              css = m.css;\n            if (m.startStyle && sp.from == pos)\n              spanStartStyle += \" \" + m.startStyle;\n            if (m.endStyle && sp.to == nextChange)\n              spanEndStyle += \" \" + m.endStyle;\n            if (m.title && !title)\n              title = m.title;\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              collapsed = sp;\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos, collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null)\n            return;\n          if (collapsed.to == pos)\n            collapsed = false;\n        }\n        if (!collapsed && foundBookmarks.length)\n          for (var j = 0; j < foundBookmarks.length; ++j)\n            buildCollapsedSpan(builder, 0, foundBookmarks[j]);\n      }\n      if (pos >= len)\n        break;\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle, spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", title, css);\n          }\n          if (end >= upto) {\n            text = text.slice(upto - pos);\n            pos = upto;\n            break;\n          }\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" && (!doc.cm || doc.cm.options.wholeLineUpdateBefore);\n  }\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {\n      return markedSpans ? markedSpans[n] : null;\n    }\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      for (var i = start,\n          result = []; i < end; ++i)\n        result.push(new Line(text[i], spansFor(i), estimateHeight));\n      return result;\n    }\n    var from = change.from,\n        to = change.to,\n        text = change.text;\n    var firstLine = getLine(doc, from.line),\n        lastLine = getLine(doc, to.line);\n    var lastText = lst(text),\n        lastSpans = spansFor(text.length - 1),\n        nlines = to.line - from.line;\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines)\n        doc.remove(from.line, nlines);\n      if (added.length)\n        doc.insert(from.line, added);\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added = linesFor(1, text.length - 1);\n        added.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added = linesFor(1, text.length - 1);\n      if (nlines > 1)\n        doc.remove(from.line + 1, nlines - 1);\n      doc.insert(from.line + 1, added);\n    }\n    signalLater(doc, \"change\", doc, change);\n  }\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    for (var i = 0,\n        height = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n  LeafChunk.prototype = {\n    chunkSize: function() {\n      return this.lines.length;\n    },\n    removeInner: function(at, n) {\n      for (var i = at,\n          e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i)\n        lines[i].parent = this;\n    },\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        if (op(this.lines[at]))\n          return true;\n    }\n  };\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0,\n        height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize();\n      height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n  BranchChunk.prototype = {\n    chunkSize: function() {\n      return this.size;\n    },\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at),\n              oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) {\n            this.children.splice(i--, 1);\n            child.parent = null;\n          }\n          if ((n -= rm) == 0)\n            break;\n          at = 0;\n        } else\n          at -= sz;\n      }\n      if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i)\n        this.children[i].collapse(lines);\n    },\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            while (child.lines.length > 50) {\n              var spilled = child.lines.splice(child.lines.length - 25, 25);\n              var newleaf = new LeafChunk(spilled);\n              child.height -= newleaf.height;\n              this.children.splice(i + 1, 0, newleaf);\n              newleaf.parent = this;\n            }\n            this.maybeSpill();\n          }\n          break;\n        }\n        at -= sz;\n      }\n    },\n    maybeSpill: function() {\n      if (this.children.length <= 10)\n        return;\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) {\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n        } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10);\n      me.parent.maybeSpill();\n    },\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op))\n            return true;\n          if ((n -= used) == 0)\n            break;\n          at = 0;\n        } else\n          at -= sz;\n      }\n    }\n  };\n  var nextDocId = 0;\n  var Doc = CodeMirror.Doc = function(text, mode, firstLine, lineSep) {\n    if (!(this instanceof Doc))\n      return new Doc(text, mode, firstLine, lineSep);\n    if (firstLine == null)\n      firstLine = 0;\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.frontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    if (typeof text == \"string\")\n      text = this.splitLines(text);\n    updateDoc(this, {\n      from: start,\n      to: start,\n      text: text\n    });\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    iter: function(from, to, op) {\n      if (op)\n        this.iterN(from - this.first, to - from, op);\n      else\n        this.iterN(this.first, this.first + this.size, from);\n    },\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i)\n        height += lines[i].height;\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) {\n      this.removeInner(at - this.first, n);\n    },\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false)\n        return lines;\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0),\n          last = this.first + this.size - 1;\n      makeChange(this, {\n        from: top,\n        to: Pos(last, getLine(this, last).text.length),\n        text: this.splitLines(code),\n        origin: \"setValue\",\n        full: true\n      }, true);\n      setSelection(this, simpleSelection(top));\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false)\n        return lines;\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    getLine: function(line) {\n      var l = this.getLineHandle(line);\n      return l && l.text;\n    },\n    getLineHandle: function(line) {\n      if (isLine(this, line))\n        return getLine(this, line);\n    },\n    getLineNumber: function(line) {\n      return lineNo(line);\n    },\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\")\n        line = getLine(this, line);\n      return visualLine(line);\n    },\n    lineCount: function() {\n      return this.size;\n    },\n    firstLine: function() {\n      return this.first;\n    },\n    lastLine: function() {\n      return this.first + this.size - 1;\n    },\n    clipPos: function(pos) {\n      return clipPos(this, pos);\n    },\n    getCursor: function(start) {\n      var range = this.sel.primary(),\n          pos;\n      if (start == null || start == \"head\")\n        pos = range.head;\n      else if (start == \"anchor\")\n        pos = range.anchor;\n      else if (start == \"end\" || start == \"to\" || start === false)\n        pos = range.to();\n      else\n        pos = range.from();\n      return pos;\n    },\n    listSelections: function() {\n      return this.sel.ranges;\n    },\n    somethingSelected: function() {\n      return this.sel.somethingSelected();\n    },\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads, options));\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      extendSelections(this, map(this.sel.ranges, f), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length)\n        return;\n      for (var i = 0,\n          out = []; i < ranges.length; i++)\n        out[i] = new Range(clipPos(this, ranges[i].anchor), clipPos(this, ranges[i].head));\n      if (primary == null)\n        primary = Math.min(ranges.length - 1, this.sel.primIndex);\n      setSelection(this, normalizeSelection(out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);\n    }),\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges,\n          lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false)\n        return lines;\n      else\n        return lines.join(lineSep || this.lineSeparator());\n    },\n    getSelections: function(lineSep) {\n      var parts = [],\n          ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false)\n          sel = sel.join(lineSep || this.lineSeparator());\n        parts[i] = sel;\n      }\n      return parts;\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        dup[i] = code;\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [],\n          sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {\n          from: range.from(),\n          to: range.to(),\n          text: this.splitLines(code[i]),\n          origin: origin\n        };\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i = changes.length - 1; i >= 0; i--)\n        makeChange(this, changes[i]);\n      if (newSel)\n        setSelectionReplaceHistory(this, newSel);\n      else if (this.cm)\n        ensureCursorVisible(this.cm);\n    }),\n    undo: docMethodOp(function() {\n      makeChangeFromHistory(this, \"undo\");\n    }),\n    redo: docMethodOp(function() {\n      makeChangeFromHistory(this, \"redo\");\n    }),\n    undoSelection: docMethodOp(function() {\n      makeChangeFromHistory(this, \"undo\", true);\n    }),\n    redoSelection: docMethodOp(function() {\n      makeChangeFromHistory(this, \"redo\", true);\n    }),\n    setExtending: function(val) {\n      this.extend = val;\n    },\n    getExtending: function() {\n      return this.extend;\n    },\n    historySize: function() {\n      var hist = this.history,\n          done = 0,\n          undone = 0;\n      for (var i = 0; i < hist.done.length; i++)\n        if (!hist.done[i].ranges)\n          ++done;\n      for (var i = 0; i < hist.undone.length; i++)\n        if (!hist.undone[i].ranges)\n          ++undone;\n      return {\n        undo: done,\n        redo: undone\n      };\n    },\n    clearHistory: function() {\n      this.history = new History(this.history.maxGeneration);\n    },\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;\n      return this.history.generation;\n    },\n    isClean: function(gen) {\n      return this.history.generation == (gen || this.cleanGeneration);\n    },\n    getHistory: function() {\n      return {\n        done: copyHistoryArray(this.history.done),\n        undone: copyHistoryArray(this.history.undone)\n      };\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history.maxGeneration);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function(line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop])\n          line[prop] = cls;\n        else if (classTest(cls).test(line[prop]))\n          return false;\n        else\n          line[prop] += \" \" + cls;\n        return true;\n      });\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function(line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur)\n          return false;\n        else if (cls == null)\n          line[prop] = null;\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found)\n            return false;\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true;\n      });\n    }),\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options);\n    }),\n    removeLineWidget: function(widget) {\n      widget.clear();\n    },\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\");\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {\n        replacedWith: options && (options.nodeType == null ? options.widget : options),\n        insertLeft: options && options.insertLeft,\n        clearWhenEmpty: false,\n        shared: options && options.shared,\n        handleMouseEvents: options && options.handleMouseEvents\n      };\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\");\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [],\n          spans = getLine(this, pos.line).markedSpans;\n      if (spans)\n        for (var i = 0; i < spans.length; ++i) {\n          var span = spans[i];\n          if ((span.from == null || span.from <= pos.ch) && (span.to == null || span.to >= pos.ch))\n            markers.push(span.marker.parent || span.marker);\n        }\n      return markers;\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from);\n      to = clipPos(this, to);\n      var found = [],\n          lineNo = from.line;\n      this.iter(from.line, to.line + 1, function(line) {\n        var spans = line.markedSpans;\n        if (spans)\n          for (var i = 0; i < spans.length; i++) {\n            var span = spans[i];\n            if (!(lineNo == from.line && from.ch > span.to || span.from == null && lineNo != from.line || lineNo == to.line && span.from > to.ch) && (!filter || filter(span.marker)))\n              found.push(span.marker.parent || span.marker);\n          }\n        ++lineNo;\n      });\n      return found;\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function(line) {\n        var sps = line.markedSpans;\n        if (sps)\n          for (var i = 0; i < sps.length; ++i)\n            if (sps[i].from != null)\n              markers.push(sps[i].marker);\n      });\n      return markers;\n    },\n    posFromIndex: function(off) {\n      var ch,\n          lineNo = this.first;\n      this.iter(function(line) {\n        var sz = line.text.length + 1;\n        if (sz > off) {\n          ch = off;\n          return true;\n        }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch));\n    },\n    indexFromPos: function(coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0)\n        return 0;\n      this.iter(this.first, coords.line, function(line) {\n        index += line.text.length + 1;\n      });\n      return index;\n    },\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep);\n      doc.scrollTop = this.scrollTop;\n      doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc;\n    },\n    linkedDoc: function(options) {\n      if (!options)\n        options = {};\n      var from = this.first,\n          to = this.first + this.size;\n      if (options.from != null && options.from > from)\n        from = options.from;\n      if (options.to != null && options.to < to)\n        to = options.to;\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep);\n      if (options.sharedHist)\n        copy.history = this.history;\n      (this.linked || (this.linked = [])).push({\n        doc: copy,\n        sharedHist: options.sharedHist\n      });\n      copy.linked = [{\n        doc: this,\n        isParent: true,\n        sharedHist: options.sharedHist\n      }];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy;\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror)\n        other = other.doc;\n      if (this.linked)\n        for (var i = 0; i < this.linked.length; ++i) {\n          var link = this.linked[i];\n          if (link.doc != other)\n            continue;\n          this.linked.splice(i, 1);\n          other.unlinkDoc(this);\n          detachSharedMarkers(findSharedMarkers(this));\n          break;\n        }\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function(doc) {\n          splitIds.push(doc.id);\n        }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {\n      linkedDocs(this, f);\n    },\n    getMode: function() {\n      return this.mode;\n    },\n    getEditor: function() {\n      return this.cm;\n    },\n    splitLines: function(str) {\n      if (this.lineSep)\n        return str.split(this.lineSep);\n      return splitLinesAuto(str);\n    },\n    lineSeparator: function() {\n      return this.lineSep || \"\\n\";\n    }\n  });\n  Doc.prototype.eachLine = Doc.prototype.iter;\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype)\n    if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n      CodeMirror.prototype[prop] = (function(method) {\n        return function() {\n          return method.apply(this.doc, arguments);\n        };\n      })(Doc.prototype[prop]);\n  eventMixin(Doc);\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked)\n        for (var i = 0; i < doc.linked.length; ++i) {\n          var rel = doc.linked[i];\n          if (rel.doc == skip)\n            continue;\n          var shared = sharedHist && rel.sharedHist;\n          if (sharedHistOnly && !shared)\n            continue;\n          f(rel.doc, shared);\n          propagate(rel.doc, doc, shared);\n        }\n    }\n    propagate(doc, null, true);\n  }\n  function attachDoc(cm, doc) {\n    if (doc.cm)\n      throw new Error(\"This document is already in use.\");\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    if (!cm.options.lineWrapping)\n      findMaxLine(cm);\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size)\n      throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\");\n    for (var chunk = doc; !chunk.lines; ) {\n      for (var i = 0; ; ++i) {\n        var child = chunk.children[i],\n            sz = child.chunkSize();\n        if (n < sz) {\n          chunk = child;\n          break;\n        }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n];\n  }\n  function getBetween(doc, start, end) {\n    var out = [],\n        n = start.line;\n    doc.iter(start.line, end.line + 1, function(line) {\n      var text = line.text;\n      if (n == end.line)\n        text = text.slice(0, end.ch);\n      if (n == start.line)\n        text = text.slice(start.ch);\n      out.push(text);\n      ++n;\n    });\n    return out;\n  }\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function(line) {\n      out.push(line.text);\n    });\n    return out;\n  }\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff)\n      for (var n = line; n; n = n.parent)\n        n.height += diff;\n  }\n  function lineNo(line) {\n    if (line.parent == null)\n      return null;\n    var cur = line.parent,\n        no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0; ; ++i) {\n        if (chunk.children[i] == cur)\n          break;\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first;\n  }\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i = 0; i < chunk.children.length; ++i) {\n        var child = chunk.children[i],\n            ch = child.height;\n        if (h < ch) {\n          chunk = child;\n          continue outer;\n        }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n;\n    } while (!chunk.lines);\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i],\n          lh = line.height;\n      if (h < lh)\n        break;\n      h -= lh;\n    }\n    return n + i;\n  }\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n    var h = 0,\n        chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj)\n        break;\n      else\n        h += line.height;\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i = 0; i < p.children.length; ++i) {\n        var cur = p.children[i];\n        if (cur == chunk)\n          break;\n        else\n          h += cur.height;\n      }\n    }\n    return h;\n  }\n  function getOrder(line) {\n    var order = line.order;\n    if (order == null)\n      order = line.order = bidiOrdering(line.text);\n    return order;\n  }\n  function History(startGen) {\n    this.done = [];\n    this.undone = [];\n    this.undoDepth = Infinity;\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    this.generation = this.maxGeneration = startGen || 1;\n  }\n  function historyChangeFromChange(doc, change) {\n    var histChange = {\n      from: copyPos(change.from),\n      to: changeEnd(change),\n      text: getBetween(doc, change.from, change.to)\n    };\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function(doc) {\n      attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    }, true);\n    return histChange;\n  }\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges)\n        array.pop();\n      else\n        break;\n    }\n  }\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done);\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done);\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done);\n    }\n  }\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date,\n        cur;\n    if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && ((change.origin.charAt(0) == \"+\" && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay) || change.origin.charAt(0) == \"*\")) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      var last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        last.to = changeEnd(change);\n      } else {\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        pushSelectionToHistory(doc.sel, hist.done);\n      cur = {\n        changes: [historyChangeFromChange(doc, change)],\n        generation: hist.generation\n      };\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges)\n          hist.done.shift();\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n    if (!last)\n      signal(doc, \"historyAdded\");\n  }\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" || ch == \"+\" && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);\n  }\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history,\n        origin = options && options.origin;\n    if (opId == hist.lastSelOp || (origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      hist.done[hist.done.length - 1] = sel;\n    else\n      pushSelectionToHistory(sel, hist.done);\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      clearSelectionEvents(hist.undone);\n  }\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      dest.push(sel);\n  }\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id],\n        n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function(line) {\n      if (line.markedSpans)\n        (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans;\n      ++n;\n    });\n  }\n  function removeClearedSpans(spans) {\n    if (!spans)\n      return null;\n    for (var i = 0,\n        out; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) {\n        if (!out)\n          out = spans.slice(0, i);\n      } else if (out)\n        out.push(spans[i]);\n    }\n    return !out ? spans : out.length ? out : null;\n  }\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found)\n      return null;\n    for (var i = 0,\n        nw = []; i < change.text.length; ++i)\n      nw.push(removeClearedSpans(found[i]));\n    return nw;\n  }\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    for (var i = 0,\n        copy = []; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue;\n      }\n      var changes = event.changes,\n          newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j],\n            m;\n        newChanges.push({\n          from: change.from,\n          to: change.to,\n          text: change.text\n        });\n        if (newGroup)\n          for (var prop in change)\n            if (m = prop.match(/^spans_(\\d+)$/)) {\n              if (indexOf(newGroup, Number(m[1])) > -1) {\n                lst(newChanges)[prop] = change[prop];\n                delete change[prop];\n              }\n            }\n      }\n    }\n    return copy;\n  }\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i],\n          ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) {\n          sub = array[i] = sub.deepCopy();\n          sub.copied = true;\n        }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue;\n      }\n      for (var j = 0; j < sub.changes.length; ++j) {\n        var cur = sub.changes[j];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break;\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n  function rebaseHist(hist, change) {\n    var from = change.from.line,\n        to = change.to.line,\n        diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n  var e_preventDefault = CodeMirror.e_preventDefault = function(e) {\n    if (e.preventDefault)\n      e.preventDefault();\n    else\n      e.returnValue = false;\n  };\n  var e_stopPropagation = CodeMirror.e_stopPropagation = function(e) {\n    if (e.stopPropagation)\n      e.stopPropagation();\n    else\n      e.cancelBubble = true;\n  };\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;\n  }\n  var e_stop = CodeMirror.e_stop = function(e) {\n    e_preventDefault(e);\n    e_stopPropagation(e);\n  };\n  function e_target(e) {\n    return e.target || e.srcElement;\n  }\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1)\n        b = 1;\n      else if (e.button & 2)\n        b = 3;\n      else if (e.button & 4)\n        b = 2;\n    }\n    if (mac && e.ctrlKey && b == 1)\n      b = 3;\n    return b;\n  }\n  var on = CodeMirror.on = function(emitter, type, f) {\n    if (emitter.addEventListener)\n      emitter.addEventListener(type, f, false);\n    else if (emitter.attachEvent)\n      emitter.attachEvent(\"on\" + type, f);\n    else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      var arr = map[type] || (map[type] = []);\n      arr.push(f);\n    }\n  };\n  var noHandlers = [];\n  function getHandlers(emitter, type, copy) {\n    var arr = emitter._handlers && emitter._handlers[type];\n    if (copy)\n      return arr && arr.length > 0 ? arr.slice() : noHandlers;\n    else\n      return arr || noHandlers;\n  }\n  var off = CodeMirror.off = function(emitter, type, f) {\n    if (emitter.removeEventListener)\n      emitter.removeEventListener(type, f, false);\n    else if (emitter.detachEvent)\n      emitter.detachEvent(\"on\" + type, f);\n    else {\n      var handlers = getHandlers(emitter, type, false);\n      for (var i = 0; i < handlers.length; ++i)\n        if (handlers[i] == f) {\n          handlers.splice(i, 1);\n          break;\n        }\n    }\n  };\n  var signal = CodeMirror.signal = function(emitter, type) {\n    var handlers = getHandlers(emitter, type, true);\n    if (!handlers.length)\n      return;\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i)\n      handlers[i].apply(null, args);\n  };\n  var orphanDelayedCallbacks = null;\n  function signalLater(emitter, type) {\n    var arr = getHandlers(emitter, type, false);\n    if (!arr.length)\n      return;\n    var args = Array.prototype.slice.call(arguments, 2),\n        list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    function bnd(f) {\n      return function() {\n        f.apply(null, args);\n      };\n    }\n    ;\n    for (var i = 0; i < arr.length; ++i)\n      list.push(bnd(arr[i]));\n  }\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i)\n      delayed[i]();\n  }\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      e = {\n        type: e,\n        preventDefault: function() {\n          this.defaultPrevented = true;\n        }\n      };\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore;\n  }\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr)\n      return;\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i)\n      if (indexOf(set, arr[i]) == -1)\n        set.push(arr[i]);\n  }\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0;\n  }\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {\n      on(this, type, f);\n    };\n    ctor.prototype.off = function(type, f) {\n      off(this, type, f);\n    };\n  }\n  var scrollerGap = 30;\n  var Pass = CodeMirror.Pass = {toString: function() {\n      return \"CodeMirror.Pass\";\n    }};\n  var sel_dontScroll = {scroll: false},\n      sel_mouse = {origin: \"*mouse\"},\n      sel_move = {origin: \"+move\"};\n  function Delayed() {\n    this.id = null;\n  }\n  Delayed.prototype.set = function(ms, f) {\n    clearTimeout(this.id);\n    this.id = setTimeout(f, ms);\n  };\n  var countColumn = CodeMirror.countColumn = function(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1)\n        end = string.length;\n    }\n    for (var i = startIndex || 0,\n        n = startValue || 0; ; ) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        return n + (end - i);\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  };\n  var findColumn = CodeMirror.findColumn = function(string, goal, tabSize) {\n    for (var pos = 0,\n        col = 0; ; ) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1)\n        nextTab = string.length;\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        return pos + Math.min(skipped, goal - col);\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal)\n        return pos;\n    }\n  };\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      spaceStrs.push(lst(spaceStrs) + \" \");\n    return spaceStrs[n];\n  }\n  function lst(arr) {\n    return arr[arr.length - 1];\n  }\n  var selectInput = function(node) {\n    node.select();\n  };\n  if (ios)\n    selectInput = function(node) {\n      node.selectionStart = 0;\n      node.selectionEnd = node.value.length;\n    };\n  else if (ie)\n    selectInput = function(node) {\n      try {\n        node.select();\n      } catch (_e) {}\n    };\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      if (array[i] == elt)\n        return i;\n    return -1;\n  }\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++)\n      out[i] = f(array[i], i);\n    return out;\n  }\n  function nothing() {}\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props)\n      copyObj(props, inst);\n    return inst;\n  }\n  ;\n  function copyObj(obj, target, overwrite) {\n    if (!target)\n      target = {};\n    for (var prop in obj)\n      if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        target[prop] = obj[prop];\n    return target;\n  }\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function() {\n      return f.apply(null, args);\n    };\n  }\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  var isWordCharBasic = CodeMirror.isWordChar = function(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));\n  };\n  function isWordChar(ch, helper) {\n    if (!helper)\n      return isWordCharBasic(ch);\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch))\n      return true;\n    return helper.test(ch);\n  }\n  function isEmpty(obj) {\n    for (var n in obj)\n      if (obj.hasOwnProperty(n) && obj[n])\n        return false;\n    return true;\n  }\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) {\n    return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n  }\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className)\n      e.className = className;\n    if (style)\n      e.style.cssText = style;\n    if (typeof content == \"string\")\n      e.appendChild(document.createTextNode(content));\n    else if (content)\n      for (var i = 0; i < content.length; ++i)\n        e.appendChild(content[i]);\n    return e;\n  }\n  var range;\n  if (document.createRange)\n    range = function(node, start, end, endNode) {\n      var r = document.createRange();\n      r.setEnd(endNode || node, end);\n      r.setStart(node, start);\n      return r;\n    };\n  else\n    range = function(node, start, end) {\n      var r = document.body.createTextRange();\n      try {\n        r.moveToElementText(node.parentNode);\n      } catch (e) {\n        return r;\n      }\n      r.collapse(true);\n      r.moveEnd(\"character\", end);\n      r.moveStart(\"character\", start);\n      return r;\n    };\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      e.removeChild(e.firstChild);\n    return e;\n  }\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e);\n  }\n  var contains = CodeMirror.contains = function(parent, child) {\n    if (child.nodeType == 3)\n      child = child.parentNode;\n    if (parent.contains)\n      return parent.contains(child);\n    do {\n      if (child.nodeType == 11)\n        child = child.host;\n      if (child == parent)\n        return true;\n    } while (child = child.parentNode);\n  };\n  function activeElt() {\n    var activeElement = document.activeElement;\n    while (activeElement && activeElement.root && activeElement.root.activeElement)\n      activeElement = activeElement.root.activeElement;\n    return activeElement;\n  }\n  if (ie && ie_version < 11)\n    activeElt = function() {\n      try {\n        return document.activeElement;\n      } catch (e) {\n        return document.body;\n      }\n    };\n  function classTest(cls) {\n    return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\");\n  }\n  var rmClass = CodeMirror.rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n  var addClass = CodeMirror.addClass = function(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current))\n      node.className += (current ? \" \" : \"\") + cls;\n  };\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      if (as[i] && !classTest(as[i]).test(b))\n        b += \" \" + as[i];\n    return b;\n  }\n  function forEachCodeMirror(f) {\n    if (!document.body.getElementsByClassName)\n      return;\n    var byClass = document.body.getElementsByClassName(\"CodeMirror\");\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm)\n        f(cm);\n    }\n  }\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered)\n      return;\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    var resizeTimer;\n    on(window, \"resize\", function() {\n      if (resizeTimer == null)\n        resizeTimer = setTimeout(function() {\n          resizeTimer = null;\n          forEachCodeMirror(onResize);\n        }, 100);\n    });\n    on(window, \"blur\", function() {\n      forEachCodeMirror(onBlur);\n    });\n  }\n  var dragAndDrop = function() {\n    if (ie && ie_version < 9)\n      return false;\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div;\n  }();\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") : elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node;\n  }\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null)\n      return badBidiRects;\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    if (!r0 || r0.left == r0.right)\n      return false;\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    return badBidiRects = (r1.right - r0.right < 3);\n  }\n  var splitLinesAuto = CodeMirror.splitLines = \"\\n\\nb\".split(/\\n/).length != 3 ? function(string) {\n    var pos = 0,\n        result = [],\n        l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1)\n        nl = string.length;\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result;\n  } : function(string) {\n    return string.split(/\\r\\n?|\\n/);\n  };\n  var hasSelection = window.getSelection ? function(te) {\n    try {\n      return te.selectionStart != te.selectionEnd;\n    } catch (e) {\n      return false;\n    }\n  } : function(te) {\n    try {\n      var range = te.ownerDocument.selection.createRange();\n    } catch (e) {}\n    if (!range || range.parentElement() != te)\n      return false;\n    return range.compareEndPoints(\"StartToEnd\", range) != 0;\n  };\n  var hasCopyEvent = (function() {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e)\n      return true;\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\";\n  })();\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null)\n      return badZoomedRects;\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;\n  }\n  var keyNames = CodeMirror.keyNames = {\n    3: \"Enter\",\n    8: \"Backspace\",\n    9: \"Tab\",\n    13: \"Enter\",\n    16: \"Shift\",\n    17: \"Ctrl\",\n    18: \"Alt\",\n    19: \"Pause\",\n    20: \"CapsLock\",\n    27: \"Esc\",\n    32: \"Space\",\n    33: \"PageUp\",\n    34: \"PageDown\",\n    35: \"End\",\n    36: \"Home\",\n    37: \"Left\",\n    38: \"Up\",\n    39: \"Right\",\n    40: \"Down\",\n    44: \"PrintScrn\",\n    45: \"Insert\",\n    46: \"Delete\",\n    59: \";\",\n    61: \"=\",\n    91: \"Mod\",\n    92: \"Mod\",\n    93: \"Mod\",\n    106: \"*\",\n    107: \"=\",\n    109: \"-\",\n    110: \".\",\n    111: \"/\",\n    127: \"Delete\",\n    173: \"-\",\n    186: \";\",\n    187: \"=\",\n    188: \",\",\n    189: \"-\",\n    190: \".\",\n    191: \"/\",\n    192: \"`\",\n    219: \"[\",\n    220: \"\\\\\",\n    221: \"]\",\n    222: \"'\",\n    63232: \"Up\",\n    63233: \"Down\",\n    63234: \"Left\",\n    63235: \"Right\",\n    63272: \"Delete\",\n    63273: \"Home\",\n    63275: \"End\",\n    63276: \"PageUp\",\n    63277: \"PageDown\",\n    63302: \"Insert\"\n  };\n  (function() {\n    for (var i = 0; i < 10; i++)\n      keyNames[i + 48] = keyNames[i + 96] = String(i);\n    for (var i = 65; i <= 90; i++)\n      keyNames[i] = String.fromCharCode(i);\n    for (var i = 1; i <= 12; i++)\n      keyNames[i + 111] = keyNames[i + 63235] = \"F\" + i;\n  })();\n  function iterateBidiSections(order, from, to, f) {\n    if (!order)\n      return f(from, to, \"ltr\");\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\");\n        found = true;\n      }\n    }\n    if (!found)\n      f(from, to, \"ltr\");\n  }\n  function bidiLeft(part) {\n    return part.level % 2 ? part.to : part.from;\n  }\n  function bidiRight(part) {\n    return part.level % 2 ? part.from : part.to;\n  }\n  function lineLeft(line) {\n    var order = getOrder(line);\n    return order ? bidiLeft(order[0]) : 0;\n  }\n  function lineRight(line) {\n    var order = getOrder(line);\n    if (!order)\n      return line.text.length;\n    return bidiRight(lst(order));\n  }\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line)\n      lineN = lineNo(visual);\n    var order = getOrder(visual);\n    var ch = !order ? 0 : order[0].level % 2 ? lineRight(visual) : lineLeft(visual);\n    return Pos(lineN, ch);\n  }\n  function lineEnd(cm, lineN) {\n    var merged,\n        line = getLine(cm.doc, lineN);\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n      lineN = null;\n    }\n    var order = getOrder(line);\n    var ch = !order ? line.text.length : order[0].level % 2 ? lineLeft(line) : lineRight(line);\n    return Pos(lineN == null ? lineNo(line) : lineN, ch);\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(0, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS);\n    }\n    return start;\n  }\n  function compareBidiLevel(order, a, b) {\n    var linedir = order[0].level;\n    if (a == linedir)\n      return true;\n    if (b == linedir)\n      return false;\n    return a < b;\n  }\n  var bidiOther;\n  function getBidiPartAt(order, pos) {\n    bidiOther = null;\n    for (var i = 0,\n        found; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < pos && cur.to > pos)\n        return i;\n      if ((cur.from == pos || cur.to == pos)) {\n        if (found == null) {\n          found = i;\n        } else if (compareBidiLevel(order, cur.level, order[found].level)) {\n          if (cur.from != cur.to)\n            bidiOther = found;\n          return i;\n        } else {\n          if (cur.from != cur.to)\n            bidiOther = i;\n          return found;\n        }\n      }\n    }\n    return found;\n  }\n  function moveInLine(line, pos, dir, byUnit) {\n    if (!byUnit)\n      return pos + dir;\n    do\n      pos += dir;\n while (pos > 0 && isExtendingChar(line.text.charAt(pos)));\n    return pos;\n  }\n  function moveVisually(line, start, dir, byUnit) {\n    var bidi = getOrder(line);\n    if (!bidi)\n      return moveLogically(line, start, dir, byUnit);\n    var pos = getBidiPartAt(bidi, start),\n        part = bidi[pos];\n    var target = moveInLine(line, start, part.level % 2 ? -dir : dir, byUnit);\n    for (; ; ) {\n      if (target > part.from && target < part.to)\n        return target;\n      if (target == part.from || target == part.to) {\n        if (getBidiPartAt(bidi, target) == pos)\n          return target;\n        part = bidi[pos += dir];\n        return (dir > 0) == part.level % 2 ? part.to : part.from;\n      } else {\n        part = bidi[pos += dir];\n        if (!part)\n          return null;\n        if ((dir > 0) == part.level % 2)\n          target = moveInLine(line, part.to, -1, byUnit);\n        else\n          target = moveInLine(line, part.from, 1, byUnit);\n      }\n    }\n  }\n  function moveLogically(line, start, dir, byUnit) {\n    var target = start + dir;\n    if (byUnit)\n      while (target > 0 && isExtendingChar(line.text.charAt(target)))\n        target += dir;\n    return target < 0 || target > line.text.length ? null : target;\n  }\n  var bidiOrdering = (function() {\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    var arabicTypes = \"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm\";\n    function charType(code) {\n      if (code <= 0xf7)\n        return lowTypes.charAt(code);\n      else if (0x590 <= code && code <= 0x5f4)\n        return \"R\";\n      else if (0x600 <= code && code <= 0x6ed)\n        return arabicTypes.charAt(code - 0x600);\n      else if (0x6ee <= code && code <= 0x8ac)\n        return \"r\";\n      else if (0x2000 <= code && code <= 0x200b)\n        return \"w\";\n      else if (code == 0x200c)\n        return \"b\";\n      else\n        return \"L\";\n    }\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/,\n        isStrong = /[LRr]/,\n        countsAsLeft = /[Lb1n]/,\n        countsAsNum = /[1n]/;\n    var outerType = \"L\";\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from;\n      this.to = to;\n    }\n    return function(str) {\n      if (!bidiRE.test(str))\n        return false;\n      var len = str.length,\n          types = [];\n      for (var i = 0,\n          type; i < len; ++i)\n        types.push(type = charType(str.charCodeAt(i)));\n      for (var i = 0,\n          prev = outerType; i < len; ++i) {\n        var type = types[i];\n        if (type == \"m\")\n          types[i] = prev;\n        else\n          prev = type;\n      }\n      for (var i = 0,\n          cur = outerType; i < len; ++i) {\n        var type = types[i];\n        if (type == \"1\" && cur == \"r\")\n          types[i] = \"n\";\n        else if (isStrong.test(type)) {\n          cur = type;\n          if (type == \"r\")\n            types[i] = \"R\";\n        }\n      }\n      for (var i = 1,\n          prev = types[0]; i < len - 1; ++i) {\n        var type = types[i];\n        if (type == \"+\" && prev == \"1\" && types[i + 1] == \"1\")\n          types[i] = \"1\";\n        else if (type == \",\" && prev == types[i + 1] && (prev == \"1\" || prev == \"n\"))\n          types[i] = prev;\n        prev = type;\n      }\n      for (var i = 0; i < len; ++i) {\n        var type = types[i];\n        if (type == \",\")\n          types[i] = \"N\";\n        else if (type == \"%\") {\n          for (var end = i + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i && types[i - 1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i; j < end; ++j)\n            types[j] = replace;\n          i = end - 1;\n        }\n      }\n      for (var i = 0,\n          cur = outerType; i < len; ++i) {\n        var type = types[i];\n        if (cur == \"L\" && type == \"1\")\n          types[i] = \"L\";\n        else if (isStrong.test(type))\n          cur = type;\n      }\n      for (var i = 0; i < len; ++i) {\n        if (isNeutral.test(types[i])) {\n          for (var end = i + 1; end < len && isNeutral.test(types[end]); ++end) {}\n          var before = (i ? types[i - 1] : outerType) == \"L\";\n          var after = (end < len ? types[end] : outerType) == \"L\";\n          var replace = before || after ? \"L\" : \"R\";\n          for (var j = i; j < end; ++j)\n            types[j] = replace;\n          i = end - 1;\n        }\n      }\n      var order = [],\n          m;\n      for (var i = 0; i < len; ) {\n        if (countsAsLeft.test(types[i])) {\n          var start = i;\n          for (++i; i < len && countsAsLeft.test(types[i]); ++i) {}\n          order.push(new BidiSpan(0, start, i));\n        } else {\n          var pos = i,\n              at = order.length;\n          for (++i; i < len && types[i] != \"L\"; ++i) {}\n          for (var j = pos; j < i; ) {\n            if (countsAsNum.test(types[j])) {\n              if (pos < j)\n                order.splice(at, 0, new BidiSpan(1, pos, j));\n              var nstart = j;\n              for (++j; j < i && countsAsNum.test(types[j]); ++j) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j));\n              pos = j;\n            } else\n              ++j;\n          }\n          if (pos < i)\n            order.splice(at, 0, new BidiSpan(1, pos, i));\n        }\n      }\n      if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n        order[0].from = m[0].length;\n        order.unshift(new BidiSpan(0, 0, m[0].length));\n      }\n      if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n        lst(order).to -= m[0].length;\n        order.push(new BidiSpan(0, len - m[0].length, len));\n      }\n      if (order[0].level == 2)\n        order.unshift(new BidiSpan(1, order[0].to, order[0].to));\n      if (order[0].level != lst(order).level)\n        order.push(new BidiSpan(order[0].level, len, len));\n      return order;\n    };\n  })();\n  CodeMirror.version = \"5.8.0\";\n  return CodeMirror;\n});\n\n_removeDefine();\n})();\n(function() {\nvar _removeDefine = $__System.get(\"@@amd-helpers\").createDefine();\ndefine(\"1\", [\"3\", \"6\", \"5\", \"4\", \"2\"], function(CodeMirror, jsonlint, beautify, minify) {\n  'use strict';\n  var doc = document,\n      App = function App() {\n        var _this = this,\n            form = this.form = doc.forms.main,\n            codeInput = this.form.code,\n            query = this.query = parseQuery(),\n            faq = doc.getElementById('faq'),\n            editor;\n        editor = this.editor = CodeMirror.fromTextArea(codeInput, {\n          lineNumbers: true,\n          styleActiveLine: true,\n          matchBrackets: true\n        });\n        Object.defineProperty(this, 'code', {\n          get: function() {\n            return codeInput.value;\n          },\n          set: function(v) {\n            codeInput.value = v;\n            editor.setValue(v);\n          }\n        });\n        this.form.addEventListener('submit', function(evt) {\n          evt.preventDefault();\n          this.go();\n        }.bind(this));\n        doc.getElementById('faqButton').addEventListener('click', function(evt) {\n          evt.preventDefault();\n          faq.classList.toggle('expand');\n        });\n        if (query.json) {\n          this.code = query.json;\n          this.go();\n        }\n      },\n      fn = App.prototype;\n  fn.go = function() {\n    if (this.code.indexOf('http') == 0) {\n      this.fetch(this.code, function(resp) {\n        this.validate(resp);\n      }, function(err) {\n        this.notify(false, err);\n      });\n    } else {\n      this.validate();\n    }\n  };\n  fn.comb = function(code) {\n    code = typeof code == 'undefined' ? this.code : code;\n    if (this.query.reformat == 'no') {\n      code = code;\n    } else if (this.query.reformat == 'compress') {\n      code = minify(code) || code;\n    } else {\n      code = beautify.js_beautify(code);\n    }\n    return this.code = code;\n  };\n  fn.validate = function(code) {\n    code = this.comb(code);\n    try {\n      jsonlint.parse(code);\n      this.notify(true, 'Valid JSON');\n    } catch (e) {\n      this.notify(false, e);\n    }\n  };\n  fn.notify = function(success, text) {\n    var result = doc.getElementById('result');\n    doc.getElementById('result-container').classList.add('shown');\n    result.classList[success ? 'add' : 'remove']('success');\n    result.classList[!success ? 'add' : 'remove']('error');\n    result.innerHTML = text;\n  };\n  fn.fetch = function(url, success, error) {\n    var req = new XMLHttpRequest();\n    req.onreadystatechange = function() {\n      if (req.readyState === XMLHttpRequest.DONE) {\n        if (req.status === 200) {\n          success && success.call(this, req.responseText);\n        } else {\n          error && error.call(this, req.statusText || 'Fetch error');\n        }\n      }\n    }.bind(this);\n    req.open('GET', url);\n    req.send('url=' + encodeURIComponent(url));\n  };\n  function parseQuery() {\n    var search = location.search,\n        query = {},\n        a = search.substr(1).split('&'),\n        i,\n        b;\n    if (!search)\n      return query;\n    for (i = 0; i < a.length; i++) {\n      b = a[i].split('=');\n      query[decodeURIComponent(b[0])] = decodeURIComponent(b[1] || '');\n    }\n    return query;\n  }\n  return window.app = new App();\n});\n\n_removeDefine();\n})();\n})\n(function(factory) {\n  factory();\n});"],"sourceRoot":"/source/"}